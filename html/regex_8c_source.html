<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NeoMutt: regex.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="mutt.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NeoMutt
   &#160;<span id="projectnumber">1.7.1</span>
   </div>
   <div id="projectbrief">Mail Reader</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">regex.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="regex_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/* Extended regular expression matching and search library,</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * version 0.12.</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * (Implements POSIX draft P1003.2/D11.2, except for some of the</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * internationalization features.)</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * </span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * Copyright (C) 1993, 1994, 1995, 1996, 1997 Free Software Foundation, Inc.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * </span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * This file is part of the GNU C Library.  Its master source is NOT part of</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * the C library, however.  The master source lives in /gd/gnu/lib.</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * </span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * The GNU C Library is free software; you can redistribute it and/or</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * modify it under the terms of the GNU Library General Public License as</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * published by the Free Software Foundation; either version 2 of the</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * License, or (at your option) any later version.</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * </span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * The GNU C Library is distributed in the hope that it will be useful,</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * Library General Public License for more details.</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> * </span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> * You should have received a copy of the GNU Library General Public</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> * License along with the GNU C Library; see the file COPYING.LIB.  If not,</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> * write to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> * Boston, MA  02110-1301, USA.  </span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"> * Modifications:</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment"> * </span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment"> * Use _regex.h instead of regex.h.  tlr, 1999-01-06</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment"> * Make REGEX_MALLOC depend on HAVE_ALLOCA &amp;c.</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment"> *                                   tlr, 1999-02-14</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment"> * Don&#39;t switch on regex debugging when debugging mutt.</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment"> *                                   tlr, 1999-02-25</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">/* The following doesn&#39;t mix too well with autoconfiguring</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment"> * the use of alloca.  So let&#39;s disable it for AIX.</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#if 0</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">/* AIX requires this to be the first thing in the file. */</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor"># if defined (_AIX) &amp;&amp; !defined (REGEX_MALLOC)</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#  pragma alloca</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor"># endif</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#undef  _GNU_SOURCE</span></div><div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="regex_8c.html#a369266c24eacffb87046522897a570d5">   51</a></span>&#160;<span class="preprocessor">#define _GNU_SOURCE</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#if HAVE_CONFIG_H</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor"># include &lt;config.h&gt;</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#undef DEBUG</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">/* On OS X 10.5.x, wide char functions are inlined by default breaking</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment"> * --without-wc-funcs compilation</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor">#ifdef __APPLE_CC__</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor">#define _DONT_USE_CTYPE_INLINE_</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="preprocessor">#if (defined(HAVE_ALLOCA_H) &amp;&amp; !defined(_AIX))</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor"># include &lt;alloca.h&gt;</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="preprocessor">#if (!defined(HAVE_ALLOCA) || defined(_AIX))</span></div><div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="regex_8c.html#a55b67d94591d340ebc4e77d06b277b89">   71</a></span>&#160;<span class="preprocessor"># define REGEX_MALLOC</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="preprocessor">#if defined(STDC_HEADERS) &amp;&amp; !defined(emacs)</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="preprocessor">#include &lt;stddef.h&gt;</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">/* We need this for `regex.h&#39;, and perhaps for the Emacs include files.  */</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="preprocessor">#include &lt;sys/types.h&gt;</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">/* For platform which support the ISO C amendment 1 functionality we</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">   support user defined character classes.  */</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="preprocessor">#ifdef HAVE_WCHAR_H</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="preprocessor"># include &lt;wchar.h&gt;</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="preprocessor">#if defined(HAVE_WCTYPE_H) &amp;&amp; defined(HAVE_WC_FUNCS)</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="preprocessor"># include &lt;wctype.h&gt;</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">/* This is for other GNU distributions with internationalized messages.  */</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="preprocessor">#if HAVE_LIBINTL_H || defined (_LIBC)</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="preprocessor"># include &lt;libintl.h&gt;</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="regex_8c.html#a84591b979e395c1ecf40f06963f89d8b">   94</a></span>&#160;<span class="preprocessor"># define gettext(msgid) (msgid)</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="preprocessor">#ifndef gettext_noop</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">/* This define is so xgettext can find the internationalizable</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment">   strings.  */</span></div><div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="regex_8c.html#a1a0ef2e42374f90a13299cc06f437847">  100</a></span>&#160;<span class="preprocessor">#define gettext_noop(String) String</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment">/* The `emacs&#39; switch turns on certain matching commands</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">   that make sense only in Emacs. */</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="preprocessor">#ifdef emacs</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="preprocessor">#include &quot;lisp.h&quot;</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="preprocessor">#include &quot;buffer.h&quot;</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="preprocessor">#include &quot;syntax.h&quot;</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="preprocessor">#else  </span><span class="comment">/* not emacs */</span><span class="preprocessor"></span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment">/* If we are not linking with Emacs proper,</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment">   we can&#39;t use the relocating allocator</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">   even if config.h says that we can.  */</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="preprocessor">#undef REL_ALLOC</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="preprocessor">#if defined (STDC_HEADERS) || defined (_LIBC)</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="preprocessor">#include &lt;stdlib.h&gt;</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="keywordtype">char</span> *<a class="code" href="regex_8c.html#ab7e36af3707843f77cc5b4e831c2fa6d">malloc</a> ();        <span class="comment">/* __MEM_CHECKED__ */</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="keywordtype">char</span> *<a class="code" href="regex_8c.html#a3d4d6185d412b00bc3def2b58b2898cc">realloc</a> ();       <span class="comment">/* __MEM_CHECKED__ */</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">/* When used in Emacs&#39;s lib-src, we need to get bzero and bcopy somehow.</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">   If nothing else has been done, use the method below.  */</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="preprocessor">#ifdef INHIBIT_STRING_HEADER</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="preprocessor">#if !(defined (HAVE_BZERO) &amp;&amp; defined (HAVE_BCOPY))</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="preprocessor">#if !defined (bzero) &amp;&amp; !defined (bcopy)</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="preprocessor">#undef INHIBIT_STRING_HEADER</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">/* This is the normal way of making sure we have a bcopy and a bzero.</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">   This is used in most programs--a few other programs avoid this</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">   by defining INHIBIT_STRING_HEADER.  */</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="preprocessor">#ifndef INHIBIT_STRING_HEADER</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="preprocessor">#if defined (HAVE_STRING_H) || defined (STDC_HEADERS) || defined (_LIBC)</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="preprocessor">#include &lt;string.h&gt;</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="preprocessor">#ifndef bcmp</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="preprocessor">#define bcmp(s1, s2, n) memcmp ((s1), (s2), (n))</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="preprocessor">#ifndef bcopy</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="preprocessor">#define bcopy(s, d, n)  memcpy ((d), (s), (n))</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="preprocessor">#ifndef bzero</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="preprocessor">#define bzero(s, n)     memset ((s), 0, (n))</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="preprocessor">#include &lt;strings.h&gt;</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment">/* Define the syntax stuff for &lt;, &gt;, etc.  */</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment">/* This must be nonzero for the wordchar and notwordchar pattern</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment">   commands in re_match_2.  */</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="preprocessor">#ifndef Sword</span></div><div class="line"><a name="l00160"></a><span class="lineno"><a class="line" href="regex_8c.html#a3c4fa96131648fe8cb5bb3055015e73a">  160</a></span>&#160;<span class="preprocessor">#define Sword 1</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="preprocessor">#ifdef SWITCH_ENUM_BUG</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="preprocessor">#define SWITCH_ENUM_CAST(x) ((int)(x))</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00166"></a><span class="lineno"><a class="line" href="regex_8c.html#a95cf7f68f7a75751d4abd454d6add11a">  166</a></span>&#160;<span class="preprocessor">#define SWITCH_ENUM_CAST(x) (x)</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="preprocessor">#ifdef SYNTAX_TABLE</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">char</span> *<a class="code" href="regex_8c.html#a87944e3ae2c8e13e58ae2209e27447a8">re_syntax_table</a>;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="preprocessor">#else </span><span class="comment">/* not SYNTAX_TABLE */</span><span class="preprocessor"></span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment">/* How many characters in the character set.  */</span></div><div class="line"><a name="l00176"></a><span class="lineno"><a class="line" href="regex_8c.html#adebebe79bb84190296da4c5d67e4e434">  176</a></span>&#160;<span class="preprocessor">#define CHAR_SET_SIZE 256</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div><div class="line"><a name="l00178"></a><span class="lineno"><a class="line" href="regex_8c.html#a87944e3ae2c8e13e58ae2209e27447a8">  178</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> re_syntax_table[<a class="code" href="regex_8c.html#adebebe79bb84190296da4c5d67e4e434">CHAR_SET_SIZE</a>];</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span></div><div class="line"><a name="l00181"></a><span class="lineno"><a class="line" href="regex_8c.html#a74a93df5c6415ecc4c83d7497bb52a9b">  181</a></span>&#160;<a class="code" href="regex_8c.html#a74a93df5c6415ecc4c83d7497bb52a9b">init_syntax_once</a> ()</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;{</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;   <span class="keyword">register</span> <span class="keywordtype">int</span> c;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;   <span class="keyword">static</span> <span class="keywordtype">int</span> done = 0;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;   <span class="keywordflow">if</span> (done)</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;     <span class="keywordflow">return</span>;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;   bzero (re_syntax_table, <span class="keyword">sizeof</span> re_syntax_table);</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;   <span class="keywordflow">for</span> (c = <span class="charliteral">&#39;a&#39;</span>; c &lt;= <span class="charliteral">&#39;z&#39;</span>; c++)</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;     re_syntax_table[c] = <a class="code" href="regex_8c.html#a3c4fa96131648fe8cb5bb3055015e73a">Sword</a>;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;   <span class="keywordflow">for</span> (c = <span class="charliteral">&#39;A&#39;</span>; c &lt;= <span class="charliteral">&#39;Z&#39;</span>; c++)</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;     re_syntax_table[c] = <a class="code" href="regex_8c.html#a3c4fa96131648fe8cb5bb3055015e73a">Sword</a>;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;   <span class="keywordflow">for</span> (c = <span class="charliteral">&#39;0&#39;</span>; c &lt;= <span class="charliteral">&#39;9&#39;</span>; c++)</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;     re_syntax_table[c] = <a class="code" href="regex_8c.html#a3c4fa96131648fe8cb5bb3055015e73a">Sword</a>;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;   re_syntax_table[<span class="charliteral">&#39;_&#39;</span>] = <a class="code" href="regex_8c.html#a3c4fa96131648fe8cb5bb3055015e73a">Sword</a>;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;   done = 1;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;}</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* not SYNTAX_TABLE */</span><span class="preprocessor"></span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno"><a class="line" href="regex_8c.html#aa3ac3cf24b0571b34350ae5cf10f354e">  207</a></span>&#160;<span class="preprocessor">#define SYNTAX(c) re_syntax_table[c]</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* not emacs */</span><span class="preprocessor"></span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment">/* Get the interface, including the syntax bits.  */</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment">/* Changed to fit into mutt - tlr, 1999-01-06 */</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="__regex_8h.html">_regex.h</a>&quot;</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment">/* isalpha etc. are used for the character classes.  */</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="preprocessor">#include &lt;ctype.h&gt;</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment">/* Jim Meyering writes:</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment">   &quot;... Some ctype macros are valid only for character codes that</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment">   isascii says are ASCII (SGI&#39;s IRIX-4.0.5 is one such system --when</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment">   using /bin/cc or gcc but without giving an ansi option).  So, all</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="comment">   ctype uses should be through macros like ISPRINT...  If</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="comment">   STDC_HEADERS is defined, then autoconf has verified that the ctype</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="comment">   macros don&#39;t need to be guarded with references to isascii. ...</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment">   Defining isascii to 1 should let any compiler worth its salt</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="comment">   eliminate the &amp;&amp; through constant folding.&quot;  */</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="preprocessor">#if defined (STDC_HEADERS) || (!defined (isascii) &amp;&amp; !defined (HAVE_ISASCII))</span></div><div class="line"><a name="l00232"></a><span class="lineno"><a class="line" href="regex_8c.html#af96ff81718c3c27b342b5958fac6cb7e">  232</a></span>&#160;<span class="preprocessor">#define ISASCII(c) 1</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="preprocessor">#define ISASCII(c) isascii(c)</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="preprocessor">#ifdef isblank</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="preprocessor">#define ISBLANK(c) (ISASCII (c) &amp;&amp; isblank (c))</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00240"></a><span class="lineno"><a class="line" href="regex_8c.html#a3773b51bd1f0ba67a1d8f05923c87d4c">  240</a></span>&#160;<span class="preprocessor">#define ISBLANK(c) ((c) == &#39; &#39; || (c) == &#39;\t&#39;)</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="preprocessor">#ifdef isgraph</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="preprocessor">#define ISGRAPH(c) (ISASCII (c) &amp;&amp; isgraph (c))</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00245"></a><span class="lineno"><a class="line" href="regex_8c.html#a31ddd189071199427310ccde9cedfb71">  245</a></span>&#160;<span class="preprocessor">#define ISGRAPH(c) (ISASCII (c) &amp;&amp; isprint (c) &amp;&amp; !isspace (c))</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div><div class="line"><a name="l00248"></a><span class="lineno"><a class="line" href="regex_8c.html#af65108a54093e5c7220dfc15f6cd9db1">  248</a></span>&#160;<span class="preprocessor">#define ISPRINT(c) (ISASCII (c) &amp;&amp; isprint (c))</span></div><div class="line"><a name="l00249"></a><span class="lineno"><a class="line" href="regex_8c.html#ab615ddd0d086b80219cd7e0345d6b5ef">  249</a></span>&#160;<span class="preprocessor">#define ISDIGIT(c) (ISASCII (c) &amp;&amp; isdigit (c))</span></div><div class="line"><a name="l00250"></a><span class="lineno"><a class="line" href="regex_8c.html#a8c0056118f585fa052e0f76e3198db6a">  250</a></span>&#160;<span class="preprocessor">#define ISALNUM(c) (ISASCII (c) &amp;&amp; isalnum (c))</span></div><div class="line"><a name="l00251"></a><span class="lineno"><a class="line" href="regex_8c.html#afe0bf9496b5e0ecf253fb86072ee7ecf">  251</a></span>&#160;<span class="preprocessor">#define ISALPHA(c) (ISASCII (c) &amp;&amp; isalpha (c))</span></div><div class="line"><a name="l00252"></a><span class="lineno"><a class="line" href="regex_8c.html#a5079e89f60f6f44944ea9dc3b59f14d5">  252</a></span>&#160;<span class="preprocessor">#define ISCNTRL(c) (ISASCII (c) &amp;&amp; iscntrl (c))</span></div><div class="line"><a name="l00253"></a><span class="lineno"><a class="line" href="regex_8c.html#acb1e7358e00baea87b36a635fdb6970f">  253</a></span>&#160;<span class="preprocessor">#define ISLOWER(c) (ISASCII (c) &amp;&amp; islower (c))</span></div><div class="line"><a name="l00254"></a><span class="lineno"><a class="line" href="regex_8c.html#a165393454eb1019f3f77cedba52e23de">  254</a></span>&#160;<span class="preprocessor">#define ISPUNCT(c) (ISASCII (c) &amp;&amp; ispunct (c))</span></div><div class="line"><a name="l00255"></a><span class="lineno"><a class="line" href="regex_8c.html#ae8cdc17e44905c826bddf416b7bf621c">  255</a></span>&#160;<span class="preprocessor">#define ISSPACE(c) (ISASCII (c) &amp;&amp; isspace (c))</span></div><div class="line"><a name="l00256"></a><span class="lineno"><a class="line" href="regex_8c.html#a2bfd4177f165a5968d95960d42578ab6">  256</a></span>&#160;<span class="preprocessor">#define ISUPPER(c) (ISASCII (c) &amp;&amp; isupper (c))</span></div><div class="line"><a name="l00257"></a><span class="lineno"><a class="line" href="regex_8c.html#a419f06aab80b7c8eb3aaf4dd70463731">  257</a></span>&#160;<span class="preprocessor">#define ISXDIGIT(c) (ISASCII (c) &amp;&amp; isxdigit (c))</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="preprocessor">#ifndef NULL</span></div><div class="line"><a name="l00260"></a><span class="lineno"><a class="line" href="regex_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">  260</a></span>&#160;<span class="preprocessor">#define NULL (void *)0</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment">/* We remove any previous definition of `SIGN_EXTEND_CHAR&#39;,</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment">   since ours (we hope) works properly with all combinations of</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment">   machines, compilers, `char&#39; and `unsigned char&#39; argument types.</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment">   (Per Bothner suggested the basic approach.)  */</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="preprocessor">#undef SIGN_EXTEND_CHAR</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="preprocessor">#if __STDC__</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="preprocessor">#define SIGN_EXTEND_CHAR(c) ((signed char) (c))</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="preprocessor">#else  </span><span class="comment">/* not __STDC__ */</span><span class="preprocessor"></span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment">/* As in Harbison and Steele.  */</span></div><div class="line"><a name="l00272"></a><span class="lineno"><a class="line" href="regex_8c.html#affd804aa116f7d43493d29c6607df14d">  272</a></span>&#160;<span class="preprocessor">#define SIGN_EXTEND_CHAR(c) ((((unsigned char) (c)) ^ 128) - 128)</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="comment">/* Should we use malloc or alloca?  If REGEX_MALLOC is not defined, we</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment">   use `alloca&#39; instead of `malloc&#39;.  This is because using malloc in</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment">   re_search* or re_match* could cause memory leaks when C-g is used in</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="comment">   Emacs; also, malloc is slower and causes storage fragmentation.  On</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="comment">   the other hand, malloc is more portable, and easier to debug.</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment">   Because we sometimes use alloca, some routines have to be macros,</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment">   not functions -- `alloca&#39;-allocated space disappears at the end of the</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment">   function it is called in.  */</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="preprocessor">#ifdef REGEX_MALLOC</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;</div><div class="line"><a name="l00287"></a><span class="lineno"><a class="line" href="regex_8c.html#ac0f85b18908da63fd510f189601c2a9c">  287</a></span>&#160;<span class="preprocessor">#define REGEX_ALLOCATE malloc</span></div><div class="line"><a name="l00288"></a><span class="lineno"><a class="line" href="regex_8c.html#a3694b4c0eee68e086e659d2508cf618a">  288</a></span>&#160;<span class="preprocessor">#define REGEX_REALLOCATE(source, osize, nsize) realloc (source, nsize)</span></div><div class="line"><a name="l00289"></a><span class="lineno"><a class="line" href="regex_8c.html#acb54b2a1092c4a5393238aa4d4803260">  289</a></span>&#160;<span class="preprocessor">#define REGEX_FREE free</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="preprocessor">#else </span><span class="comment">/* not REGEX_MALLOC  */</span><span class="preprocessor"></span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="comment">/* Emacs already defines alloca, sometimes.  */</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="preprocessor">#ifndef alloca</span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="comment">/* Make alloca work the best possible way.  */</span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="preprocessor">#ifdef __GNUC__</span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="preprocessor">#define alloca __builtin_alloca</span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="preprocessor">#else </span><span class="comment">/* not __GNUC__ */</span><span class="preprocessor"></span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="preprocessor">#if HAVE_ALLOCA_H</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="preprocessor">#include &lt;alloca.h&gt;</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="preprocessor">#else </span><span class="comment">/* not __GNUC__ or HAVE_ALLOCA_H */</span><span class="preprocessor"></span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="preprocessor">#if 0 </span><span class="comment">/* It is a bad idea to declare alloca.  We always cast the result.  */</span><span class="preprocessor"></span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="preprocessor">#ifndef _AIX </span><span class="comment">/* Already did AIX, up at the top.  */</span><span class="preprocessor"></span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="keywordtype">char</span> *<a class="code" href="dcigettext_8c.html#a03a200320a749aaf2faa1d1719ffb4de">alloca</a> ();</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* not _AIX */</span><span class="preprocessor"></span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* not HAVE_ALLOCA_H */</span><span class="preprocessor"></span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* not __GNUC__ */</span><span class="preprocessor"></span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* not alloca */</span><span class="preprocessor"></span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="preprocessor">#define REGEX_ALLOCATE alloca</span></div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="comment">/* Assumes a `char *destination&#39; variable.  */</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="preprocessor">#define REGEX_REALLOCATE(source, osize, nsize)                          \</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="preprocessor">  (destination = (char *) alloca (nsize),                               \</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="preprocessor">   bcopy (source, destination, osize),                                  \</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="preprocessor">   destination)</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="comment">/* No need to do anything to free, after alloca.  */</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="preprocessor">#define REGEX_FREE(arg) ((void)0) </span><span class="comment">/* Do nothing!  But inhibit gcc warning.  */</span><span class="preprocessor"></span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* not REGEX_MALLOC */</span><span class="preprocessor"></span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="comment">/* Define how to allocate the failure stack.  */</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="preprocessor">#if defined (REL_ALLOC) &amp;&amp; defined (REGEX_MALLOC)</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="preprocessor">#define REGEX_ALLOCATE_STACK(size)                              \</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="preprocessor">  r_alloc (&amp;failure_stack_ptr, (size))</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="preprocessor">#define REGEX_REALLOCATE_STACK(source, osize, nsize)            \</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="preprocessor">  r_re_alloc (&amp;failure_stack_ptr, (nsize))</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="preprocessor">#define REGEX_FREE_STACK(ptr)                                   \</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="preprocessor">  r_alloc_free (&amp;failure_stack_ptr)</span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="preprocessor">#else </span><span class="comment">/* not using relocating allocator */</span><span class="preprocessor"></span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="preprocessor">#ifdef REGEX_MALLOC</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div><div class="line"><a name="l00341"></a><span class="lineno"><a class="line" href="regex_8c.html#a37f419167ca1f8c499ee4c899b53614b">  341</a></span>&#160;<span class="preprocessor">#define REGEX_ALLOCATE_STACK malloc</span></div><div class="line"><a name="l00342"></a><span class="lineno"><a class="line" href="regex_8c.html#a9247bcb7e41d886eaac155949a0e58e0">  342</a></span>&#160;<span class="preprocessor">#define REGEX_REALLOCATE_STACK(source, osize, nsize) realloc (source, nsize)</span></div><div class="line"><a name="l00343"></a><span class="lineno"><a class="line" href="regex_8c.html#afa2f84fb6b29ef17fc37159d705b1cef">  343</a></span>&#160;<span class="preprocessor">#define REGEX_FREE_STACK free</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="preprocessor">#else </span><span class="comment">/* not REGEX_MALLOC */</span><span class="preprocessor"></span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="preprocessor">#define REGEX_ALLOCATE_STACK alloca</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="preprocessor">#define REGEX_REALLOCATE_STACK(source, osize, nsize)                    \</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="preprocessor">   REGEX_REALLOCATE (source, osize, nsize)</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="comment">/* No need to explicitly free anything.  */</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="preprocessor">#define REGEX_FREE_STACK(arg)</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* not REGEX_MALLOC */</span><span class="preprocessor"></span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* not using relocating allocator */</span><span class="preprocessor"></span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="comment">/* True if `size1&#39; is non-NULL and PTR is pointing anywhere inside</span></div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="comment">   `string1&#39; or just past its end.  This works if PTR is NULL, which is</span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="comment">   a good thing.  */</span></div><div class="line"><a name="l00361"></a><span class="lineno"><a class="line" href="regex_8c.html#a490c47f87b80eb6afdb77510567659e4">  361</a></span>&#160;<span class="preprocessor">#define FIRST_STRING_P(ptr)                                     \</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="preprocessor">  (size1 &amp;&amp; string1 &lt;= (ptr) &amp;&amp; (ptr) &lt;= string1 + size1)</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="comment">/* (Re)Allocate N items of type T using malloc, or fail.  */</span></div><div class="line"><a name="l00365"></a><span class="lineno"><a class="line" href="regex_8c.html#aaf77bcbd178f50762a35333d83bacd09">  365</a></span>&#160;<span class="preprocessor">#define TALLOC(n, t) ((t *) malloc ((n) * sizeof (t)))</span></div><div class="line"><a name="l00366"></a><span class="lineno"><a class="line" href="regex_8c.html#ae247cb248fa0309737dce6bdfc3a6a3d">  366</a></span>&#160;<span class="preprocessor">#define RETALLOC(addr, n, t) ((addr) = (t *) realloc (addr, (n) * sizeof (t)))</span></div><div class="line"><a name="l00367"></a><span class="lineno"><a class="line" href="regex_8c.html#a12c694618416cdfd35b3eb0e7f99f7f6">  367</a></span>&#160;<span class="preprocessor">#define RETALLOC_IF(addr, n, t) \</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="preprocessor">  if (addr) RETALLOC((addr), (n), t); else (addr) = TALLOC ((n), t)</span></div><div class="line"><a name="l00369"></a><span class="lineno"><a class="line" href="regex_8c.html#aa55c07b38a55837693a65170c5aa4c76">  369</a></span>&#160;<span class="preprocessor">#define REGEX_TALLOC(n, t) ((t *) REGEX_ALLOCATE ((n) * sizeof (t)))</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;</div><div class="line"><a name="l00371"></a><span class="lineno"><a class="line" href="regex_8c.html#ad72dc64cd2c9bc3598f792dc518d03b2">  371</a></span>&#160;<span class="preprocessor">#define BYTEWIDTH 8 </span><span class="comment">/* In bits.  */</span><span class="preprocessor"></span></div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div><div class="line"><a name="l00373"></a><span class="lineno"><a class="line" href="regex_8c.html#ab42511b5b7bf70ad31b13c44469d117f">  373</a></span>&#160;<span class="preprocessor">#define STREQ(s1, s2) ((strcmp (s1, s2) == 0))</span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="preprocessor">#undef MAX</span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="preprocessor">#undef MIN</span></div><div class="line"><a name="l00377"></a><span class="lineno"><a class="line" href="regex_8c.html#afa99ec4acc4ecb2dc3c2d05da15d0e3f">  377</a></span>&#160;<span class="preprocessor">#define MAX(a, b) ((a) &gt; (b) ? (a) : (b))</span></div><div class="line"><a name="l00378"></a><span class="lineno"><a class="line" href="regex_8c.html#a3acffbd305ee72dcd4593c0d8af64a4f">  378</a></span>&#160;<span class="preprocessor">#define MIN(a, b) ((a) &lt; (b) ? (a) : (b))</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;</div><div class="line"><a name="l00380"></a><span class="lineno"><a class="line" href="regex_8c.html#a330a2ea4da1ce57c189821c8ebf59618">  380</a></span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">char</span> <a class="code" href="regex_8c.html#a330a2ea4da1ce57c189821c8ebf59618">boolean</a>;</div><div class="line"><a name="l00381"></a><span class="lineno"><a class="line" href="regex_8c.html#a65e9886d74aaee76545e83dd09011727">  381</a></span>&#160;<span class="preprocessor">#define false 0</span></div><div class="line"><a name="l00382"></a><span class="lineno"><a class="line" href="regex_8c.html#a41f9c5fb8b08eb5dc3edce4dcb37fee7">  382</a></span>&#160;<span class="preprocessor">#define true 1</span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="regex_8c.html#a3b426565d92028a1cf7113fcf41942c8">re_match_2_internal</a> (<span class="keyword">struct</span> <a class="code" href="structre__pattern__buffer.html">re_pattern_buffer</a> *bufp,</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span> *string1, <span class="keywordtype">int</span> size1, <span class="keyword">const</span> <span class="keywordtype">char</span> *string2, <span class="keywordtype">int</span> size2, <span class="keywordtype">int</span> pos,</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        <span class="keyword">struct</span> <a class="code" href="structre__registers.html">re_registers</a> *regs, <span class="keywordtype">int</span> stop);</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="comment">/* These are the command codes that appear in compiled regular</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment">   expressions.  Some opcodes are followed by argument bytes.  A</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment">   command code can specify any interpretation whatsoever for its</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="comment">   arguments.  Zero bytes may appear in the compiled regular expression.  */</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div><div class="line"><a name="l00393"></a><span class="lineno"><a class="line" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118">  393</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">enum</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;{</div><div class="line"><a name="l00395"></a><span class="lineno"><a class="line" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a292eb17c5d97bf50ef0c4f733e56c836">  395</a></span>&#160;  <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a292eb17c5d97bf50ef0c4f733e56c836">no_op</a> = 0,</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  <span class="comment">/* Succeed right away--no more backtracking.  */</span></div><div class="line"><a name="l00398"></a><span class="lineno"><a class="line" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a37fe3367d5bf38cb0ac666ebae52d4f9">  398</a></span>&#160;  <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a37fe3367d5bf38cb0ac666ebae52d4f9">succeed</a>,</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        <span class="comment">/* Followed by one byte giving n, then by n literal bytes.  */</span></div><div class="line"><a name="l00401"></a><span class="lineno"><a class="line" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118ab0eca0e160953a14bcb41d151287d1f1">  401</a></span>&#160;  <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118ab0eca0e160953a14bcb41d151287d1f1">exactn</a>,</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        <span class="comment">/* Matches any (more or less) character.  */</span></div><div class="line"><a name="l00404"></a><span class="lineno"><a class="line" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a375d40bb404dcb4aedbb775f40e7f648">  404</a></span>&#160;  <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a375d40bb404dcb4aedbb775f40e7f648">anychar</a>,</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        <span class="comment">/* Matches any one char belonging to specified set.  First</span></div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="comment">           following byte is number of bitmap bytes.  Then come bytes</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="comment">           for a bitmap saying which chars are in.  Bits in each byte</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="comment">           are ordered low-bit-first.  A character is in the set if its</span></div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="comment">           bit is 1.  A character too large to have a bit in the map is</span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="comment">           automatically not in the set.  */</span></div><div class="line"><a name="l00412"></a><span class="lineno"><a class="line" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a6247a0132ac9bb1af7dbc840afe09c88">  412</a></span>&#160;  <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a6247a0132ac9bb1af7dbc840afe09c88">charset</a>,</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        <span class="comment">/* Same parameters as charset, but match any character that is</span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;<span class="comment">           not one of those specified.  */</span></div><div class="line"><a name="l00416"></a><span class="lineno"><a class="line" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118abcbe9b8a81da1098e4ffbb7c4f4a8e2e">  416</a></span>&#160;  <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118abcbe9b8a81da1098e4ffbb7c4f4a8e2e">charset_not</a>,</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        <span class="comment">/* Start remembering the text that is matched, for storing in a</span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="comment">           register.  Followed by one byte with the register number, in</span></div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="comment">           the range 0 to one less than the pattern buffer&#39;s re_nsub</span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="comment">           field.  Then followed by one byte with the number of groups</span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="comment">           inner to this one.  (This last has to be part of the</span></div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="comment">           start_memory only because we need it in the on_failure_jump</span></div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="comment">           of re_match_2.)  */</span></div><div class="line"><a name="l00425"></a><span class="lineno"><a class="line" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118affba14708233f194802bf7981fd7717e">  425</a></span>&#160;  <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118affba14708233f194802bf7981fd7717e">start_memory</a>,</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        <span class="comment">/* Stop remembering the text that is matched and store it in a</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="comment">           memory register.  Followed by one byte with the register</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment">           number, in the range 0 to one less than `re_nsub&#39; in the</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment">           pattern buffer, and one byte with the number of inner groups,</span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="comment">           just like `start_memory&#39;.  (We need the number of inner</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="comment">           groups here because we don&#39;t have any easy way of finding the</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="comment">           corresponding start_memory when we&#39;re at a stop_memory.)  */</span></div><div class="line"><a name="l00434"></a><span class="lineno"><a class="line" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a6a42f30575b66116b79f4527493d0ce9">  434</a></span>&#160;  <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a6a42f30575b66116b79f4527493d0ce9">stop_memory</a>,</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        <span class="comment">/* Match a duplicate of something remembered. Followed by one</span></div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="comment">           byte containing the register number.  */</span></div><div class="line"><a name="l00438"></a><span class="lineno"><a class="line" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a0c02fe9db75630f52c6e9e44dd55d9de">  438</a></span>&#160;  <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a0c02fe9db75630f52c6e9e44dd55d9de">duplicate</a>,</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        <span class="comment">/* Fail unless at beginning of line.  */</span></div><div class="line"><a name="l00441"></a><span class="lineno"><a class="line" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a4780b4642f63093c414b1833e2d40107">  441</a></span>&#160;  <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a4780b4642f63093c414b1833e2d40107">begline</a>,</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        <span class="comment">/* Fail unless at end of line.  */</span></div><div class="line"><a name="l00444"></a><span class="lineno"><a class="line" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a0556771866997767489c4da274f15aa4">  444</a></span>&#160;  <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a0556771866997767489c4da274f15aa4">endline</a>,</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        <span class="comment">/* Succeeds if at beginning of buffer (if emacs) or at beginning</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="comment">           of string to be matched (if not).  */</span></div><div class="line"><a name="l00448"></a><span class="lineno"><a class="line" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118ab428f43b6557e8dfc45e452a8891b598">  448</a></span>&#160;  <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118ab428f43b6557e8dfc45e452a8891b598">begbuf</a>,</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        <span class="comment">/* Analogously, for end of buffer/string.  */</span></div><div class="line"><a name="l00451"></a><span class="lineno"><a class="line" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a4962434097279c747aa6ba59df478775">  451</a></span>&#160;  <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a4962434097279c747aa6ba59df478775">endbuf</a>,</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        <span class="comment">/* Followed by two byte relative address to which to jump.  */</span></div><div class="line"><a name="l00454"></a><span class="lineno"><a class="line" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a5a08a3c1fa135350961630d2f9c2b849">  454</a></span>&#160;  <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a5a08a3c1fa135350961630d2f9c2b849">jump</a>,</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        <span class="comment">/* Same as jump, but marks the end of an alternative.  */</span></div><div class="line"><a name="l00457"></a><span class="lineno"><a class="line" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a2b75b8e92a52c848de16544d9ceb08da">  457</a></span>&#160;  <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a2b75b8e92a52c848de16544d9ceb08da">jump_past_alt</a>,</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        <span class="comment">/* Followed by two-byte relative address of place to resume at</span></div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;<span class="comment">           in case of failure.  */</span></div><div class="line"><a name="l00461"></a><span class="lineno"><a class="line" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a5ca3d8a56cc5259243bcaffedd070287">  461</a></span>&#160;  <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a5ca3d8a56cc5259243bcaffedd070287">on_failure_jump</a>,</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        <span class="comment">/* Like on_failure_jump, but pushes a placeholder instead of the</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="comment">           current string position when executed.  */</span></div><div class="line"><a name="l00465"></a><span class="lineno"><a class="line" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118adbebd35172fa7358845d6dd61727883b">  465</a></span>&#160;  <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118adbebd35172fa7358845d6dd61727883b">on_failure_keep_string_jump</a>,</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        <span class="comment">/* Throw away latest failure point and then jump to following</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="comment">           two-byte relative address.  */</span></div><div class="line"><a name="l00469"></a><span class="lineno"><a class="line" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a24cdcea4f39ca8613374deb4bfe5b2cb">  469</a></span>&#160;  <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a24cdcea4f39ca8613374deb4bfe5b2cb">pop_failure_jump</a>,</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        <span class="comment">/* Change to pop_failure_jump if know won&#39;t have to backtrack to</span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="comment">           match; otherwise change to jump.  This is used to jump</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="comment">           back to the beginning of a repeat.  If what follows this jump</span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="comment">           clearly won&#39;t match what the repeat does, such that we can be</span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="comment">           sure that there is no use backtracking out of repetitions</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="comment">           already matched, then we change it to a pop_failure_jump.</span></div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;<span class="comment">           Followed by two-byte address.  */</span></div><div class="line"><a name="l00478"></a><span class="lineno"><a class="line" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a54819e2968ab91bf6ad492f131d7f37b">  478</a></span>&#160;  <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a54819e2968ab91bf6ad492f131d7f37b">maybe_pop_jump</a>,</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        <span class="comment">/* Jump to following two-byte address, and push a dummy failure</span></div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="comment">           point. This failure point will be thrown away if an attempt</span></div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="comment">           is made to use it for a failure.  A `+&#39; construct makes this</span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="comment">           before the first repeat.  Also used as an intermediary kind</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="comment">           of jump when compiling an alternative.  */</span></div><div class="line"><a name="l00485"></a><span class="lineno"><a class="line" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a3918fb85c0fd4b2f8c84afad14836eba">  485</a></span>&#160;  <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a3918fb85c0fd4b2f8c84afad14836eba">dummy_failure_jump</a>,</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        <span class="comment">/* Push a dummy failure point and continue.  Used at the end of</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="comment">           alternatives.  */</span></div><div class="line"><a name="l00489"></a><span class="lineno"><a class="line" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118ae96f67086c4f61cc6fd32b6b493dc17f">  489</a></span>&#160;  <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118ae96f67086c4f61cc6fd32b6b493dc17f">push_dummy_failure</a>,</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        <span class="comment">/* Followed by two-byte relative address and two-byte number n.</span></div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="comment">           After matching N times, jump to the address upon failure.  */</span></div><div class="line"><a name="l00493"></a><span class="lineno"><a class="line" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118ae45bee3e6749253a8ba8769646f79734">  493</a></span>&#160;  <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118ae45bee3e6749253a8ba8769646f79734">succeed_n</a>,</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        <span class="comment">/* Followed by two-byte relative address, and two-byte number n.</span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;<span class="comment">           Jump to the address N times, then fail.  */</span></div><div class="line"><a name="l00497"></a><span class="lineno"><a class="line" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a333721a24859c29322c8abdae4159e1b">  497</a></span>&#160;  <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a333721a24859c29322c8abdae4159e1b">jump_n</a>,</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        <span class="comment">/* Set the following two-byte relative address to the</span></div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;<span class="comment">           subsequent two-byte number.  The address *includes* the two</span></div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;<span class="comment">           bytes of number.  */</span></div><div class="line"><a name="l00502"></a><span class="lineno"><a class="line" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a0f280efb7129538f3b07aa789fc99fa1">  502</a></span>&#160;  <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a0f280efb7129538f3b07aa789fc99fa1">set_number_at</a>,</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;</div><div class="line"><a name="l00504"></a><span class="lineno"><a class="line" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a26eed2ae578da61bebc7b55e7610cf0b">  504</a></span>&#160;  <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a26eed2ae578da61bebc7b55e7610cf0b">wordchar</a>,     <span class="comment">/* Matches any word-constituent character.  */</span></div><div class="line"><a name="l00505"></a><span class="lineno"><a class="line" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a01398d7bcfdbcb84b318fc65a7ef9c93">  505</a></span>&#160;  <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a01398d7bcfdbcb84b318fc65a7ef9c93">notwordchar</a>,  <span class="comment">/* Matches any char that is not a word-constituent.  */</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;</div><div class="line"><a name="l00507"></a><span class="lineno"><a class="line" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118ad88e0028985b6bc61df64cd9578d3f18">  507</a></span>&#160;  <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118ad88e0028985b6bc61df64cd9578d3f18">wordbeg</a>,      <span class="comment">/* Succeeds if at word beginning.  */</span></div><div class="line"><a name="l00508"></a><span class="lineno"><a class="line" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118accd3c02d3bd48af753cf5261bfb084ac">  508</a></span>&#160;  <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118accd3c02d3bd48af753cf5261bfb084ac">wordend</a>,      <span class="comment">/* Succeeds if at word end.  */</span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;</div><div class="line"><a name="l00510"></a><span class="lineno"><a class="line" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a47168d753b8d555d2e89416a4b660da9">  510</a></span>&#160;  <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a47168d753b8d555d2e89416a4b660da9">wordbound</a>,    <span class="comment">/* Succeeds if at a word boundary.  */</span></div><div class="line"><a name="l00511"></a><span class="lineno"><a class="line" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a9077999caa8f316015aabfd83b3745a0">  511</a></span>&#160;  <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a9077999caa8f316015aabfd83b3745a0">notwordbound</a>  <span class="comment">/* Succeeds if not at a word boundary.  */</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="preprocessor">#ifdef emacs</span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  ,before_dot,  <span class="comment">/* Succeeds if before point.  */</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  at_dot,       <span class="comment">/* Succeeds if at point.  */</span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  after_dot,    <span class="comment">/* Succeeds if after point.  */</span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        <span class="comment">/* Matches any character whose syntax is specified.  Followed by</span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="comment">           a byte which contains a syntax code, e.g., Sword.  */</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  syntaxspec,</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        <span class="comment">/* Matches any character whose syntax is not that specified.  */</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  notsyntaxspec</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* emacs */</span><span class="preprocessor"></span></div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;} <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118">re_opcode_t</a>;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;<span class="comment">/* Common operations on the compiled pattern.  */</span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="comment">/* Store NUMBER in two contiguous bytes starting at DESTINATION.  */</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div><div class="line"><a name="l00531"></a><span class="lineno"><a class="line" href="regex_8c.html#a6878991bbaf83ac3debe1d74f4a450e1">  531</a></span>&#160;<span class="preprocessor">#define STORE_NUMBER(destination, number)                               \</span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="preprocessor">  do {                                                                  \</span></div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="preprocessor">    (destination)[0] = (number) &amp; 0377;                                 \</span></div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="preprocessor">    (destination)[1] = (number) &gt;&gt; 8;                                   \</span></div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<span class="preprocessor">  } while (0)</span></div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;<span class="comment">/* Same as STORE_NUMBER, except increment DESTINATION to</span></div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="comment">   the byte after where the number is stored.  Therefore, DESTINATION</span></div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="comment">   must be an lvalue.  */</span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;</div><div class="line"><a name="l00541"></a><span class="lineno"><a class="line" href="regex_8c.html#aec2d0e7545b2756d65a556d3ac7cdf89">  541</a></span>&#160;<span class="preprocessor">#define STORE_NUMBER_AND_INCR(destination, number)                      \</span></div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="preprocessor">  do {                                                                  \</span></div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="preprocessor">    STORE_NUMBER (destination, number);                                 \</span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="preprocessor">    (destination) += 2;                                                 \</span></div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="preprocessor">  } while (0)</span></div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;<span class="comment">/* Put into DESTINATION a number stored in two contiguous bytes starting</span></div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;<span class="comment">   at SOURCE.  */</span></div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="preprocessor">#define EXTRACT_NUMBER(destination, source)                             \</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;<span class="preprocessor">  do {                                                                  \</span></div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="preprocessor">    (destination) = *(source) &amp; 0377;                                   \</span></div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;<span class="preprocessor">    (destination) += SIGN_EXTEND_CHAR (*((source) + 1)) &lt;&lt; 8;           \</span></div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;<span class="preprocessor">  } while (0)</span></div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="regex_8c.html#ae0616c0941dc178f469f6a36dec7c8d2">extract_number</a> <a class="code" href="regex_8c.html#a6a88312ef40c670049fcf09f759eeca9">_RE_ARGS</a> ((<span class="keywordtype">int</span> *dest, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *source));</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span></div><div class="line"><a name="l00559"></a><span class="lineno"><a class="line" href="regex_8c.html#ae0616c0941dc178f469f6a36dec7c8d2">  559</a></span>&#160;<a class="code" href="regex_8c.html#ae0616c0941dc178f469f6a36dec7c8d2">extract_number</a> (dest, source)</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <span class="keywordtype">int</span> *dest;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *source;</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;{</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  <span class="keywordtype">int</span> temp = <a class="code" href="regex_8c.html#affd804aa116f7d43493d29c6607df14d">SIGN_EXTEND_CHAR</a> (*(source + 1));</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  *dest = *source &amp; 0377;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  *dest += temp &lt;&lt; 8;</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;}</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;<span class="preprocessor">#ifndef EXTRACT_MACROS </span><span class="comment">/* To debug the macros.  */</span><span class="preprocessor"></span></div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="preprocessor">#undef EXTRACT_NUMBER</span></div><div class="line"><a name="l00570"></a><span class="lineno"><a class="line" href="regex_8c.html#a06fb9c99707488c694b3cc4a9fb60c75">  570</a></span>&#160;<span class="preprocessor">#define EXTRACT_NUMBER(dest, src) extract_number (&amp;dest, src)</span></div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* not EXTRACT_MACROS */</span><span class="preprocessor"></span></div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* DEBUG */</span><span class="preprocessor"></span></div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;<span class="comment">/* Same as EXTRACT_NUMBER, except increment SOURCE to after the number.</span></div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;<span class="comment">   SOURCE must be an lvalue.  */</span></div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;<span class="preprocessor">#define EXTRACT_NUMBER_AND_INCR(destination, source)                    \</span></div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="preprocessor">  do {                                                                  \</span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;<span class="preprocessor">    EXTRACT_NUMBER (destination, source);                               \</span></div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;<span class="preprocessor">    (source) += 2;                                                      \</span></div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;<span class="preprocessor">  } while (0)</span></div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="regex_8c.html#a8ac5145ba8937bfc01db164ee9b4dfb8">extract_number_and_incr</a> <a class="code" href="regex_8c.html#a6a88312ef40c670049fcf09f759eeca9">_RE_ARGS</a> ((<span class="keywordtype">int</span> *destination,</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;                                               <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> **source));</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span></div><div class="line"><a name="l00588"></a><span class="lineno"><a class="line" href="regex_8c.html#a8ac5145ba8937bfc01db164ee9b4dfb8">  588</a></span>&#160;<a class="code" href="regex_8c.html#a8ac5145ba8937bfc01db164ee9b4dfb8">extract_number_and_incr</a> (destination, source)</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <span class="keywordtype">int</span> *destination;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> **source;</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;{</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  <a class="code" href="regex_8c.html#ae0616c0941dc178f469f6a36dec7c8d2">extract_number</a> (destination, *source);</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  *source += 2;</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;}</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;<span class="preprocessor">#ifndef EXTRACT_MACROS</span></div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;<span class="preprocessor">#undef EXTRACT_NUMBER_AND_INCR</span></div><div class="line"><a name="l00598"></a><span class="lineno"><a class="line" href="regex_8c.html#a047a92bdad1afef40846e6105ca4d593">  598</a></span>&#160;<span class="preprocessor">#define EXTRACT_NUMBER_AND_INCR(dest, src) \</span></div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;<span class="preprocessor">  extract_number_and_incr (&amp;dest, &amp;src)</span></div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* not EXTRACT_MACROS */</span><span class="preprocessor"></span></div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* DEBUG */</span><span class="preprocessor"></span></div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;<span class="comment">/* If DEBUG is defined, Regex prints many voluminous messages about what</span></div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;<span class="comment">   it is doing (if the variable `debug&#39; is nonzero).  If linked with the</span></div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;<span class="comment">   main program in `iregex.c&#39;, you can enter patterns and strings</span></div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;<span class="comment">   interactively.  And if linked with the main program in `main.c&#39; and</span></div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;<span class="comment">   the other test files, you can run the already-written tests.  */</span></div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;<span class="comment">/* We use standard I/O for debugging.  */</span></div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;<span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;<span class="comment">/* It is useful to test things that ``must&#39;&#39; be true when debugging.  */</span></div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="preprocessor">#include &lt;assert.h&gt;</span></div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;</div><div class="line"><a name="l00618"></a><span class="lineno"><a class="line" href="regex_8c.html#ac3e1795766a80ec63b157951b4b9a7d4">  618</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> debug = 0;</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;</div><div class="line"><a name="l00620"></a><span class="lineno"><a class="line" href="regex_8c.html#ad1f96075b21c23232c91a890025692c2">  620</a></span>&#160;<span class="preprocessor">#define DEBUG_STATEMENT(e) e</span></div><div class="line"><a name="l00621"></a><span class="lineno"><a class="line" href="regex_8c.html#a90a312923984a45f83767acea95b84a1">  621</a></span>&#160;<span class="preprocessor">#define DEBUG_PRINT1(x) if (debug) printf (x)</span></div><div class="line"><a name="l00622"></a><span class="lineno"><a class="line" href="regex_8c.html#aa56b1ff14ec552b5af8e9af50bc9d5cc">  622</a></span>&#160;<span class="preprocessor">#define DEBUG_PRINT2(x1, x2) if (debug) printf (x1, x2)</span></div><div class="line"><a name="l00623"></a><span class="lineno"><a class="line" href="regex_8c.html#ae1a07ee1a4b73aa71754bce23d0690aa">  623</a></span>&#160;<span class="preprocessor">#define DEBUG_PRINT3(x1, x2, x3) if (debug) printf (x1, x2, x3)</span></div><div class="line"><a name="l00624"></a><span class="lineno"><a class="line" href="regex_8c.html#aca55c7b840c46d7e72964a9ecf52310f">  624</a></span>&#160;<span class="preprocessor">#define DEBUG_PRINT4(x1, x2, x3, x4) if (debug) printf (x1, x2, x3, x4)</span></div><div class="line"><a name="l00625"></a><span class="lineno"><a class="line" href="regex_8c.html#ac9718b28cdc916b46e7f98bd4c38151e">  625</a></span>&#160;<span class="preprocessor">#define DEBUG_PRINT_COMPILED_PATTERN(p, s, e)                           \</span></div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;<span class="preprocessor">  if (debug) print_partial_compiled_pattern (s, e)</span></div><div class="line"><a name="l00627"></a><span class="lineno"><a class="line" href="regex_8c.html#ac98cc201be49e8dd0e1d05264e7651d7">  627</a></span>&#160;<span class="preprocessor">#define DEBUG_PRINT_DOUBLE_STRING(w, s1, sz1, s2, sz2)                  \</span></div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;<span class="preprocessor">  if (debug) print_double_string (w, s1, sz1, s2, sz2)</span></div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;<span class="comment">/* Print the fastmap in human-readable form.  */</span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l00634"></a><span class="lineno"><a class="line" href="regex_8c.html#a8330d3aebbb4066c8c7665fc6abcf9e5">  634</a></span>&#160;<a class="code" href="regex_8c.html#a8330d3aebbb4066c8c7665fc6abcf9e5">print_fastmap</a> (fastmap)</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    <span class="keywordtype">char</span> *fastmap;</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;{</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;  <span class="keywordtype">unsigned</span> was_a_range = 0;</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = 0;</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  <span class="keywordflow">while</span> (i &lt; (1 &lt;&lt; <a class="code" href="regex_8c.html#ad72dc64cd2c9bc3598f792dc518d03b2">BYTEWIDTH</a>))</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    {</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;      <span class="keywordflow">if</span> (fastmap[i++])</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;        {</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;          was_a_range = 0;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;          putchar (i - 1);</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;          <span class="keywordflow">while</span> (i &lt; (1 &lt;&lt; <a class="code" href="regex_8c.html#ad72dc64cd2c9bc3598f792dc518d03b2">BYTEWIDTH</a>)  &amp;&amp;  fastmap[i])</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;            {</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;              was_a_range = 1;</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;              i++;</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;            }</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;          <span class="keywordflow">if</span> (was_a_range)</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;            {</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;              <a class="code" href="protos_8h.html#abe96ffa6567a4342a28be3cbf540b44d">printf</a> (<span class="stringliteral">&quot;-&quot;</span>);</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;              putchar (i - 1);</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;            }</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;        }</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    }</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  putchar (<span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;}</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;<span class="comment">/* Print a compiled pattern string in human-readable form, starting at</span></div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;<span class="comment">   the START pointer into it and ending just before the pointer END.  */</span></div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l00666"></a><span class="lineno"><a class="line" href="regex_8c.html#ab4b740d578d91ba3e297f763df3ed390">  666</a></span>&#160;<a class="code" href="regex_8c.html#ab4b740d578d91ba3e297f763df3ed390">print_partial_compiled_pattern</a> (start, end)</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code" href="structre__registers.html#a6676ddb6ab07e50191e149b04dbcfe03">start</a>;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code" href="structre__registers.html#a0a9d373f1ab74c9c2063f233476fa5d4">end</a>;</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;{</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;  <span class="keywordtype">int</span> mcnt, mcnt2;</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *p1;</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *p = <a class="code" href="structre__registers.html#a6676ddb6ab07e50191e149b04dbcfe03">start</a>;</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *pend = <a class="code" href="structre__registers.html#a0a9d373f1ab74c9c2063f233476fa5d4">end</a>;</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;  <span class="keywordflow">if</span> (start == <a class="code" href="regex_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    {</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;      <a class="code" href="protos_8h.html#abe96ffa6567a4342a28be3cbf540b44d">printf</a> (<span class="stringliteral">&quot;(null)\n&quot;</span>);</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    }</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;  <span class="comment">/* Loop over pattern commands.  */</span></div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;  <span class="keywordflow">while</span> (p &lt; pend)</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    {</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;      <a class="code" href="protos_8h.html#abe96ffa6567a4342a28be3cbf540b44d">printf</a> (<span class="stringliteral">&quot;%d:\t&quot;</span>, p - start);</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;      <span class="keywordflow">switch</span> ((re_opcode_t) *p++)</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;        {</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a292eb17c5d97bf50ef0c4f733e56c836">no_op</a>:</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;          <a class="code" href="protos_8h.html#abe96ffa6567a4342a28be3cbf540b44d">printf</a> (<span class="stringliteral">&quot;/no_op&quot;</span>);</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118ab0eca0e160953a14bcb41d151287d1f1">exactn</a>:</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;          mcnt = *p++;</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;          <a class="code" href="protos_8h.html#abe96ffa6567a4342a28be3cbf540b44d">printf</a> (<span class="stringliteral">&quot;/exactn/%d&quot;</span>, mcnt);</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;          <span class="keywordflow">do</span></div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;            {</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;              putchar (<span class="charliteral">&#39;/&#39;</span>);</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;              putchar (*p++);</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;            }</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;          <span class="keywordflow">while</span> (--mcnt);</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118affba14708233f194802bf7981fd7717e">start_memory</a>:</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;          mcnt = *p++;</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;          <a class="code" href="protos_8h.html#abe96ffa6567a4342a28be3cbf540b44d">printf</a> (<span class="stringliteral">&quot;/start_memory/%d/%d&quot;</span>, mcnt, *p++);</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a6a42f30575b66116b79f4527493d0ce9">stop_memory</a>:</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;          mcnt = *p++;</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;          <a class="code" href="protos_8h.html#abe96ffa6567a4342a28be3cbf540b44d">printf</a> (<span class="stringliteral">&quot;/stop_memory/%d/%d&quot;</span>, mcnt, *p++);</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a0c02fe9db75630f52c6e9e44dd55d9de">duplicate</a>:</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;          <a class="code" href="protos_8h.html#abe96ffa6567a4342a28be3cbf540b44d">printf</a> (<span class="stringliteral">&quot;/duplicate/%d&quot;</span>, *p++);</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a375d40bb404dcb4aedbb775f40e7f648">anychar</a>:</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;          <a class="code" href="protos_8h.html#abe96ffa6567a4342a28be3cbf540b44d">printf</a> (<span class="stringliteral">&quot;/anychar&quot;</span>);</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a6247a0132ac9bb1af7dbc840afe09c88">charset</a>:</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118abcbe9b8a81da1098e4ffbb7c4f4a8e2e">charset_not</a>:</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;          {</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;            <span class="keyword">register</span> <span class="keywordtype">int</span> c, last = -100;</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;            <span class="keyword">register</span> <span class="keywordtype">int</span> in_range = 0;</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;            <a class="code" href="protos_8h.html#abe96ffa6567a4342a28be3cbf540b44d">printf</a> (<span class="stringliteral">&quot;/charset [%s&quot;</span>,</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;                    (re_opcode_t) *(p - 1) == <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118abcbe9b8a81da1098e4ffbb7c4f4a8e2e">charset_not</a> ? <span class="stringliteral">&quot;^&quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;            <a class="code" href="sendlib_8c.html#af576bf8ffa22a44e53018c67095ffbf0">assert</a> (p + *p &lt; pend);</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;            <span class="keywordflow">for</span> (c = 0; c &lt; 256; c++)</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;              <span class="keywordflow">if</span> (c / 8 &lt; *p</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;                  &amp;&amp; (p[1 + (c/8)] &amp; (1 &lt;&lt; (c % 8))))</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;                {</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;                  <span class="comment">/* Are we starting a range?  */</span></div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;                  <span class="keywordflow">if</span> (last + 1 == c &amp;&amp; ! in_range)</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;                    {</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;                      putchar (<span class="charliteral">&#39;-&#39;</span>);</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;                      in_range = 1;</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;                    }</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;                  <span class="comment">/* Have we broken a range?  */</span></div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;                  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (last + 1 != c &amp;&amp; in_range)</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;              {</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;                      putchar (last);</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;                      in_range = 0;</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;                    }</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;                  <span class="keywordflow">if</span> (! in_range)</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;                    putchar (c);</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;                  last = c;</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;              }</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;            <span class="keywordflow">if</span> (in_range)</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;              putchar (last);</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;            putchar (<span class="charliteral">&#39;]&#39;</span>);</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;            p += 1 + *p;</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;          }</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a4780b4642f63093c414b1833e2d40107">begline</a>:</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;          <a class="code" href="protos_8h.html#abe96ffa6567a4342a28be3cbf540b44d">printf</a> (<span class="stringliteral">&quot;/begline&quot;</span>);</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a0556771866997767489c4da274f15aa4">endline</a>:</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;          <a class="code" href="protos_8h.html#abe96ffa6567a4342a28be3cbf540b44d">printf</a> (<span class="stringliteral">&quot;/endline&quot;</span>);</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a5ca3d8a56cc5259243bcaffedd070287">on_failure_jump</a>:</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;          <a class="code" href="regex_8c.html#a8ac5145ba8937bfc01db164ee9b4dfb8">extract_number_and_incr</a> (&amp;mcnt, &amp;p);</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;          <a class="code" href="protos_8h.html#abe96ffa6567a4342a28be3cbf540b44d">printf</a> (<span class="stringliteral">&quot;/on_failure_jump to %d&quot;</span>, p + mcnt - start);</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118adbebd35172fa7358845d6dd61727883b">on_failure_keep_string_jump</a>:</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;          <a class="code" href="regex_8c.html#a8ac5145ba8937bfc01db164ee9b4dfb8">extract_number_and_incr</a> (&amp;mcnt, &amp;p);</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;          <a class="code" href="protos_8h.html#abe96ffa6567a4342a28be3cbf540b44d">printf</a> (<span class="stringliteral">&quot;/on_failure_keep_string_jump to %d&quot;</span>, p + mcnt - start);</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a3918fb85c0fd4b2f8c84afad14836eba">dummy_failure_jump</a>:</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;          <a class="code" href="regex_8c.html#a8ac5145ba8937bfc01db164ee9b4dfb8">extract_number_and_incr</a> (&amp;mcnt, &amp;p);</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;          <a class="code" href="protos_8h.html#abe96ffa6567a4342a28be3cbf540b44d">printf</a> (<span class="stringliteral">&quot;/dummy_failure_jump to %d&quot;</span>, p + mcnt - start);</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118ae96f67086c4f61cc6fd32b6b493dc17f">push_dummy_failure</a>:</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;          <a class="code" href="protos_8h.html#abe96ffa6567a4342a28be3cbf540b44d">printf</a> (<span class="stringliteral">&quot;/push_dummy_failure&quot;</span>);</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a54819e2968ab91bf6ad492f131d7f37b">maybe_pop_jump</a>:</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;          <a class="code" href="regex_8c.html#a8ac5145ba8937bfc01db164ee9b4dfb8">extract_number_and_incr</a> (&amp;mcnt, &amp;p);</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;          <a class="code" href="protos_8h.html#abe96ffa6567a4342a28be3cbf540b44d">printf</a> (<span class="stringliteral">&quot;/maybe_pop_jump to %d&quot;</span>, p + mcnt - start);</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a24cdcea4f39ca8613374deb4bfe5b2cb">pop_failure_jump</a>:</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;          <a class="code" href="regex_8c.html#a8ac5145ba8937bfc01db164ee9b4dfb8">extract_number_and_incr</a> (&amp;mcnt, &amp;p);</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;          <a class="code" href="protos_8h.html#abe96ffa6567a4342a28be3cbf540b44d">printf</a> (<span class="stringliteral">&quot;/pop_failure_jump to %d&quot;</span>, p + mcnt - start);</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a2b75b8e92a52c848de16544d9ceb08da">jump_past_alt</a>:</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;          <a class="code" href="regex_8c.html#a8ac5145ba8937bfc01db164ee9b4dfb8">extract_number_and_incr</a> (&amp;mcnt, &amp;p);</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;          <a class="code" href="protos_8h.html#abe96ffa6567a4342a28be3cbf540b44d">printf</a> (<span class="stringliteral">&quot;/jump_past_alt to %d&quot;</span>, p + mcnt - start);</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a5a08a3c1fa135350961630d2f9c2b849">jump</a>:</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;          <a class="code" href="regex_8c.html#a8ac5145ba8937bfc01db164ee9b4dfb8">extract_number_and_incr</a> (&amp;mcnt, &amp;p);</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;          <a class="code" href="protos_8h.html#abe96ffa6567a4342a28be3cbf540b44d">printf</a> (<span class="stringliteral">&quot;/jump to %d&quot;</span>, p + mcnt - start);</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118ae45bee3e6749253a8ba8769646f79734">succeed_n</a>:</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;          <a class="code" href="regex_8c.html#a8ac5145ba8937bfc01db164ee9b4dfb8">extract_number_and_incr</a> (&amp;mcnt, &amp;p);</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;          p1 = p + mcnt;</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;          <a class="code" href="regex_8c.html#a8ac5145ba8937bfc01db164ee9b4dfb8">extract_number_and_incr</a> (&amp;mcnt2, &amp;p);</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;          <a class="code" href="protos_8h.html#abe96ffa6567a4342a28be3cbf540b44d">printf</a> (<span class="stringliteral">&quot;/succeed_n to %d, %d times&quot;</span>, p1 - start, mcnt2);</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a333721a24859c29322c8abdae4159e1b">jump_n</a>:</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;          <a class="code" href="regex_8c.html#a8ac5145ba8937bfc01db164ee9b4dfb8">extract_number_and_incr</a> (&amp;mcnt, &amp;p);</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;          p1 = p + mcnt;</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;          <a class="code" href="regex_8c.html#a8ac5145ba8937bfc01db164ee9b4dfb8">extract_number_and_incr</a> (&amp;mcnt2, &amp;p);</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;          <a class="code" href="protos_8h.html#abe96ffa6567a4342a28be3cbf540b44d">printf</a> (<span class="stringliteral">&quot;/jump_n to %d, %d times&quot;</span>, p1 - start, mcnt2);</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a0f280efb7129538f3b07aa789fc99fa1">set_number_at</a>:</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;          <a class="code" href="regex_8c.html#a8ac5145ba8937bfc01db164ee9b4dfb8">extract_number_and_incr</a> (&amp;mcnt, &amp;p);</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;          p1 = p + mcnt;</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;          <a class="code" href="regex_8c.html#a8ac5145ba8937bfc01db164ee9b4dfb8">extract_number_and_incr</a> (&amp;mcnt2, &amp;p);</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;          <a class="code" href="protos_8h.html#abe96ffa6567a4342a28be3cbf540b44d">printf</a> (<span class="stringliteral">&quot;/set_number_at location %d to %d&quot;</span>, p1 - start, mcnt2);</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a47168d753b8d555d2e89416a4b660da9">wordbound</a>:</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;          <a class="code" href="protos_8h.html#abe96ffa6567a4342a28be3cbf540b44d">printf</a> (<span class="stringliteral">&quot;/wordbound&quot;</span>);</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a9077999caa8f316015aabfd83b3745a0">notwordbound</a>:</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;          <a class="code" href="protos_8h.html#abe96ffa6567a4342a28be3cbf540b44d">printf</a> (<span class="stringliteral">&quot;/notwordbound&quot;</span>);</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118ad88e0028985b6bc61df64cd9578d3f18">wordbeg</a>:</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;          <a class="code" href="protos_8h.html#abe96ffa6567a4342a28be3cbf540b44d">printf</a> (<span class="stringliteral">&quot;/wordbeg&quot;</span>);</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118accd3c02d3bd48af753cf5261bfb084ac">wordend</a>:</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;          <a class="code" href="protos_8h.html#abe96ffa6567a4342a28be3cbf540b44d">printf</a> (<span class="stringliteral">&quot;/wordend&quot;</span>);</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;<span class="preprocessor">#ifdef emacs</span></div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;        <span class="keywordflow">case</span> before_dot:</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;          <a class="code" href="protos_8h.html#abe96ffa6567a4342a28be3cbf540b44d">printf</a> (<span class="stringliteral">&quot;/before_dot&quot;</span>);</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;        <span class="keywordflow">case</span> at_dot:</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;          <a class="code" href="protos_8h.html#abe96ffa6567a4342a28be3cbf540b44d">printf</a> (<span class="stringliteral">&quot;/at_dot&quot;</span>);</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;        <span class="keywordflow">case</span> after_dot:</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;          <a class="code" href="protos_8h.html#abe96ffa6567a4342a28be3cbf540b44d">printf</a> (<span class="stringliteral">&quot;/after_dot&quot;</span>);</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;        <span class="keywordflow">case</span> syntaxspec:</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;          <a class="code" href="protos_8h.html#abe96ffa6567a4342a28be3cbf540b44d">printf</a> (<span class="stringliteral">&quot;/syntaxspec&quot;</span>);</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;          mcnt = *p++;</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;          <a class="code" href="protos_8h.html#abe96ffa6567a4342a28be3cbf540b44d">printf</a> (<span class="stringliteral">&quot;/%d&quot;</span>, mcnt);</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;        <span class="keywordflow">case</span> notsyntaxspec:</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;          <a class="code" href="protos_8h.html#abe96ffa6567a4342a28be3cbf540b44d">printf</a> (<span class="stringliteral">&quot;/notsyntaxspec&quot;</span>);</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;          mcnt = *p++;</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;          <a class="code" href="protos_8h.html#abe96ffa6567a4342a28be3cbf540b44d">printf</a> (<span class="stringliteral">&quot;/%d&quot;</span>, mcnt);</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* emacs */</span><span class="preprocessor"></span></div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a26eed2ae578da61bebc7b55e7610cf0b">wordchar</a>:</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;          <a class="code" href="protos_8h.html#abe96ffa6567a4342a28be3cbf540b44d">printf</a> (<span class="stringliteral">&quot;/wordchar&quot;</span>);</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a01398d7bcfdbcb84b318fc65a7ef9c93">notwordchar</a>:</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;          <a class="code" href="protos_8h.html#abe96ffa6567a4342a28be3cbf540b44d">printf</a> (<span class="stringliteral">&quot;/notwordchar&quot;</span>);</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118ab428f43b6557e8dfc45e452a8891b598">begbuf</a>:</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;          <a class="code" href="protos_8h.html#abe96ffa6567a4342a28be3cbf540b44d">printf</a> (<span class="stringliteral">&quot;/begbuf&quot;</span>);</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a4962434097279c747aa6ba59df478775">endbuf</a>:</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;          <a class="code" href="protos_8h.html#abe96ffa6567a4342a28be3cbf540b44d">printf</a> (<span class="stringliteral">&quot;/endbuf&quot;</span>);</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;        <span class="keywordflow">default</span>:</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;          <a class="code" href="protos_8h.html#abe96ffa6567a4342a28be3cbf540b44d">printf</a> (<span class="stringliteral">&quot;?%d&quot;</span>, *(p-1));</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;        }</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;      putchar (<span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    }</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;  <a class="code" href="protos_8h.html#abe96ffa6567a4342a28be3cbf540b44d">printf</a> (<span class="stringliteral">&quot;%d:\tend of pattern.\n&quot;</span>, p - start);</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;}</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l00901"></a><span class="lineno"><a class="line" href="regex_8c.html#adf25dd5c7e53555ae24ccb0cc96f36c8">  901</a></span>&#160;<a class="code" href="regex_8c.html#adf25dd5c7e53555ae24ccb0cc96f36c8">print_compiled_pattern</a> (bufp)</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;    <span class="keyword">struct </span><a class="code" href="structre__pattern__buffer.html">re_pattern_buffer</a> *bufp;</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;{</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code" href="structre__pattern__buffer.html#a84025dce422d70b263288329274a888d">buffer</a> = bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a84025dce422d70b263288329274a888d">buffer</a>;</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;  <a class="code" href="regex_8c.html#ab4b740d578d91ba3e297f763df3ed390">print_partial_compiled_pattern</a> (buffer, buffer + bufp-&gt;<a class="code" href="structre__pattern__buffer.html#ae53a42d0d93039e283f1d937e6e710a7">used</a>);</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;  <a class="code" href="protos_8h.html#abe96ffa6567a4342a28be3cbf540b44d">printf</a> (<span class="stringliteral">&quot;%ld bytes used/%ld bytes allocated.\n&quot;</span>,</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;          bufp-&gt;<a class="code" href="structre__pattern__buffer.html#ae53a42d0d93039e283f1d937e6e710a7">used</a>, bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a5f2c847d392dbddc45d478729a091ab0">allocated</a>);</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;  <span class="keywordflow">if</span> (bufp-&gt;<a class="code" href="structre__pattern__buffer.html#af3578c777dbece95d6c8a1e10a6a7a5a">fastmap_accurate</a> &amp;&amp; bufp-&gt;<a class="code" href="structre__pattern__buffer.html#aa356b59c2846045ffba6d3d84dc7cbac">fastmap</a>)</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    {</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;      <a class="code" href="protos_8h.html#abe96ffa6567a4342a28be3cbf540b44d">printf</a> (<span class="stringliteral">&quot;fastmap: &quot;</span>);</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;      <a class="code" href="regex_8c.html#a8330d3aebbb4066c8c7665fc6abcf9e5">print_fastmap</a> (bufp-&gt;<a class="code" href="structre__pattern__buffer.html#aa356b59c2846045ffba6d3d84dc7cbac">fastmap</a>);</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    }</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;  <a class="code" href="protos_8h.html#abe96ffa6567a4342a28be3cbf540b44d">printf</a> (<span class="stringliteral">&quot;re_nsub: %d\t&quot;</span>, bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a4dfc1ce26c896695b77854da7d607ec8">re_nsub</a>);</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;  <a class="code" href="protos_8h.html#abe96ffa6567a4342a28be3cbf540b44d">printf</a> (<span class="stringliteral">&quot;regs_alloc: %d\t&quot;</span>, bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a5d2b01dbcd7226fbfe60d755825d73e3">regs_allocated</a>);</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;  <a class="code" href="protos_8h.html#abe96ffa6567a4342a28be3cbf540b44d">printf</a> (<span class="stringliteral">&quot;can_be_null: %d\t&quot;</span>, bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a51c16ef7ad52b4e75d6e3eee7556e84e">can_be_null</a>);</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;  <a class="code" href="protos_8h.html#abe96ffa6567a4342a28be3cbf540b44d">printf</a> (<span class="stringliteral">&quot;newline_anchor: %d\n&quot;</span>, bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a8d2bf18d174b513250c8dab7a01f156e">newline_anchor</a>);</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;  <a class="code" href="protos_8h.html#abe96ffa6567a4342a28be3cbf540b44d">printf</a> (<span class="stringliteral">&quot;no_sub: %d\t&quot;</span>, bufp-&gt;<a class="code" href="structre__pattern__buffer.html#af65d7e2e2a760b6a14546fb9084843aa">no_sub</a>);</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;  <a class="code" href="protos_8h.html#abe96ffa6567a4342a28be3cbf540b44d">printf</a> (<span class="stringliteral">&quot;not_bol: %d\t&quot;</span>, bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a1e21330e18a5a87f4803932c4af32881">not_bol</a>);</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;  <a class="code" href="protos_8h.html#abe96ffa6567a4342a28be3cbf540b44d">printf</a> (<span class="stringliteral">&quot;not_eol: %d\t&quot;</span>, bufp-&gt;<a class="code" href="structre__pattern__buffer.html#ab6ca2aea079c8ac7c399dfbac8b8d3a4">not_eol</a>);</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;  <a class="code" href="protos_8h.html#abe96ffa6567a4342a28be3cbf540b44d">printf</a> (<span class="stringliteral">&quot;syntax: %lx\n&quot;</span>, bufp-&gt;<a class="code" href="structre__pattern__buffer.html#af3e24760a69608d163661c6d8977c358">syntax</a>);</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;  <span class="comment">/* Perhaps we should print the translate table?  */</span></div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;}</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l00929"></a><span class="lineno"><a class="line" href="regex_8c.html#ab4f01ef78af4e14600c1cd08742ab9a2">  929</a></span>&#160;<a class="code" href="regex_8c.html#ab4f01ef78af4e14600c1cd08742ab9a2">print_double_string</a> (where, string1, size1, string2, size2)</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *where;</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *string1;</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *string2;</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    <span class="keywordtype">int</span> size1;</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    <span class="keywordtype">int</span> size2;</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;{</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;  <span class="keywordtype">int</span> this_char;</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;  <span class="keywordflow">if</span> (where == <a class="code" href="regex_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    <a class="code" href="protos_8h.html#abe96ffa6567a4342a28be3cbf540b44d">printf</a> (<span class="stringliteral">&quot;(null)&quot;</span>);</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    {</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="regex_8c.html#a490c47f87b80eb6afdb77510567659e4">FIRST_STRING_P</a> (where))</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;        {</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;          <span class="keywordflow">for</span> (this_char = where - string1; this_char &lt; size1; this_char++)</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;            putchar (string1[this_char]);</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;          where = string2;</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;        }</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;      <span class="keywordflow">for</span> (this_char = where - string2; this_char &lt; size2; this_char++)</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;        putchar (string2[this_char]);</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    }</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;}</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l00956"></a><span class="lineno"><a class="line" href="regex_8c.html#a1d954fcb2022a97e1301ad74a0a8ba94">  956</a></span>&#160;<a class="code" href="regex_8c.html#a1d954fcb2022a97e1301ad74a0a8ba94">printchar</a> (c)</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;     <span class="keywordtype">int</span> c;</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;{</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;  putc (c, stderr);</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;}</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;<span class="preprocessor">#else </span><span class="comment">/* not DEBUG */</span><span class="preprocessor"></span></div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;<span class="preprocessor">#undef assert</span></div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;<span class="preprocessor">#define assert(e)</span></div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;<span class="preprocessor">#define DEBUG_STATEMENT(e)</span></div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;<span class="preprocessor">#define DEBUG_PRINT1(x)</span></div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;<span class="preprocessor">#define DEBUG_PRINT2(x1, x2)</span></div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;<span class="preprocessor">#define DEBUG_PRINT3(x1, x2, x3)</span></div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;<span class="preprocessor">#define DEBUG_PRINT4(x1, x2, x3, x4)</span></div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;<span class="preprocessor">#define DEBUG_PRINT_COMPILED_PATTERN(p, s, e)</span></div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;<span class="preprocessor">#define DEBUG_PRINT_DOUBLE_STRING(w, s1, sz1, s2, sz2)</span></div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* not DEBUG */</span><span class="preprocessor"></span></div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;<span class="comment">/* Set by `re_set_syntax&#39; to the current regexp syntax to recognize.  Can</span></div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;<span class="comment">   also be assigned to arbitrarily: each pattern buffer stores its own</span></div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;<span class="comment">   syntax, so it can be changed between regex compilations.  */</span></div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;<span class="comment">/* This has no initializer because initialized variables in Emacs</span></div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;<span class="comment">   become read-only after dumping.  */</span></div><div class="line"><a name="l00982"></a><span class="lineno"><a class="line" href="regex_8c.html#abdc5e67bbb6a48b740a95aef2bc3f5f2">  982</a></span>&#160;<a class="code" href="__regex_8h.html#a7e0565199a2fabaca3d67a5a44fc4229">reg_syntax_t</a> <a class="code" href="regex_8c.html#abdc5e67bbb6a48b740a95aef2bc3f5f2">re_syntax_options</a>;</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;<span class="comment">/* Specify the precise syntax of regexps for compilation.  This provides</span></div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;<span class="comment">   for compatibility for various utilities which historically have</span></div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;<span class="comment">   different, incompatible syntaxes.</span></div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;<span class="comment">   The argument SYNTAX is a bit mask comprised of the various bits</span></div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;<span class="comment">   defined in regex.h.  We return the old syntax.  */</span></div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;<a class="code" href="__regex_8h.html#a7e0565199a2fabaca3d67a5a44fc4229">reg_syntax_t</a></div><div class="line"><a name="l00993"></a><span class="lineno"><a class="line" href="regex_8c.html#ad7a880e03677a7961ddf81cdc73e8fb4">  993</a></span>&#160;<a class="code" href="regex_8c.html#ad7a880e03677a7961ddf81cdc73e8fb4">re_set_syntax</a> (syntax)</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    <a class="code" href="__regex_8h.html#a7e0565199a2fabaca3d67a5a44fc4229">reg_syntax_t</a> <a class="code" href="structre__pattern__buffer.html#af3e24760a69608d163661c6d8977c358">syntax</a>;</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;{</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;  <a class="code" href="__regex_8h.html#a7e0565199a2fabaca3d67a5a44fc4229">reg_syntax_t</a> ret = <a class="code" href="regex_8c.html#abdc5e67bbb6a48b740a95aef2bc3f5f2">re_syntax_options</a>;</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;  re_syntax_options = <a class="code" href="structre__pattern__buffer.html#af3e24760a69608d163661c6d8977c358">syntax</a>;</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;  <span class="keywordflow">if</span> (syntax &amp; <a class="code" href="__regex_8h.html#a8b5102c6c1d783f324012804b26e82cb">RE_DEBUG</a>)</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;    debug = 1;</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (debug) <span class="comment">/* was on but now is not */</span></div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    debug = 0;</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* DEBUG */</span><span class="preprocessor"></span></div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;  <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;}</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;<span class="comment">/* This table gives an error message for each of the error codes listed</span></div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;<span class="comment">   in regex.h.  Obviously the order here has to be same as there.</span></div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;<span class="comment">   POSIX doesn&#39;t require that we do anything for REG_NOERROR,</span></div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;<span class="comment">   but why not be nice?  */</span></div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;</div><div class="line"><a name="l01013"></a><span class="lineno"><a class="line" href="regex_8c.html#aa8fde59f5cfe5f470bcfbfd53cd67cf2"> 1013</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *re_error_msgid[] =</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;  {</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    <a class="code" href="regex_8c.html#a1a0ef2e42374f90a13299cc06f437847">gettext_noop</a> (<span class="stringliteral">&quot;Success&quot;</span>),   <span class="comment">/* REG_NOERROR */</span></div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;    <a class="code" href="regex_8c.html#a1a0ef2e42374f90a13299cc06f437847">gettext_noop</a> (<span class="stringliteral">&quot;No match&quot;</span>),  <span class="comment">/* REG_NOMATCH */</span></div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    <a class="code" href="regex_8c.html#a1a0ef2e42374f90a13299cc06f437847">gettext_noop</a> (<span class="stringliteral">&quot;Invalid regular expression&quot;</span>), <span class="comment">/* REG_BADPAT */</span></div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    <a class="code" href="regex_8c.html#a1a0ef2e42374f90a13299cc06f437847">gettext_noop</a> (<span class="stringliteral">&quot;Invalid collation character&quot;</span>), <span class="comment">/* REG_ECOLLATE */</span></div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    <a class="code" href="regex_8c.html#a1a0ef2e42374f90a13299cc06f437847">gettext_noop</a> (<span class="stringliteral">&quot;Invalid character class name&quot;</span>), <span class="comment">/* REG_ECTYPE */</span></div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    <a class="code" href="regex_8c.html#a1a0ef2e42374f90a13299cc06f437847">gettext_noop</a> (<span class="stringliteral">&quot;Trailing backslash&quot;</span>), <span class="comment">/* REG_EESCAPE */</span></div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;    <a class="code" href="regex_8c.html#a1a0ef2e42374f90a13299cc06f437847">gettext_noop</a> (<span class="stringliteral">&quot;Invalid back reference&quot;</span>), <span class="comment">/* REG_ESUBREG */</span></div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    <a class="code" href="regex_8c.html#a1a0ef2e42374f90a13299cc06f437847">gettext_noop</a> (<span class="stringliteral">&quot;Unmatched [ or [^&quot;</span>), <span class="comment">/* REG_EBRACK */</span></div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    <a class="code" href="regex_8c.html#a1a0ef2e42374f90a13299cc06f437847">gettext_noop</a> (<span class="stringliteral">&quot;Unmatched ( or \\(&quot;</span>), <span class="comment">/* REG_EPAREN */</span></div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;    <a class="code" href="regex_8c.html#a1a0ef2e42374f90a13299cc06f437847">gettext_noop</a> (<span class="stringliteral">&quot;Unmatched \\{&quot;</span>), <span class="comment">/* REG_EBRACE */</span></div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    <a class="code" href="regex_8c.html#a1a0ef2e42374f90a13299cc06f437847">gettext_noop</a> (<span class="stringliteral">&quot;Invalid content of \\{\\}&quot;</span>), <span class="comment">/* REG_BADBR */</span></div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    <a class="code" href="regex_8c.html#a1a0ef2e42374f90a13299cc06f437847">gettext_noop</a> (<span class="stringliteral">&quot;Invalid range end&quot;</span>), <span class="comment">/* REG_ERANGE */</span></div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;    <a class="code" href="regex_8c.html#a1a0ef2e42374f90a13299cc06f437847">gettext_noop</a> (<span class="stringliteral">&quot;Memory exhausted&quot;</span>), <span class="comment">/* REG_ESPACE */</span></div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;    <a class="code" href="regex_8c.html#a1a0ef2e42374f90a13299cc06f437847">gettext_noop</a> (<span class="stringliteral">&quot;Invalid preceding regular expression&quot;</span>), <span class="comment">/* REG_BADRPT */</span></div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    <a class="code" href="regex_8c.html#a1a0ef2e42374f90a13299cc06f437847">gettext_noop</a> (<span class="stringliteral">&quot;Premature end of regular expression&quot;</span>), <span class="comment">/* REG_EEND */</span></div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;    <a class="code" href="regex_8c.html#a1a0ef2e42374f90a13299cc06f437847">gettext_noop</a> (<span class="stringliteral">&quot;Regular expression too big&quot;</span>), <span class="comment">/* REG_ESIZE */</span></div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;    <a class="code" href="regex_8c.html#a1a0ef2e42374f90a13299cc06f437847">gettext_noop</a> (<span class="stringliteral">&quot;Unmatched ) or \\)&quot;</span>), <span class="comment">/* REG_ERPAREN */</span></div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;  };</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;<span class="comment">/* Avoiding alloca during matching, to placate r_alloc.  */</span></div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;<span class="comment">/* Define MATCH_MAY_ALLOCATE unless we need to make sure that the</span></div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;<span class="comment">   searching and matching functions should not call alloca.  On some</span></div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;<span class="comment">   systems, alloca is implemented in terms of malloc, and if we&#39;re</span></div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;<span class="comment">   using the relocating allocator routines, then malloc could cause a</span></div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;<span class="comment">   relocation, which might (if the strings being searched are in the</span></div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;<span class="comment">   ralloc heap) shift the data out from underneath the regexp</span></div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;<span class="comment">   routines.</span></div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;<span class="comment">   Here&#39;s another reason to avoid allocation: Emacs</span></div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;<span class="comment">   processes input from X in a signal handler; processing X input may</span></div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;<span class="comment">   call malloc; if input arrives while a matching routine is calling</span></div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;<span class="comment">   malloc, then we&#39;re scrod.  But Emacs can&#39;t just block input while</span></div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;<span class="comment">   calling matching routines; then we don&#39;t notice interrupts when</span></div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;<span class="comment">   they come in.  So, Emacs blocks input around all regexp calls</span></div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;<span class="comment">   except the matching calls, which it leaves unprotected, in the</span></div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;<span class="comment">   faith that they will not malloc.  */</span></div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;<span class="comment">/* Normally, this is fine.  */</span></div><div class="line"><a name="l01054"></a><span class="lineno"><a class="line" href="regex_8c.html#ad211d540a618e60d26c61ae8b711a0e2"> 1054</a></span>&#160;<span class="preprocessor">#define MATCH_MAY_ALLOCATE</span></div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;<span class="comment">/* When using GNU C, we are not REALLY using the C alloca, no matter</span></div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;<span class="comment">   what config.h may say.  So don&#39;t take precautions for it.  */</span></div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;<span class="preprocessor">#ifdef __GNUC__</span></div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;<span class="preprocessor">#undef C_ALLOCA</span></div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;<span class="comment">/* The match routines may not allocate if (1) they would do it with malloc</span></div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;<span class="comment">   and (2) it&#39;s not safe for them to use malloc.</span></div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;<span class="comment">   Note that if REL_ALLOC is defined, matching would not use malloc for the</span></div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;<span class="comment">   failure stack, but we would still use it for the register vectors;</span></div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;<span class="comment">   so REL_ALLOC should not affect this.  */</span></div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;<span class="preprocessor">#if (defined (C_ALLOCA) || defined (REGEX_MALLOC)) &amp;&amp; defined (emacs)</span></div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;<span class="preprocessor">#undef MATCH_MAY_ALLOCATE</span></div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;<span class="comment">/* Failure stack declarations and macros; both re_compile_fastmap and</span></div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;<span class="comment">   re_match_2 use a failure stack.  These have to be macros because of</span></div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;<span class="comment">   REGEX_ALLOCATE_STACK.  */</span></div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;<span class="comment">/* Number of failure points for which to initially allocate space</span></div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;<span class="comment">   when matching.  If this number is exceeded, we allocate more</span></div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;<span class="comment">   space, so it is not a hard limit.  */</span></div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;<span class="preprocessor">#ifndef INIT_FAILURE_ALLOC</span></div><div class="line"><a name="l01081"></a><span class="lineno"><a class="line" href="regex_8c.html#aeac2a61705646c181c38a42de6d71b7a"> 1081</a></span>&#160;<span class="preprocessor">#define INIT_FAILURE_ALLOC 5</span></div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;<span class="comment">/* Roughly the maximum number of failure points on the stack.  Would be</span></div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;<span class="comment">   exactly that if always used MAX_FAILURE_ITEMS items each time we failed.</span></div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;<span class="comment">   This is a variable only so users of regex can assign to it; we never</span></div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;<span class="comment">   change it ourselves.  */</span></div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;<span class="preprocessor">#ifdef INT_IS_16BIT</span></div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;<span class="preprocessor">#if defined (MATCH_MAY_ALLOCATE)</span></div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;<span class="comment">/* 4400 was enough to cause a crash on Alpha OSF/1,</span></div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;<span class="comment">   whose default stack limit is 2mb.  */</span></div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;<span class="keywordtype">long</span> <span class="keywordtype">int</span> re_max_failures = 4000;</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;<span class="keywordtype">long</span> <span class="keywordtype">int</span> re_max_failures = 2000;</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;<span class="keyword">union </span><a class="code" href="unionfail__stack__elt.html">fail_stack_elt</a></div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;{</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code" href="unionfail__stack__elt.html#afd2648cc33c85dbb2e955d556739abae">pointer</a>;</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;  <span class="keywordtype">long</span> <span class="keywordtype">int</span> <a class="code" href="unionfail__stack__elt.html#a87dada28c05860cdc1656a6d49f8f787">integer</a>;</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;};</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;<span class="keyword">typedef</span> <span class="keyword">union </span><a class="code" href="unionfail__stack__elt.html">fail_stack_elt</a> fail_stack_elt_t;</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct</span></div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;{</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;  fail_stack_elt_t *stack;</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span> size;</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span> avail;              <span class="comment">/* Offset of next open position.  */</span></div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;} <a class="code" href="structfail__stack__type.html">fail_stack_type</a>;</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;<span class="preprocessor">#else </span><span class="comment">/* not INT_IS_16BIT */</span><span class="preprocessor"></span></div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;<span class="preprocessor">#if defined (MATCH_MAY_ALLOCATE)</span></div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;<span class="comment">/* 4400 was enough to cause a crash on Alpha OSF/1,</span></div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;<span class="comment">   whose default stack limit is 2mb.  */</span></div><div class="line"><a name="l01119"></a><span class="lineno"><a class="line" href="regex_8c.html#a22b8c11c82d877fbf919376da65e62ca"> 1119</a></span>&#160;<span class="keywordtype">int</span> re_max_failures = 20000;</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;<span class="keywordtype">int</span> re_max_failures = 2000;</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;</div><div class="line"><a name="l01124"></a><span class="lineno"><a class="line" href="unionfail__stack__elt.html"> 1124</a></span>&#160;<span class="keyword">union </span><a class="code" href="unionfail__stack__elt.html">fail_stack_elt</a></div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;{</div><div class="line"><a name="l01126"></a><span class="lineno"><a class="line" href="unionfail__stack__elt.html#afd2648cc33c85dbb2e955d556739abae"> 1126</a></span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code" href="unionfail__stack__elt.html#afd2648cc33c85dbb2e955d556739abae">pointer</a>;</div><div class="line"><a name="l01127"></a><span class="lineno"><a class="line" href="unionfail__stack__elt.html#a87dada28c05860cdc1656a6d49f8f787"> 1127</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="unionfail__stack__elt.html#a87dada28c05860cdc1656a6d49f8f787">integer</a>;</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;};</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;<span class="keyword">typedef</span> <span class="keyword">union </span><a class="code" href="unionfail__stack__elt.html">fail_stack_elt</a> fail_stack_elt_t;</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;</div><div class="line"><a name="l01132"></a><span class="lineno"><a class="line" href="structfail__stack__type.html"> 1132</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct</span></div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;{</div><div class="line"><a name="l01134"></a><span class="lineno"><a class="line" href="structfail__stack__type.html#a810ddd6610b10fddebcfbf675f7800c8"> 1134</a></span>&#160;  fail_stack_elt_t *<a class="code" href="structfail__stack__type.html#a810ddd6610b10fddebcfbf675f7800c8">stack</a>;</div><div class="line"><a name="l01135"></a><span class="lineno"><a class="line" href="structfail__stack__type.html#ae51a629391dd5d2cb07bffc95e545282"> 1135</a></span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="structfail__stack__type.html#ae51a629391dd5d2cb07bffc95e545282">size</a>;</div><div class="line"><a name="l01136"></a><span class="lineno"><a class="line" href="structfail__stack__type.html#a1e3d4256deebf37a4528f58d3d261854"> 1136</a></span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="structfail__stack__type.html#a1e3d4256deebf37a4528f58d3d261854">avail</a>;                       <span class="comment">/* Offset of next open position.  */</span></div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;} <a class="code" href="structfail__stack__type.html">fail_stack_type</a>;</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* INT_IS_16BIT */</span><span class="preprocessor"></span></div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;</div><div class="line"><a name="l01141"></a><span class="lineno"><a class="line" href="regex_8c.html#a222a4648230cba6a1801e51b4e2ced77"> 1141</a></span>&#160;<span class="preprocessor">#define FAIL_STACK_EMPTY()     (fail_stack.avail == 0)</span></div><div class="line"><a name="l01142"></a><span class="lineno"><a class="line" href="regex_8c.html#a7218502745eb68919c81cf41be91f7e8"> 1142</a></span>&#160;<span class="preprocessor">#define FAIL_STACK_PTR_EMPTY() (fail_stack_ptr-&gt;avail == 0)</span></div><div class="line"><a name="l01143"></a><span class="lineno"><a class="line" href="regex_8c.html#ae2c89df0b8a642151867be8aaab52b44"> 1143</a></span>&#160;<span class="preprocessor">#define FAIL_STACK_FULL()      (fail_stack.avail == fail_stack.size)</span></div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;<span class="comment">/* Define macros to initialize and free the failure stack.</span></div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;<span class="comment">   Do `return -2&#39; if the alloc fails.  */</span></div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;<span class="preprocessor">#ifdef MATCH_MAY_ALLOCATE</span></div><div class="line"><a name="l01150"></a><span class="lineno"><a class="line" href="regex_8c.html#a0a97c6a1ac97ed1288cb47dceabc56df"> 1150</a></span>&#160;<span class="preprocessor">#define INIT_FAIL_STACK()                                               \</span></div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;<span class="preprocessor">  do {                                                                  \</span></div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;<span class="preprocessor">    fail_stack.stack = (fail_stack_elt_t *)                             \</span></div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;<span class="preprocessor">      REGEX_ALLOCATE_STACK (INIT_FAILURE_ALLOC * sizeof (fail_stack_elt_t));    \</span></div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;<span class="preprocessor">                                                                        \</span></div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;<span class="preprocessor">    if (fail_stack.stack == NULL)                                       \</span></div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;<span class="preprocessor">      return -2;                                                        \</span></div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;<span class="preprocessor">                                                                        \</span></div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;<span class="preprocessor">    fail_stack.size = INIT_FAILURE_ALLOC;                               \</span></div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;<span class="preprocessor">    fail_stack.avail = 0;                                               \</span></div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;<span class="preprocessor">  } while (0)</span></div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;</div><div class="line"><a name="l01162"></a><span class="lineno"><a class="line" href="regex_8c.html#af9f8d0785dfac45a23d8d8fdb4df1629"> 1162</a></span>&#160;<span class="preprocessor">#define RESET_FAIL_STACK()  REGEX_FREE_STACK (fail_stack.stack)</span></div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;<span class="preprocessor">#define INIT_FAIL_STACK()                                               \</span></div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;<span class="preprocessor">  do {                                                                  \</span></div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;<span class="preprocessor">    fail_stack.avail = 0;                                               \</span></div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;<span class="preprocessor">  } while (0)</span></div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;<span class="preprocessor">#define RESET_FAIL_STACK()</span></div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;<span class="comment">/* Double the size of FAIL_STACK, up to approximately `re_max_failures&#39; items.</span></div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;<span class="comment">   Return 1 if succeeds, and 0 if either ran out of memory</span></div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;<span class="comment">   allocating space for it or it was already too large.</span></div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;<span class="comment">   REGEX_REALLOCATE_STACK requires `destination&#39; be declared.   */</span></div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;</div><div class="line"><a name="l01180"></a><span class="lineno"><a class="line" href="regex_8c.html#a138c79633bb68c93b6f7b7a31989fd0c"> 1180</a></span>&#160;<span class="preprocessor">#define DOUBLE_FAIL_STACK(fail_stack)                                   \</span></div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;<span class="preprocessor">  ((fail_stack).size &gt; (unsigned) (re_max_failures * MAX_FAILURE_ITEMS) \</span></div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;<span class="preprocessor">   ? 0                                                                  \</span></div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;<span class="preprocessor">   : ((fail_stack).stack = (fail_stack_elt_t *)                         \</span></div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;<span class="preprocessor">        REGEX_REALLOCATE_STACK ((fail_stack).stack,                     \</span></div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;<span class="preprocessor">          (fail_stack).size * sizeof (fail_stack_elt_t),                \</span></div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;<span class="preprocessor">          ((fail_stack).size &lt;&lt; 1) * sizeof (fail_stack_elt_t)),        \</span></div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;<span class="preprocessor">                                                                        \</span></div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;<span class="preprocessor">      (fail_stack).stack == NULL                                        \</span></div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;<span class="preprocessor">      ? 0                                                               \</span></div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;<span class="preprocessor">      : ((fail_stack).size &lt;&lt;= 1,                                       \</span></div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;<span class="preprocessor">         1)))</span></div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;<span class="comment">/* Push pointer POINTER on FAIL_STACK.</span></div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;<span class="comment">   Return 1 if was able to do so and 0 if ran out of memory allocating</span></div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;<span class="comment">   space to do so.  */</span></div><div class="line"><a name="l01197"></a><span class="lineno"><a class="line" href="regex_8c.html#a78ae8e3bdec768f7fd9a75b31109fa8d"> 1197</a></span>&#160;<span class="preprocessor">#define PUSH_PATTERN_OP(POINTER, FAIL_STACK)                            \</span></div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;<span class="preprocessor">  ((FAIL_STACK_FULL ()                                                  \</span></div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;<span class="preprocessor">    &amp;&amp; !DOUBLE_FAIL_STACK (FAIL_STACK))                                 \</span></div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;<span class="preprocessor">   ? 0                                                                  \</span></div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;<span class="preprocessor">   : ((FAIL_STACK).stack[(FAIL_STACK).avail++].pointer = POINTER,       \</span></div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;<span class="preprocessor">      1))</span></div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;<span class="comment">/* Push a pointer value onto the failure stack.</span></div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;<span class="comment">   Assumes the variable `fail_stack&#39;.  Probably should only</span></div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;<span class="comment">   be called from within `PUSH_FAILURE_POINT&#39;.  */</span></div><div class="line"><a name="l01207"></a><span class="lineno"><a class="line" href="regex_8c.html#a880b2917876e9b98f61d985cef56109e"> 1207</a></span>&#160;<span class="preprocessor">#define PUSH_FAILURE_POINTER(item)                                      \</span></div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;<span class="preprocessor">  fail_stack.stack[fail_stack.avail++].pointer = (unsigned char *) (item)</span></div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;<span class="comment">/* This pushes an integer-valued item onto the failure stack.</span></div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;<span class="comment">   Assumes the variable `fail_stack&#39;.  Probably should only</span></div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;<span class="comment">   be called from within `PUSH_FAILURE_POINT&#39;.  */</span></div><div class="line"><a name="l01213"></a><span class="lineno"><a class="line" href="regex_8c.html#ab92b2a4088d04570c444979b2c7f909c"> 1213</a></span>&#160;<span class="preprocessor">#define PUSH_FAILURE_INT(item)                                  \</span></div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;<span class="preprocessor">  fail_stack.stack[fail_stack.avail++].integer = (item)</span></div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;<span class="comment">/* Push a fail_stack_elt_t value onto the failure stack.</span></div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;<span class="comment">   Assumes the variable `fail_stack&#39;.  Probably should only</span></div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;<span class="comment">   be called from within `PUSH_FAILURE_POINT&#39;.  */</span></div><div class="line"><a name="l01219"></a><span class="lineno"><a class="line" href="regex_8c.html#ad2265d63a0d1735021b318f4726920f9"> 1219</a></span>&#160;<span class="preprocessor">#define PUSH_FAILURE_ELT(item)                                  \</span></div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;<span class="preprocessor">  fail_stack.stack[fail_stack.avail++] =  (item)</span></div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;<span class="comment">/* These three POP... operations complement the three PUSH... operations.</span></div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;<span class="comment">   All assume that `fail_stack&#39; is nonempty.  */</span></div><div class="line"><a name="l01224"></a><span class="lineno"><a class="line" href="regex_8c.html#abde0e78c06d9082788a9f5f0a08140cd"> 1224</a></span>&#160;<span class="preprocessor">#define POP_FAILURE_POINTER() fail_stack.stack[--fail_stack.avail].pointer</span></div><div class="line"><a name="l01225"></a><span class="lineno"><a class="line" href="regex_8c.html#a9f6a9e7cd2ec7f1a660dbdad98f7ccd3"> 1225</a></span>&#160;<span class="preprocessor">#define POP_FAILURE_INT() fail_stack.stack[--fail_stack.avail].integer</span></div><div class="line"><a name="l01226"></a><span class="lineno"><a class="line" href="regex_8c.html#a3dd24cbefa49fcb9c198ead90fed08bb"> 1226</a></span>&#160;<span class="preprocessor">#define POP_FAILURE_ELT() fail_stack.stack[--fail_stack.avail]</span></div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;<span class="comment">/* Used to omit pushing failure point id&#39;s when we&#39;re not debugging.  */</span></div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div><div class="line"><a name="l01230"></a><span class="lineno"><a class="line" href="regex_8c.html#adea1a0b5dbec3d6583366d6aefda1db6"> 1230</a></span>&#160;<span class="preprocessor">#define DEBUG_PUSH PUSH_FAILURE_INT</span></div><div class="line"><a name="l01231"></a><span class="lineno"><a class="line" href="regex_8c.html#a0f6414b702d4cdb7c696daf16ff46267"> 1231</a></span>&#160;<span class="preprocessor">#define DEBUG_POP(item_addr) (item_addr)-&gt;integer = POP_FAILURE_INT ()</span></div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;<span class="preprocessor">#define DEBUG_PUSH(item)</span></div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;<span class="preprocessor">#define DEBUG_POP(item_addr)</span></div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;<span class="comment">/* Push the information about the state we will need</span></div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;<span class="comment">   if we ever fail back to it.</span></div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;<span class="comment">   Requires variables fail_stack, regstart, regend, reg_info, and</span></div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;<span class="comment">   num_regs be declared.  DOUBLE_FAIL_STACK requires `destination&#39; be</span></div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;<span class="comment">   declared.</span></div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;<span class="comment">   Does `return FAILURE_CODE&#39; if runs out of memory.  */</span></div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;</div><div class="line"><a name="l01247"></a><span class="lineno"><a class="line" href="regex_8c.html#a74904744b0c1f8fe8cb2bf1584da2b3b"> 1247</a></span>&#160;<span class="preprocessor">#define PUSH_FAILURE_POINT(pattern_place, string_place, failure_code)   \</span></div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;<span class="preprocessor">  do {                                                                  \</span></div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;<span class="preprocessor">    char *destination;                                                  \</span></div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;<span class="preprocessor">    </span><span class="comment">/* Must be int, so when we don&#39;t save any registers, the arithmetic \</span></div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;<span class="comment">       of 0 + -1 isn&#39;t done as unsigned.  */</span><span class="preprocessor">                            \</span></div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;<span class="preprocessor">    </span><span class="comment">/* Can&#39;t be int, since there is not a shred of a guarantee that int \</span></div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;<span class="comment">       is wide enough to hold a value of something to which pointer can \</span></div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;<span class="comment">       be assigned */</span><span class="preprocessor">                                                   \</span></div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;<span class="preprocessor">    s_reg_t this_reg;                                                   \</span></div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;<span class="preprocessor">                                                                        \</span></div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;<span class="preprocessor">    DEBUG_STATEMENT (failure_id++);                                     \</span></div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;<span class="preprocessor">    DEBUG_STATEMENT (nfailure_points_pushed++);                         \</span></div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;<span class="preprocessor">    DEBUG_PRINT2 (&quot;\nPUSH_FAILURE_POINT #%u:\n&quot;, failure_id);           \</span></div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;<span class="preprocessor">    DEBUG_PRINT2 (&quot;  Before push, next avail: %d\n&quot;, (fail_stack).avail);\</span></div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;<span class="preprocessor">    DEBUG_PRINT2 (&quot;                     size: %d\n&quot;, (fail_stack).size);\</span></div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;<span class="preprocessor">                                                                        \</span></div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;<span class="preprocessor">    DEBUG_PRINT2 (&quot;  slots needed: %d\n&quot;, NUM_FAILURE_ITEMS);           \</span></div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;<span class="preprocessor">    DEBUG_PRINT2 (&quot;     available: %d\n&quot;, REMAINING_AVAIL_SLOTS);       \</span></div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;<span class="preprocessor">                                                                        \</span></div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;<span class="preprocessor">    </span><span class="comment">/* Ensure we have enough space allocated for what we will push.  */</span><span class="preprocessor"> \</span></div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;<span class="preprocessor">    while (REMAINING_AVAIL_SLOTS &lt; NUM_FAILURE_ITEMS)                   \</span></div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;<span class="preprocessor">      {                                                                 \</span></div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;<span class="preprocessor">        if (!DOUBLE_FAIL_STACK (fail_stack))                            \</span></div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;<span class="preprocessor">          return failure_code;                                          \</span></div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;<span class="preprocessor">                                                                        \</span></div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;<span class="preprocessor">        DEBUG_PRINT2 (&quot;\n  Doubled stack; size now: %d\n&quot;,              \</span></div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;<span class="preprocessor">                       (fail_stack).size);                              \</span></div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;<span class="preprocessor">        DEBUG_PRINT2 (&quot;  slots available: %d\n&quot;, REMAINING_AVAIL_SLOTS);\</span></div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;<span class="preprocessor">      }                                                                 \</span></div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;<span class="preprocessor">                                                                        \</span></div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;<span class="preprocessor">    </span><span class="comment">/* Push the info, starting with the registers.  */</span><span class="preprocessor">                  \</span></div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;<span class="preprocessor">    DEBUG_PRINT1 (&quot;\n&quot;);                                                \</span></div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;<span class="preprocessor">                                                                        \</span></div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;<span class="preprocessor">    if (1)                                                              \</span></div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;<span class="preprocessor">      for (this_reg = lowest_active_reg; this_reg &lt;= highest_active_reg; \</span></div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;<span class="preprocessor">           this_reg++)                                                  \</span></div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;<span class="preprocessor">        {                                                               \</span></div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;<span class="preprocessor">          DEBUG_PRINT2 (&quot;  Pushing reg: %d\n&quot;, this_reg);               \</span></div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;<span class="preprocessor">          DEBUG_STATEMENT (num_regs_pushed++);                          \</span></div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;<span class="preprocessor">                                                                        \</span></div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;<span class="preprocessor">          DEBUG_PRINT2 (&quot;    start: 0x%x\n&quot;, regstart[this_reg]);       \</span></div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;<span class="preprocessor">          PUSH_FAILURE_POINTER (regstart[this_reg]);                    \</span></div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;<span class="preprocessor">                                                                        \</span></div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;<span class="preprocessor">          DEBUG_PRINT2 (&quot;    end: 0x%x\n&quot;, regend[this_reg]);           \</span></div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;<span class="preprocessor">          PUSH_FAILURE_POINTER (regend[this_reg]);                      \</span></div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;<span class="preprocessor">                                                                        \</span></div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;<span class="preprocessor">          DEBUG_PRINT2 (&quot;    info: 0x%x\n      &quot;, reg_info[this_reg]);  \</span></div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;<span class="preprocessor">          DEBUG_PRINT2 (&quot; match_null=%d&quot;,                               \</span></div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;<span class="preprocessor">                        REG_MATCH_NULL_STRING_P (reg_info[this_reg]));  \</span></div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;<span class="preprocessor">          DEBUG_PRINT2 (&quot; active=%d&quot;, IS_ACTIVE (reg_info[this_reg]));  \</span></div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;<span class="preprocessor">          DEBUG_PRINT2 (&quot; matched_something=%d&quot;,                        \</span></div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;<span class="preprocessor">                        MATCHED_SOMETHING (reg_info[this_reg]));        \</span></div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;<span class="preprocessor">          DEBUG_PRINT2 (&quot; ever_matched=%d&quot;,                             \</span></div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;<span class="preprocessor">                        EVER_MATCHED_SOMETHING (reg_info[this_reg]));   \</span></div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;<span class="preprocessor">          DEBUG_PRINT1 (&quot;\n&quot;);                                          \</span></div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;<span class="preprocessor">          PUSH_FAILURE_ELT (reg_info[this_reg].word);                   \</span></div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;<span class="preprocessor">        }                                                               \</span></div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;<span class="preprocessor">                                                                        \</span></div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;<span class="preprocessor">    DEBUG_PRINT2 (&quot;  Pushing  low active reg: %d\n&quot;, lowest_active_reg);\</span></div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;<span class="preprocessor">    PUSH_FAILURE_INT (lowest_active_reg);                               \</span></div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;<span class="preprocessor">                                                                        \</span></div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;<span class="preprocessor">    DEBUG_PRINT2 (&quot;  Pushing high active reg: %d\n&quot;, highest_active_reg);\</span></div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;<span class="preprocessor">    PUSH_FAILURE_INT (highest_active_reg);                              \</span></div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;<span class="preprocessor">                                                                        \</span></div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;<span class="preprocessor">    DEBUG_PRINT2 (&quot;  Pushing pattern 0x%x:\n&quot;, pattern_place);          \</span></div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;<span class="preprocessor">    DEBUG_PRINT_COMPILED_PATTERN (bufp, pattern_place, pend);           \</span></div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;<span class="preprocessor">    PUSH_FAILURE_POINTER (pattern_place);                               \</span></div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;<span class="preprocessor">                                                                        \</span></div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;<span class="preprocessor">    DEBUG_PRINT2 (&quot;  Pushing string 0x%x: `&quot;, string_place);            \</span></div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;<span class="preprocessor">    DEBUG_PRINT_DOUBLE_STRING (string_place, string1, size1, string2,   \</span></div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;<span class="preprocessor">                                 size2);                                \</span></div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;<span class="preprocessor">    DEBUG_PRINT1 (&quot;&#39;\n&quot;);                                               \</span></div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;<span class="preprocessor">    PUSH_FAILURE_POINTER (string_place);                                \</span></div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;<span class="preprocessor">                                                                        \</span></div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;<span class="preprocessor">    DEBUG_PRINT2 (&quot;  Pushing failure id: %u\n&quot;, failure_id);            \</span></div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;<span class="preprocessor">    DEBUG_PUSH (failure_id);                                            \</span></div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;<span class="preprocessor">  } while (0)</span></div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;<span class="comment">/* This is the number of items that are pushed and popped on the stack</span></div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;<span class="comment">   for each register.  */</span></div><div class="line"><a name="l01327"></a><span class="lineno"><a class="line" href="regex_8c.html#acc5ecaf7b97fde5acbc377a7003496d7"> 1327</a></span>&#160;<span class="preprocessor">#define NUM_REG_ITEMS  3</span></div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;<span class="comment">/* Individual items aside from the registers.  */</span></div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div><div class="line"><a name="l01331"></a><span class="lineno"><a class="line" href="regex_8c.html#aa6fc40697161c66c2a8a7c72a9cb5e77"> 1331</a></span>&#160;<span class="preprocessor">#define NUM_NONREG_ITEMS 5 </span><span class="comment">/* Includes failure point id.  */</span><span class="preprocessor"></span></div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;<span class="preprocessor">#define NUM_NONREG_ITEMS 4</span></div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;<span class="comment">/* We push at most this many items on the stack.  */</span></div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;<span class="comment">/* We used to use (num_regs - 1), which is the number of registers</span></div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;<span class="comment">   this regexp will save; but that was changed to 5</span></div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;<span class="comment">   to avoid stack overflow for a regexp with lots of parens.  */</span></div><div class="line"><a name="l01340"></a><span class="lineno"><a class="line" href="regex_8c.html#a9c1cb14ecb36be1c3ff3c5a050ecc561"> 1340</a></span>&#160;<span class="preprocessor">#define MAX_FAILURE_ITEMS (5 * NUM_REG_ITEMS + NUM_NONREG_ITEMS)</span></div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;<span class="comment">/* We actually push this many items.  */</span></div><div class="line"><a name="l01343"></a><span class="lineno"><a class="line" href="regex_8c.html#a6c2bd568049066ea7c22fadaee2c894f"> 1343</a></span>&#160;<span class="preprocessor">#define NUM_FAILURE_ITEMS                               \</span></div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;<span class="preprocessor">  (((0                                                  \</span></div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;<span class="preprocessor">     ? 0 : highest_active_reg - lowest_active_reg + 1)  \</span></div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;<span class="preprocessor">    * NUM_REG_ITEMS)                                    \</span></div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;<span class="preprocessor">   + NUM_NONREG_ITEMS)</span></div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;<span class="comment">/* How many items can still be added to the stack without overflowing it.  */</span></div><div class="line"><a name="l01350"></a><span class="lineno"><a class="line" href="regex_8c.html#a3c10fb30732d92eb33b8d2d0a2817e7b"> 1350</a></span>&#160;<span class="preprocessor">#define REMAINING_AVAIL_SLOTS ((fail_stack).size - (fail_stack).avail)</span></div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;<span class="comment">/* Pops what PUSH_FAIL_STACK pushes.</span></div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;<span class="comment">   We restore into the parameters, all of which should be lvalues:</span></div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;<span class="comment">     STR -- the saved data position.</span></div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;<span class="comment">     PAT -- the saved pattern position.</span></div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;<span class="comment">     LOW_REG, HIGH_REG -- the highest and lowest active registers.</span></div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;<span class="comment">     REGSTART, REGEND -- arrays of string positions.</span></div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;<span class="comment">     REG_INFO -- array of information about each subexpression.</span></div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;<span class="comment">   Also assumes the variables `fail_stack&#39; and (if debugging), `bufp&#39;,</span></div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;<span class="comment">   `pend&#39;, `string1&#39;, `size1&#39;, `string2&#39;, and `size2&#39;.  */</span></div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;</div><div class="line"><a name="l01365"></a><span class="lineno"><a class="line" href="regex_8c.html#a51d78204b5e3cc240058c986103c8b8e"> 1365</a></span>&#160;<span class="preprocessor">#define POP_FAILURE_POINT(str, pat, low_reg, high_reg, regstart, regend, reg_info)\</span></div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;<span class="preprocessor">{                                                                       \</span></div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;<span class="preprocessor">  DEBUG_STATEMENT (fail_stack_elt_t failure_id;)                        \</span></div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;<span class="preprocessor">  s_reg_t this_reg;                                                     \</span></div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;<span class="preprocessor">  const unsigned char *string_temp;                                     \</span></div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;<span class="preprocessor">                                                                        \</span></div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;<span class="preprocessor">  assert (!FAIL_STACK_EMPTY ());                                        \</span></div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;<span class="preprocessor">                                                                        \</span></div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;<span class="preprocessor">  </span><span class="comment">/* Remove failure points and point to how many regs pushed.  */</span><span class="preprocessor">       \</span></div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;<span class="preprocessor">  DEBUG_PRINT1 (&quot;POP_FAILURE_POINT:\n&quot;);                                \</span></div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;<span class="preprocessor">  DEBUG_PRINT2 (&quot;  Before pop, next avail: %d\n&quot;, fail_stack.avail);    \</span></div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;<span class="preprocessor">  DEBUG_PRINT2 (&quot;                    size: %d\n&quot;, fail_stack.size);     \</span></div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;<span class="preprocessor">                                                                        \</span></div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;<span class="preprocessor">  assert (fail_stack.avail &gt;= NUM_NONREG_ITEMS);                        \</span></div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;<span class="preprocessor">                                                                        \</span></div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;<span class="preprocessor">  DEBUG_POP (&amp;failure_id);                                              \</span></div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;<span class="preprocessor">  DEBUG_PRINT2 (&quot;  Popping failure id: %u\n&quot;, failure_id);              \</span></div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;<span class="preprocessor">                                                                        \</span></div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;<span class="preprocessor">  </span><span class="comment">/* If the saved string location is NULL, it came from an              \</span></div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;<span class="comment">     on_failure_keep_string_jump opcode, and we want to throw away the  \</span></div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;<span class="comment">     saved NULL, thus retaining our current position in the string.  */</span><span class="preprocessor"> \</span></div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;<span class="preprocessor">  string_temp = POP_FAILURE_POINTER ();                                 \</span></div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;<span class="preprocessor">  if (string_temp != NULL)                                              \</span></div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;<span class="preprocessor">    str = (const char *) string_temp;                                   \</span></div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;<span class="preprocessor">                                                                        \</span></div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;<span class="preprocessor">  DEBUG_PRINT2 (&quot;  Popping string 0x%x: `&quot;, str);                       \</span></div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;<span class="preprocessor">  DEBUG_PRINT_DOUBLE_STRING (str, string1, size1, string2, size2);      \</span></div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;<span class="preprocessor">  DEBUG_PRINT1 (&quot;&#39;\n&quot;);                                                 \</span></div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;<span class="preprocessor">                                                                        \</span></div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;<span class="preprocessor">  pat = (unsigned char *) POP_FAILURE_POINTER ();                       \</span></div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;<span class="preprocessor">  DEBUG_PRINT2 (&quot;  Popping pattern 0x%x:\n&quot;, pat);                      \</span></div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;<span class="preprocessor">  DEBUG_PRINT_COMPILED_PATTERN (bufp, pat, pend);                       \</span></div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;<span class="preprocessor">                                                                        \</span></div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;<span class="preprocessor">  </span><span class="comment">/* Restore register info.  */</span><span class="preprocessor">                                         \</span></div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;<span class="preprocessor">  high_reg = (active_reg_t) POP_FAILURE_INT ();                         \</span></div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;<span class="preprocessor">  DEBUG_PRINT2 (&quot;  Popping high active reg: %d\n&quot;, high_reg);           \</span></div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;<span class="preprocessor">                                                                        \</span></div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;<span class="preprocessor">  low_reg = (active_reg_t) POP_FAILURE_INT ();                          \</span></div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;<span class="preprocessor">  DEBUG_PRINT2 (&quot;  Popping  low active reg: %d\n&quot;, low_reg);            \</span></div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;<span class="preprocessor">                                                                        \</span></div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;<span class="preprocessor">  if (1)                                                                \</span></div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;<span class="preprocessor">    for (this_reg = high_reg; this_reg &gt;= low_reg; this_reg--)          \</span></div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;<span class="preprocessor">      {                                                                 \</span></div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;<span class="preprocessor">        DEBUG_PRINT2 (&quot;    Popping reg: %d\n&quot;, this_reg);               \</span></div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;<span class="preprocessor">                                                                        \</span></div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;<span class="preprocessor">        reg_info[this_reg].word = POP_FAILURE_ELT ();                   \</span></div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;<span class="preprocessor">        DEBUG_PRINT2 (&quot;      info: 0x%x\n&quot;, reg_info[this_reg]);        \</span></div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;<span class="preprocessor">                                                                        \</span></div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;<span class="preprocessor">        regend[this_reg] = (const char *) POP_FAILURE_POINTER ();       \</span></div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;<span class="preprocessor">        DEBUG_PRINT2 (&quot;      end: 0x%x\n&quot;, regend[this_reg]);           \</span></div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;<span class="preprocessor">                                                                        \</span></div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;<span class="preprocessor">        regstart[this_reg] = (const char *) POP_FAILURE_POINTER ();     \</span></div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;<span class="preprocessor">        DEBUG_PRINT2 (&quot;      start: 0x%x\n&quot;, regstart[this_reg]);       \</span></div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;<span class="preprocessor">      }                                                                 \</span></div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;<span class="preprocessor">  else                                                                  \</span></div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;<span class="preprocessor">    {                                                                   \</span></div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;<span class="preprocessor">      for (this_reg = highest_active_reg; this_reg &gt; high_reg; this_reg--) \</span></div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;<span class="preprocessor">        {                                                               \</span></div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;<span class="preprocessor">          reg_info[this_reg].word.integer = 0;                          \</span></div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;<span class="preprocessor">          regend[this_reg] = 0;                                         \</span></div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;<span class="preprocessor">          regstart[this_reg] = 0;                                       \</span></div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;<span class="preprocessor">        }                                                               \</span></div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;<span class="preprocessor">      highest_active_reg = high_reg;                                    \</span></div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;<span class="preprocessor">    }                                                                   \</span></div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;<span class="preprocessor">                                                                        \</span></div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;<span class="preprocessor">  set_regs_matched_done = 0;                                            \</span></div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;<span class="preprocessor">  DEBUG_STATEMENT (nfailure_points_popped++);                           \</span></div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;<span class="preprocessor">} </span><span class="comment">/* POP_FAILURE_POINT */</span><span class="preprocessor"></span></div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;<span class="comment">/* Structure for per-register (a.k.a. per-group) information.</span></div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;<span class="comment">   Other register information, such as the</span></div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;<span class="comment">   starting and ending positions (which are addresses), and the list of</span></div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;<span class="comment">   inner groups (which is a bits list) are maintained in separate</span></div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;<span class="comment">   variables.</span></div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;<span class="comment">   We are making a (strictly speaking) nonportable assumption here: that</span></div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;<span class="comment">   the compiler will pack our bit fields into something that fits into</span></div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;<span class="comment">   the type of `word&#39;, i.e., is something that fits into one item on the</span></div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;<span class="comment">   failure stack.  */</span></div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;<span class="comment">/* Declarations and macros for re_match_2.  */</span></div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;</div><div class="line"><a name="l01450"></a><span class="lineno"><a class="line" href="unionregister__info__type.html"> 1450</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">union</span></div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;{</div><div class="line"><a name="l01452"></a><span class="lineno"><a class="line" href="unionregister__info__type.html#a043049c539c1faf32f7827ecfd213d54"> 1452</a></span>&#160;  fail_stack_elt_t <a class="code" href="unionregister__info__type.html#a043049c539c1faf32f7827ecfd213d54">word</a>;</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;  <span class="keyword">struct</span></div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;  {</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;      <span class="comment">/* This field is one if this group can match the empty string,</span></div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;<span class="comment">         zero if not.  If not yet determined,  `MATCH_NULL_UNSET_VALUE&#39;.  */</span></div><div class="line"><a name="l01457"></a><span class="lineno"><a class="line" href="regex_8c.html#a9fbdd9b78059994c85d9f064f9fa9ec3"> 1457</a></span>&#160;<span class="preprocessor">#define MATCH_NULL_UNSET_VALUE 3</span></div><div class="line"><a name="l01458"></a><span class="lineno"><a class="line" href="unionregister__info__type.html#a989fd7471cc6cca3b11a1f131953ee02"> 1458</a></span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="unionregister__info__type.html#a989fd7471cc6cca3b11a1f131953ee02">match_null_string_p</a> : 2;</div><div class="line"><a name="l01459"></a><span class="lineno"><a class="line" href="unionregister__info__type.html#adff16b2ba318af82b945d659c0f91ffa"> 1459</a></span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="unionregister__info__type.html#adff16b2ba318af82b945d659c0f91ffa">is_active</a> : 1;</div><div class="line"><a name="l01460"></a><span class="lineno"><a class="line" href="unionregister__info__type.html#a5050422a9b6e4673315964626b1fd1ac"> 1460</a></span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="unionregister__info__type.html#a5050422a9b6e4673315964626b1fd1ac">matched_something</a> : 1;</div><div class="line"><a name="l01461"></a><span class="lineno"><a class="line" href="unionregister__info__type.html#a9834f5a8a58b57e135fa8024ff7be739"> 1461</a></span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="unionregister__info__type.html#a9834f5a8a58b57e135fa8024ff7be739">ever_matched_something</a> : 1;</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;  } bits;</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;} <a class="code" href="unionregister__info__type.html">register_info_type</a>;</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;</div><div class="line"><a name="l01465"></a><span class="lineno"><a class="line" href="regex_8c.html#ac840f4f2ecf1841ed894bd361236715b"> 1465</a></span>&#160;<span class="preprocessor">#define REG_MATCH_NULL_STRING_P(R)  ((R).bits.match_null_string_p)</span></div><div class="line"><a name="l01466"></a><span class="lineno"><a class="line" href="regex_8c.html#a4f6628b4b02e356efb3c4c8e6cf8eaff"> 1466</a></span>&#160;<span class="preprocessor">#define IS_ACTIVE(R)  ((R).bits.is_active)</span></div><div class="line"><a name="l01467"></a><span class="lineno"><a class="line" href="regex_8c.html#a37aeb4969c6ded152f5be7582330e6e5"> 1467</a></span>&#160;<span class="preprocessor">#define MATCHED_SOMETHING(R)  ((R).bits.matched_something)</span></div><div class="line"><a name="l01468"></a><span class="lineno"><a class="line" href="regex_8c.html#ad4e9639db811e6b09f31ff92466b404e"> 1468</a></span>&#160;<span class="preprocessor">#define EVER_MATCHED_SOMETHING(R)  ((R).bits.ever_matched_something)</span></div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;<span class="comment">/* Call this when have matched a real character; it sets `matched&#39; flags</span></div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;<span class="comment">   for the subexpressions which we are currently inside.  Also records</span></div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;<span class="comment">   that those subexprs have matched.  */</span></div><div class="line"><a name="l01474"></a><span class="lineno"><a class="line" href="regex_8c.html#aa286396ee78a5823c6bedd72e303e4c9"> 1474</a></span>&#160;<span class="preprocessor">#define SET_REGS_MATCHED()                                              \</span></div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;<span class="preprocessor">  do                                                                    \</span></div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;<span class="preprocessor">    {                                                                   \</span></div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;<span class="preprocessor">      if (!set_regs_matched_done)                                       \</span></div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;<span class="preprocessor">        {                                                               \</span></div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;<span class="preprocessor">          active_reg_t r;                                               \</span></div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;<span class="preprocessor">          set_regs_matched_done = 1;                                    \</span></div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;<span class="preprocessor">          for (r = lowest_active_reg; r &lt;= highest_active_reg; r++)     \</span></div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;<span class="preprocessor">            {                                                           \</span></div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;<span class="preprocessor">              MATCHED_SOMETHING (reg_info[r])                           \</span></div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;<span class="preprocessor">                = EVER_MATCHED_SOMETHING (reg_info[r])                  \</span></div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;<span class="preprocessor">                = 1;                                                    \</span></div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;<span class="preprocessor">            }                                                           \</span></div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;<span class="preprocessor">        }                                                               \</span></div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;<span class="preprocessor">    }                                                                   \</span></div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;<span class="preprocessor">  while (0)</span></div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;<span class="comment">/* Registers are set to a sentinel when they haven&#39;t yet matched.  */</span></div><div class="line"><a name="l01492"></a><span class="lineno"><a class="line" href="regex_8c.html#aadf22463a9896cf91277d88f89246e43"> 1492</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="regex_8c.html#aadf22463a9896cf91277d88f89246e43">reg_unset_dummy</a>;</div><div class="line"><a name="l01493"></a><span class="lineno"><a class="line" href="regex_8c.html#a78d7e87774e3c9ae84570f8ab88f55a5"> 1493</a></span>&#160;<span class="preprocessor">#define REG_UNSET_VALUE (&amp;reg_unset_dummy)</span></div><div class="line"><a name="l01494"></a><span class="lineno"><a class="line" href="regex_8c.html#afefb76392029f59835538d01a0c13242"> 1494</a></span>&#160;<span class="preprocessor">#define REG_UNSET(e) ((e) == REG_UNSET_VALUE)</span></div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;<span class="comment">/* Subroutine declarations and macros for regex_compile.  */</span></div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;<span class="keyword">static</span> <a class="code" href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5ae">reg_errcode_t</a> <a class="code" href="regex_8c.html#a6a04e18fe89cacd4b8d04a474def5985">regex_compile</a> <a class="code" href="regex_8c.html#a6a88312ef40c670049fcf09f759eeca9">_RE_ARGS</a> ((<span class="keyword">const</span> <span class="keywordtype">char</span> *pattern, <span class="keywordtype">size_t</span> size,</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;                                              <a class="code" href="__regex_8h.html#a7e0565199a2fabaca3d67a5a44fc4229">reg_syntax_t</a> syntax,</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;                                              <span class="keyword">struct</span> <a class="code" href="structre__pattern__buffer.html">re_pattern_buffer</a> *bufp));</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="regex_8c.html#ac119126b68c58a7c0fc1af5b119450ed">store_op1</a> <a class="code" href="regex_8c.html#a6a88312ef40c670049fcf09f759eeca9">_RE_ARGS</a> ((re_opcode_t op, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *loc, <span class="keywordtype">int</span> arg));</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="regex_8c.html#ab2200093505d6435c2521ff819125d0d">store_op2</a> <a class="code" href="regex_8c.html#a6a88312ef40c670049fcf09f759eeca9">_RE_ARGS</a> ((re_opcode_t op, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *loc,</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;                                 <span class="keywordtype">int</span> arg1, <span class="keywordtype">int</span> arg2));</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="regex_8c.html#a6ec9fc1db02e8f3a1625ed9771f5bd92">insert_op1</a> <a class="code" href="regex_8c.html#a6a88312ef40c670049fcf09f759eeca9">_RE_ARGS</a> ((re_opcode_t op, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *loc,</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;                                  <span class="keywordtype">int</span> arg, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *end));</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="regex_8c.html#ae31b1d009dfa3a2b5eca3f11ec3dee6a">insert_op2</a> <a class="code" href="regex_8c.html#a6a88312ef40c670049fcf09f759eeca9">_RE_ARGS</a> ((re_opcode_t op, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *loc,</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;                                  <span class="keywordtype">int</span> arg1, <span class="keywordtype">int</span> arg2, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *end));</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;<span class="keyword">static</span> <span class="keywordtype">boolean</span> <a class="code" href="regex_8c.html#a9fcec6851521f04076e51adfa274403c">at_begline_loc_p</a> <a class="code" href="regex_8c.html#a6a88312ef40c670049fcf09f759eeca9">_RE_ARGS</a> ((<span class="keyword">const</span> <span class="keywordtype">char</span> *pattern, <span class="keyword">const</span> <span class="keywordtype">char</span> *p,</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;                                           <a class="code" href="__regex_8h.html#a7e0565199a2fabaca3d67a5a44fc4229">reg_syntax_t</a> syntax));</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;<span class="keyword">static</span> <span class="keywordtype">boolean</span> <a class="code" href="regex_8c.html#a85a9d04db18bdf4b65ea1113400613e4">at_endline_loc_p</a> <a class="code" href="regex_8c.html#a6a88312ef40c670049fcf09f759eeca9">_RE_ARGS</a> ((<span class="keyword">const</span> <span class="keywordtype">char</span> *p, <span class="keyword">const</span> <span class="keywordtype">char</span> *pend,</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;                                           <a class="code" href="__regex_8h.html#a7e0565199a2fabaca3d67a5a44fc4229">reg_syntax_t</a> syntax));</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;<span class="keyword">static</span> <a class="code" href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5ae">reg_errcode_t</a> <a class="code" href="regex_8c.html#a06b0c1ae265d6791c041df0ddf6d7ff6">compile_range</a> <a class="code" href="regex_8c.html#a6a88312ef40c670049fcf09f759eeca9">_RE_ARGS</a> ((<span class="keyword">const</span> <span class="keywordtype">char</span> **p_ptr,</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;                                              <span class="keyword">const</span> <span class="keywordtype">char</span> *pend,</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;                                              <span class="keywordtype">char</span> *translate,</div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;                                              <a class="code" href="__regex_8h.html#a7e0565199a2fabaca3d67a5a44fc4229">reg_syntax_t</a> syntax,</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;                                              <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *b));</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;<span class="comment">/* Fetch the next character in the uncompiled pattern---translating it</span></div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;<span class="comment">   if necessary.  Also cast from a signed character in the constant</span></div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;<span class="comment">   string passed to us by the user to an unsigned char that we can use</span></div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;<span class="comment">   as an array index (in, e.g., `translate&#39;).  */</span></div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;<span class="preprocessor">#ifndef PATFETCH</span></div><div class="line"><a name="l01523"></a><span class="lineno"><a class="line" href="regex_8c.html#a557d2f1c16f9bd2123e55885ee447c06"> 1523</a></span>&#160;<span class="preprocessor">#define PATFETCH(c)                                                     \</span></div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;<span class="preprocessor">  do {if (p == pend) return REG_EEND;                                   \</span></div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;<span class="preprocessor">    c = (unsigned char) *p++;                                           \</span></div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;<span class="preprocessor">    if (translate) c = (unsigned char) translate[c];                    \</span></div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;<span class="preprocessor">  } while (0)</span></div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;<span class="comment">/* Fetch the next character in the uncompiled pattern, with no</span></div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;<span class="comment">   translation.  */</span></div><div class="line"><a name="l01532"></a><span class="lineno"><a class="line" href="regex_8c.html#a95ed173b1e65d739ab2d15cc9b738ed9"> 1532</a></span>&#160;<span class="preprocessor">#define PATFETCH_RAW(c)                                                 \</span></div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;<span class="preprocessor">  do {if (p == pend) return REG_EEND;                                   \</span></div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;<span class="preprocessor">    c = (unsigned char) *p++;                                           \</span></div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;<span class="preprocessor">  } while (0)</span></div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;<span class="comment">/* Go backwards one character in the pattern.  */</span></div><div class="line"><a name="l01538"></a><span class="lineno"><a class="line" href="regex_8c.html#a77ae0460c3885ddc73f4544ef494e402"> 1538</a></span>&#160;<span class="preprocessor">#define PATUNFETCH p--</span></div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;<span class="comment">/* If `translate&#39; is non-null, return translate[D], else just D.  We</span></div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;<span class="comment">   cast the subscript to translate because some data is declared as</span></div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;<span class="comment">   `char *&#39;, to avoid warnings when a string constant is passed.  But</span></div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;<span class="comment">   when we use a character as a subscript we must make it unsigned.  */</span></div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;<span class="preprocessor">#ifndef TRANSLATE</span></div><div class="line"><a name="l01546"></a><span class="lineno"><a class="line" href="regex_8c.html#a2eeeb49b77aa0f299d2d3c23dc1bfa17"> 1546</a></span>&#160;<span class="preprocessor">#define TRANSLATE(d) \</span></div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;<span class="preprocessor">  (translate ? (char) translate[(unsigned char) (d)] : (d))</span></div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;<span class="comment">/* Macros for outputting the compiled pattern into `buffer&#39;.  */</span></div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;<span class="comment">/* If the buffer isn&#39;t allocated when it comes in, use this.  */</span></div><div class="line"><a name="l01554"></a><span class="lineno"><a class="line" href="regex_8c.html#a598285922e2b62b38ee46ced0ebd9388"> 1554</a></span>&#160;<span class="preprocessor">#define INIT_BUF_SIZE  32</span></div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;<span class="comment">/* Make sure we have at least N more bytes of space in buffer.  */</span></div><div class="line"><a name="l01557"></a><span class="lineno"><a class="line" href="regex_8c.html#a820795fca6e5960dd9657eda06c66ed5"> 1557</a></span>&#160;<span class="preprocessor">#define GET_BUFFER_SPACE(n)                                             \</span></div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;<span class="preprocessor">    while ((unsigned long) (b - bufp-&gt;buffer + (n)) &gt; bufp-&gt;allocated)  \</span></div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;<span class="preprocessor">      EXTEND_BUFFER ()</span></div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;<span class="comment">/* Make sure we have one more byte of buffer space and then add C to it.  */</span></div><div class="line"><a name="l01562"></a><span class="lineno"><a class="line" href="regex_8c.html#aef73eb530578e61ff012a68faccb18d0"> 1562</a></span>&#160;<span class="preprocessor">#define BUF_PUSH(c)                                                     \</span></div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;<span class="preprocessor">  do {                                                                  \</span></div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;<span class="preprocessor">    GET_BUFFER_SPACE (1);                                               \</span></div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;<span class="preprocessor">    *b++ = (unsigned char) (c);                                         \</span></div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;<span class="preprocessor">  } while (0)</span></div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;<span class="comment">/* Ensure we have two more bytes of buffer space and then append C1 and C2.  */</span></div><div class="line"><a name="l01570"></a><span class="lineno"><a class="line" href="regex_8c.html#a8cfee99226a6b73952701f9de12912b9"> 1570</a></span>&#160;<span class="preprocessor">#define BUF_PUSH_2(c1, c2)                                              \</span></div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;<span class="preprocessor">  do {                                                                  \</span></div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;<span class="preprocessor">    GET_BUFFER_SPACE (2);                                               \</span></div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;<span class="preprocessor">    *b++ = (unsigned char) (c1);                                        \</span></div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;<span class="preprocessor">    *b++ = (unsigned char) (c2);                                        \</span></div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;<span class="preprocessor">  } while (0)</span></div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;<span class="comment">/* As with BUF_PUSH_2, except for three bytes.  */</span></div><div class="line"><a name="l01579"></a><span class="lineno"><a class="line" href="regex_8c.html#a38ceed7188d42c689f202512a1cb76fb"> 1579</a></span>&#160;<span class="preprocessor">#define BUF_PUSH_3(c1, c2, c3)                                          \</span></div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;<span class="preprocessor">  do {                                                                  \</span></div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;<span class="preprocessor">    GET_BUFFER_SPACE (3);                                               \</span></div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;<span class="preprocessor">    *b++ = (unsigned char) (c1);                                        \</span></div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;<span class="preprocessor">    *b++ = (unsigned char) (c2);                                        \</span></div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;<span class="preprocessor">    *b++ = (unsigned char) (c3);                                        \</span></div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;<span class="preprocessor">  } while (0)</span></div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;<span class="comment">/* Store a jump with opcode OP at LOC to location TO.  We store a</span></div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;<span class="comment">   relative address offset by the three bytes the jump itself occupies.  */</span></div><div class="line"><a name="l01590"></a><span class="lineno"><a class="line" href="regex_8c.html#acfebc9fd667ce5b7d2162f2677087e21"> 1590</a></span>&#160;<span class="preprocessor">#define STORE_JUMP(op, loc, to) \</span></div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;<span class="preprocessor">  store_op1 (op, loc, (int) ((to) - (loc) - 3))</span></div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;<span class="comment">/* Likewise, for a two-argument jump.  */</span></div><div class="line"><a name="l01594"></a><span class="lineno"><a class="line" href="regex_8c.html#aa2aa60706e57e51cc9b54ff2c8cc38a2"> 1594</a></span>&#160;<span class="preprocessor">#define STORE_JUMP2(op, loc, to, arg) \</span></div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;<span class="preprocessor">  store_op2 (op, loc, (int) ((to) - (loc) - 3), arg)</span></div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;<span class="comment">/* Like `STORE_JUMP&#39;, but for inserting.  Assume `b&#39; is the buffer end.  */</span></div><div class="line"><a name="l01598"></a><span class="lineno"><a class="line" href="regex_8c.html#a4c4a6f3c88794d7c99809e8ef5054614"> 1598</a></span>&#160;<span class="preprocessor">#define INSERT_JUMP(op, loc, to) \</span></div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;<span class="preprocessor">  insert_op1 (op, loc, (int) ((to) - (loc) - 3), b)</span></div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;<span class="comment">/* Like `STORE_JUMP2&#39;, but for inserting.  Assume `b&#39; is the buffer end.  */</span></div><div class="line"><a name="l01602"></a><span class="lineno"><a class="line" href="regex_8c.html#a7dd59dc7da937c9308d1e7b9331aa916"> 1602</a></span>&#160;<span class="preprocessor">#define INSERT_JUMP2(op, loc, to, arg) \</span></div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;<span class="preprocessor">  insert_op2 (op, loc, (int) ((to) - (loc) - 3), arg, b)</span></div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;<span class="comment">/* This is not an arbitrary limit: the arguments which represent offsets</span></div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;<span class="comment">   into the pattern are two bytes long.  So if 2^16 bytes turns out to</span></div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;<span class="comment">   be too small, many things would have to change.  */</span></div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;<span class="comment">/* Any other compiler which, like MSC, has allocation limit below 2^16</span></div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;<span class="comment">   bytes will have to use approach similar to what was done below for</span></div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;<span class="comment">   MSC and drop MAX_BUF_SIZE a bit.  Otherwise you may end up</span></div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;<span class="comment">   reallocating to 0 bytes.  Such thing is not going to work too well.</span></div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;<span class="comment">   You have been warned!!  */</span></div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;<span class="preprocessor">#if defined(_MSC_VER)  &amp;&amp; !defined(WIN32)</span></div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;<span class="comment">/* Microsoft C 16-bit versions limit malloc to approx 65512 bytes.</span></div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;<span class="comment">   The REALLOC define eliminates a flurry of conversion warnings,</span></div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;<span class="comment">   but is not required. */</span></div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;<span class="preprocessor">#define MAX_BUF_SIZE  65500L</span></div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;<span class="preprocessor">#define REALLOC(p,s) realloc ((p), (size_t) (s))</span></div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01621"></a><span class="lineno"><a class="line" href="regex_8c.html#a7244ab798f58214294b580ca0bb48552"> 1621</a></span>&#160;<span class="preprocessor">#define MAX_BUF_SIZE (1L &lt;&lt; 16)</span></div><div class="line"><a name="l01622"></a><span class="lineno"><a class="line" href="regex_8c.html#a17d9af8542e3c215a173f67977fb06aa"> 1622</a></span>&#160;<span class="preprocessor">#define REALLOC(p,s) realloc ((p), (s))</span></div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;<span class="comment">/* Extend the buffer by twice its current size via realloc and</span></div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;<span class="comment">   reset the pointers that pointed into the old block to point to the</span></div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;<span class="comment">   correct places in the new one.  If extending the buffer results in it</span></div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;<span class="comment">   being larger than MAX_BUF_SIZE, then flag memory exhausted.  */</span></div><div class="line"><a name="l01629"></a><span class="lineno"><a class="line" href="regex_8c.html#a3ac8687e6929ebcea6fbcec3332b2fe8"> 1629</a></span>&#160;<span class="preprocessor">#define EXTEND_BUFFER()                                                 \</span></div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;<span class="preprocessor">  do {                                                                  \</span></div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;<span class="preprocessor">    unsigned char *old_buffer = bufp-&gt;buffer;                           \</span></div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;<span class="preprocessor">    if (bufp-&gt;allocated == MAX_BUF_SIZE)                                \</span></div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;<span class="preprocessor">      return REG_ESIZE;                                                 \</span></div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;<span class="preprocessor">    bufp-&gt;allocated &lt;&lt;= 1;                                              \</span></div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;<span class="preprocessor">    if (bufp-&gt;allocated &gt; MAX_BUF_SIZE)                                 \</span></div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;<span class="preprocessor">      bufp-&gt;allocated = MAX_BUF_SIZE;                                   \</span></div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;<span class="preprocessor">    bufp-&gt;buffer = (unsigned char *) REALLOC (bufp-&gt;buffer, bufp-&gt;allocated);\</span></div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;<span class="preprocessor">    if (bufp-&gt;buffer == NULL)                                           \</span></div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;<span class="preprocessor">      return REG_ESPACE;                                                \</span></div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;<span class="preprocessor">    </span><span class="comment">/* If the buffer moved, move all the pointers into it.  */</span><span class="preprocessor">          \</span></div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;<span class="preprocessor">    if (old_buffer != bufp-&gt;buffer)                                     \</span></div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;<span class="preprocessor">      {                                                                 \</span></div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;<span class="preprocessor">        b = (b - old_buffer) + bufp-&gt;buffer;                            \</span></div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;<span class="preprocessor">        begalt = (begalt - old_buffer) + bufp-&gt;buffer;                  \</span></div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;<span class="preprocessor">        if (fixup_alt_jump)                                             \</span></div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;<span class="preprocessor">          fixup_alt_jump = (fixup_alt_jump - old_buffer) + bufp-&gt;buffer;\</span></div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;<span class="preprocessor">        if (laststart)                                                  \</span></div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;<span class="preprocessor">          laststart = (laststart - old_buffer) + bufp-&gt;buffer;          \</span></div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;<span class="preprocessor">        if (pending_exact)                                              \</span></div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;<span class="preprocessor">          pending_exact = (pending_exact - old_buffer) + bufp-&gt;buffer;  \</span></div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;<span class="preprocessor">      }                                                                 \</span></div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;<span class="preprocessor">  } while (0)</span></div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;<span class="comment">/* Since we have one byte reserved for the register number argument to</span></div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;<span class="comment">   {start,stop}_memory, the maximum number of groups we can report</span></div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;<span class="comment">   things about is what fits in that byte.  */</span></div><div class="line"><a name="l01658"></a><span class="lineno"><a class="line" href="regex_8c.html#af1b3c3e22fe42152c272df6027b1bf4b"> 1658</a></span>&#160;<span class="preprocessor">#define MAX_REGNUM 255</span></div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;</div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;<span class="comment">/* But patterns can have more than `MAX_REGNUM&#39; registers.  We just</span></div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;<span class="comment">   ignore the excess.  */</span></div><div class="line"><a name="l01662"></a><span class="lineno"><a class="line" href="regex_8c.html#a9e5a8ee5ece120e8e7b7c28eea3aa7cd"> 1662</a></span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <a class="code" href="regex_8c.html#a9e5a8ee5ece120e8e7b7c28eea3aa7cd">regnum_t</a>;</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;</div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;<span class="comment">/* Macros for the compile stack.  */</span></div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;<span class="comment">/* Since offsets can go either forwards or backwards, this type needs to</span></div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;<span class="comment">   be able to hold values from -(MAX_BUF_SIZE - 1) to MAX_BUF_SIZE - 1.  */</span></div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;<span class="comment">/* int may be not enough when sizeof(int) == 2.  */</span></div><div class="line"><a name="l01670"></a><span class="lineno"><a class="line" href="regex_8c.html#a389ceb5c54c193f7b942544f6b0fe9b0"> 1670</a></span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">long</span> <a class="code" href="regex_8c.html#a389ceb5c54c193f7b942544f6b0fe9b0">pattern_offset_t</a>;</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;</div><div class="line"><a name="l01672"></a><span class="lineno"><a class="line" href="structcompile__stack__elt__t.html"> 1672</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct</span></div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;{</div><div class="line"><a name="l01674"></a><span class="lineno"><a class="line" href="structcompile__stack__elt__t.html#a66d64048ae2b32e73ba2b87fee8d7170"> 1674</a></span>&#160;  pattern_offset_t <a class="code" href="structcompile__stack__elt__t.html#a66d64048ae2b32e73ba2b87fee8d7170">begalt_offset</a>;</div><div class="line"><a name="l01675"></a><span class="lineno"><a class="line" href="structcompile__stack__elt__t.html#a8b8a84a9e80b0af645dbba2ca5685fdd"> 1675</a></span>&#160;  pattern_offset_t <a class="code" href="structcompile__stack__elt__t.html#a8b8a84a9e80b0af645dbba2ca5685fdd">fixup_alt_jump</a>;</div><div class="line"><a name="l01676"></a><span class="lineno"><a class="line" href="structcompile__stack__elt__t.html#a468489b4c865c185b34aaf5740593eff"> 1676</a></span>&#160;  pattern_offset_t <a class="code" href="structcompile__stack__elt__t.html#a468489b4c865c185b34aaf5740593eff">inner_group_offset</a>;</div><div class="line"><a name="l01677"></a><span class="lineno"><a class="line" href="structcompile__stack__elt__t.html#aa0a2a34389f622cea20e08efff331168"> 1677</a></span>&#160;  pattern_offset_t <a class="code" href="structcompile__stack__elt__t.html#aa0a2a34389f622cea20e08efff331168">laststart_offset</a>;</div><div class="line"><a name="l01678"></a><span class="lineno"><a class="line" href="structcompile__stack__elt__t.html#af027fbe8c196c2e4646ae6247094d1f8"> 1678</a></span>&#160;  regnum_t <a class="code" href="structcompile__stack__elt__t.html#af027fbe8c196c2e4646ae6247094d1f8">regnum</a>;</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;} <a class="code" href="structcompile__stack__elt__t.html">compile_stack_elt_t</a>;</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;</div><div class="line"><a name="l01682"></a><span class="lineno"><a class="line" href="structcompile__stack__type.html"> 1682</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct</span></div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;{</div><div class="line"><a name="l01684"></a><span class="lineno"><a class="line" href="structcompile__stack__type.html#aebaf05ac308fe465d6a630e5d863fd4a"> 1684</a></span>&#160;  <a class="code" href="structcompile__stack__elt__t.html">compile_stack_elt_t</a> *<a class="code" href="structcompile__stack__type.html#aebaf05ac308fe465d6a630e5d863fd4a">stack</a>;</div><div class="line"><a name="l01685"></a><span class="lineno"><a class="line" href="structcompile__stack__type.html#af5a43e711b027026ed61228f5c96ea71"> 1685</a></span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="structcompile__stack__type.html#af5a43e711b027026ed61228f5c96ea71">size</a>;</div><div class="line"><a name="l01686"></a><span class="lineno"><a class="line" href="structcompile__stack__type.html#a45982ffa38800f8a9502da9708ec587c"> 1686</a></span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="structcompile__stack__type.html#a45982ffa38800f8a9502da9708ec587c">avail</a>;                       <span class="comment">/* Offset of next open position.  */</span></div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;} <a class="code" href="structcompile__stack__type.html">compile_stack_type</a>;</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;</div><div class="line"><a name="l01690"></a><span class="lineno"><a class="line" href="regex_8c.html#a988583693c22a092825fc78426d22856"> 1690</a></span>&#160;<span class="preprocessor">#define INIT_COMPILE_STACK_SIZE 32</span></div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;</div><div class="line"><a name="l01692"></a><span class="lineno"><a class="line" href="regex_8c.html#a7d96976a27d0138b3f189f1d1a663d68"> 1692</a></span>&#160;<span class="preprocessor">#define COMPILE_STACK_EMPTY  (compile_stack.avail == 0)</span></div><div class="line"><a name="l01693"></a><span class="lineno"><a class="line" href="regex_8c.html#a7e61c2eafa31a2bc3b4942c22e803e5c"> 1693</a></span>&#160;<span class="preprocessor">#define COMPILE_STACK_FULL  (compile_stack.avail == compile_stack.size)</span></div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;<span class="comment">/* The next available element.  */</span></div><div class="line"><a name="l01696"></a><span class="lineno"><a class="line" href="regex_8c.html#a3c27bf6437874eb87a6622b75d2dac32"> 1696</a></span>&#160;<span class="preprocessor">#define COMPILE_STACK_TOP (compile_stack.stack[compile_stack.avail])</span></div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;</div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;<span class="comment">/* Set the bit for character C in a list.  */</span></div><div class="line"><a name="l01700"></a><span class="lineno"><a class="line" href="regex_8c.html#aa09a4c3c61b8d82d7134225bfd5a32f7"> 1700</a></span>&#160;<span class="preprocessor">#define SET_LIST_BIT(c)                               \</span></div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;<span class="preprocessor">  (b[((unsigned char) (c)) / BYTEWIDTH]               \</span></div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;<span class="preprocessor">   |= 1 &lt;&lt; (((unsigned char) c) % BYTEWIDTH))</span></div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;</div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;<span class="comment">/* Get the next unsigned number in the uncompiled pattern.  */</span></div><div class="line"><a name="l01706"></a><span class="lineno"><a class="line" href="regex_8c.html#aa678aabaa579a244b2f36e8e452d977e"> 1706</a></span>&#160;<span class="preprocessor">#define GET_UNSIGNED_NUMBER(num)                                        \</span></div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;<span class="preprocessor">  { if (p != pend)                                                      \</span></div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;<span class="preprocessor">     {                                                                  \</span></div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;<span class="preprocessor">       PATFETCH (c);                                                    \</span></div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;<span class="preprocessor">       while (ISDIGIT (c))                                              \</span></div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;<span class="preprocessor">         {                                                              \</span></div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;<span class="preprocessor">           if (num &lt; 0)                                                 \</span></div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;<span class="preprocessor">              num = 0;                                                  \</span></div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;<span class="preprocessor">           num = num * 10 + c - &#39;0&#39;;                                    \</span></div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;<span class="preprocessor">           if (p == pend)                                               \</span></div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;<span class="preprocessor">              break;                                                    \</span></div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;<span class="preprocessor">           PATFETCH (c);                                                \</span></div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;<span class="preprocessor">         }                                                              \</span></div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;<span class="preprocessor">       }                                                                \</span></div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;<span class="preprocessor">    }</span></div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;</div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;<span class="preprocessor">#if defined _LIBC || (defined HAVE_WCTYPE_H &amp;&amp; defined HAVE_WCHAR_H)</span></div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;<span class="comment">/* The GNU C library provides support for user-defined character classes</span></div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;<span class="comment">   and the functions from ISO C amendment 1.  */</span></div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;<span class="preprocessor"># ifdef CHARCLASS_NAME_MAX</span></div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;<span class="preprocessor">#  define CHAR_CLASS_MAX_LENGTH CHARCLASS_NAME_MAX</span></div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;<span class="preprocessor"># else</span></div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;<span class="comment">/* This shouldn&#39;t happen but some implementation might still have this</span></div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;<span class="comment">   problem.  Use a reasonable default value.  */</span></div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;<span class="preprocessor">#  define CHAR_CLASS_MAX_LENGTH 256</span></div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;<span class="preprocessor"># endif</span></div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;</div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;<span class="preprocessor"># define IS_CHAR_CLASS(string) wctype (string)</span></div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01735"></a><span class="lineno"><a class="line" href="regex_8c.html#a060354a63e337df065f8cd869b3118f1"> 1735</a></span>&#160;<span class="preprocessor"># define CHAR_CLASS_MAX_LENGTH  6 </span><span class="comment">/* Namely, `xdigit&#39;.  */</span><span class="preprocessor"></span></div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;</div><div class="line"><a name="l01737"></a><span class="lineno"><a class="line" href="regex_8c.html#a8b3d83f068b179782bccaca23e3b20f7"> 1737</a></span>&#160;<span class="preprocessor"># define IS_CHAR_CLASS(string)                                          \</span></div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;<span class="preprocessor">   (STREQ (string, &quot;alpha&quot;) || STREQ (string, &quot;upper&quot;)                  \</span></div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;<span class="preprocessor">    || STREQ (string, &quot;lower&quot;) || STREQ (string, &quot;digit&quot;)               \</span></div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;<span class="preprocessor">    || STREQ (string, &quot;alnum&quot;) || STREQ (string, &quot;xdigit&quot;)              \</span></div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;<span class="preprocessor">    || STREQ (string, &quot;space&quot;) || STREQ (string, &quot;print&quot;)               \</span></div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;<span class="preprocessor">    || STREQ (string, &quot;punct&quot;) || STREQ (string, &quot;graph&quot;)               \</span></div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;<span class="preprocessor">    || STREQ (string, &quot;cntrl&quot;) || STREQ (string, &quot;blank&quot;))</span></div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;</div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;<span class="preprocessor">#ifndef MATCH_MAY_ALLOCATE</span></div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;</div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;<span class="comment">/* If we cannot allocate large objects within re_match_2_internal,</span></div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;<span class="comment">   we make the fail stack and register vectors global.</span></div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;<span class="comment">   The fail stack, we grow to the maximum size when a regexp</span></div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;<span class="comment">   is compiled.</span></div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;<span class="comment">   The register vectors, we adjust in size each time we</span></div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;<span class="comment">   compile a regexp, according to the number of registers it needs.  */</span></div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;</div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;<span class="keyword">static</span> <a class="code" href="structfail__stack__type.html">fail_stack_type</a> fail_stack;</div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;<span class="comment">/* Size with which the following vectors are currently allocated.</span></div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;<span class="comment">   That is so we can make them bigger as needed,</span></div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;<span class="comment">   but never make them smaller.  */</span></div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> regs_allocated_size;</div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;</div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> **     regstart, **     regend;</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> ** old_regstart, ** old_regend;</div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> **best_regstart, **best_regend;</div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;<span class="keyword">static</span> <a class="code" href="unionregister__info__type.html">register_info_type</a> *reg_info;</div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> **reg_dummy;</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;<span class="keyword">static</span> <a class="code" href="unionregister__info__type.html">register_info_type</a> *reg_info_dummy;</div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;<span class="comment">/* Make the register vectors big enough for NUM_REGS registers,</span></div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;<span class="comment">   but don&#39;t make them smaller.  */</span></div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;<span class="keyword">static</span></div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;regex_grow_registers (num_regs)</div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;     <span class="keywordtype">int</span> num_regs;</div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;{</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;  <span class="keywordflow">if</span> (num_regs &gt; regs_allocated_size)</div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;    {</div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;      <a class="code" href="regex_8c.html#a12c694618416cdfd35b3eb0e7f99f7f6">RETALLOC_IF</a> (regstart,     num_regs, <span class="keyword">const</span> <span class="keywordtype">char</span> *);</div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;      <a class="code" href="regex_8c.html#a12c694618416cdfd35b3eb0e7f99f7f6">RETALLOC_IF</a> (regend,       num_regs, <span class="keyword">const</span> <span class="keywordtype">char</span> *);</div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;      <a class="code" href="regex_8c.html#a12c694618416cdfd35b3eb0e7f99f7f6">RETALLOC_IF</a> (old_regstart, num_regs, <span class="keyword">const</span> <span class="keywordtype">char</span> *);</div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;      <a class="code" href="regex_8c.html#a12c694618416cdfd35b3eb0e7f99f7f6">RETALLOC_IF</a> (old_regend,   num_regs, <span class="keyword">const</span> <span class="keywordtype">char</span> *);</div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;      <a class="code" href="regex_8c.html#a12c694618416cdfd35b3eb0e7f99f7f6">RETALLOC_IF</a> (best_regstart, num_regs, <span class="keyword">const</span> <span class="keywordtype">char</span> *);</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;      <a class="code" href="regex_8c.html#a12c694618416cdfd35b3eb0e7f99f7f6">RETALLOC_IF</a> (best_regend,  num_regs, <span class="keyword">const</span> <span class="keywordtype">char</span> *);</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;      <a class="code" href="regex_8c.html#a12c694618416cdfd35b3eb0e7f99f7f6">RETALLOC_IF</a> (reg_info,     num_regs, <a class="code" href="unionregister__info__type.html">register_info_type</a>);</div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;      <a class="code" href="regex_8c.html#a12c694618416cdfd35b3eb0e7f99f7f6">RETALLOC_IF</a> (reg_dummy,    num_regs, <span class="keyword">const</span> <span class="keywordtype">char</span> *);</div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;      <a class="code" href="regex_8c.html#a12c694618416cdfd35b3eb0e7f99f7f6">RETALLOC_IF</a> (reg_info_dummy, num_regs, <a class="code" href="unionregister__info__type.html">register_info_type</a>);</div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;      regs_allocated_size = num_regs;</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;    }</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;}</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* not MATCH_MAY_ALLOCATE */</span><span class="preprocessor"></span></div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;<span class="keyword">static</span> <span class="keywordtype">boolean</span> <a class="code" href="regex_8c.html#a28dc5088ce179431d47162481e6c6540">group_in_compile_stack</a> <a class="code" href="regex_8c.html#a6a88312ef40c670049fcf09f759eeca9">_RE_ARGS</a> ((<a class="code" href="structcompile__stack__type.html">compile_stack_type</a></div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;                                                 compile_stack,</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;                                                 regnum_t regnum));</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;</div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;<span class="comment">/* `regex_compile&#39; compiles PATTERN (of length SIZE) according to SYNTAX.</span></div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;<span class="comment">   Returns one of error codes defined in `regex.h&#39;, or zero for success.</span></div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;<span class="comment">   Assumes the `allocated&#39; (and perhaps `buffer&#39;) and `translate&#39;</span></div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;<span class="comment">   fields are set in BUFP on entry.</span></div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;<span class="comment">   If it succeeds, results are put in BUFP (if it returns an error, the</span></div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;<span class="comment">   contents of BUFP are undefined):</span></div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;<span class="comment">     `buffer&#39; is the compiled pattern;</span></div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;<span class="comment">     `syntax&#39; is set to SYNTAX;</span></div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;<span class="comment">     `used&#39; is set to the length of the compiled pattern;</span></div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;<span class="comment">     `fastmap_accurate&#39; is zero;</span></div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;<span class="comment">     `re_nsub&#39; is the number of subexpressions in PATTERN;</span></div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;<span class="comment">     `not_bol&#39; and `not_eol&#39; are zero;</span></div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;<span class="comment">   The `fastmap&#39; and `newline_anchor&#39; fields are neither</span></div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;<span class="comment">   examined nor set.  */</span></div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;<span class="comment">/* Return, freeing storage we allocated.  */</span></div><div class="line"><a name="l01817"></a><span class="lineno"><a class="line" href="regex_8c.html#a90d3a551feb495f25eaf3e22933dd1d7"> 1817</a></span>&#160;<span class="preprocessor">#define FREE_STACK_RETURN(value)                \</span></div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;<span class="preprocessor">  return (free (compile_stack.stack), value)            </span><span class="comment">/* __MEM_CHECKED__ */</span><span class="preprocessor"></span></div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;<span class="keyword">static</span> <a class="code" href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5ae">reg_errcode_t</a></div><div class="line"><a name="l01821"></a><span class="lineno"><a class="line" href="regex_8c.html#a6a04e18fe89cacd4b8d04a474def5985"> 1821</a></span>&#160;<a class="code" href="regex_8c.html#a6a04e18fe89cacd4b8d04a474def5985">regex_compile</a> (pattern, size, syntax, bufp)</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;     <span class="keyword">const</span> <span class="keywordtype">char</span> *pattern;</div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;     <span class="keywordtype">size_t</span> size;</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;     <a class="code" href="__regex_8h.html#a7e0565199a2fabaca3d67a5a44fc4229">reg_syntax_t</a> syntax;</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;     <span class="keyword">struct </span><a class="code" href="structre__pattern__buffer.html">re_pattern_buffer</a> *bufp;</div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;{</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;  <span class="comment">/* We fetch characters from PATTERN here.  Even though PATTERN is</span></div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;<span class="comment">     `char *&#39; (i.e., signed), we declare these variables as unsigned, so</span></div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;<span class="comment">     they can be reliably used as array indices.  */</span></div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;  <span class="keyword">register</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> c, c1;</div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;</div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;  <span class="comment">/* A random temporary spot in PATTERN.  */</span></div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *p1;</div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;</div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;  <span class="comment">/* Points to the end of the buffer, where we should append.  */</span></div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;  <span class="keyword">register</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *b;</div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;</div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;  <span class="comment">/* Keeps track of unclosed groups.  */</span></div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;  <a class="code" href="structcompile__stack__type.html">compile_stack_type</a> compile_stack;</div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;</div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;  <span class="comment">/* Points to the current (ending) position in the pattern.  */</span></div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *p = pattern;</div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *pend = pattern + size;</div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;</div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;  <span class="comment">/* How to translate the characters in the pattern.  */</span></div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;  <a class="code" href="__regex_8h.html#a96c9fb9c7074cb21740b63092b0637a4">RE_TRANSLATE_TYPE</a> translate = bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a0a2f7fd160aa3cc0195fc7ee91e41195">translate</a>;</div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;  <span class="comment">/* Address of the count-byte of the most recently inserted `exactn&#39;</span></div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;<span class="comment">     command.  This makes it possible to tell if a new exact-match</span></div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;<span class="comment">     character can be added to that command or if the character requires</span></div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;<span class="comment">     a new `exactn&#39; command.  */</span></div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *pending_exact = 0;</div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;  <span class="comment">/* Address of start of the most recently finished expression.</span></div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;<span class="comment">     This tells, e.g., postfix * where to find the start of its</span></div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;<span class="comment">     operand.  Reset at the beginning of groups and alternatives.  */</span></div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *laststart = 0;</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;  <span class="comment">/* Address of beginning of regexp, or inside of last group.  */</span></div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *begalt;</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;</div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;  <span class="comment">/* Place in the uncompiled pattern (i.e., the {) to</span></div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;<span class="comment">     which to go back if the interval is invalid.  */</span></div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *beg_interval;</div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;</div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;  <span class="comment">/* Address of the place where a forward jump should go to the end of</span></div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;<span class="comment">     the containing expression.  Each alternative of an `or&#39; -- except the</span></div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;<span class="comment">     last -- ends with a forward jump of this sort.  */</span></div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *fixup_alt_jump = 0;</div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;</div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;  <span class="comment">/* Counts open-groups as they are encountered.  Remembered for the</span></div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;<span class="comment">     matching close-group on the compile stack, so the same register</span></div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;<span class="comment">     number is put in the stop_memory as the start_memory.  */</span></div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;  regnum_t regnum = 0;</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;</div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;  <a class="code" href="regex_8c.html#a90a312923984a45f83767acea95b84a1">DEBUG_PRINT1</a> (<span class="stringliteral">&quot;\nCompiling pattern: &quot;</span>);</div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;  <span class="keywordflow">if</span> (debug)</div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;    {</div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;      <span class="keywordtype">unsigned</span> debug_count;</div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;</div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;      <span class="keywordflow">for</span> (debug_count = 0; debug_count &lt; size; debug_count++)</div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;        putchar (pattern[debug_count]);</div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;      putchar (<span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;    }</div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* DEBUG */</span><span class="preprocessor"></span></div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;</div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;  <span class="comment">/* Initialize the compile stack.  */</span></div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;  compile_stack.<a class="code" href="structcompile__stack__type.html#aebaf05ac308fe465d6a630e5d863fd4a">stack</a> = <a class="code" href="regex_8c.html#aaf77bcbd178f50762a35333d83bacd09">TALLOC</a> (<a class="code" href="regex_8c.html#a988583693c22a092825fc78426d22856">INIT_COMPILE_STACK_SIZE</a>, <a class="code" href="structcompile__stack__elt__t.html">compile_stack_elt_t</a>);</div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;  <span class="keywordflow">if</span> (compile_stack.<a class="code" href="structcompile__stack__type.html#aebaf05ac308fe465d6a630e5d863fd4a">stack</a> == <a class="code" href="regex_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5aeaabf0128b7050c81c0fb933ea7265ebe9">REG_ESPACE</a>;</div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;</div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;  compile_stack.<a class="code" href="structcompile__stack__type.html#af5a43e711b027026ed61228f5c96ea71">size</a> = <a class="code" href="regex_8c.html#a988583693c22a092825fc78426d22856">INIT_COMPILE_STACK_SIZE</a>;</div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;  compile_stack.<a class="code" href="structcompile__stack__type.html#a45982ffa38800f8a9502da9708ec587c">avail</a> = 0;</div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;</div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;  <span class="comment">/* Initialize the pattern buffer.  */</span></div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;  bufp-&gt;<a class="code" href="structre__pattern__buffer.html#af3e24760a69608d163661c6d8977c358">syntax</a> = <a class="code" href="structre__pattern__buffer.html#af3e24760a69608d163661c6d8977c358">syntax</a>;</div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;  bufp-&gt;<a class="code" href="structre__pattern__buffer.html#af3578c777dbece95d6c8a1e10a6a7a5a">fastmap_accurate</a> = 0;</div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;  bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a1e21330e18a5a87f4803932c4af32881">not_bol</a> = bufp-&gt;<a class="code" href="structre__pattern__buffer.html#ab6ca2aea079c8ac7c399dfbac8b8d3a4">not_eol</a> = 0;</div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;</div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;  <span class="comment">/* Set `used&#39; to zero, so that if we return an error, the pattern</span></div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;<span class="comment">     printer (for debugging) will think there&#39;s no pattern.  We reset it</span></div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;<span class="comment">     at the end.  */</span></div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;  bufp-&gt;<a class="code" href="structre__pattern__buffer.html#ae53a42d0d93039e283f1d937e6e710a7">used</a> = 0;</div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;</div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;  <span class="comment">/* Always count groups, whether or not bufp-&gt;no_sub is set.  */</span></div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;  bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a4dfc1ce26c896695b77854da7d607ec8">re_nsub</a> = 0;</div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;</div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;<span class="preprocessor">#if !defined (emacs) &amp;&amp; !defined (SYNTAX_TABLE)</span></div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;  <span class="comment">/* Initialize the syntax table.  */</span></div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;   <a class="code" href="regex_8c.html#a74a93df5c6415ecc4c83d7497bb52a9b">init_syntax_once</a> ();</div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;</div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;  <span class="keywordflow">if</span> (bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a5f2c847d392dbddc45d478729a091ab0">allocated</a> == 0)</div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;    {</div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;      <span class="keywordflow">if</span> (bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a84025dce422d70b263288329274a888d">buffer</a>)</div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;        { <span class="comment">/* If zero allocated, but buffer is non-null, try to realloc</span></div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;<span class="comment">             enough space.  This loses if buffer&#39;s address is bogus, but</span></div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;<span class="comment">             that is the user&#39;s responsibility.  */</span></div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;          <a class="code" href="regex_8c.html#ae247cb248fa0309737dce6bdfc3a6a3d">RETALLOC</a> (bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a84025dce422d70b263288329274a888d">buffer</a>, <a class="code" href="regex_8c.html#a598285922e2b62b38ee46ced0ebd9388">INIT_BUF_SIZE</a>, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>);</div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;        }</div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;        { <span class="comment">/* Caller did not allocate a buffer.  Do it for them.  */</span></div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;          bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a84025dce422d70b263288329274a888d">buffer</a> = <a class="code" href="regex_8c.html#aaf77bcbd178f50762a35333d83bacd09">TALLOC</a> (<a class="code" href="regex_8c.html#a598285922e2b62b38ee46ced0ebd9388">INIT_BUF_SIZE</a>, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>);</div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;        }</div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;      <span class="keywordflow">if</span> (!bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a84025dce422d70b263288329274a888d">buffer</a>) <a class="code" href="regex_8c.html#a90d3a551feb495f25eaf3e22933dd1d7">FREE_STACK_RETURN</a> (<a class="code" href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5aeaabf0128b7050c81c0fb933ea7265ebe9">REG_ESPACE</a>);</div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;</div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;      bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a5f2c847d392dbddc45d478729a091ab0">allocated</a> = <a class="code" href="regex_8c.html#a598285922e2b62b38ee46ced0ebd9388">INIT_BUF_SIZE</a>;</div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;    }</div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;  begalt = b = bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a84025dce422d70b263288329274a888d">buffer</a>;</div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;  <span class="comment">/* Loop through the uncompiled pattern until we&#39;re at the end.  */</span></div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;  <span class="keywordflow">while</span> (p != pend)</div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;    {</div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;      <a class="code" href="regex_8c.html#a557d2f1c16f9bd2123e55885ee447c06">PATFETCH</a> (c);</div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;</div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;      <span class="keywordflow">switch</span> (c)</div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;        {</div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;^&#39;</span>:</div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;          {</div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;            <span class="keywordflow">if</span> (   <span class="comment">/* If at start of pattern, it&#39;s an operator.  */</span></div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;                   p == pattern + 1</div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;                   <span class="comment">/* If context independent, it&#39;s an operator.  */</span></div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;                || syntax &amp; <a class="code" href="__regex_8h.html#a544bf7770a00eaaa62374a00fea08a2d">RE_CONTEXT_INDEP_ANCHORS</a></div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;                   <span class="comment">/* Otherwise, depends on what&#39;s come before.  */</span></div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;                || <a class="code" href="regex_8c.html#a9fcec6851521f04076e51adfa274403c">at_begline_loc_p</a> (pattern, p, syntax))</div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;              <a class="code" href="regex_8c.html#aef73eb530578e61ff012a68faccb18d0">BUF_PUSH</a> (<a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a4780b4642f63093c414b1833e2d40107">begline</a>);</div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;              <span class="keywordflow">goto</span> normal_char;</div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;          }</div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;</div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;</div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;$&#39;</span>:</div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;          {</div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;            <span class="keywordflow">if</span> (   <span class="comment">/* If at end of pattern, it&#39;s an operator.  */</span></div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;                   p == pend</div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;                   <span class="comment">/* If context independent, it&#39;s an operator.  */</span></div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;                || syntax &amp; <a class="code" href="__regex_8h.html#a544bf7770a00eaaa62374a00fea08a2d">RE_CONTEXT_INDEP_ANCHORS</a></div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;                   <span class="comment">/* Otherwise, depends on what&#39;s next.  */</span></div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;                || <a class="code" href="regex_8c.html#a85a9d04db18bdf4b65ea1113400613e4">at_endline_loc_p</a> (p, pend, syntax))</div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;               <a class="code" href="regex_8c.html#aef73eb530578e61ff012a68faccb18d0">BUF_PUSH</a> (<a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a0556771866997767489c4da274f15aa4">endline</a>);</div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;             <span class="keywordflow">else</span></div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;               <span class="keywordflow">goto</span> normal_char;</div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;           }</div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;           <span class="keywordflow">break</span>;</div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;</div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;</div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;+&#39;</span>:</div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;?&#39;</span>:</div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;          <span class="keywordflow">if</span> ((syntax &amp; <a class="code" href="__regex_8h.html#a94bdc20e1e83b401d2725902a642aa1e">RE_BK_PLUS_QM</a>)</div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;              || (syntax &amp; <a class="code" href="__regex_8h.html#a0782bb31ad7160085c33f13dca7e369f">RE_LIMITED_OPS</a>))</div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;            <span class="keywordflow">goto</span> normal_char;</div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;        handle_plus:</div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;*&#39;</span>:</div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;          <span class="comment">/* If there is no previous pattern... */</span></div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;          <span class="keywordflow">if</span> (!laststart)</div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;            {</div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;              <span class="keywordflow">if</span> (syntax &amp; <a class="code" href="__regex_8h.html#ae344a4e6129c8d549a88cd5f45e86adb">RE_CONTEXT_INVALID_OPS</a>)</div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;                <a class="code" href="regex_8c.html#a90d3a551feb495f25eaf3e22933dd1d7">FREE_STACK_RETURN</a> (<a class="code" href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5aeaf6eaf32c5250906aa304d801a227ccf9">REG_BADRPT</a>);</div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;              <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!(syntax &amp; <a class="code" href="__regex_8h.html#aa96ee57fb2be85936dbb14f2b4c44b50">RE_CONTEXT_INDEP_OPS</a>))</div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;                <span class="keywordflow">goto</span> normal_char;</div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;            }</div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;</div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;          {</div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;            <span class="comment">/* Are we optimizing this jump?  */</span></div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;            <span class="keywordtype">boolean</span> keep_string_p = <span class="keyword">false</span>;</div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;</div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;            <span class="comment">/* 1 means zero (many) matches is allowed.  */</span></div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;            <span class="keywordtype">char</span> zero_times_ok = 0, many_times_ok = 0;</div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;</div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;            <span class="comment">/* If there is a sequence of repetition chars, collapse it</span></div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;<span class="comment">               down to just one (the right one).  We can&#39;t combine</span></div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;<span class="comment">               interval operators with these because of, e.g., `a{2}*&#39;,</span></div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;<span class="comment">               which should only match an even number of `a&#39;s.  */</span></div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;</div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;            <span class="keywordflow">for</span> (;;)</div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;              {</div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;                zero_times_ok |= c != <span class="charliteral">&#39;+&#39;</span>;</div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;                many_times_ok |= c != <span class="charliteral">&#39;?&#39;</span>;</div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;</div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;                <span class="keywordflow">if</span> (p == pend)</div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;</div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;                <a class="code" href="regex_8c.html#a557d2f1c16f9bd2123e55885ee447c06">PATFETCH</a> (c);</div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;</div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;                <span class="keywordflow">if</span> (c == <span class="charliteral">&#39;*&#39;</span></div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;                    || (!(syntax &amp; RE_BK_PLUS_QM) &amp;&amp; (c == <span class="charliteral">&#39;+&#39;</span> || c == <span class="charliteral">&#39;?&#39;</span>)))</div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;                  ;</div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;</div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (syntax &amp; RE_BK_PLUS_QM  &amp;&amp;  c == <span class="charliteral">&#39;\\&#39;</span>)</div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;                  {</div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;                    <span class="keywordflow">if</span> (p == pend) <a class="code" href="regex_8c.html#a90d3a551feb495f25eaf3e22933dd1d7">FREE_STACK_RETURN</a> (<a class="code" href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5aeabbae03a00b1f2359894b7fa4ad7efe83">REG_EESCAPE</a>);</div><div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;</div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;                    <a class="code" href="regex_8c.html#a557d2f1c16f9bd2123e55885ee447c06">PATFETCH</a> (c1);</div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;                    <span class="keywordflow">if</span> (!(c1 == <span class="charliteral">&#39;+&#39;</span> || c1 == <span class="charliteral">&#39;?&#39;</span>))</div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;                      {</div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;                        <a class="code" href="regex_8c.html#a77ae0460c3885ddc73f4544ef494e402">PATUNFETCH</a>;</div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;                        <a class="code" href="regex_8c.html#a77ae0460c3885ddc73f4544ef494e402">PATUNFETCH</a>;</div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;                      }</div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;</div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;                    c = c1;</div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;                  }</div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;                <span class="keywordflow">else</span></div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;                  {</div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;                    <a class="code" href="regex_8c.html#a77ae0460c3885ddc73f4544ef494e402">PATUNFETCH</a>;</div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;                  }</div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;</div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;                <span class="comment">/* If we get here, we found another repeat character.  */</span></div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;               }</div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;</div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;            <span class="comment">/* Star, etc. applied to an empty pattern is equivalent</span></div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;<span class="comment">               to an empty pattern.  */</span></div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;            <span class="keywordflow">if</span> (!laststart)</div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;              <span class="keywordflow">break</span>;</div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;</div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;            <span class="comment">/* Now we know whether or not zero matches is allowed</span></div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;<span class="comment">               and also whether or not two or more matches is allowed.  */</span></div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;            <span class="keywordflow">if</span> (many_times_ok)</div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;              { <span class="comment">/* More than one repetition is allowed, so put in at the</span></div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;<span class="comment">                   end a backward relative jump from `b&#39; to before the next</span></div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;<span class="comment">                   jump we&#39;re going to put in below (which jumps from</span></div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;<span class="comment">                   laststart to after this jump).</span></div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;<span class="comment">                   But if we are at the `*&#39; in the exact sequence `.*\n&#39;,</span></div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;<span class="comment">                   insert an unconditional jump backwards to the .,</span></div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;<span class="comment">                   instead of the beginning of the loop.  This way we only</span></div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;<span class="comment">                   push a failure point once, instead of every time</span></div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;<span class="comment">                   through the loop.  */</span></div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;                <a class="code" href="sendlib_8c.html#af576bf8ffa22a44e53018c67095ffbf0">assert</a> (p - 1 &gt; pattern);</div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;</div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;                <span class="comment">/* Allocate the space for the jump.  */</span></div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;                <a class="code" href="regex_8c.html#a820795fca6e5960dd9657eda06c66ed5">GET_BUFFER_SPACE</a> (3);</div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;</div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;                <span class="comment">/* We know we are not at the first character of the pattern,</span></div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;<span class="comment">                   because laststart was nonzero.  And we&#39;ve already</span></div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;<span class="comment">                   incremented `p&#39;, by the way, to be the character after</span></div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;<span class="comment">                   the `*&#39;.  Do we have to do something analogous here</span></div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;<span class="comment">                   for null bytes, because of RE_DOT_NOT_NULL?  */</span></div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="regex_8c.html#a2eeeb49b77aa0f299d2d3c23dc1bfa17">TRANSLATE</a> (*(p - 2)) == <a class="code" href="regex_8c.html#a2eeeb49b77aa0f299d2d3c23dc1bfa17">TRANSLATE</a> (<span class="charliteral">&#39;.&#39;</span>)</div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;                    &amp;&amp; zero_times_ok</div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;                    &amp;&amp; p &lt; pend &amp;&amp; <a class="code" href="regex_8c.html#a2eeeb49b77aa0f299d2d3c23dc1bfa17">TRANSLATE</a> (*p) == <a class="code" href="regex_8c.html#a2eeeb49b77aa0f299d2d3c23dc1bfa17">TRANSLATE</a> (<span class="charliteral">&#39;\n&#39;</span>)</div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;                    &amp;&amp; !(syntax &amp; <a class="code" href="__regex_8h.html#a405fe43871f2df60407b3c8272f4624c">RE_DOT_NEWLINE</a>))</div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;                  { <span class="comment">/* We have .*\n.  */</span></div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;                    <a class="code" href="regex_8c.html#acfebc9fd667ce5b7d2162f2677087e21">STORE_JUMP</a> (<a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a5a08a3c1fa135350961630d2f9c2b849">jump</a>, b, laststart);</div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;                    keep_string_p = <span class="keyword">true</span>;</div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;                  }</div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;                <span class="keywordflow">else</span></div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;                  <span class="comment">/* Anything else.  */</span></div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;                  <a class="code" href="regex_8c.html#acfebc9fd667ce5b7d2162f2677087e21">STORE_JUMP</a> (<a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a54819e2968ab91bf6ad492f131d7f37b">maybe_pop_jump</a>, b, laststart - 3);</div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;</div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;                <span class="comment">/* We&#39;ve added more stuff to the buffer.  */</span></div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;                b += 3;</div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;              }</div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;</div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;            <span class="comment">/* On failure, jump from laststart to b + 3, which will be the</span></div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;<span class="comment">               end of the buffer after this jump is inserted.  */</span></div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;            <a class="code" href="regex_8c.html#a820795fca6e5960dd9657eda06c66ed5">GET_BUFFER_SPACE</a> (3);</div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;            <a class="code" href="regex_8c.html#a4c4a6f3c88794d7c99809e8ef5054614">INSERT_JUMP</a> (keep_string_p ? <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118adbebd35172fa7358845d6dd61727883b">on_failure_keep_string_jump</a></div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;                                       : <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a5ca3d8a56cc5259243bcaffedd070287">on_failure_jump</a>,</div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;                         laststart, b + 3);</div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;            pending_exact = 0;</div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;            b += 3;</div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;</div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;            <span class="keywordflow">if</span> (!zero_times_ok)</div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;              {</div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;                <span class="comment">/* At least one repetition is required, so insert a</span></div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;<span class="comment">                   `dummy_failure_jump&#39; before the initial</span></div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;<span class="comment">                   `on_failure_jump&#39; instruction of the loop. This</span></div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;<span class="comment">                   effects a skip over that instruction the first time</span></div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;<span class="comment">                   we hit that loop.  */</span></div><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;                <a class="code" href="regex_8c.html#a820795fca6e5960dd9657eda06c66ed5">GET_BUFFER_SPACE</a> (3);</div><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;                <a class="code" href="regex_8c.html#a4c4a6f3c88794d7c99809e8ef5054614">INSERT_JUMP</a> (<a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a3918fb85c0fd4b2f8c84afad14836eba">dummy_failure_jump</a>, laststart, laststart + 6);</div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;                b += 3;</div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;              }</div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;            }</div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;</div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;</div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;.&#39;</span>:</div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;          laststart = b;</div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;          <a class="code" href="regex_8c.html#aef73eb530578e61ff012a68faccb18d0">BUF_PUSH</a> (<a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a375d40bb404dcb4aedbb775f40e7f648">anychar</a>);</div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;</div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;</div><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;[&#39;</span>:</div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;          {</div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;            <span class="keywordtype">boolean</span> had_char_class = <span class="keyword">false</span>;</div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;</div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;            <span class="keywordflow">if</span> (p == pend) <a class="code" href="regex_8c.html#a90d3a551feb495f25eaf3e22933dd1d7">FREE_STACK_RETURN</a> (<a class="code" href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5aea88ca33166ecb752a908d3a28f2150123">REG_EBRACK</a>);</div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;</div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;            <span class="comment">/* Ensure that we have enough space to push a charset: the</span></div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;<span class="comment">               opcode, the length count, and the bitset; 34 bytes in all.  */</span></div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;            <a class="code" href="regex_8c.html#a820795fca6e5960dd9657eda06c66ed5">GET_BUFFER_SPACE</a> (34);</div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;</div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;            laststart = b;</div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;</div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;            <span class="comment">/* We test `*p == &#39;^&#39; twice, instead of using an if</span></div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;<span class="comment">               statement, so we only need one BUF_PUSH.  */</span></div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;            <a class="code" href="regex_8c.html#aef73eb530578e61ff012a68faccb18d0">BUF_PUSH</a> (*p == <span class="charliteral">&#39;^&#39;</span> ? <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118abcbe9b8a81da1098e4ffbb7c4f4a8e2e">charset_not</a> : <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a6247a0132ac9bb1af7dbc840afe09c88">charset</a>);</div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;            <span class="keywordflow">if</span> (*p == <span class="charliteral">&#39;^&#39;</span>)</div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;              p++;</div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;</div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;            <span class="comment">/* Remember the first position in the bracket expression.  */</span></div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;            p1 = p;</div><div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;</div><div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;            <span class="comment">/* Push the number of bytes in the bitmap.  */</span></div><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;            <a class="code" href="regex_8c.html#aef73eb530578e61ff012a68faccb18d0">BUF_PUSH</a> ((1 &lt;&lt; <a class="code" href="regex_8c.html#ad72dc64cd2c9bc3598f792dc518d03b2">BYTEWIDTH</a>) / <a class="code" href="regex_8c.html#ad72dc64cd2c9bc3598f792dc518d03b2">BYTEWIDTH</a>);</div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;</div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;            <span class="comment">/* Clear the whole map.  */</span></div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;            bzero (b, (1 &lt;&lt; <a class="code" href="regex_8c.html#ad72dc64cd2c9bc3598f792dc518d03b2">BYTEWIDTH</a>) / <a class="code" href="regex_8c.html#ad72dc64cd2c9bc3598f792dc518d03b2">BYTEWIDTH</a>);</div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;</div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;            <span class="comment">/* charset_not matches newline according to a syntax bit.  */</span></div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;            <span class="keywordflow">if</span> ((re_opcode_t) b[-2] == <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118abcbe9b8a81da1098e4ffbb7c4f4a8e2e">charset_not</a></div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;                &amp;&amp; (syntax &amp; <a class="code" href="__regex_8h.html#aad6ec0e3f8f0bb3c53213e3f9ca77d8e">RE_HAT_LISTS_NOT_NEWLINE</a>))</div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;              <a class="code" href="regex_8c.html#aa09a4c3c61b8d82d7134225bfd5a32f7">SET_LIST_BIT</a> (<span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;</div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;            <span class="comment">/* Read in characters and ranges, setting map bits.  */</span></div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;            <span class="keywordflow">for</span> (;;)</div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;              {</div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;                <span class="keywordflow">if</span> (p == pend) <a class="code" href="regex_8c.html#a90d3a551feb495f25eaf3e22933dd1d7">FREE_STACK_RETURN</a> (<a class="code" href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5aea88ca33166ecb752a908d3a28f2150123">REG_EBRACK</a>);</div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;</div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;                <a class="code" href="regex_8c.html#a557d2f1c16f9bd2123e55885ee447c06">PATFETCH</a> (c);</div><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;</div><div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;                <span class="comment">/* \ might escape characters inside [...] and [^...].  */</span></div><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;                <span class="keywordflow">if</span> ((syntax &amp; <a class="code" href="__regex_8h.html#a45356e84c34c98ed125ea5f75814ccc5">RE_BACKSLASH_ESCAPE_IN_LISTS</a>) &amp;&amp; c == <span class="charliteral">&#39;\\&#39;</span>)</div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;                  {</div><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;                    <span class="keywordflow">if</span> (p == pend) <a class="code" href="regex_8c.html#a90d3a551feb495f25eaf3e22933dd1d7">FREE_STACK_RETURN</a> (<a class="code" href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5aeabbae03a00b1f2359894b7fa4ad7efe83">REG_EESCAPE</a>);</div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;</div><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;                    <a class="code" href="regex_8c.html#a557d2f1c16f9bd2123e55885ee447c06">PATFETCH</a> (c1);</div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;                    <a class="code" href="regex_8c.html#aa09a4c3c61b8d82d7134225bfd5a32f7">SET_LIST_BIT</a> (c1);</div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;                    <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;                  }</div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;</div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;                <span class="comment">/* Could be the end of the bracket expression.  If it&#39;s</span></div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;<span class="comment">                   not (i.e., when the bracket expression is `[]&#39; so</span></div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;<span class="comment">                   far), the &#39;]&#39; character bit gets set way below.  */</span></div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;                <span class="keywordflow">if</span> (c == <span class="charliteral">&#39;]&#39;</span> &amp;&amp; p != p1 + 1)</div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;</div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;                <span class="comment">/* Look ahead to see if it&#39;s a range when the last thing</span></div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;<span class="comment">                   was a character class.  */</span></div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;                <span class="keywordflow">if</span> (had_char_class &amp;&amp; c == <span class="charliteral">&#39;-&#39;</span> &amp;&amp; *p != <span class="charliteral">&#39;]&#39;</span>)</div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;                  <a class="code" href="regex_8c.html#a90d3a551feb495f25eaf3e22933dd1d7">FREE_STACK_RETURN</a> (<a class="code" href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5aea16489a654c428b506103ccc746adda00">REG_ERANGE</a>);</div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;</div><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;                <span class="comment">/* Look ahead to see if it&#39;s a range when the last thing</span></div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;<span class="comment">                   was a character: if this is a hyphen not at the</span></div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;<span class="comment">                   beginning or the end of a list, then it&#39;s the range</span></div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;<span class="comment">                   operator.  */</span></div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;                <span class="keywordflow">if</span> (c == <span class="charliteral">&#39;-&#39;</span></div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;                    &amp;&amp; !(p - 2 &gt;= pattern &amp;&amp; p[-2] == <span class="charliteral">&#39;[&#39;</span>)</div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;                    &amp;&amp; !(p - 3 &gt;= pattern &amp;&amp; p[-3] == <span class="charliteral">&#39;[&#39;</span> &amp;&amp; p[-2] == <span class="charliteral">&#39;^&#39;</span>)</div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;                    &amp;&amp; *p != <span class="charliteral">&#39;]&#39;</span>)</div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;                  {</div><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;                    <a class="code" href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5ae">reg_errcode_t</a> ret</div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;                      = <a class="code" href="regex_8c.html#a06b0c1ae265d6791c041df0ddf6d7ff6">compile_range</a> (&amp;p, pend, translate, syntax, b);</div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;                    <span class="keywordflow">if</span> (ret != <a class="code" href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5aeafa64e5a57596c8c859f982512f52cd6b">REG_NOERROR</a>) <a class="code" href="regex_8c.html#a90d3a551feb495f25eaf3e22933dd1d7">FREE_STACK_RETURN</a> (ret);</div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;                  }</div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;</div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (p[0] == <span class="charliteral">&#39;-&#39;</span> &amp;&amp; p[1] != <span class="charliteral">&#39;]&#39;</span>)</div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;                  { <span class="comment">/* This handles ranges made up of characters only.  */</span></div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;                    <a class="code" href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5ae">reg_errcode_t</a> ret;</div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;</div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;                    <span class="comment">/* Move past the `-&#39;.  */</span></div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;                    <a class="code" href="regex_8c.html#a557d2f1c16f9bd2123e55885ee447c06">PATFETCH</a> (c1);</div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;</div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;                    ret = <a class="code" href="regex_8c.html#a06b0c1ae265d6791c041df0ddf6d7ff6">compile_range</a> (&amp;p, pend, translate, syntax, b);</div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;                    <span class="keywordflow">if</span> (ret != <a class="code" href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5aeafa64e5a57596c8c859f982512f52cd6b">REG_NOERROR</a>) <a class="code" href="regex_8c.html#a90d3a551feb495f25eaf3e22933dd1d7">FREE_STACK_RETURN</a> (ret);</div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;                  }</div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;</div><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;                <span class="comment">/* See if we&#39;re at the beginning of a possible character</span></div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;<span class="comment">                   class.  */</span></div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;</div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (syntax &amp; <a class="code" href="__regex_8h.html#a9650e76532d0ae7c8cc3ea5eb6dee6e7">RE_CHAR_CLASSES</a> &amp;&amp; c == <span class="charliteral">&#39;[&#39;</span> &amp;&amp; *p == <span class="charliteral">&#39;:&#39;</span>)</div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;                  { <span class="comment">/* Leave room for the null.  */</span></div><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;                    <span class="keywordtype">char</span> <a class="code" href="hash-string_8h.html#a537825d894fc8d6a786f28a99ce8af2c">str</a>[<a class="code" href="regex_8c.html#a060354a63e337df065f8cd869b3118f1">CHAR_CLASS_MAX_LENGTH</a> + 1];</div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;</div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;                    <a class="code" href="regex_8c.html#a557d2f1c16f9bd2123e55885ee447c06">PATFETCH</a> (c);</div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;                    c1 = 0;</div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;</div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;                    <span class="comment">/* If pattern is `[[:&#39;.  */</span></div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;                    <span class="keywordflow">if</span> (p == pend) <a class="code" href="regex_8c.html#a90d3a551feb495f25eaf3e22933dd1d7">FREE_STACK_RETURN</a> (<a class="code" href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5aea88ca33166ecb752a908d3a28f2150123">REG_EBRACK</a>);</div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;</div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;                    <span class="keywordflow">for</span> (;;)</div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;                      {</div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;                        <a class="code" href="regex_8c.html#a557d2f1c16f9bd2123e55885ee447c06">PATFETCH</a> (c);</div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;                        <span class="keywordflow">if</span> (c == <span class="charliteral">&#39;:&#39;</span> || c == <span class="charliteral">&#39;]&#39;</span> || p == pend</div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;                            || (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)c1 == <a class="code" href="regex_8c.html#a060354a63e337df065f8cd869b3118f1">CHAR_CLASS_MAX_LENGTH</a>)</div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;                          <span class="keywordflow">break</span>;</div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;                        str[c1++] = c;</div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;                      }</div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;                    str[c1] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;</div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;                    <span class="comment">/* If isn&#39;t a word bracketed by `[:&#39; and:`]&#39;:</span></div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;<span class="comment">                       undo the ending character, the letters, and leave</span></div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;<span class="comment">                       the leading `:&#39; and `[&#39; (but set bits for them).  */</span></div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;                    <span class="keywordflow">if</span> (c == <span class="charliteral">&#39;:&#39;</span> &amp;&amp; *p == <span class="charliteral">&#39;]&#39;</span>)</div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;                      {</div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;<span class="preprocessor">#if defined _LIBC || (defined HAVE_WC_FUNCS &amp;&amp; defined HAVE_WCTYPE_H &amp;&amp; defined HAVE_WCHAR_H)</span></div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;                        <span class="keywordtype">boolean</span> is_lower = <a class="code" href="regex_8c.html#ab42511b5b7bf70ad31b13c44469d117f">STREQ</a> (str, <span class="stringliteral">&quot;lower&quot;</span>);</div><div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;                        <span class="keywordtype">boolean</span> is_upper = <a class="code" href="regex_8c.html#ab42511b5b7bf70ad31b13c44469d117f">STREQ</a> (str, <span class="stringliteral">&quot;upper&quot;</span>);</div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;                        wctype_t wt;</div><div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;                        <span class="keywordtype">wchar_t</span> twt;</div><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;                        <span class="keywordtype">int</span> ch;</div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;</div><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;                        wt = wctype (str);</div><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;                        <span class="keywordflow">if</span> (wt == 0)</div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;                          <a class="code" href="regex_8c.html#a90d3a551feb495f25eaf3e22933dd1d7">FREE_STACK_RETURN</a> (<a class="code" href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5aea9a04e1101d24afa61896779ff846f837">REG_ECTYPE</a>);</div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;</div><div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;                        <span class="comment">/* Throw away the ] at the end of the character</span></div><div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;<span class="comment">                           class.  */</span></div><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;                        <a class="code" href="regex_8c.html#a557d2f1c16f9bd2123e55885ee447c06">PATFETCH</a> (c);</div><div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;</div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;                        <span class="keywordflow">if</span> (p == pend) <a class="code" href="regex_8c.html#a90d3a551feb495f25eaf3e22933dd1d7">FREE_STACK_RETURN</a> (<a class="code" href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5aea88ca33166ecb752a908d3a28f2150123">REG_EBRACK</a>);</div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;</div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;                        <span class="keywordflow">for</span> (ch = 0; ch &lt; 1 &lt;&lt; <a class="code" href="regex_8c.html#ad72dc64cd2c9bc3598f792dc518d03b2">BYTEWIDTH</a>; ++ch)</div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;                          {</div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;                            <span class="keywordflow">if</span> (mbtowc (&amp;twt, (<span class="keywordtype">char</span> *)&amp;ch, 1) &gt;= 0 &amp;&amp; iswctype (twt, wt))</div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;                              <a class="code" href="regex_8c.html#aa09a4c3c61b8d82d7134225bfd5a32f7">SET_LIST_BIT</a> (ch);</div><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;</div><div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;                            <span class="keywordflow">if</span> (translate &amp;&amp; (is_upper || is_lower)</div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;                                &amp;&amp; (<a class="code" href="regex_8c.html#a2bfd4177f165a5968d95960d42578ab6">ISUPPER</a> (ch) || <a class="code" href="regex_8c.html#acb1e7358e00baea87b36a635fdb6970f">ISLOWER</a> (ch)))</div><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;                              <a class="code" href="regex_8c.html#aa09a4c3c61b8d82d7134225bfd5a32f7">SET_LIST_BIT</a> (ch);</div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;                          }</div><div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;</div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;                        had_char_class = <span class="keyword">true</span>;</div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;                        <span class="keywordtype">int</span> ch;</div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;                        <span class="keywordtype">boolean</span> is_alnum = <a class="code" href="regex_8c.html#ab42511b5b7bf70ad31b13c44469d117f">STREQ</a> (str, <span class="stringliteral">&quot;alnum&quot;</span>);</div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;                        <span class="keywordtype">boolean</span> is_alpha = <a class="code" href="regex_8c.html#ab42511b5b7bf70ad31b13c44469d117f">STREQ</a> (str, <span class="stringliteral">&quot;alpha&quot;</span>);</div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;                        <span class="keywordtype">boolean</span> is_blank = <a class="code" href="regex_8c.html#ab42511b5b7bf70ad31b13c44469d117f">STREQ</a> (str, <span class="stringliteral">&quot;blank&quot;</span>);</div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;                        <span class="keywordtype">boolean</span> is_cntrl = <a class="code" href="regex_8c.html#ab42511b5b7bf70ad31b13c44469d117f">STREQ</a> (str, <span class="stringliteral">&quot;cntrl&quot;</span>);</div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;                        <span class="keywordtype">boolean</span> is_digit = <a class="code" href="regex_8c.html#ab42511b5b7bf70ad31b13c44469d117f">STREQ</a> (str, <span class="stringliteral">&quot;digit&quot;</span>);</div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;                        <span class="keywordtype">boolean</span> is_graph = <a class="code" href="regex_8c.html#ab42511b5b7bf70ad31b13c44469d117f">STREQ</a> (str, <span class="stringliteral">&quot;graph&quot;</span>);</div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;                        <span class="keywordtype">boolean</span> is_lower = <a class="code" href="regex_8c.html#ab42511b5b7bf70ad31b13c44469d117f">STREQ</a> (str, <span class="stringliteral">&quot;lower&quot;</span>);</div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;                        <span class="keywordtype">boolean</span> is_print = <a class="code" href="regex_8c.html#ab42511b5b7bf70ad31b13c44469d117f">STREQ</a> (str, <span class="stringliteral">&quot;print&quot;</span>);</div><div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;                        <span class="keywordtype">boolean</span> is_punct = <a class="code" href="regex_8c.html#ab42511b5b7bf70ad31b13c44469d117f">STREQ</a> (str, <span class="stringliteral">&quot;punct&quot;</span>);</div><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;                        <span class="keywordtype">boolean</span> is_space = <a class="code" href="regex_8c.html#ab42511b5b7bf70ad31b13c44469d117f">STREQ</a> (str, <span class="stringliteral">&quot;space&quot;</span>);</div><div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;                        <span class="keywordtype">boolean</span> is_upper = <a class="code" href="regex_8c.html#ab42511b5b7bf70ad31b13c44469d117f">STREQ</a> (str, <span class="stringliteral">&quot;upper&quot;</span>);</div><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;                        <span class="keywordtype">boolean</span> is_xdigit = <a class="code" href="regex_8c.html#ab42511b5b7bf70ad31b13c44469d117f">STREQ</a> (str, <span class="stringliteral">&quot;xdigit&quot;</span>);</div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;</div><div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;                        <span class="keywordflow">if</span> (!<a class="code" href="regex_8c.html#a8b3d83f068b179782bccaca23e3b20f7">IS_CHAR_CLASS</a> (str))</div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;                          <a class="code" href="regex_8c.html#a90d3a551feb495f25eaf3e22933dd1d7">FREE_STACK_RETURN</a> (<a class="code" href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5aea9a04e1101d24afa61896779ff846f837">REG_ECTYPE</a>);</div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;</div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;                        <span class="comment">/* Throw away the ] at the end of the character</span></div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;<span class="comment">                           class.  */</span></div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;                        <a class="code" href="regex_8c.html#a557d2f1c16f9bd2123e55885ee447c06">PATFETCH</a> (c);</div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;</div><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;                        <span class="keywordflow">if</span> (p == pend) <a class="code" href="regex_8c.html#a90d3a551feb495f25eaf3e22933dd1d7">FREE_STACK_RETURN</a> (<a class="code" href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5aea88ca33166ecb752a908d3a28f2150123">REG_EBRACK</a>);</div><div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;</div><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;                        <span class="keywordflow">for</span> (ch = 0; ch &lt; 1 &lt;&lt; <a class="code" href="regex_8c.html#ad72dc64cd2c9bc3598f792dc518d03b2">BYTEWIDTH</a>; ch++)</div><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;                          {</div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;                            <span class="comment">/* This was split into 3 if&#39;s to</span></div><div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;<span class="comment">                               avoid an arbitrary limit in some compiler.  */</span></div><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;                            <span class="keywordflow">if</span> (   (is_alnum  &amp;&amp; <a class="code" href="regex_8c.html#a8c0056118f585fa052e0f76e3198db6a">ISALNUM</a> (ch))</div><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;                                || (is_alpha  &amp;&amp; <a class="code" href="regex_8c.html#afe0bf9496b5e0ecf253fb86072ee7ecf">ISALPHA</a> (ch))</div><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;                                || (is_blank  &amp;&amp; <a class="code" href="regex_8c.html#a3773b51bd1f0ba67a1d8f05923c87d4c">ISBLANK</a> (ch))</div><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;                                || (is_cntrl  &amp;&amp; <a class="code" href="regex_8c.html#a5079e89f60f6f44944ea9dc3b59f14d5">ISCNTRL</a> (ch)))</div><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;                              <a class="code" href="regex_8c.html#aa09a4c3c61b8d82d7134225bfd5a32f7">SET_LIST_BIT</a> (ch);</div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;                            <span class="keywordflow">if</span> (   (is_digit  &amp;&amp; <a class="code" href="regex_8c.html#ab615ddd0d086b80219cd7e0345d6b5ef">ISDIGIT</a> (ch))</div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;                                || (is_graph  &amp;&amp; <a class="code" href="regex_8c.html#a31ddd189071199427310ccde9cedfb71">ISGRAPH</a> (ch))</div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;                                || (is_lower  &amp;&amp; <a class="code" href="regex_8c.html#acb1e7358e00baea87b36a635fdb6970f">ISLOWER</a> (ch))</div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;                                || (is_print  &amp;&amp; <a class="code" href="regex_8c.html#af65108a54093e5c7220dfc15f6cd9db1">ISPRINT</a> (ch)))</div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;                              <a class="code" href="regex_8c.html#aa09a4c3c61b8d82d7134225bfd5a32f7">SET_LIST_BIT</a> (ch);</div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;                            <span class="keywordflow">if</span> (   (is_punct  &amp;&amp; <a class="code" href="regex_8c.html#a165393454eb1019f3f77cedba52e23de">ISPUNCT</a> (ch))</div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;                                || (is_space  &amp;&amp; <a class="code" href="regex_8c.html#ae8cdc17e44905c826bddf416b7bf621c">ISSPACE</a> (ch))</div><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;                                || (is_upper  &amp;&amp; <a class="code" href="regex_8c.html#a2bfd4177f165a5968d95960d42578ab6">ISUPPER</a> (ch))</div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;                                || (is_xdigit &amp;&amp; <a class="code" href="regex_8c.html#a419f06aab80b7c8eb3aaf4dd70463731">ISXDIGIT</a> (ch)))</div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;                              <a class="code" href="regex_8c.html#aa09a4c3c61b8d82d7134225bfd5a32f7">SET_LIST_BIT</a> (ch);</div><div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;                            <span class="keywordflow">if</span> (   translate &amp;&amp; (is_upper || is_lower)</div><div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;                                &amp;&amp; (<a class="code" href="regex_8c.html#a2bfd4177f165a5968d95960d42578ab6">ISUPPER</a> (ch) || <a class="code" href="regex_8c.html#acb1e7358e00baea87b36a635fdb6970f">ISLOWER</a> (ch)))</div><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;                              <a class="code" href="regex_8c.html#aa09a4c3c61b8d82d7134225bfd5a32f7">SET_LIST_BIT</a> (ch);</div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;                          }</div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;                        had_char_class = <span class="keyword">true</span>;</div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">/* libc || wctype.h */</span><span class="preprocessor"></span></div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;                      }</div><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;                    <span class="keywordflow">else</span></div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;                      {</div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;                        c1++;</div><div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;                        <span class="keywordflow">while</span> (c1--)</div><div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;                          <a class="code" href="regex_8c.html#a77ae0460c3885ddc73f4544ef494e402">PATUNFETCH</a>;</div><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;                        <a class="code" href="regex_8c.html#aa09a4c3c61b8d82d7134225bfd5a32f7">SET_LIST_BIT</a> (<span class="charliteral">&#39;[&#39;</span>);</div><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;                        <a class="code" href="regex_8c.html#aa09a4c3c61b8d82d7134225bfd5a32f7">SET_LIST_BIT</a> (<span class="charliteral">&#39;:&#39;</span>);</div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;                        had_char_class = <span class="keyword">false</span>;</div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;                      }</div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;                  }</div><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;                <span class="keywordflow">else</span></div><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;                  {</div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;                    had_char_class = <span class="keyword">false</span>;</div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;                    <a class="code" href="regex_8c.html#aa09a4c3c61b8d82d7134225bfd5a32f7">SET_LIST_BIT</a> (c);</div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;                  }</div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;              }</div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;</div><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;            <span class="comment">/* Discard any (non)matching list bytes that are all 0 at the</span></div><div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;<span class="comment">               end of the map.  Decrease the map-length byte too.  */</span></div><div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;            <span class="keywordflow">while</span> ((<span class="keywordtype">int</span>) b[-1] &gt; 0 &amp;&amp; b[b[-1] - 1] == 0)</div><div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;              b[-1]--;</div><div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;            b += b[-1];</div><div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;          }</div><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;</div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;</div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;(&#39;</span>:</div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;          <span class="keywordflow">if</span> (syntax &amp; <a class="code" href="__regex_8h.html#af2f17f18a9c771c91d963f466f559e68">RE_NO_BK_PARENS</a>)</div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;            <span class="keywordflow">goto</span> handle_open;</div><div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;          <span class="keywordflow">else</span></div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;            <span class="keywordflow">goto</span> normal_char;</div><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;</div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;</div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;)&#39;</span>:</div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;          <span class="keywordflow">if</span> (syntax &amp; RE_NO_BK_PARENS)</div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;            <span class="keywordflow">goto</span> handle_close;</div><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;          <span class="keywordflow">else</span></div><div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;            <span class="keywordflow">goto</span> normal_char;</div><div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;</div><div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;</div><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;\n&#39;</span>:</div><div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;          <span class="keywordflow">if</span> (syntax &amp; <a class="code" href="__regex_8h.html#a7a69bf315a61cb9d674332a6a5d64819">RE_NEWLINE_ALT</a>)</div><div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;            <span class="keywordflow">goto</span> handle_alt;</div><div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;          <span class="keywordflow">else</span></div><div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;            <span class="keywordflow">goto</span> normal_char;</div><div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;</div><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;</div><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;|&#39;</span>:</div><div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;          <span class="keywordflow">if</span> (syntax &amp; <a class="code" href="__regex_8h.html#a834997e69569c41f0394d6ee120051a0">RE_NO_BK_VBAR</a>)</div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;            <span class="keywordflow">goto</span> handle_alt;</div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;          <span class="keywordflow">else</span></div><div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;            <span class="keywordflow">goto</span> normal_char;</div><div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;</div><div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;</div><div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;{&#39;</span>:</div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;           <span class="keywordflow">if</span> (syntax &amp; <a class="code" href="__regex_8h.html#a377bd32fc62adedc890f74cd18845aa9">RE_INTERVALS</a> &amp;&amp; syntax &amp; <a class="code" href="__regex_8h.html#a924b9782a779a0db37e3c858967d60af">RE_NO_BK_BRACES</a>)</div><div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;             <span class="keywordflow">goto</span> handle_interval;</div><div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;           <span class="keywordflow">else</span></div><div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;             <span class="keywordflow">goto</span> normal_char;</div><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;</div><div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;</div><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;\\&#39;</span>:</div><div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;          <span class="keywordflow">if</span> (p == pend) <a class="code" href="regex_8c.html#a90d3a551feb495f25eaf3e22933dd1d7">FREE_STACK_RETURN</a> (<a class="code" href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5aeabbae03a00b1f2359894b7fa4ad7efe83">REG_EESCAPE</a>);</div><div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;</div><div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;          <span class="comment">/* Do not translate the character after the \, so that we can</span></div><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;<span class="comment">             distinguish, e.g., \B from \b, even if we normally would</span></div><div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;<span class="comment">             translate, e.g., B to b.  */</span></div><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;          <a class="code" href="regex_8c.html#a95ed173b1e65d739ab2d15cc9b738ed9">PATFETCH_RAW</a> (c);</div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;</div><div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;          <span class="keywordflow">switch</span> (c)</div><div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;            {</div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;(&#39;</span>:</div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;              <span class="keywordflow">if</span> (syntax &amp; RE_NO_BK_PARENS)</div><div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;                <span class="keywordflow">goto</span> normal_backslash;</div><div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;</div><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;            handle_open:</div><div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;              bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a4dfc1ce26c896695b77854da7d607ec8">re_nsub</a>++;</div><div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;              regnum++;</div><div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;</div><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;              <span class="keywordflow">if</span> (<a class="code" href="regex_8c.html#a7e61c2eafa31a2bc3b4942c22e803e5c">COMPILE_STACK_FULL</a>)</div><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;                {</div><div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;                  <a class="code" href="regex_8c.html#ae247cb248fa0309737dce6bdfc3a6a3d">RETALLOC</a> (compile_stack.<a class="code" href="structcompile__stack__type.html#aebaf05ac308fe465d6a630e5d863fd4a">stack</a>, compile_stack.<a class="code" href="structcompile__stack__type.html#af5a43e711b027026ed61228f5c96ea71">size</a> &lt;&lt; 1,</div><div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;                            <a class="code" href="structcompile__stack__elt__t.html">compile_stack_elt_t</a>);</div><div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;                  <span class="keywordflow">if</span> (compile_stack.<a class="code" href="structcompile__stack__type.html#aebaf05ac308fe465d6a630e5d863fd4a">stack</a> == <a class="code" href="regex_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) <span class="keywordflow">return</span> <a class="code" href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5aeaabf0128b7050c81c0fb933ea7265ebe9">REG_ESPACE</a>;</div><div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;</div><div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;                  compile_stack.<a class="code" href="structcompile__stack__type.html#af5a43e711b027026ed61228f5c96ea71">size</a> &lt;&lt;= 1;</div><div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;                }</div><div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;</div><div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;              <span class="comment">/* These are the values to restore when we hit end of this</span></div><div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;<span class="comment">                 group.  They are all relative offsets, so that if the</span></div><div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;<span class="comment">                 whole pattern moves because of realloc, they will still</span></div><div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;<span class="comment">                 be valid.  */</span></div><div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;              <a class="code" href="regex_8c.html#a3c27bf6437874eb87a6622b75d2dac32">COMPILE_STACK_TOP</a>.begalt_offset = begalt - bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a84025dce422d70b263288329274a888d">buffer</a>;</div><div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;              <a class="code" href="regex_8c.html#a3c27bf6437874eb87a6622b75d2dac32">COMPILE_STACK_TOP</a>.fixup_alt_jump</div><div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;                = fixup_alt_jump ? fixup_alt_jump - bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a84025dce422d70b263288329274a888d">buffer</a> + 1 : 0;</div><div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;              <a class="code" href="regex_8c.html#a3c27bf6437874eb87a6622b75d2dac32">COMPILE_STACK_TOP</a>.laststart_offset = b - bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a84025dce422d70b263288329274a888d">buffer</a>;</div><div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;              <a class="code" href="regex_8c.html#a3c27bf6437874eb87a6622b75d2dac32">COMPILE_STACK_TOP</a>.regnum = regnum;</div><div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;</div><div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;              <span class="comment">/* We will eventually replace the 0 with the number of</span></div><div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;<span class="comment">                 groups inner to this one.  But do not push a</span></div><div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;<span class="comment">                 start_memory for groups beyond the last one we can</span></div><div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;<span class="comment">                 represent in the compiled pattern.  */</span></div><div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;              <span class="keywordflow">if</span> (regnum &lt;= <a class="code" href="regex_8c.html#af1b3c3e22fe42152c272df6027b1bf4b">MAX_REGNUM</a>)</div><div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;                {</div><div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;                  <a class="code" href="regex_8c.html#a3c27bf6437874eb87a6622b75d2dac32">COMPILE_STACK_TOP</a>.inner_group_offset = b - bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a84025dce422d70b263288329274a888d">buffer</a> + 2;</div><div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;                  <a class="code" href="regex_8c.html#a38ceed7188d42c689f202512a1cb76fb">BUF_PUSH_3</a> (<a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118affba14708233f194802bf7981fd7717e">start_memory</a>, regnum, 0);</div><div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;                }</div><div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;</div><div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;              compile_stack.<a class="code" href="structcompile__stack__type.html#a45982ffa38800f8a9502da9708ec587c">avail</a>++;</div><div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;</div><div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;              fixup_alt_jump = 0;</div><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;              laststart = 0;</div><div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;              begalt = b;</div><div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;              <span class="comment">/* If we&#39;ve reached MAX_REGNUM groups, then this open</span></div><div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;<span class="comment">                 won&#39;t actually generate any code, so we&#39;ll have to</span></div><div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;<span class="comment">                 clear pending_exact explicitly.  */</span></div><div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;              pending_exact = 0;</div><div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;              <span class="keywordflow">break</span>;</div><div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;</div><div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;</div><div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;)&#39;</span>:</div><div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;              <span class="keywordflow">if</span> (syntax &amp; RE_NO_BK_PARENS) <span class="keywordflow">goto</span> normal_backslash;</div><div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;</div><div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;              <span class="keywordflow">if</span> (<a class="code" href="regex_8c.html#a7d96976a27d0138b3f189f1d1a663d68">COMPILE_STACK_EMPTY</a>)</div><div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;              {</div><div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;                <span class="keywordflow">if</span> (syntax &amp; <a class="code" href="__regex_8h.html#af1907a994cab6bd73ad14677b126a64b">RE_UNMATCHED_RIGHT_PAREN_ORD</a>)</div><div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;                  <span class="keywordflow">goto</span> normal_backslash;</div><div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;                <span class="keywordflow">else</span></div><div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;                  <a class="code" href="regex_8c.html#a90d3a551feb495f25eaf3e22933dd1d7">FREE_STACK_RETURN</a> (<a class="code" href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5aea5797541a6619c4a5dbe28fe3bb58661b">REG_ERPAREN</a>);</div><div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;              }</div><div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;</div><div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;            handle_close:</div><div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;              <span class="keywordflow">if</span> (fixup_alt_jump)</div><div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;                { <span class="comment">/* Push a dummy failure point at the end of the</span></div><div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;<span class="comment">                     alternative for a possible future</span></div><div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;<span class="comment">                     `pop_failure_jump&#39; to pop.  See comments at</span></div><div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;<span class="comment">                     `push_dummy_failure&#39; in `re_match_2&#39;.  */</span></div><div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;                  <a class="code" href="regex_8c.html#aef73eb530578e61ff012a68faccb18d0">BUF_PUSH</a> (<a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118ae96f67086c4f61cc6fd32b6b493dc17f">push_dummy_failure</a>);</div><div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;</div><div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;                  <span class="comment">/* We allocated space for this jump when we assigned</span></div><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;<span class="comment">                     to `fixup_alt_jump&#39;, in the `handle_alt&#39; case below.  */</span></div><div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;                  <a class="code" href="regex_8c.html#acfebc9fd667ce5b7d2162f2677087e21">STORE_JUMP</a> (<a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a2b75b8e92a52c848de16544d9ceb08da">jump_past_alt</a>, fixup_alt_jump, b - 1);</div><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;                }</div><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;</div><div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;              <span class="comment">/* See similar code for backslashed left paren above.  */</span></div><div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;              <span class="keywordflow">if</span> (<a class="code" href="regex_8c.html#a7d96976a27d0138b3f189f1d1a663d68">COMPILE_STACK_EMPTY</a>)</div><div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;              {</div><div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;                <span class="keywordflow">if</span> (syntax &amp; <a class="code" href="__regex_8h.html#af1907a994cab6bd73ad14677b126a64b">RE_UNMATCHED_RIGHT_PAREN_ORD</a>)</div><div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;                  <span class="keywordflow">goto</span> normal_char;</div><div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;                <span class="keywordflow">else</span></div><div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;                  <a class="code" href="regex_8c.html#a90d3a551feb495f25eaf3e22933dd1d7">FREE_STACK_RETURN</a> (<a class="code" href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5aea5797541a6619c4a5dbe28fe3bb58661b">REG_ERPAREN</a>);</div><div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;              }</div><div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;</div><div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;              <span class="comment">/* Since we just checked for an empty stack above, this</span></div><div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;<span class="comment">                 ``can&#39;t happen&#39;&#39;.  */</span></div><div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;              <a class="code" href="sendlib_8c.html#af576bf8ffa22a44e53018c67095ffbf0">assert</a> (compile_stack.<a class="code" href="structcompile__stack__type.html#a45982ffa38800f8a9502da9708ec587c">avail</a> != 0);</div><div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;              {</div><div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;                <span class="comment">/* We don&#39;t just want to restore into `regnum&#39;, because</span></div><div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;<span class="comment">                   later groups should continue to be numbered higher,</span></div><div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;<span class="comment">                   as in `(ab)c(de)&#39; -- the second group is #2.  */</span></div><div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;                regnum_t this_group_regnum;</div><div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;</div><div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;                compile_stack.<a class="code" href="structcompile__stack__type.html#a45982ffa38800f8a9502da9708ec587c">avail</a>--;</div><div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;                begalt = bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a84025dce422d70b263288329274a888d">buffer</a> + <a class="code" href="regex_8c.html#a3c27bf6437874eb87a6622b75d2dac32">COMPILE_STACK_TOP</a>.begalt_offset;</div><div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;                fixup_alt_jump</div><div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;                  = <a class="code" href="regex_8c.html#a3c27bf6437874eb87a6622b75d2dac32">COMPILE_STACK_TOP</a>.fixup_alt_jump</div><div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;                    ? bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a84025dce422d70b263288329274a888d">buffer</a> + <a class="code" href="regex_8c.html#a3c27bf6437874eb87a6622b75d2dac32">COMPILE_STACK_TOP</a>.fixup_alt_jump - 1</div><div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;                    : 0;</div><div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;                laststart = bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a84025dce422d70b263288329274a888d">buffer</a> + <a class="code" href="regex_8c.html#a3c27bf6437874eb87a6622b75d2dac32">COMPILE_STACK_TOP</a>.laststart_offset;</div><div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;                this_group_regnum = <a class="code" href="regex_8c.html#a3c27bf6437874eb87a6622b75d2dac32">COMPILE_STACK_TOP</a>.regnum;</div><div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;                <span class="comment">/* If we&#39;ve reached MAX_REGNUM groups, then this open</span></div><div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;<span class="comment">                   won&#39;t actually generate any code, so we&#39;ll have to</span></div><div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;<span class="comment">                   clear pending_exact explicitly.  */</span></div><div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;                pending_exact = 0;</div><div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;</div><div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;                <span class="comment">/* We&#39;re at the end of the group, so now we know how many</span></div><div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;<span class="comment">                   groups were inside this one.  */</span></div><div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;                <span class="keywordflow">if</span> (this_group_regnum &lt;= <a class="code" href="regex_8c.html#af1b3c3e22fe42152c272df6027b1bf4b">MAX_REGNUM</a>)</div><div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;                  {</div><div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;                    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *inner_group_loc</div><div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;                      = bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a84025dce422d70b263288329274a888d">buffer</a> + <a class="code" href="regex_8c.html#a3c27bf6437874eb87a6622b75d2dac32">COMPILE_STACK_TOP</a>.inner_group_offset;</div><div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;</div><div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;                    *inner_group_loc = regnum - this_group_regnum;</div><div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;                    <a class="code" href="regex_8c.html#a38ceed7188d42c689f202512a1cb76fb">BUF_PUSH_3</a> (<a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a6a42f30575b66116b79f4527493d0ce9">stop_memory</a>, this_group_regnum,</div><div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;                                regnum - this_group_regnum);</div><div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;                  }</div><div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;              }</div><div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;              <span class="keywordflow">break</span>;</div><div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;</div><div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;</div><div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;|&#39;</span>:                                   <span class="comment">/* `\|&#39;.  */</span></div><div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;              <span class="keywordflow">if</span> (syntax &amp; RE_LIMITED_OPS || syntax &amp; RE_NO_BK_VBAR)</div><div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;                <span class="keywordflow">goto</span> normal_backslash;</div><div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;            handle_alt:</div><div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;              <span class="keywordflow">if</span> (syntax &amp; RE_LIMITED_OPS)</div><div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;                <span class="keywordflow">goto</span> normal_char;</div><div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;</div><div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;              <span class="comment">/* Insert before the previous alternative a jump which</span></div><div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;<span class="comment">                 jumps to this alternative if the former fails.  */</span></div><div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;              <a class="code" href="regex_8c.html#a820795fca6e5960dd9657eda06c66ed5">GET_BUFFER_SPACE</a> (3);</div><div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;              <a class="code" href="regex_8c.html#a4c4a6f3c88794d7c99809e8ef5054614">INSERT_JUMP</a> (<a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a5ca3d8a56cc5259243bcaffedd070287">on_failure_jump</a>, begalt, b + 6);</div><div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;              pending_exact = 0;</div><div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;              b += 3;</div><div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;</div><div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;              <span class="comment">/* The alternative before this one has a jump after it</span></div><div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;<span class="comment">                 which gets executed if it gets matched.  Adjust that</span></div><div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;<span class="comment">                 jump so it will jump to this alternative&#39;s analogous</span></div><div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;<span class="comment">                 jump (put in below, which in turn will jump to the next</span></div><div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;<span class="comment">                 (if any) alternative&#39;s such jump, etc.).  The last such</span></div><div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;<span class="comment">                 jump jumps to the correct final destination.  A picture:</span></div><div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;<span class="comment">                          _____ _____</span></div><div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;<span class="comment">                          |   | |   |</span></div><div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;<span class="comment">                          |   v |   v</span></div><div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;<span class="comment">                         a | b   | c</span></div><div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;<span class="comment">                 If we are at `b&#39;, then fixup_alt_jump right now points to a</span></div><div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;<span class="comment">                 three-byte space after `a&#39;.  We&#39;ll put in the jump, set</span></div><div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;<span class="comment">                 fixup_alt_jump to right after `b&#39;, and leave behind three</span></div><div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;<span class="comment">                 bytes which we&#39;ll fill in when we get to after `c&#39;.  */</span></div><div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;</div><div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;              <span class="keywordflow">if</span> (fixup_alt_jump)</div><div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;                <a class="code" href="regex_8c.html#acfebc9fd667ce5b7d2162f2677087e21">STORE_JUMP</a> (<a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a2b75b8e92a52c848de16544d9ceb08da">jump_past_alt</a>, fixup_alt_jump, b);</div><div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;</div><div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;              <span class="comment">/* Mark and leave space for a jump after this alternative,</span></div><div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;<span class="comment">                 to be filled in later either by next alternative or</span></div><div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;<span class="comment">                 when know we&#39;re at the end of a series of alternatives.  */</span></div><div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;              fixup_alt_jump = b;</div><div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;              <a class="code" href="regex_8c.html#a820795fca6e5960dd9657eda06c66ed5">GET_BUFFER_SPACE</a> (3);</div><div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;              b += 3;</div><div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;</div><div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;              laststart = 0;</div><div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;              begalt = b;</div><div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;              <span class="keywordflow">break</span>;</div><div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;</div><div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;</div><div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;{&#39;</span>:</div><div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;              <span class="comment">/* If \{ is a literal.  */</span></div><div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;              <span class="keywordflow">if</span> (!(syntax &amp; <a class="code" href="__regex_8h.html#a377bd32fc62adedc890f74cd18845aa9">RE_INTERVALS</a>)</div><div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;                     <span class="comment">/* If we&#39;re at `\{&#39; and it&#39;s not the open-interval</span></div><div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;<span class="comment">                        operator.  */</span></div><div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;                  || ((syntax &amp; RE_INTERVALS) &amp;&amp; (syntax &amp; RE_NO_BK_BRACES))</div><div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;                  || (p - 2 == pattern  &amp;&amp;  p == pend))</div><div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;                <span class="keywordflow">goto</span> normal_backslash;</div><div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;</div><div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;            handle_interval:</div><div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;              {</div><div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;                <span class="comment">/* If got here, then the syntax allows intervals.  */</span></div><div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;</div><div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;                <span class="comment">/* At least (most) this many matches must be made.  */</span></div><div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;                <span class="keywordtype">int</span> lower_bound = -1, upper_bound = -1;</div><div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;</div><div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;                beg_interval = p - 1;</div><div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;</div><div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;                <span class="keywordflow">if</span> (p == pend)</div><div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;                  {</div><div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;                    <span class="keywordflow">if</span> (syntax &amp; RE_NO_BK_BRACES)</div><div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;                      <span class="keywordflow">goto</span> unfetch_interval;</div><div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;                    <span class="keywordflow">else</span></div><div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;                      <a class="code" href="regex_8c.html#a90d3a551feb495f25eaf3e22933dd1d7">FREE_STACK_RETURN</a> (<a class="code" href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5aeafad659d2f7fe4c0f9d360ef68d371673">REG_EBRACE</a>);</div><div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;                  }</div><div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;</div><div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;                <a class="code" href="regex_8c.html#aa678aabaa579a244b2f36e8e452d977e">GET_UNSIGNED_NUMBER</a> (lower_bound);</div><div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;</div><div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;                <span class="keywordflow">if</span> (c == <span class="charliteral">&#39;,&#39;</span>)</div><div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;                  {</div><div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;                    <a class="code" href="regex_8c.html#aa678aabaa579a244b2f36e8e452d977e">GET_UNSIGNED_NUMBER</a> (upper_bound);</div><div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;                    <span class="keywordflow">if</span> (upper_bound &lt; 0) upper_bound = <a class="code" href="__regex_8h.html#aa7d072d0a88c61d3692dc547ea27538e">RE_DUP_MAX</a>;</div><div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;                  }</div><div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;                <span class="keywordflow">else</span></div><div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;                  <span class="comment">/* Interval such as `{1}&#39; =&gt; match exactly once. */</span></div><div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;                  upper_bound = lower_bound;</div><div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;</div><div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;                <span class="keywordflow">if</span> (lower_bound &lt; 0 || upper_bound &gt; <a class="code" href="__regex_8h.html#aa7d072d0a88c61d3692dc547ea27538e">RE_DUP_MAX</a></div><div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;                    || lower_bound &gt; upper_bound)</div><div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;                  {</div><div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;                    <span class="keywordflow">if</span> (syntax &amp; RE_NO_BK_BRACES)</div><div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;                      <span class="keywordflow">goto</span> unfetch_interval;</div><div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;                    <span class="keywordflow">else</span></div><div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;                      <a class="code" href="regex_8c.html#a90d3a551feb495f25eaf3e22933dd1d7">FREE_STACK_RETURN</a> (<a class="code" href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5aeaeda9cecaba728fe6b18a8537872ffd34">REG_BADBR</a>);</div><div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;                  }</div><div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;</div><div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;                <span class="keywordflow">if</span> (!(syntax &amp; RE_NO_BK_BRACES))</div><div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;                  {</div><div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;                    <span class="keywordflow">if</span> (c != <span class="charliteral">&#39;\\&#39;</span>) <a class="code" href="regex_8c.html#a90d3a551feb495f25eaf3e22933dd1d7">FREE_STACK_RETURN</a> (<a class="code" href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5aeafad659d2f7fe4c0f9d360ef68d371673">REG_EBRACE</a>);</div><div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;</div><div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;                    <a class="code" href="regex_8c.html#a557d2f1c16f9bd2123e55885ee447c06">PATFETCH</a> (c);</div><div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;                  }</div><div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;</div><div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;                <span class="keywordflow">if</span> (c != <span class="charliteral">&#39;}&#39;</span>)</div><div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;                  {</div><div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;                    <span class="keywordflow">if</span> (syntax &amp; RE_NO_BK_BRACES)</div><div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;                      <span class="keywordflow">goto</span> unfetch_interval;</div><div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;                    <span class="keywordflow">else</span></div><div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;                      <a class="code" href="regex_8c.html#a90d3a551feb495f25eaf3e22933dd1d7">FREE_STACK_RETURN</a> (<a class="code" href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5aeaeda9cecaba728fe6b18a8537872ffd34">REG_BADBR</a>);</div><div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;                  }</div><div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;</div><div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;                <span class="comment">/* We just parsed a valid interval.  */</span></div><div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;</div><div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;                <span class="comment">/* If it&#39;s invalid to have no preceding re.  */</span></div><div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;                <span class="keywordflow">if</span> (!laststart)</div><div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;                  {</div><div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;                    <span class="keywordflow">if</span> (syntax &amp; <a class="code" href="__regex_8h.html#ae344a4e6129c8d549a88cd5f45e86adb">RE_CONTEXT_INVALID_OPS</a>)</div><div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;                      <a class="code" href="regex_8c.html#a90d3a551feb495f25eaf3e22933dd1d7">FREE_STACK_RETURN</a> (<a class="code" href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5aeaf6eaf32c5250906aa304d801a227ccf9">REG_BADRPT</a>);</div><div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (syntax &amp; <a class="code" href="__regex_8h.html#aa96ee57fb2be85936dbb14f2b4c44b50">RE_CONTEXT_INDEP_OPS</a>)</div><div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;                      laststart = b;</div><div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;                    <span class="keywordflow">else</span></div><div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;                      <span class="keywordflow">goto</span> unfetch_interval;</div><div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;                  }</div><div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;</div><div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;                <span class="comment">/* If the upper bound is zero, don&#39;t want to succeed at</span></div><div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;<span class="comment">                   all; jump from `laststart&#39; to `b + 3&#39;, which will be</span></div><div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;<span class="comment">                   the end of the buffer after we insert the jump.  */</span></div><div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;                 <span class="keywordflow">if</span> (upper_bound == 0)</div><div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;                   {</div><div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;                     <a class="code" href="regex_8c.html#a820795fca6e5960dd9657eda06c66ed5">GET_BUFFER_SPACE</a> (3);</div><div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;                     <a class="code" href="regex_8c.html#a4c4a6f3c88794d7c99809e8ef5054614">INSERT_JUMP</a> (<a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a5a08a3c1fa135350961630d2f9c2b849">jump</a>, laststart, b + 3);</div><div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;                     b += 3;</div><div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;                   }</div><div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;</div><div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;                 <span class="comment">/* Otherwise, we have a nontrivial interval.  When</span></div><div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;<span class="comment">                    we&#39;re all done, the pattern will look like:</span></div><div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;<span class="comment">                      set_number_at &lt;jump count&gt; &lt;upper bound&gt;</span></div><div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;<span class="comment">                      set_number_at &lt;succeed_n count&gt; &lt;lower bound&gt;</span></div><div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;<span class="comment">                      succeed_n &lt;after jump addr&gt; &lt;succeed_n count&gt;</span></div><div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;<span class="comment">                      &lt;body of loop&gt;</span></div><div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;<span class="comment">                      jump_n &lt;succeed_n addr&gt; &lt;jump count&gt;</span></div><div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;<span class="comment">                    (The upper bound and `jump_n&#39; are omitted if</span></div><div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;<span class="comment">                    `upper_bound&#39; is 1, though.)  */</span></div><div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;                 <span class="keywordflow">else</span></div><div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;                   { <span class="comment">/* If the upper bound is &gt; 1, we need to insert</span></div><div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;<span class="comment">                        more at the end of the loop.  */</span></div><div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;                     <span class="keywordtype">unsigned</span> nbytes = 10 + (upper_bound &gt; 1) * 10;</div><div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;</div><div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;                     <a class="code" href="regex_8c.html#a820795fca6e5960dd9657eda06c66ed5">GET_BUFFER_SPACE</a> (nbytes);</div><div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;</div><div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;                     <span class="comment">/* Initialize lower bound of the `succeed_n&#39;, even</span></div><div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;<span class="comment">                        though it will be set during matching by its</span></div><div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;<span class="comment">                        attendant `set_number_at&#39; (inserted next),</span></div><div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;<span class="comment">                        because `re_compile_fastmap&#39; needs to know.</span></div><div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;<span class="comment">                        Jump to the `jump_n&#39; we might insert below.  */</span></div><div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;                     <a class="code" href="regex_8c.html#a7dd59dc7da937c9308d1e7b9331aa916">INSERT_JUMP2</a> (<a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118ae45bee3e6749253a8ba8769646f79734">succeed_n</a>, laststart,</div><div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;                                   b + 5 + (upper_bound &gt; 1) * 5,</div><div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;                                   lower_bound);</div><div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;                     b += 5;</div><div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;</div><div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;                     <span class="comment">/* Code to initialize the lower bound.  Insert</span></div><div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;<span class="comment">                        before the `succeed_n&#39;.  The `5&#39; is the last two</span></div><div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;<span class="comment">                        bytes of this `set_number_at&#39;, plus 3 bytes of</span></div><div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;<span class="comment">                        the following `succeed_n&#39;.  */</span></div><div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;                     <a class="code" href="regex_8c.html#ae31b1d009dfa3a2b5eca3f11ec3dee6a">insert_op2</a> (<a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a0f280efb7129538f3b07aa789fc99fa1">set_number_at</a>, laststart, 5, lower_bound, b);</div><div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;                     b += 5;</div><div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;</div><div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;                     <span class="keywordflow">if</span> (upper_bound &gt; 1)</div><div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;                       { <span class="comment">/* More than one repetition is allowed, so</span></div><div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;<span class="comment">                            append a backward jump to the `succeed_n&#39;</span></div><div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;<span class="comment">                            that starts this interval.</span></div><div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;<span class="comment">                            When we&#39;ve reached this during matching,</span></div><div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;<span class="comment">                            we&#39;ll have matched the interval once, so</span></div><div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;<span class="comment">                            jump back only `upper_bound - 1&#39; times.  */</span></div><div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;                         <a class="code" href="regex_8c.html#aa2aa60706e57e51cc9b54ff2c8cc38a2">STORE_JUMP2</a> (<a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a333721a24859c29322c8abdae4159e1b">jump_n</a>, b, laststart + 5,</div><div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;                                      upper_bound - 1);</div><div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;                         b += 5;</div><div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;</div><div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;                         <span class="comment">/* The location we want to set is the second</span></div><div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;<span class="comment">                            parameter of the `jump_n&#39;; that is `b-2&#39; as</span></div><div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;<span class="comment">                            an absolute address.  `laststart&#39; will be</span></div><div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;<span class="comment">                            the `set_number_at&#39; we&#39;re about to insert;</span></div><div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;<span class="comment">                            `laststart+3&#39; the number to set, the source</span></div><div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;<span class="comment">                            for the relative address.  But we are</span></div><div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;<span class="comment">                            inserting into the middle of the pattern --</span></div><div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;<span class="comment">                            so everything is getting moved up by 5.</span></div><div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;<span class="comment">                            Conclusion: (b - 2) - (laststart + 3) + 5,</span></div><div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;<span class="comment">                            i.e., b - laststart.</span></div><div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;<span class="comment">                            We insert this at the beginning of the loop</span></div><div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;<span class="comment">                            so that if we fail during matching, we&#39;ll</span></div><div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;<span class="comment">                            reinitialize the bounds.  */</span></div><div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;                         <a class="code" href="regex_8c.html#ae31b1d009dfa3a2b5eca3f11ec3dee6a">insert_op2</a> (<a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a0f280efb7129538f3b07aa789fc99fa1">set_number_at</a>, laststart, b - laststart,</div><div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;                                     upper_bound - 1, b);</div><div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;                         b += 5;</div><div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;                       }</div><div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;                   }</div><div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;                pending_exact = 0;</div><div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;                beg_interval = <a class="code" href="regex_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;              }</div><div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;              <span class="keywordflow">break</span>;</div><div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;</div><div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;            unfetch_interval:</div><div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;              <span class="comment">/* If an invalid interval, match the characters as literals.  */</span></div><div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;               <a class="code" href="sendlib_8c.html#af576bf8ffa22a44e53018c67095ffbf0">assert</a> (beg_interval);</div><div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;               p = beg_interval;</div><div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;               beg_interval = <a class="code" href="regex_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;</div><div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;               <span class="comment">/* normal_char and normal_backslash need `c&#39;.  */</span></div><div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;               <a class="code" href="regex_8c.html#a557d2f1c16f9bd2123e55885ee447c06">PATFETCH</a> (c);</div><div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;</div><div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;               <span class="keywordflow">if</span> (!(syntax &amp; RE_NO_BK_BRACES))</div><div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;                 {</div><div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;                   <span class="keywordflow">if</span> (p &gt; pattern  &amp;&amp;  p[-1] == <span class="charliteral">&#39;\\&#39;</span>)</div><div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;                     <span class="keywordflow">goto</span> normal_backslash;</div><div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;                 }</div><div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;               <span class="keywordflow">goto</span> normal_char;</div><div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;</div><div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;<span class="preprocessor">#ifdef emacs</span></div><div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;            <span class="comment">/* There is no way to specify the before_dot and after_dot</span></div><div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;<span class="comment">               operators.  rms says this is ok.  --karl  */</span></div><div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;=&#39;</span>:</div><div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;              <a class="code" href="regex_8c.html#aef73eb530578e61ff012a68faccb18d0">BUF_PUSH</a> (at_dot);</div><div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;              <span class="keywordflow">break</span>;</div><div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;</div><div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;s&#39;</span>:</div><div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;              laststart = b;</div><div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;              <a class="code" href="regex_8c.html#a557d2f1c16f9bd2123e55885ee447c06">PATFETCH</a> (c);</div><div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;              <a class="code" href="regex_8c.html#a8cfee99226a6b73952701f9de12912b9">BUF_PUSH_2</a> (syntaxspec, syntax_spec_code[c]);</div><div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;              <span class="keywordflow">break</span>;</div><div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;</div><div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;S&#39;</span>:</div><div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;              laststart = b;</div><div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;              <a class="code" href="regex_8c.html#a557d2f1c16f9bd2123e55885ee447c06">PATFETCH</a> (c);</div><div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;              <a class="code" href="regex_8c.html#a8cfee99226a6b73952701f9de12912b9">BUF_PUSH_2</a> (notsyntaxspec, syntax_spec_code[c]);</div><div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;              <span class="keywordflow">break</span>;</div><div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* emacs */</span><span class="preprocessor"></span></div><div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;</div><div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;</div><div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;w&#39;</span>:</div><div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;              <span class="keywordflow">if</span> (re_syntax_options &amp; <a class="code" href="__regex_8h.html#af60fbd1f693bfb95fd0a80caae9aa4c5">RE_NO_GNU_OPS</a>)</div><div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;                <span class="keywordflow">goto</span> normal_char;</div><div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;              laststart = b;</div><div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;              <a class="code" href="regex_8c.html#aef73eb530578e61ff012a68faccb18d0">BUF_PUSH</a> (<a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a26eed2ae578da61bebc7b55e7610cf0b">wordchar</a>);</div><div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;              <span class="keywordflow">break</span>;</div><div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;</div><div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;</div><div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;W&#39;</span>:</div><div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;              <span class="keywordflow">if</span> (re_syntax_options &amp; RE_NO_GNU_OPS)</div><div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;                <span class="keywordflow">goto</span> normal_char;</div><div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;              laststart = b;</div><div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;              <a class="code" href="regex_8c.html#aef73eb530578e61ff012a68faccb18d0">BUF_PUSH</a> (<a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a01398d7bcfdbcb84b318fc65a7ef9c93">notwordchar</a>);</div><div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;              <span class="keywordflow">break</span>;</div><div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;</div><div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;</div><div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;&lt;&#39;</span>:</div><div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;              <span class="keywordflow">if</span> (re_syntax_options &amp; RE_NO_GNU_OPS)</div><div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;                <span class="keywordflow">goto</span> normal_char;</div><div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;              <a class="code" href="regex_8c.html#aef73eb530578e61ff012a68faccb18d0">BUF_PUSH</a> (<a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118ad88e0028985b6bc61df64cd9578d3f18">wordbeg</a>);</div><div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;              <span class="keywordflow">break</span>;</div><div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;</div><div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;&gt;&#39;</span>:</div><div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;              <span class="keywordflow">if</span> (re_syntax_options &amp; RE_NO_GNU_OPS)</div><div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;                <span class="keywordflow">goto</span> normal_char;</div><div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;              <a class="code" href="regex_8c.html#aef73eb530578e61ff012a68faccb18d0">BUF_PUSH</a> (<a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118accd3c02d3bd48af753cf5261bfb084ac">wordend</a>);</div><div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;              <span class="keywordflow">break</span>;</div><div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;</div><div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;b&#39;</span>:</div><div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;              <span class="keywordflow">if</span> (re_syntax_options &amp; RE_NO_GNU_OPS)</div><div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;                <span class="keywordflow">goto</span> normal_char;</div><div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;              <a class="code" href="regex_8c.html#aef73eb530578e61ff012a68faccb18d0">BUF_PUSH</a> (<a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a47168d753b8d555d2e89416a4b660da9">wordbound</a>);</div><div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;              <span class="keywordflow">break</span>;</div><div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;</div><div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;B&#39;</span>:</div><div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;              <span class="keywordflow">if</span> (re_syntax_options &amp; RE_NO_GNU_OPS)</div><div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;                <span class="keywordflow">goto</span> normal_char;</div><div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;              <a class="code" href="regex_8c.html#aef73eb530578e61ff012a68faccb18d0">BUF_PUSH</a> (<a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a9077999caa8f316015aabfd83b3745a0">notwordbound</a>);</div><div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;              <span class="keywordflow">break</span>;</div><div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;</div><div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;`&#39;</span>:</div><div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;              <span class="keywordflow">if</span> (re_syntax_options &amp; RE_NO_GNU_OPS)</div><div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;                <span class="keywordflow">goto</span> normal_char;</div><div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;              <a class="code" href="regex_8c.html#aef73eb530578e61ff012a68faccb18d0">BUF_PUSH</a> (<a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118ab428f43b6557e8dfc45e452a8891b598">begbuf</a>);</div><div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;              <span class="keywordflow">break</span>;</div><div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;</div><div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;\&#39;&#39;</span>:</div><div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;              <span class="keywordflow">if</span> (re_syntax_options &amp; RE_NO_GNU_OPS)</div><div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;                <span class="keywordflow">goto</span> normal_char;</div><div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;              <a class="code" href="regex_8c.html#aef73eb530578e61ff012a68faccb18d0">BUF_PUSH</a> (<a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a4962434097279c747aa6ba59df478775">endbuf</a>);</div><div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;              <span class="keywordflow">break</span>;</div><div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;</div><div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;1&#39;</span>: <span class="keywordflow">case</span> <span class="charliteral">&#39;2&#39;</span>: <span class="keywordflow">case</span> <span class="charliteral">&#39;3&#39;</span>: <span class="keywordflow">case</span> <span class="charliteral">&#39;4&#39;</span>: <span class="keywordflow">case</span> <span class="charliteral">&#39;5&#39;</span>:</div><div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;6&#39;</span>: <span class="keywordflow">case</span> <span class="charliteral">&#39;7&#39;</span>: <span class="keywordflow">case</span> <span class="charliteral">&#39;8&#39;</span>: <span class="keywordflow">case</span> <span class="charliteral">&#39;9&#39;</span>:</div><div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;              <span class="keywordflow">if</span> (syntax &amp; <a class="code" href="__regex_8h.html#aed01be95fde1250190b37b7788af5f35">RE_NO_BK_REFS</a>)</div><div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;                <span class="keywordflow">goto</span> normal_char;</div><div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;</div><div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;              c1 = c - <span class="charliteral">&#39;0&#39;</span>;</div><div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;</div><div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;              <span class="keywordflow">if</span> (c1 &gt; regnum)</div><div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;                <a class="code" href="regex_8c.html#a90d3a551feb495f25eaf3e22933dd1d7">FREE_STACK_RETURN</a> (<a class="code" href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5aeac700e4cae84ffc418afdff14792abf34">REG_ESUBREG</a>);</div><div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;</div><div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;              <span class="comment">/* Can&#39;t back reference to a subexpression if inside of it.  */</span></div><div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;              <span class="keywordflow">if</span> (<a class="code" href="regex_8c.html#a28dc5088ce179431d47162481e6c6540">group_in_compile_stack</a> (compile_stack, (regnum_t) c1))</div><div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;                <span class="keywordflow">goto</span> normal_char;</div><div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;</div><div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;              laststart = b;</div><div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;              <a class="code" href="regex_8c.html#a8cfee99226a6b73952701f9de12912b9">BUF_PUSH_2</a> (<a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a0c02fe9db75630f52c6e9e44dd55d9de">duplicate</a>, c1);</div><div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;              <span class="keywordflow">break</span>;</div><div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;</div><div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;</div><div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;+&#39;</span>:</div><div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;?&#39;</span>:</div><div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;              <span class="keywordflow">if</span> (syntax &amp; RE_BK_PLUS_QM)</div><div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;                <span class="keywordflow">goto</span> handle_plus;</div><div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;              <span class="keywordflow">else</span></div><div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;                <span class="keywordflow">goto</span> normal_backslash;</div><div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;</div><div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;            <span class="keywordflow">default</span>:</div><div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;            normal_backslash:</div><div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;              <span class="comment">/* You might think it would be useful for \ to mean</span></div><div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;<span class="comment">                 not to translate; but if we don&#39;t translate it</span></div><div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;<span class="comment">                 it will never match anything.  */</span></div><div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;              c = <a class="code" href="regex_8c.html#a2eeeb49b77aa0f299d2d3c23dc1bfa17">TRANSLATE</a> (c);</div><div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;              <span class="keywordflow">goto</span> normal_char;</div><div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;            }</div><div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;</div><div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;</div><div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;        <span class="keywordflow">default</span>:</div><div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;        <span class="comment">/* Expects the character in `c&#39;.  */</span></div><div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;        normal_char:</div><div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;              <span class="comment">/* If no exactn currently being built.  */</span></div><div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;          <span class="keywordflow">if</span> (!pending_exact</div><div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;</div><div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;              <span class="comment">/* If last exactn not at current position.  */</span></div><div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;              || pending_exact + *pending_exact + 1 != b</div><div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;</div><div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;              <span class="comment">/* We have only one byte following the exactn for the count.  */</span></div><div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;              || *pending_exact == (1 &lt;&lt; <a class="code" href="regex_8c.html#ad72dc64cd2c9bc3598f792dc518d03b2">BYTEWIDTH</a>) - 1</div><div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;</div><div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;              <span class="comment">/* If followed by a repetition operator.  */</span></div><div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;              || *p == <span class="charliteral">&#39;*&#39;</span> || *p == <span class="charliteral">&#39;^&#39;</span></div><div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;              || ((syntax &amp; RE_BK_PLUS_QM)</div><div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;                  ? *p == <span class="charliteral">&#39;\\&#39;</span> &amp;&amp; (p[1] == <span class="charliteral">&#39;+&#39;</span> || p[1] == <span class="charliteral">&#39;?&#39;</span>)</div><div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;                  : (*p == <span class="charliteral">&#39;+&#39;</span> || *p == <span class="charliteral">&#39;?&#39;</span>))</div><div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;              || ((syntax &amp; <a class="code" href="__regex_8h.html#a377bd32fc62adedc890f74cd18845aa9">RE_INTERVALS</a>)</div><div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;                  &amp;&amp; ((syntax &amp; RE_NO_BK_BRACES)</div><div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;                      ? *p == <span class="charliteral">&#39;{&#39;</span></div><div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;                      : (p[0] == <span class="charliteral">&#39;\\&#39;</span> &amp;&amp; p[1] == <span class="charliteral">&#39;{&#39;</span>))))</div><div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;            {</div><div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;              <span class="comment">/* Start building a new exactn.  */</span></div><div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;</div><div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;              laststart = b;</div><div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;</div><div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;              <a class="code" href="regex_8c.html#a8cfee99226a6b73952701f9de12912b9">BUF_PUSH_2</a> (<a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118ab0eca0e160953a14bcb41d151287d1f1">exactn</a>, 0);</div><div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;              pending_exact = b - 1;</div><div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;            }</div><div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;</div><div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;          <a class="code" href="regex_8c.html#aef73eb530578e61ff012a68faccb18d0">BUF_PUSH</a> (c);</div><div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;          (*pending_exact)++;</div><div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;        } <span class="comment">/* switch (c) */</span></div><div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;    } <span class="comment">/* while p != pend */</span></div><div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;</div><div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;</div><div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;  <span class="comment">/* Through the pattern now.  */</span></div><div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;</div><div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;  <span class="keywordflow">if</span> (fixup_alt_jump)</div><div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;    <a class="code" href="regex_8c.html#acfebc9fd667ce5b7d2162f2677087e21">STORE_JUMP</a> (<a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a2b75b8e92a52c848de16544d9ceb08da">jump_past_alt</a>, fixup_alt_jump, b);</div><div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;</div><div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="regex_8c.html#a7d96976a27d0138b3f189f1d1a663d68">COMPILE_STACK_EMPTY</a>)</div><div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;    <a class="code" href="regex_8c.html#a90d3a551feb495f25eaf3e22933dd1d7">FREE_STACK_RETURN</a> (<a class="code" href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5aeabde1462e3a1660e121d79ce2d0cc5664">REG_EPAREN</a>);</div><div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;</div><div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;  <span class="comment">/* If we don&#39;t want backtracking, force success</span></div><div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;<span class="comment">     the first time we reach the end of the compiled pattern.  */</span></div><div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;  <span class="keywordflow">if</span> (syntax &amp; <a class="code" href="__regex_8h.html#a35cf160909ead17ad6599238a2ebdd58">RE_NO_POSIX_BACKTRACKING</a>)</div><div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;    <a class="code" href="regex_8c.html#aef73eb530578e61ff012a68faccb18d0">BUF_PUSH</a> (<a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a37fe3367d5bf38cb0ac666ebae52d4f9">succeed</a>);</div><div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;</div><div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;  <a class="code" href="plural_8c.html#a117d0dd7f4ff1696cf76f1fec37bf4d1">free</a> (compile_stack.<a class="code" href="structcompile__stack__type.html#aebaf05ac308fe465d6a630e5d863fd4a">stack</a>);   <span class="comment">/* __MEM_CHECKED__ */</span></div><div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;</div><div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;  <span class="comment">/* We have succeeded; set the length of the buffer.  */</span></div><div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;  bufp-&gt;<a class="code" href="structre__pattern__buffer.html#ae53a42d0d93039e283f1d937e6e710a7">used</a> = b - bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a84025dce422d70b263288329274a888d">buffer</a>;</div><div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;</div><div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div><div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;  <span class="keywordflow">if</span> (debug)</div><div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;    {</div><div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;      <a class="code" href="regex_8c.html#a90a312923984a45f83767acea95b84a1">DEBUG_PRINT1</a> (<span class="stringliteral">&quot;\nCompiled pattern: \n&quot;</span>);</div><div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;      <a class="code" href="regex_8c.html#adf25dd5c7e53555ae24ccb0cc96f36c8">print_compiled_pattern</a> (bufp);</div><div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;    }</div><div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* DEBUG */</span><span class="preprocessor"></span></div><div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;</div><div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;<span class="preprocessor">#ifndef MATCH_MAY_ALLOCATE</span></div><div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;  <span class="comment">/* Initialize the failure stack to the largest possible stack.  This</span></div><div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;<span class="comment">     isn&#39;t necessary unless we&#39;re trying to avoid calling alloca in</span></div><div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;<span class="comment">     the search and match routines.  */</span></div><div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;  {</div><div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;    <span class="keywordtype">int</span> num_regs = bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a4dfc1ce26c896695b77854da7d607ec8">re_nsub</a> + 1;</div><div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;</div><div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;    <span class="comment">/* Since DOUBLE_FAIL_STACK refuses to double only if the current size</span></div><div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;<span class="comment">       is strictly greater than re_max_failures, the largest possible stack</span></div><div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;<span class="comment">       is 2 * re_max_failures failure points.  */</span></div><div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;    <span class="keywordflow">if</span> (fail_stack.<a class="code" href="structfail__stack__type.html#ae51a629391dd5d2cb07bffc95e545282">size</a> &lt; (2 * re_max_failures * <a class="code" href="regex_8c.html#a9c1cb14ecb36be1c3ff3c5a050ecc561">MAX_FAILURE_ITEMS</a>))</div><div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;      {</div><div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;        fail_stack.<a class="code" href="structfail__stack__type.html#ae51a629391dd5d2cb07bffc95e545282">size</a> = (2 * re_max_failures * <a class="code" href="regex_8c.html#a9c1cb14ecb36be1c3ff3c5a050ecc561">MAX_FAILURE_ITEMS</a>);</div><div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;</div><div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;<span class="preprocessor">#ifdef emacs</span></div><div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;        <span class="keywordflow">if</span> (! fail_stack.<a class="code" href="structfail__stack__type.html#a810ddd6610b10fddebcfbf675f7800c8">stack</a>)</div><div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;          fail_stack.<a class="code" href="structfail__stack__type.html#a810ddd6610b10fddebcfbf675f7800c8">stack</a></div><div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;            = (fail_stack_elt_t *) xmalloc (fail_stack.<a class="code" href="structfail__stack__type.html#ae51a629391dd5d2cb07bffc95e545282">size</a></div><div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;                                            * sizeof (fail_stack_elt_t));</div><div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;          fail_stack.<a class="code" href="structfail__stack__type.html#a810ddd6610b10fddebcfbf675f7800c8">stack</a></div><div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;            = (fail_stack_elt_t *) xrealloc (fail_stack.<a class="code" href="structfail__stack__type.html#a810ddd6610b10fddebcfbf675f7800c8">stack</a>,</div><div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;                                             (fail_stack.<a class="code" href="structfail__stack__type.html#ae51a629391dd5d2cb07bffc95e545282">size</a></div><div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;                                              * sizeof (fail_stack_elt_t)));</div><div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;<span class="preprocessor">#else </span><span class="comment">/* not emacs */</span><span class="preprocessor"></span></div><div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;        <span class="keywordflow">if</span> (! fail_stack.<a class="code" href="structfail__stack__type.html#a810ddd6610b10fddebcfbf675f7800c8">stack</a>)</div><div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;          fail_stack.<a class="code" href="structfail__stack__type.html#a810ddd6610b10fddebcfbf675f7800c8">stack</a></div><div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;            = (fail_stack_elt_t *) <a class="code" href="regex_8c.html#ab7e36af3707843f77cc5b4e831c2fa6d">malloc</a> (fail_stack.<a class="code" href="structfail__stack__type.html#ae51a629391dd5d2cb07bffc95e545282">size</a>      <span class="comment">/* __MEM_CHECKED__ */</span></div><div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;                                           * sizeof (fail_stack_elt_t));</div><div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;          fail_stack.<a class="code" href="structfail__stack__type.html#a810ddd6610b10fddebcfbf675f7800c8">stack</a></div><div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;            = (fail_stack_elt_t *) <a class="code" href="regex_8c.html#a3d4d6185d412b00bc3def2b58b2898cc">realloc</a> (fail_stack.<a class="code" href="structfail__stack__type.html#a810ddd6610b10fddebcfbf675f7800c8">stack</a>,   <span class="comment">/* __MEM_CHECKED__ */</span></div><div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;                                            (fail_stack.<a class="code" href="structfail__stack__type.html#ae51a629391dd5d2cb07bffc95e545282">size</a></div><div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;                                             * sizeof (fail_stack_elt_t)));</div><div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* not emacs */</span><span class="preprocessor"></span></div><div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;      }</div><div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;</div><div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;    regex_grow_registers (num_regs);</div><div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;  }</div><div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* not MATCH_MAY_ALLOCATE */</span><span class="preprocessor"></span></div><div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;</div><div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5aeafa64e5a57596c8c859f982512f52cd6b">REG_NOERROR</a>;</div><div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;} <span class="comment">/* regex_compile */</span></div><div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;</div><div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;<span class="comment">/* Subroutines for `regex_compile&#39;.  */</span></div><div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;</div><div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;<span class="comment">/* Store OP at LOC followed by two-byte integer parameter ARG.  */</span></div><div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;</div><div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span></div><div class="line"><a name="l02926"></a><span class="lineno"><a class="line" href="regex_8c.html#ac119126b68c58a7c0fc1af5b119450ed"> 2926</a></span>&#160;<a class="code" href="regex_8c.html#ac119126b68c58a7c0fc1af5b119450ed">store_op1</a> (op, loc, arg)</div><div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;    re_opcode_t op;</div><div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *loc;</div><div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;    <span class="keywordtype">int</span> arg;</div><div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;{</div><div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;  *loc = (<span class="keywordtype">unsigned</span> char) op;</div><div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;  <a class="code" href="regex_8c.html#a6878991bbaf83ac3debe1d74f4a450e1">STORE_NUMBER</a> (loc + 1, arg);</div><div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;}</div><div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;</div><div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;</div><div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;<span class="comment">/* Like `store_op1&#39;, but for two two-byte parameters ARG1 and ARG2.  */</span></div><div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;</div><div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span></div><div class="line"><a name="l02939"></a><span class="lineno"><a class="line" href="regex_8c.html#ab2200093505d6435c2521ff819125d0d"> 2939</a></span>&#160;<a class="code" href="regex_8c.html#ab2200093505d6435c2521ff819125d0d">store_op2</a> (op, loc, arg1, arg2)</div><div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;    re_opcode_t op;</div><div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *loc;</div><div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;    <span class="keywordtype">int</span> arg1, arg2;</div><div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;{</div><div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;  *loc = (<span class="keywordtype">unsigned</span> char) op;</div><div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;  <a class="code" href="regex_8c.html#a6878991bbaf83ac3debe1d74f4a450e1">STORE_NUMBER</a> (loc + 1, arg1);</div><div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;  <a class="code" href="regex_8c.html#a6878991bbaf83ac3debe1d74f4a450e1">STORE_NUMBER</a> (loc + 3, arg2);</div><div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;}</div><div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;</div><div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;</div><div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;<span class="comment">/* Copy the bytes from LOC to END to open up three bytes of space at LOC</span></div><div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;<span class="comment">   for OP followed by two-byte integer parameter ARG.  */</span></div><div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;</div><div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span></div><div class="line"><a name="l02954"></a><span class="lineno"><a class="line" href="regex_8c.html#a6ec9fc1db02e8f3a1625ed9771f5bd92"> 2954</a></span>&#160;<a class="code" href="regex_8c.html#a6ec9fc1db02e8f3a1625ed9771f5bd92">insert_op1</a> (op, loc, arg, end)</div><div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;    re_opcode_t op;</div><div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *loc;</div><div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;    <span class="keywordtype">int</span> arg;</div><div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *end;</div><div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;{</div><div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;  <span class="keyword">register</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *pfrom = end;</div><div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;  <span class="keyword">register</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *pto = end + 3;</div><div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;</div><div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;  <span class="keywordflow">while</span> (pfrom != loc)</div><div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;    *--pto = *--pfrom;</div><div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;</div><div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;  <a class="code" href="regex_8c.html#ac119126b68c58a7c0fc1af5b119450ed">store_op1</a> (op, loc, arg);</div><div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;}</div><div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;</div><div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;</div><div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;<span class="comment">/* Like `insert_op1&#39;, but for two two-byte parameters ARG1 and ARG2.  */</span></div><div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;</div><div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span></div><div class="line"><a name="l02973"></a><span class="lineno"><a class="line" href="regex_8c.html#ae31b1d009dfa3a2b5eca3f11ec3dee6a"> 2973</a></span>&#160;<a class="code" href="regex_8c.html#ae31b1d009dfa3a2b5eca3f11ec3dee6a">insert_op2</a> (op, loc, arg1, arg2, end)</div><div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;    re_opcode_t op;</div><div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *loc;</div><div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;    <span class="keywordtype">int</span> arg1, arg2;</div><div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *end;</div><div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;{</div><div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;  <span class="keyword">register</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *pfrom = end;</div><div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;  <span class="keyword">register</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *pto = end + 5;</div><div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;</div><div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;  <span class="keywordflow">while</span> (pfrom != loc)</div><div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;    *--pto = *--pfrom;</div><div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;</div><div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;  <a class="code" href="regex_8c.html#ab2200093505d6435c2521ff819125d0d">store_op2</a> (op, loc, arg1, arg2);</div><div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;}</div><div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;</div><div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;</div><div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;<span class="comment">/* P points to just after a ^ in PATTERN.  Return true if that ^ comes</span></div><div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;<span class="comment">   after an alternative or a begin-subexpression.  We assume there is at</span></div><div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;<span class="comment">   least one character before the ^.  */</span></div><div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;</div><div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;<span class="keyword">static</span> <span class="keywordtype">boolean</span></div><div class="line"><a name="l02994"></a><span class="lineno"><a class="line" href="regex_8c.html#a9fcec6851521f04076e51adfa274403c"> 2994</a></span>&#160;<a class="code" href="regex_8c.html#a9fcec6851521f04076e51adfa274403c">at_begline_loc_p</a> (pattern, p, syntax)</div><div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *pattern, *p;</div><div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;    <a class="code" href="__regex_8h.html#a7e0565199a2fabaca3d67a5a44fc4229">reg_syntax_t</a> <a class="code" href="structre__pattern__buffer.html#af3e24760a69608d163661c6d8977c358">syntax</a>;</div><div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;{</div><div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *prev = p - 2;</div><div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;  <span class="keywordtype">boolean</span> prev_prev_backslash = prev &gt; pattern &amp;&amp; prev[-1] == <span class="charliteral">&#39;\\&#39;</span>;</div><div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;</div><div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;  <span class="keywordflow">return</span></div><div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;       <span class="comment">/* After a subexpression?  */</span></div><div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;       (*prev == <span class="charliteral">&#39;(&#39;</span> &amp;&amp; (syntax &amp; <a class="code" href="__regex_8h.html#af2f17f18a9c771c91d963f466f559e68">RE_NO_BK_PARENS</a> || prev_prev_backslash))</div><div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;       <span class="comment">/* After an alternative?  */</span></div><div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;    || (*prev == <span class="charliteral">&#39;|&#39;</span> &amp;&amp; (syntax &amp; <a class="code" href="__regex_8h.html#a834997e69569c41f0394d6ee120051a0">RE_NO_BK_VBAR</a> || prev_prev_backslash));</div><div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;}</div><div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;</div><div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;</div><div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;<span class="comment">/* The dual of at_begline_loc_p.  This one is for $.  We assume there is</span></div><div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;<span class="comment">   at least one character after the $, i.e., `P &lt; PEND&#39;.  */</span></div><div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;</div><div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;<span class="keyword">static</span> <span class="keywordtype">boolean</span></div><div class="line"><a name="l03013"></a><span class="lineno"><a class="line" href="regex_8c.html#a85a9d04db18bdf4b65ea1113400613e4"> 3013</a></span>&#160;<a class="code" href="regex_8c.html#a85a9d04db18bdf4b65ea1113400613e4">at_endline_loc_p</a> (p, pend, syntax)</div><div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *p, *pend;</div><div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;    <a class="code" href="__regex_8h.html#a7e0565199a2fabaca3d67a5a44fc4229">reg_syntax_t</a> <a class="code" href="structre__pattern__buffer.html#af3e24760a69608d163661c6d8977c358">syntax</a>;</div><div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;{</div><div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *next = p;</div><div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;  <span class="keywordtype">boolean</span> next_backslash = *next == <span class="charliteral">&#39;\\&#39;</span>;</div><div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *next_next = p + 1 &lt; pend ? p + 1 : 0;</div><div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;</div><div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;  <span class="keywordflow">return</span></div><div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;       <span class="comment">/* Before a subexpression?  */</span></div><div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;       (syntax &amp; <a class="code" href="__regex_8h.html#af2f17f18a9c771c91d963f466f559e68">RE_NO_BK_PARENS</a> ? *next == <span class="charliteral">&#39;)&#39;</span></div><div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;        : next_backslash &amp;&amp; next_next &amp;&amp; *next_next == <span class="charliteral">&#39;)&#39;</span>)</div><div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;       <span class="comment">/* Before an alternative?  */</span></div><div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;    || (syntax &amp; <a class="code" href="__regex_8h.html#a834997e69569c41f0394d6ee120051a0">RE_NO_BK_VBAR</a> ? *next == <span class="charliteral">&#39;|&#39;</span></div><div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;        : next_backslash &amp;&amp; next_next &amp;&amp; *next_next == <span class="charliteral">&#39;|&#39;</span>);</div><div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;}</div><div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;</div><div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;</div><div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;<span class="comment">/* Returns true if REGNUM is in one of COMPILE_STACK&#39;s elements and</span></div><div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;<span class="comment">   false if it&#39;s not.  */</span></div><div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;</div><div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;<span class="keyword">static</span> <span class="keywordtype">boolean</span></div><div class="line"><a name="l03035"></a><span class="lineno"><a class="line" href="regex_8c.html#a28dc5088ce179431d47162481e6c6540"> 3035</a></span>&#160;<a class="code" href="regex_8c.html#a28dc5088ce179431d47162481e6c6540">group_in_compile_stack</a> (compile_stack, regnum)</div><div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;    <a class="code" href="structcompile__stack__type.html">compile_stack_type</a> compile_stack;</div><div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;    regnum_t regnum;</div><div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;{</div><div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;  <span class="keywordtype">int</span> this_element;</div><div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;</div><div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;  <span class="keywordflow">for</span> (this_element = compile_stack.<a class="code" href="structcompile__stack__type.html#a45982ffa38800f8a9502da9708ec587c">avail</a> - 1;</div><div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;       this_element &gt;= 0;</div><div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;       this_element--)</div><div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;    <span class="keywordflow">if</span> (compile_stack.<a class="code" href="structcompile__stack__type.html#aebaf05ac308fe465d6a630e5d863fd4a">stack</a>[this_element].<a class="code" href="structcompile__stack__elt__t.html#af027fbe8c196c2e4646ae6247094d1f8">regnum</a> == regnum)</div><div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;</div><div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;}</div><div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;</div><div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;</div><div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;<span class="comment">/* Read the ending character of a range (in a bracket expression) from the</span></div><div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;<span class="comment">   uncompiled pattern *P_PTR (which ends at PEND).  We assume the</span></div><div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;<span class="comment">   starting character is in `P[-2]&#39;.  (`P[-1]&#39; is the character `-&#39;.)</span></div><div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;<span class="comment">   Then we set the translation of all bits between the starting and</span></div><div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;<span class="comment">   ending characters (inclusive) in the compiled pattern B.</span></div><div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;<span class="comment"></span></div><div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;<span class="comment">   Return an error code.</span></div><div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;<span class="comment"></span></div><div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;<span class="comment">   We use these short variable names so we can use the same macros as</span></div><div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;<span class="comment">   `regex_compile&#39; itself.  */</span></div><div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;</div><div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;<span class="keyword">static</span> <a class="code" href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5ae">reg_errcode_t</a></div><div class="line"><a name="l03063"></a><span class="lineno"><a class="line" href="regex_8c.html#a06b0c1ae265d6791c041df0ddf6d7ff6"> 3063</a></span>&#160;<a class="code" href="regex_8c.html#a06b0c1ae265d6791c041df0ddf6d7ff6">compile_range</a> (p_ptr, pend, translate, syntax, b)</div><div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> **p_ptr, *pend;</div><div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;    <a class="code" href="__regex_8h.html#a96c9fb9c7074cb21740b63092b0637a4">RE_TRANSLATE_TYPE</a> <a class="code" href="structre__pattern__buffer.html#a0a2f7fd160aa3cc0195fc7ee91e41195">translate</a>;</div><div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;    <a class="code" href="__regex_8h.html#a7e0565199a2fabaca3d67a5a44fc4229">reg_syntax_t</a> <a class="code" href="structre__pattern__buffer.html#af3e24760a69608d163661c6d8977c358">syntax</a>;</div><div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *b;</div><div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;{</div><div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;  <span class="keywordtype">unsigned</span> this_char;</div><div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;</div><div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *p = *p_ptr;</div><div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> range_start, range_end;</div><div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;</div><div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;  <span class="keywordflow">if</span> (p == pend)</div><div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5aea16489a654c428b506103ccc746adda00">REG_ERANGE</a>;</div><div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;</div><div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;  <span class="comment">/* Even though the pattern is a signed `char *&#39;, we need to fetch</span></div><div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;<span class="comment">     with unsigned char *&#39;s; if the high bit of the pattern character</span></div><div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;<span class="comment">     is set, the range endpoints will be negative if we fetch using a</span></div><div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;<span class="comment">     signed char *.</span></div><div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;<span class="comment"></span></div><div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;<span class="comment">     We also want to fetch the endpoints without translating them; the</span></div><div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;<span class="comment">     appropriate translation is done in the bit-setting loop below.  */</span></div><div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;  <span class="comment">/* The SVR4 compiler on the 3B2 had trouble with unsigned const char *.  */</span></div><div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;  range_start = ((<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) p)[-2];</div><div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;  range_end   = ((<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) p)[0];</div><div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;</div><div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;  <span class="comment">/* Have to increment the pointer into the pattern string, so the</span></div><div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;<span class="comment">     caller isn&#39;t still at the ending character.  */</span></div><div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;  (*p_ptr)++;</div><div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;</div><div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;  <span class="comment">/* If the start is after the end, the range is empty.  */</span></div><div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;  <span class="keywordflow">if</span> (range_start &gt; range_end)</div><div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;    <span class="keywordflow">return</span> syntax &amp; <a class="code" href="__regex_8h.html#ae01c1dfed60f209c2f10f252c3acf9fd">RE_NO_EMPTY_RANGES</a> ? <a class="code" href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5aea16489a654c428b506103ccc746adda00">REG_ERANGE</a> : <a class="code" href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5aeafa64e5a57596c8c859f982512f52cd6b">REG_NOERROR</a>;</div><div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;</div><div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;  <span class="comment">/* Here we see why `this_char&#39; has to be larger than an `unsigned</span></div><div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;<span class="comment">     char&#39; -- the range is inclusive, so if `range_end&#39; == 0xff</span></div><div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;<span class="comment">     (assuming 8-bit characters), we would otherwise go into an infinite</span></div><div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;<span class="comment">     loop, since all characters &lt;= 0xff.  */</span></div><div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;  <span class="keywordflow">for</span> (this_char = range_start; this_char &lt;= range_end; this_char++)</div><div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;    {</div><div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;      <a class="code" href="regex_8c.html#aa09a4c3c61b8d82d7134225bfd5a32f7">SET_LIST_BIT</a> (<a class="code" href="regex_8c.html#a2eeeb49b77aa0f299d2d3c23dc1bfa17">TRANSLATE</a> (this_char));</div><div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;    }</div><div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;</div><div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5aeafa64e5a57596c8c859f982512f52cd6b">REG_NOERROR</a>;</div><div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;}</div><div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;</div><div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;<span class="comment">/* re_compile_fastmap computes a ``fastmap&#39;&#39; for the compiled pattern in</span></div><div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;<span class="comment">   BUFP.  A fastmap records which of the (1 &lt;&lt; BYTEWIDTH) possible</span></div><div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;<span class="comment">   characters can start a string that matches the pattern.  This fastmap</span></div><div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;<span class="comment">   is used by re_search to skip quickly over impossible starting points.</span></div><div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;<span class="comment"></span></div><div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;<span class="comment">   The caller must supply the address of a (1 &lt;&lt; BYTEWIDTH)-byte data</span></div><div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;<span class="comment">   area as BUFP-&gt;fastmap.</span></div><div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;<span class="comment"></span></div><div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;<span class="comment">   We set the `fastmap&#39;, `fastmap_accurate&#39;, and `can_be_null&#39; fields in</span></div><div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;<span class="comment">   the pattern buffer.</span></div><div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;<span class="comment"></span></div><div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;<span class="comment">   Returns 0 if we succeed, -2 if an internal error.   */</span></div><div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;</div><div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;<span class="keywordtype">int</span></div><div class="line"><a name="l03122"></a><span class="lineno"><a class="line" href="regex_8c.html#a39979f3b79c423214dc96b34996424a8"> 3122</a></span>&#160;<a class="code" href="regex_8c.html#a39979f3b79c423214dc96b34996424a8">re_compile_fastmap</a> (bufp)</div><div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;     <span class="keyword">struct </span><a class="code" href="structre__pattern__buffer.html">re_pattern_buffer</a> *bufp;</div><div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;{</div><div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;  <span class="keywordtype">int</span> j, k;</div><div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;<span class="preprocessor">#ifdef MATCH_MAY_ALLOCATE</span></div><div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;  <a class="code" href="structfail__stack__type.html">fail_stack_type</a> fail_stack;</div><div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;<span class="preprocessor">#ifndef REGEX_MALLOC</span></div><div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;  <span class="keywordtype">char</span> *destination;</div><div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;  <span class="keyword">register</span> <span class="keywordtype">char</span> *fastmap = bufp-&gt;<a class="code" href="structre__pattern__buffer.html#aa356b59c2846045ffba6d3d84dc7cbac">fastmap</a>;</div><div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *pattern = bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a84025dce422d70b263288329274a888d">buffer</a>;</div><div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *p = pattern;</div><div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;  <span class="keyword">register</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *pend = pattern + bufp-&gt;<a class="code" href="structre__pattern__buffer.html#ae53a42d0d93039e283f1d937e6e710a7">used</a>;</div><div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;</div><div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;<span class="preprocessor">#ifdef REL_ALLOC</span></div><div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;  <span class="comment">/* This holds the pointer to the failure stack, when</span></div><div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;<span class="comment">     it is allocated relocatably.  */</span></div><div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;  fail_stack_elt_t *failure_stack_ptr;</div><div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;</div><div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;  <span class="comment">/* Assume that each path through the pattern can be null until</span></div><div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;<span class="comment">     proven otherwise.  We set this false at the bottom of switch</span></div><div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;<span class="comment">     statement, to which we get only if a particular path doesn&#39;t</span></div><div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;<span class="comment">     match the empty string.  */</span></div><div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;  <span class="keywordtype">boolean</span> path_can_be_null = <span class="keyword">true</span>;</div><div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;</div><div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;  <span class="comment">/* We aren&#39;t doing a `succeed_n&#39; to begin with.  */</span></div><div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;  <span class="keywordtype">boolean</span> succeed_n_p = <span class="keyword">false</span>;</div><div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;</div><div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;  <a class="code" href="sendlib_8c.html#af576bf8ffa22a44e53018c67095ffbf0">assert</a> (fastmap != <a class="code" href="regex_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; p != <a class="code" href="regex_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;</div><div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;  <a class="code" href="regex_8c.html#a0a97c6a1ac97ed1288cb47dceabc56df">INIT_FAIL_STACK</a> ();</div><div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;  bzero (fastmap, 1 &lt;&lt; <a class="code" href="regex_8c.html#ad72dc64cd2c9bc3598f792dc518d03b2">BYTEWIDTH</a>);  <span class="comment">/* Assume nothing&#39;s valid.  */</span></div><div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;  bufp-&gt;<a class="code" href="structre__pattern__buffer.html#af3578c777dbece95d6c8a1e10a6a7a5a">fastmap_accurate</a> = 1;       <span class="comment">/* It will be when we&#39;re done.  */</span></div><div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;  bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a51c16ef7ad52b4e75d6e3eee7556e84e">can_be_null</a> = 0;</div><div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;</div><div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;  <span class="keywordflow">while</span> (1)</div><div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;    {</div><div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;      <span class="keywordflow">if</span> (p == pend || *p == <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a37fe3367d5bf38cb0ac666ebae52d4f9">succeed</a>)</div><div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;        {</div><div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;          <span class="comment">/* We have reached the (effective) end of pattern.  */</span></div><div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;          <span class="keywordflow">if</span> (!<a class="code" href="regex_8c.html#a222a4648230cba6a1801e51b4e2ced77">FAIL_STACK_EMPTY</a> ())</div><div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;            {</div><div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;              bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a51c16ef7ad52b4e75d6e3eee7556e84e">can_be_null</a> |= path_can_be_null;</div><div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;</div><div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;              <span class="comment">/* Reset for next path.  */</span></div><div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;              path_can_be_null = <span class="keyword">true</span>;</div><div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;</div><div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;              p = fail_stack.<a class="code" href="structfail__stack__type.html#a810ddd6610b10fddebcfbf675f7800c8">stack</a>[--fail_stack.<a class="code" href="structfail__stack__type.html#a1e3d4256deebf37a4528f58d3d261854">avail</a>].pointer;</div><div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;</div><div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;              <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;            }</div><div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;          <span class="keywordflow">else</span></div><div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;        }</div><div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;</div><div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;      <span class="comment">/* We should never be about to go beyond the end of the pattern.  */</span></div><div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;      <a class="code" href="sendlib_8c.html#af576bf8ffa22a44e53018c67095ffbf0">assert</a> (p &lt; pend);</div><div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;</div><div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;      <span class="keywordflow">switch</span> (<a class="code" href="regex_8c.html#a95cf7f68f7a75751d4abd454d6add11a">SWITCH_ENUM_CAST</a> ((re_opcode_t) *p++))</div><div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;        {</div><div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;</div><div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;        <span class="comment">/* I guess the idea here is to simply not bother with a fastmap</span></div><div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;<span class="comment">           if a backreference is used, since it&#39;s too hard to figure out</span></div><div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;<span class="comment">           the fastmap for the corresponding group.  Setting</span></div><div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;<span class="comment">           `can_be_null&#39; stops `re_search_2&#39; from using the fastmap, so</span></div><div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;<span class="comment">           that is all we do.  */</span></div><div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a0c02fe9db75630f52c6e9e44dd55d9de">duplicate</a>:</div><div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;          bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a51c16ef7ad52b4e75d6e3eee7556e84e">can_be_null</a> = 1;</div><div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;          <span class="keywordflow">goto</span> done;</div><div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;</div><div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;</div><div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;      <span class="comment">/* Following are the cases which match a character.  These end</span></div><div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;<span class="comment">         with `break&#39;.  */</span></div><div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;</div><div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118ab0eca0e160953a14bcb41d151287d1f1">exactn</a>:</div><div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;          fastmap[p[1]] = 1;</div><div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;</div><div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;</div><div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a6247a0132ac9bb1af7dbc840afe09c88">charset</a>:</div><div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;          <span class="keywordflow">for</span> (j = *p++ * <a class="code" href="regex_8c.html#ad72dc64cd2c9bc3598f792dc518d03b2">BYTEWIDTH</a> - 1; j &gt;= 0; j--)</div><div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;            <span class="keywordflow">if</span> (p[j / <a class="code" href="regex_8c.html#ad72dc64cd2c9bc3598f792dc518d03b2">BYTEWIDTH</a>] &amp; (1 &lt;&lt; (j % <a class="code" href="regex_8c.html#ad72dc64cd2c9bc3598f792dc518d03b2">BYTEWIDTH</a>)))</div><div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;              fastmap[j] = 1;</div><div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;</div><div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;</div><div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118abcbe9b8a81da1098e4ffbb7c4f4a8e2e">charset_not</a>:</div><div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;          <span class="comment">/* Chars beyond end of map must be allowed.  */</span></div><div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;          <span class="keywordflow">for</span> (j = *p * BYTEWIDTH; j &lt; (1 &lt;&lt; <a class="code" href="regex_8c.html#ad72dc64cd2c9bc3598f792dc518d03b2">BYTEWIDTH</a>); j++)</div><div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;            fastmap[j] = 1;</div><div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;</div><div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;          <span class="keywordflow">for</span> (j = *p++ * BYTEWIDTH - 1; j &gt;= 0; j--)</div><div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;            <span class="keywordflow">if</span> (!(p[j / BYTEWIDTH] &amp; (1 &lt;&lt; (j % BYTEWIDTH))))</div><div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;              fastmap[j] = 1;</div><div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;</div><div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;</div><div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a26eed2ae578da61bebc7b55e7610cf0b">wordchar</a>:</div><div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;          <span class="keywordflow">for</span> (j = 0; j &lt; (1 &lt;&lt; <a class="code" href="regex_8c.html#ad72dc64cd2c9bc3598f792dc518d03b2">BYTEWIDTH</a>); j++)</div><div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="regex_8c.html#aa3ac3cf24b0571b34350ae5cf10f354e">SYNTAX</a> (j) == <a class="code" href="regex_8c.html#a3c4fa96131648fe8cb5bb3055015e73a">Sword</a>)</div><div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;              fastmap[j] = 1;</div><div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;</div><div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;</div><div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a01398d7bcfdbcb84b318fc65a7ef9c93">notwordchar</a>:</div><div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;          <span class="keywordflow">for</span> (j = 0; j &lt; (1 &lt;&lt; <a class="code" href="regex_8c.html#ad72dc64cd2c9bc3598f792dc518d03b2">BYTEWIDTH</a>); j++)</div><div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="regex_8c.html#aa3ac3cf24b0571b34350ae5cf10f354e">SYNTAX</a> (j) != <a class="code" href="regex_8c.html#a3c4fa96131648fe8cb5bb3055015e73a">Sword</a>)</div><div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;              fastmap[j] = 1;</div><div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;</div><div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;</div><div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a375d40bb404dcb4aedbb775f40e7f648">anychar</a>:</div><div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;          {</div><div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;            <span class="keywordtype">int</span> fastmap_newline = fastmap[<span class="charliteral">&#39;\n&#39;</span>];</div><div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;</div><div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;            <span class="comment">/* `.&#39; matches anything ...  */</span></div><div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;            <span class="keywordflow">for</span> (j = 0; j &lt; (1 &lt;&lt; <a class="code" href="regex_8c.html#ad72dc64cd2c9bc3598f792dc518d03b2">BYTEWIDTH</a>); j++)</div><div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;              fastmap[j] = 1;</div><div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;</div><div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;            <span class="comment">/* ... except perhaps newline.  */</span></div><div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;            <span class="keywordflow">if</span> (!(bufp-&gt;<a class="code" href="structre__pattern__buffer.html#af3e24760a69608d163661c6d8977c358">syntax</a> &amp; <a class="code" href="__regex_8h.html#a405fe43871f2df60407b3c8272f4624c">RE_DOT_NEWLINE</a>))</div><div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;              fastmap[<span class="charliteral">&#39;\n&#39;</span>] = fastmap_newline;</div><div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;</div><div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;            <span class="comment">/* Return if we have already set `can_be_null&#39;; if we have,</span></div><div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;<span class="comment">               then the fastmap is irrelevant.  Something&#39;s wrong here.  */</span></div><div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a51c16ef7ad52b4e75d6e3eee7556e84e">can_be_null</a>)</div><div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;              <span class="keywordflow">goto</span> done;</div><div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;</div><div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;            <span class="comment">/* Otherwise, have to check alternative paths.  */</span></div><div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;          }</div><div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;</div><div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;<span class="preprocessor">#ifdef emacs</span></div><div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;        <span class="keywordflow">case</span> syntaxspec:</div><div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;          k = *p++;</div><div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;          <span class="keywordflow">for</span> (j = 0; j &lt; (1 &lt;&lt; <a class="code" href="regex_8c.html#ad72dc64cd2c9bc3598f792dc518d03b2">BYTEWIDTH</a>); j++)</div><div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="regex_8c.html#aa3ac3cf24b0571b34350ae5cf10f354e">SYNTAX</a> (j) == (<span class="keyword">enum</span> syntaxcode) k)</div><div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;              fastmap[j] = 1;</div><div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;</div><div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;</div><div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;        <span class="keywordflow">case</span> notsyntaxspec:</div><div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;          k = *p++;</div><div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;          <span class="keywordflow">for</span> (j = 0; j &lt; (1 &lt;&lt; <a class="code" href="regex_8c.html#ad72dc64cd2c9bc3598f792dc518d03b2">BYTEWIDTH</a>); j++)</div><div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="regex_8c.html#aa3ac3cf24b0571b34350ae5cf10f354e">SYNTAX</a> (j) != (<span class="keyword">enum</span> syntaxcode) k)</div><div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;              fastmap[j] = 1;</div><div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;</div><div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;</div><div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;      <span class="comment">/* All cases after this match the empty string.  These end with</span></div><div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;<span class="comment">         `continue&#39;.  */</span></div><div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;</div><div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;</div><div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;        <span class="keywordflow">case</span> before_dot:</div><div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;        <span class="keywordflow">case</span> at_dot:</div><div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;        <span class="keywordflow">case</span> after_dot:</div><div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* emacs */</span><span class="preprocessor"></span></div><div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;</div><div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;</div><div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a292eb17c5d97bf50ef0c4f733e56c836">no_op</a>:</div><div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a4780b4642f63093c414b1833e2d40107">begline</a>:</div><div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a0556771866997767489c4da274f15aa4">endline</a>:</div><div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118ab428f43b6557e8dfc45e452a8891b598">begbuf</a>:</div><div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a4962434097279c747aa6ba59df478775">endbuf</a>:</div><div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a47168d753b8d555d2e89416a4b660da9">wordbound</a>:</div><div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a9077999caa8f316015aabfd83b3745a0">notwordbound</a>:</div><div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118ad88e0028985b6bc61df64cd9578d3f18">wordbeg</a>:</div><div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118accd3c02d3bd48af753cf5261bfb084ac">wordend</a>:</div><div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118ae96f67086c4f61cc6fd32b6b493dc17f">push_dummy_failure</a>:</div><div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;</div><div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;</div><div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a333721a24859c29322c8abdae4159e1b">jump_n</a>:</div><div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a24cdcea4f39ca8613374deb4bfe5b2cb">pop_failure_jump</a>:</div><div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a54819e2968ab91bf6ad492f131d7f37b">maybe_pop_jump</a>:</div><div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a5a08a3c1fa135350961630d2f9c2b849">jump</a>:</div><div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a2b75b8e92a52c848de16544d9ceb08da">jump_past_alt</a>:</div><div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a3918fb85c0fd4b2f8c84afad14836eba">dummy_failure_jump</a>:</div><div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;          <a class="code" href="regex_8c.html#abf958c753956f073a33bd336660e9038">EXTRACT_NUMBER_AND_INCR</a> (j, p);</div><div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;          p += j;</div><div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;          <span class="keywordflow">if</span> (j &gt; 0)</div><div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;</div><div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;          <span class="comment">/* Jump backward implies we just went through the body of a</span></div><div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;<span class="comment">             loop and matched nothing.  Opcode jumped to should be</span></div><div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;<span class="comment">             `on_failure_jump&#39; or `succeed_n&#39;.  Just treat it like an</span></div><div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;<span class="comment">             ordinary jump.  For a * loop, it has pushed its failure</span></div><div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;<span class="comment">             point already; if so, discard that as redundant.  */</span></div><div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;          <span class="keywordflow">if</span> ((re_opcode_t) *p != <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a5ca3d8a56cc5259243bcaffedd070287">on_failure_jump</a></div><div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;              &amp;&amp; (re_opcode_t) *p != <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118ae45bee3e6749253a8ba8769646f79734">succeed_n</a>)</div><div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;</div><div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;          p++;</div><div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;          <a class="code" href="regex_8c.html#abf958c753956f073a33bd336660e9038">EXTRACT_NUMBER_AND_INCR</a> (j, p);</div><div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;          p += j;</div><div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;</div><div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;          <span class="comment">/* If what&#39;s on the stack is where we are now, pop it.  */</span></div><div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;          <span class="keywordflow">if</span> (!<a class="code" href="regex_8c.html#a222a4648230cba6a1801e51b4e2ced77">FAIL_STACK_EMPTY</a> ()</div><div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;              &amp;&amp; fail_stack.<a class="code" href="structfail__stack__type.html#a810ddd6610b10fddebcfbf675f7800c8">stack</a>[fail_stack.<a class="code" href="structfail__stack__type.html#a1e3d4256deebf37a4528f58d3d261854">avail</a> - 1].pointer == p)</div><div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;            fail_stack.<a class="code" href="structfail__stack__type.html#a1e3d4256deebf37a4528f58d3d261854">avail</a>--;</div><div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;</div><div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;</div><div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;</div><div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a5ca3d8a56cc5259243bcaffedd070287">on_failure_jump</a>:</div><div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118adbebd35172fa7358845d6dd61727883b">on_failure_keep_string_jump</a>:</div><div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;        handle_on_failure_jump:</div><div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;          <a class="code" href="regex_8c.html#abf958c753956f073a33bd336660e9038">EXTRACT_NUMBER_AND_INCR</a> (j, p);</div><div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;</div><div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;          <span class="comment">/* For some patterns, e.g., `(a?)?&#39;, `p+j&#39; here points to the</span></div><div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;<span class="comment">             end of the pattern.  We don&#39;t want to push such a point,</span></div><div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;<span class="comment">             since when we restore it above, entering the switch will</span></div><div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;<span class="comment">             increment `p&#39; past the end of the pattern.  We don&#39;t need</span></div><div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;<span class="comment">             to push such a point since we obviously won&#39;t find any more</span></div><div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;<span class="comment">             fastmap entries beyond `pend&#39;.  Such a pattern can match</span></div><div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;<span class="comment">             the null string, though.  */</span></div><div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;          <span class="keywordflow">if</span> (p + j &lt; pend)</div><div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;            {</div><div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;              <span class="keywordflow">if</span> (!<a class="code" href="regex_8c.html#a78ae8e3bdec768f7fd9a75b31109fa8d">PUSH_PATTERN_OP</a> (p + j, fail_stack))</div><div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;                {</div><div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;                  <a class="code" href="regex_8c.html#af9f8d0785dfac45a23d8d8fdb4df1629">RESET_FAIL_STACK</a> ();</div><div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;                  <span class="keywordflow">return</span> -2;</div><div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;                }</div><div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;            }</div><div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;          <span class="keywordflow">else</span></div><div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;            bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a51c16ef7ad52b4e75d6e3eee7556e84e">can_be_null</a> = 1;</div><div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;</div><div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;          <span class="keywordflow">if</span> (succeed_n_p)</div><div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;            {</div><div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;              <a class="code" href="regex_8c.html#abf958c753956f073a33bd336660e9038">EXTRACT_NUMBER_AND_INCR</a> (k, p);   <span class="comment">/* Skip the n.  */</span></div><div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;              succeed_n_p = <span class="keyword">false</span>;</div><div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;            }</div><div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;</div><div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;</div><div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;</div><div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118ae45bee3e6749253a8ba8769646f79734">succeed_n</a>:</div><div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;          <span class="comment">/* Get to the number of times to succeed.  */</span></div><div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;          p += 2;</div><div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;</div><div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;          <span class="comment">/* Increment p past the n for when k != 0.  */</span></div><div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;          <a class="code" href="regex_8c.html#abf958c753956f073a33bd336660e9038">EXTRACT_NUMBER_AND_INCR</a> (k, p);</div><div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;          <span class="keywordflow">if</span> (k == 0)</div><div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;            {</div><div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;              p -= 4;</div><div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;              succeed_n_p = <span class="keyword">true</span>;  <span class="comment">/* Spaghetti code alert.  */</span></div><div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;              <span class="keywordflow">goto</span> handle_on_failure_jump;</div><div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;            }</div><div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;</div><div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;</div><div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a0f280efb7129538f3b07aa789fc99fa1">set_number_at</a>:</div><div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;          p += 4;</div><div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;</div><div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;</div><div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118affba14708233f194802bf7981fd7717e">start_memory</a>:</div><div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a6a42f30575b66116b79f4527493d0ce9">stop_memory</a>:</div><div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;          p += 2;</div><div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;</div><div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;</div><div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;        <span class="keywordflow">default</span>:</div><div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;          abort (); <span class="comment">/* We have listed all the cases.  */</span></div><div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;        } <span class="comment">/* switch *p++ */</span></div><div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;</div><div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;      <span class="comment">/* Getting here means we have found the possible starting</span></div><div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;<span class="comment">         characters for one path of the pattern -- and that the empty</span></div><div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;<span class="comment">         string does not match.  We need not follow this path further.</span></div><div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;<span class="comment">         Instead, look at the next alternative (remembered on the</span></div><div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;<span class="comment">         stack), or quit if no more.  The test at the top of the loop</span></div><div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;<span class="comment">         does these things.  */</span></div><div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;      path_can_be_null = <span class="keyword">false</span>;</div><div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;      p = pend;</div><div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;    } <span class="comment">/* while p */</span></div><div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;</div><div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160;  <span class="comment">/* Set `can_be_null&#39; for the last path (also the first path, if the</span></div><div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;<span class="comment">     pattern is empty).  */</span></div><div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;  bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a51c16ef7ad52b4e75d6e3eee7556e84e">can_be_null</a> |= path_can_be_null;</div><div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;</div><div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160; done:</div><div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;  <a class="code" href="regex_8c.html#af9f8d0785dfac45a23d8d8fdb4df1629">RESET_FAIL_STACK</a> ();</div><div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;} <span class="comment">/* re_compile_fastmap */</span></div><div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;</div><div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;<span class="comment">/* Set REGS to hold NUM_REGS registers, storing them in STARTS and</span></div><div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;<span class="comment">   ENDS.  Subsequent matches using PATTERN_BUFFER and REGS will use</span></div><div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;<span class="comment">   this memory for recording register information.  STARTS and ENDS</span></div><div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;<span class="comment">   must be allocated using the malloc library routine, and must each</span></div><div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;<span class="comment">   be at least NUM_REGS * sizeof (regoff_t) bytes long.</span></div><div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;<span class="comment"></span></div><div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;<span class="comment">   If NUM_REGS == 0, then subsequent matches should allocate their own</span></div><div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;<span class="comment">   register data.</span></div><div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160;<span class="comment"></span></div><div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160;<span class="comment">   Unless this function is called, the first search or match using</span></div><div class="line"><a name="l03420"></a><span class="lineno"> 3420</span>&#160;<span class="comment">   PATTERN_BUFFER will allocate its own register data, without</span></div><div class="line"><a name="l03421"></a><span class="lineno"> 3421</span>&#160;<span class="comment">   freeing the old data.  */</span></div><div class="line"><a name="l03422"></a><span class="lineno"> 3422</span>&#160;</div><div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l03424"></a><span class="lineno"><a class="line" href="regex_8c.html#ad9e4e94e6531ff0387a725491e028a41"> 3424</a></span>&#160;<a class="code" href="regex_8c.html#ad9e4e94e6531ff0387a725491e028a41">re_set_registers</a> (bufp, regs, num_regs, starts, ends)</div><div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160;    <span class="keyword">struct </span><a class="code" href="structre__pattern__buffer.html">re_pattern_buffer</a> *bufp;</div><div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;    <span class="keyword">struct </span><a class="code" href="structre__registers.html">re_registers</a> *regs;</div><div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="structre__registers.html#aeae8140aadf339f6fe0c49277d6aa7b5">num_regs</a>;</div><div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;    <a class="code" href="__regex_8h.html#a5b34995b47432512ee4ffa32b836e65f">regoff_t</a> *starts, *ends;</div><div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160;{</div><div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;  <span class="keywordflow">if</span> (num_regs)</div><div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160;    {</div><div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160;      bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a5d2b01dbcd7226fbfe60d755825d73e3">regs_allocated</a> = <a class="code" href="__regex_8h.html#a87642301f41c9c37e7f4d10ab5ade987">REGS_REALLOCATE</a>;</div><div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160;      regs-&gt;<a class="code" href="structre__registers.html#aeae8140aadf339f6fe0c49277d6aa7b5">num_regs</a> = <a class="code" href="structre__registers.html#aeae8140aadf339f6fe0c49277d6aa7b5">num_regs</a>;</div><div class="line"><a name="l03434"></a><span class="lineno"> 3434</span>&#160;      regs-&gt;<a class="code" href="structre__registers.html#a6676ddb6ab07e50191e149b04dbcfe03">start</a> = starts;</div><div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;      regs-&gt;<a class="code" href="structre__registers.html#a0a9d373f1ab74c9c2063f233476fa5d4">end</a> = ends;</div><div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160;    }</div><div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;    {</div><div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160;      bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a5d2b01dbcd7226fbfe60d755825d73e3">regs_allocated</a> = <a class="code" href="__regex_8h.html#a2714d3e1903c4824ef31ccae36e702c7">REGS_UNALLOCATED</a>;</div><div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160;      regs-&gt;<a class="code" href="structre__registers.html#aeae8140aadf339f6fe0c49277d6aa7b5">num_regs</a> = 0;</div><div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;      regs-&gt;<a class="code" href="structre__registers.html#a6676ddb6ab07e50191e149b04dbcfe03">start</a> = regs-&gt;<a class="code" href="structre__registers.html#a0a9d373f1ab74c9c2063f233476fa5d4">end</a> = (<a class="code" href="__regex_8h.html#a5b34995b47432512ee4ffa32b836e65f">regoff_t</a> *) 0;</div><div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160;    }</div><div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;}</div><div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;</div><div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160;<span class="comment">/* Searching routines.  */</span></div><div class="line"><a name="l03446"></a><span class="lineno"> 3446</span>&#160;</div><div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160;<span class="comment">/* Like re_search_2, below, but only one string is specified, and</span></div><div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160;<span class="comment">   doesn&#39;t let you say where to stop matching. */</span></div><div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160;</div><div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;<span class="keywordtype">int</span></div><div class="line"><a name="l03451"></a><span class="lineno"><a class="line" href="regex_8c.html#afe0743116f59f62a4d00f50a9e9a4932"> 3451</a></span>&#160;<a class="code" href="regex_8c.html#afe0743116f59f62a4d00f50a9e9a4932">re_search</a> (bufp, <span class="keywordtype">string</span>, size, startpos, range, regs)</div><div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160;     <span class="keyword">struct </span><a class="code" href="structre__pattern__buffer.html">re_pattern_buffer</a> *bufp;</div><div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;     <span class="keyword">const</span> <span class="keywordtype">char</span> *string;</div><div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;     <span class="keywordtype">int</span> size, startpos, range;</div><div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;     <span class="keyword">struct </span><a class="code" href="structre__registers.html">re_registers</a> *regs;</div><div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;{</div><div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="regex_8c.html#a22058f53f03b835778e1117d7abf0bd7">re_search_2</a> (bufp, <a class="code" href="regex_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <span class="keywordtype">string</span>, size, startpos, range,</div><div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;                      regs, size);</div><div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;}</div><div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;</div><div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;</div><div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160;<span class="comment">/* Using the compiled pattern in BUFP-&gt;buffer, first tries to match the</span></div><div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;<span class="comment">   virtual concatenation of STRING1 and STRING2, starting first at index</span></div><div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;<span class="comment">   STARTPOS, then at STARTPOS + 1, and so on.</span></div><div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;<span class="comment"></span></div><div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;<span class="comment">   STRING1 and STRING2 have length SIZE1 and SIZE2, respectively.</span></div><div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;<span class="comment"></span></div><div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;<span class="comment">   RANGE is how far to scan while trying to match.  RANGE = 0 means try</span></div><div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;<span class="comment">   only at STARTPOS; in general, the last start tried is STARTPOS +</span></div><div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160;<span class="comment">   RANGE.</span></div><div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;<span class="comment"></span></div><div class="line"><a name="l03472"></a><span class="lineno"> 3472</span>&#160;<span class="comment">   In REGS, return the indices of the virtual concatenation of STRING1</span></div><div class="line"><a name="l03473"></a><span class="lineno"> 3473</span>&#160;<span class="comment">   and STRING2 that matched the entire BUFP-&gt;buffer and its contained</span></div><div class="line"><a name="l03474"></a><span class="lineno"> 3474</span>&#160;<span class="comment">   subexpressions.</span></div><div class="line"><a name="l03475"></a><span class="lineno"> 3475</span>&#160;<span class="comment"></span></div><div class="line"><a name="l03476"></a><span class="lineno"> 3476</span>&#160;<span class="comment">   Do not consider matching one past the index STOP in the virtual</span></div><div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160;<span class="comment">   concatenation of STRING1 and STRING2.</span></div><div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;<span class="comment"></span></div><div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160;<span class="comment">   We return either the position in the strings at which the match was</span></div><div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160;<span class="comment">   found, -1 if no match, or -2 if error (such as failure</span></div><div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160;<span class="comment">   stack overflow).  */</span></div><div class="line"><a name="l03482"></a><span class="lineno"> 3482</span>&#160;</div><div class="line"><a name="l03483"></a><span class="lineno"> 3483</span>&#160;<span class="keywordtype">int</span></div><div class="line"><a name="l03484"></a><span class="lineno"><a class="line" href="regex_8c.html#a22058f53f03b835778e1117d7abf0bd7"> 3484</a></span>&#160;<a class="code" href="regex_8c.html#a22058f53f03b835778e1117d7abf0bd7">re_search_2</a> (bufp, string1, size1, string2, size2, startpos, range, regs, stop)</div><div class="line"><a name="l03485"></a><span class="lineno"> 3485</span>&#160;     <span class="keyword">struct </span><a class="code" href="structre__pattern__buffer.html">re_pattern_buffer</a> *bufp;</div><div class="line"><a name="l03486"></a><span class="lineno"> 3486</span>&#160;     <span class="keyword">const</span> <span class="keywordtype">char</span> *string1, *string2;</div><div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160;     <span class="keywordtype">int</span> size1, size2;</div><div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;     <span class="keywordtype">int</span> startpos;</div><div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;     <span class="keywordtype">int</span> range;</div><div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160;     <span class="keyword">struct </span><a class="code" href="structre__registers.html">re_registers</a> *regs;</div><div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;     <span class="keywordtype">int</span> stop;</div><div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160;{</div><div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;  <span class="keywordtype">int</span> val;</div><div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;  <span class="keyword">register</span> <span class="keywordtype">char</span> *fastmap = bufp-&gt;<a class="code" href="structre__pattern__buffer.html#aa356b59c2846045ffba6d3d84dc7cbac">fastmap</a>;</div><div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;  <span class="keyword">register</span> <a class="code" href="__regex_8h.html#a96c9fb9c7074cb21740b63092b0637a4">RE_TRANSLATE_TYPE</a> translate = bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a0a2f7fd160aa3cc0195fc7ee91e41195">translate</a>;</div><div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160;  <span class="keywordtype">int</span> total_size = size1 + size2;</div><div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;  <span class="keywordtype">int</span> endpos = startpos + range;</div><div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160;</div><div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160;  <span class="comment">/* Check for out-of-range STARTPOS.  */</span></div><div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;  <span class="keywordflow">if</span> (startpos &lt; 0 || startpos &gt; total_size)</div><div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;</div><div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160;  <span class="comment">/* Fix up RANGE if it might eventually take us outside</span></div><div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160;<span class="comment">     the virtual concatenation of STRING1 and STRING2.</span></div><div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;<span class="comment">     Make sure we won&#39;t move STARTPOS below 0 or above TOTAL_SIZE.  */</span></div><div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;  <span class="keywordflow">if</span> (endpos &lt; 0)</div><div class="line"><a name="l03507"></a><span class="lineno"> 3507</span>&#160;    range = 0 - startpos;</div><div class="line"><a name="l03508"></a><span class="lineno"> 3508</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (endpos &gt; total_size)</div><div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160;    range = total_size - startpos;</div><div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;</div><div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160;  <span class="comment">/* If the search isn&#39;t to be a backwards one, don&#39;t waste time in a</span></div><div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160;<span class="comment">     search for a pattern that must be anchored.  */</span></div><div class="line"><a name="l03513"></a><span class="lineno"> 3513</span>&#160;  <span class="keywordflow">if</span> (bufp-&gt;<a class="code" href="structre__pattern__buffer.html#ae53a42d0d93039e283f1d937e6e710a7">used</a> &gt; 0 &amp;&amp; (re_opcode_t) bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a84025dce422d70b263288329274a888d">buffer</a>[0] == <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118ab428f43b6557e8dfc45e452a8891b598">begbuf</a> &amp;&amp; range &gt; 0)</div><div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160;    {</div><div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;      <span class="keywordflow">if</span> (startpos &gt; 0)</div><div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160;        <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160;        range = 1;</div><div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;    }</div><div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160;</div><div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;<span class="preprocessor">#ifdef emacs</span></div><div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;  <span class="comment">/* In a forward search for something that starts with \=.</span></div><div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160;<span class="comment">     don&#39;t keep searching past point.  */</span></div><div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160;  <span class="keywordflow">if</span> (bufp-&gt;<a class="code" href="structre__pattern__buffer.html#ae53a42d0d93039e283f1d937e6e710a7">used</a> &gt; 0 &amp;&amp; (re_opcode_t) bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a84025dce422d70b263288329274a888d">buffer</a>[0] == at_dot &amp;&amp; range &gt; 0)</div><div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;    {</div><div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;      range = PT - startpos;</div><div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160;      <span class="keywordflow">if</span> (range &lt;= 0)</div><div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;        <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;    }</div><div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* emacs */</span><span class="preprocessor"></span></div><div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;</div><div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;  <span class="comment">/* Update the fastmap now if not correct already.  */</span></div><div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;  <span class="keywordflow">if</span> (fastmap &amp;&amp; !bufp-&gt;<a class="code" href="structre__pattern__buffer.html#af3578c777dbece95d6c8a1e10a6a7a5a">fastmap_accurate</a>)</div><div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="regex_8c.html#a39979f3b79c423214dc96b34996424a8">re_compile_fastmap</a> (bufp) == -2)</div><div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;      <span class="keywordflow">return</span> -2;</div><div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;</div><div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160;  <span class="comment">/* Loop through the string, looking for a place to start matching.  */</span></div><div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160;  <span class="keywordflow">for</span> (;;)</div><div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160;    {</div><div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;      <span class="comment">/* If a fastmap is supplied, skip quickly over characters that</span></div><div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160;<span class="comment">         cannot be the start of a match.  If the pattern can match the</span></div><div class="line"><a name="l03542"></a><span class="lineno"> 3542</span>&#160;<span class="comment">         null string, however, we don&#39;t need to skip characters; we want</span></div><div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160;<span class="comment">         the first null string.  */</span></div><div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;      <span class="keywordflow">if</span> (fastmap &amp;&amp; startpos &lt; total_size &amp;&amp; !bufp-&gt;can_be_null)</div><div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160;        {</div><div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;          <span class="keywordflow">if</span> (range &gt; 0)        <span class="comment">/* Searching forwards.  */</span></div><div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;            {</div><div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160;              <span class="keyword">register</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *d;</div><div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160;              <span class="keyword">register</span> <span class="keywordtype">int</span> lim = 0;</div><div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;              <span class="keywordtype">int</span> irange = range;</div><div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;</div><div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;              <span class="keywordflow">if</span> (startpos &lt; size1 &amp;&amp; startpos + range &gt;= size1)</div><div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;                lim = range - (size1 - startpos);</div><div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;</div><div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;              d = (startpos &gt;= size1 ? string2 - size1 : string1) + startpos;</div><div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160;</div><div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;              <span class="comment">/* Written out as an if-else to avoid testing `translate&#39;</span></div><div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160;<span class="comment">                 inside the loop.  */</span></div><div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;              <span class="keywordflow">if</span> (translate)</div><div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;                <span class="keywordflow">while</span> (range &gt; lim</div><div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;                       &amp;&amp; !fastmap[(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)</div><div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;                                   translate[(<span class="keywordtype">unsigned</span> char) *d++]])</div><div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;                  range--;</div><div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;              <span class="keywordflow">else</span></div><div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;                <span class="keywordflow">while</span> (range &gt; lim &amp;&amp; !fastmap[(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>) *d++])</div><div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;                  range--;</div><div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;</div><div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;              startpos += irange - range;</div><div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;            }</div><div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160;          <span class="keywordflow">else</span>                          <span class="comment">/* Searching backwards.  */</span></div><div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160;            {</div><div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;              <span class="keyword">register</span> <span class="keywordtype">char</span> c = (size1 == 0 || startpos &gt;= size1</div><div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160;                                 ? string2[startpos - size1]</div><div class="line"><a name="l03574"></a><span class="lineno"> 3574</span>&#160;                                 : string1[startpos]);</div><div class="line"><a name="l03575"></a><span class="lineno"> 3575</span>&#160;</div><div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160;              <span class="keywordflow">if</span> (!fastmap[(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>) <a class="code" href="regex_8c.html#a2eeeb49b77aa0f299d2d3c23dc1bfa17">TRANSLATE</a> (c)])</div><div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160;                <span class="keywordflow">goto</span> advance;</div><div class="line"><a name="l03578"></a><span class="lineno"> 3578</span>&#160;            }</div><div class="line"><a name="l03579"></a><span class="lineno"> 3579</span>&#160;        }</div><div class="line"><a name="l03580"></a><span class="lineno"> 3580</span>&#160;</div><div class="line"><a name="l03581"></a><span class="lineno"> 3581</span>&#160;      <span class="comment">/* If can&#39;t match the null string, and that&#39;s all we have left, fail.  */</span></div><div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160;      <span class="keywordflow">if</span> (range &gt;= 0 &amp;&amp; startpos == total_size &amp;&amp; fastmap</div><div class="line"><a name="l03583"></a><span class="lineno"> 3583</span>&#160;          &amp;&amp; !bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a51c16ef7ad52b4e75d6e3eee7556e84e">can_be_null</a>)</div><div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160;        <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160;</div><div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;      val = <a class="code" href="regex_8c.html#a3b426565d92028a1cf7113fcf41942c8">re_match_2_internal</a> (bufp, string1, size1, string2, size2,</div><div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160;                                 startpos, regs, stop);</div><div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160;<span class="preprocessor">#ifndef REGEX_MALLOC</span></div><div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160;<span class="preprocessor">#ifdef C_ALLOCA</span></div><div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160;      <a class="code" href="dcigettext_8c.html#a03a200320a749aaf2faa1d1719ffb4de">alloca</a> (0);</div><div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160;</div><div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;      <span class="keywordflow">if</span> (val &gt;= 0)</div><div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160;        <span class="keywordflow">return</span> startpos;</div><div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160;</div><div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160;      <span class="keywordflow">if</span> (val == -2)</div><div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160;        <span class="keywordflow">return</span> -2;</div><div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160;</div><div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160;    advance:</div><div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;      <span class="keywordflow">if</span> (!range)</div><div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (range &gt; 0)</div><div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160;        {</div><div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;          range--;</div><div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160;          startpos++;</div><div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160;        }</div><div class="line"><a name="l03608"></a><span class="lineno"> 3608</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l03609"></a><span class="lineno"> 3609</span>&#160;        {</div><div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160;          range++;</div><div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160;          startpos--;</div><div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160;        }</div><div class="line"><a name="l03613"></a><span class="lineno"> 3613</span>&#160;    }</div><div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160;  <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160;} <span class="comment">/* re_search_2 */</span></div><div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160;</div><div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160;<span class="comment">/* This converts PTR, a pointer into one of the search strings `string1&#39;</span></div><div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160;<span class="comment">   and `string2&#39; into an offset from the beginning of that string.  */</span></div><div class="line"><a name="l03619"></a><span class="lineno"><a class="line" href="regex_8c.html#a8bebab7ed279441748e37304f7a2c78a"> 3619</a></span>&#160;<span class="preprocessor">#define POINTER_TO_OFFSET(ptr)                  \</span></div><div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160;<span class="preprocessor">  (FIRST_STRING_P (ptr)                         \</span></div><div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160;<span class="preprocessor">   ? ((regoff_t) ((ptr) - string1))             \</span></div><div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160;<span class="preprocessor">   : ((regoff_t) ((ptr) - string2 + size1)))</span></div><div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;</div><div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160;<span class="comment">/* Macros for dealing with the split strings in re_match_2.  */</span></div><div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160;</div><div class="line"><a name="l03626"></a><span class="lineno"><a class="line" href="regex_8c.html#a7c5c8716cb01b2ad2cb50732817cbe4d"> 3626</a></span>&#160;<span class="preprocessor">#define MATCHING_IN_FIRST_STRING  (dend == end_match_1)</span></div><div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160;</div><div class="line"><a name="l03628"></a><span class="lineno"> 3628</span>&#160;<span class="comment">/* Call before fetching a character with *d.  This switches over to</span></div><div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160;<span class="comment">   string2 if necessary.  */</span></div><div class="line"><a name="l03630"></a><span class="lineno"><a class="line" href="regex_8c.html#a03e91c701217af9b9faab62cb2a65d7d"> 3630</a></span>&#160;<span class="preprocessor">#define PREFETCH()                                                      \</span></div><div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160;<span class="preprocessor">  while (d == dend)                                                     \</span></div><div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160;<span class="preprocessor">    {                                                                   \</span></div><div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160;<span class="preprocessor">      </span><span class="comment">/* End of string2 =&gt; fail.  */</span><span class="preprocessor">                                    \</span></div><div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160;<span class="preprocessor">      if (dend == end_match_2)                                          \</span></div><div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160;<span class="preprocessor">        goto fail;                                                      \</span></div><div class="line"><a name="l03636"></a><span class="lineno"> 3636</span>&#160;<span class="preprocessor">      </span><span class="comment">/* End of string1 =&gt; advance to string2.  */</span><span class="preprocessor">                      \</span></div><div class="line"><a name="l03637"></a><span class="lineno"> 3637</span>&#160;<span class="preprocessor">      d = string2;                                                      \</span></div><div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160;<span class="preprocessor">      dend = end_match_2;                                               \</span></div><div class="line"><a name="l03639"></a><span class="lineno"> 3639</span>&#160;<span class="preprocessor">    }</span></div><div class="line"><a name="l03640"></a><span class="lineno"> 3640</span>&#160;</div><div class="line"><a name="l03641"></a><span class="lineno"> 3641</span>&#160;</div><div class="line"><a name="l03642"></a><span class="lineno"> 3642</span>&#160;<span class="comment">/* Test if at very beginning or at very end of the virtual concatenation</span></div><div class="line"><a name="l03643"></a><span class="lineno"> 3643</span>&#160;<span class="comment">   of `string1&#39; and `string2&#39;.  If only one string, it&#39;s `string2&#39;.  */</span></div><div class="line"><a name="l03644"></a><span class="lineno"><a class="line" href="regex_8c.html#a4ae509096aba99683d03e7731c8e1095"> 3644</a></span>&#160;<span class="preprocessor">#define AT_STRINGS_BEG(d) ((d) == (size1 ? string1 : string2) || !size2)</span></div><div class="line"><a name="l03645"></a><span class="lineno"><a class="line" href="regex_8c.html#a828f1cb8f3855b8656267c902effad75"> 3645</a></span>&#160;<span class="preprocessor">#define AT_STRINGS_END(d) ((d) == end2)</span></div><div class="line"><a name="l03646"></a><span class="lineno"> 3646</span>&#160;</div><div class="line"><a name="l03647"></a><span class="lineno"> 3647</span>&#160;</div><div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;<span class="comment">/* Test if D points to a character which is word-constituent.  We have</span></div><div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;<span class="comment">   two special cases to check for: if past the end of string1, look at</span></div><div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;<span class="comment">   the first character in string2; and if before the beginning of</span></div><div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160;<span class="comment">   string2, look at the last character in string1.  */</span></div><div class="line"><a name="l03652"></a><span class="lineno"><a class="line" href="regex_8c.html#a9cb82d6af5bb56ce088c91cef5127ce6"> 3652</a></span>&#160;<span class="preprocessor">#define WORDCHAR_P(d)                                                   \</span></div><div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160;<span class="preprocessor">  (SYNTAX ((d) == end1 ? *string2                                       \</span></div><div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;<span class="preprocessor">           : (d) == string2 - 1 ? *(end1 - 1) : *(d))                   \</span></div><div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160;<span class="preprocessor">   == Sword)</span></div><div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;</div><div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;<span class="comment">/* Disabled due to a compiler bug -- see comment at case wordbound */</span></div><div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160;<span class="preprocessor">#if 0</span></div><div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;<span class="comment">/* Test if the character before D and the one at D differ with respect</span></div><div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160;<span class="comment">   to being word-constituent.  */</span></div><div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160;<span class="preprocessor">#define AT_WORD_BOUNDARY(d)                                             \</span></div><div class="line"><a name="l03662"></a><span class="lineno"> 3662</span>&#160;<span class="preprocessor">  (AT_STRINGS_BEG (d) || AT_STRINGS_END (d)                             \</span></div><div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;<span class="preprocessor">   || WORDCHAR_P (d - 1) != WORDCHAR_P (d))</span></div><div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160;</div><div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160;<span class="comment">/* Free everything we malloc.  */</span></div><div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160;<span class="preprocessor">#ifdef MATCH_MAY_ALLOCATE</span></div><div class="line"><a name="l03668"></a><span class="lineno"><a class="line" href="regex_8c.html#a0bf43761ab92cb6bd95c4ebc080d2a5c"> 3668</a></span>&#160;<span class="preprocessor">#define FREE_VAR(var) if (var) REGEX_FREE (var); var = NULL</span></div><div class="line"><a name="l03669"></a><span class="lineno"><a class="line" href="regex_8c.html#a7f3f2410fe2ae0089be0a2f3005f15dd"> 3669</a></span>&#160;<span class="preprocessor">#define FREE_VARIABLES()                                                \</span></div><div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160;<span class="preprocessor">  do {                                                                  \</span></div><div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160;<span class="preprocessor">    REGEX_FREE_STACK (fail_stack.stack);                                \</span></div><div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160;<span class="preprocessor">    FREE_VAR (regstart);                                                \</span></div><div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160;<span class="preprocessor">    FREE_VAR (regend);                                                  \</span></div><div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160;<span class="preprocessor">    FREE_VAR (old_regstart);                                            \</span></div><div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;<span class="preprocessor">    FREE_VAR (old_regend);                                              \</span></div><div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160;<span class="preprocessor">    FREE_VAR (best_regstart);                                           \</span></div><div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160;<span class="preprocessor">    FREE_VAR (best_regend);                                             \</span></div><div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;<span class="preprocessor">    FREE_VAR (reg_info);                                                \</span></div><div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;<span class="preprocessor">    FREE_VAR (reg_dummy);                                               \</span></div><div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160;<span class="preprocessor">    FREE_VAR (reg_info_dummy);                                          \</span></div><div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160;<span class="preprocessor">  } while (0)</span></div><div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;<span class="preprocessor">#define FREE_VARIABLES() ((void)0) </span><span class="comment">/* Do nothing!  But inhibit gcc warning.  */</span><span class="preprocessor"></span></div><div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* not MATCH_MAY_ALLOCATE */</span><span class="preprocessor"></span></div><div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;</div><div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160;<span class="comment">/* These values must meet several constraints.  They must not be valid</span></div><div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160;<span class="comment">   register values; since we have a limit of 255 registers (because</span></div><div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160;<span class="comment">   we use only one byte in the pattern for the register number), we can</span></div><div class="line"><a name="l03689"></a><span class="lineno"> 3689</span>&#160;<span class="comment">   use numbers larger than 255.  They must differ by 1, because of</span></div><div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160;<span class="comment">   NUM_FAILURE_ITEMS above.  And the value for the lowest register must</span></div><div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160;<span class="comment">   be larger than the value for the highest register, so we do not try</span></div><div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160;<span class="comment">   to actually save any registers when none are active.  */</span></div><div class="line"><a name="l03693"></a><span class="lineno"><a class="line" href="regex_8c.html#ab79c167c4cd771eeb9f88cf07c8b66c2"> 3693</a></span>&#160;<span class="preprocessor">#define NO_HIGHEST_ACTIVE_REG (1 &lt;&lt; BYTEWIDTH)</span></div><div class="line"><a name="l03694"></a><span class="lineno"><a class="line" href="regex_8c.html#a508c8adae6628ee43b8498249272efb9"> 3694</a></span>&#160;<span class="preprocessor">#define NO_LOWEST_ACTIVE_REG (NO_HIGHEST_ACTIVE_REG + 1)</span></div><div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160;</div><div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160;<span class="comment">/* Matching routines.  */</span></div><div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;</div><div class="line"><a name="l03698"></a><span class="lineno"> 3698</span>&#160;<span class="preprocessor">#ifndef emacs   </span><span class="comment">/* Emacs never uses this.  */</span><span class="preprocessor"></span></div><div class="line"><a name="l03699"></a><span class="lineno"> 3699</span>&#160;<span class="comment">/* re_match is like re_match_2 except it takes only a single string.  */</span></div><div class="line"><a name="l03700"></a><span class="lineno"> 3700</span>&#160;</div><div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160;<span class="keywordtype">int</span></div><div class="line"><a name="l03702"></a><span class="lineno"><a class="line" href="regex_8c.html#a543f20720a243ca31e0667b697de3bda"> 3702</a></span>&#160;<a class="code" href="regex_8c.html#a543f20720a243ca31e0667b697de3bda">re_match</a> (bufp, <span class="keywordtype">string</span>, size, pos, regs)</div><div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160;     <span class="keyword">struct </span><a class="code" href="structre__pattern__buffer.html">re_pattern_buffer</a> *bufp;</div><div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160;     <span class="keyword">const</span> <span class="keywordtype">char</span> *string;</div><div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160;     <span class="keywordtype">int</span> size, pos;</div><div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160;     <span class="keyword">struct </span><a class="code" href="structre__registers.html">re_registers</a> *regs;</div><div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160;{</div><div class="line"><a name="l03708"></a><span class="lineno"> 3708</span>&#160;  <span class="keywordtype">int</span> result = <a class="code" href="regex_8c.html#a3b426565d92028a1cf7113fcf41942c8">re_match_2_internal</a> (bufp, <a class="code" href="regex_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <span class="keywordtype">string</span>, size,</div><div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160;                                    pos, regs, size);</div><div class="line"><a name="l03710"></a><span class="lineno"> 3710</span>&#160;<span class="preprocessor">#ifndef REGEX_MALLOC</span></div><div class="line"><a name="l03711"></a><span class="lineno"> 3711</span>&#160;<span class="preprocessor">#ifdef C_ALLOCA</span></div><div class="line"><a name="l03712"></a><span class="lineno"> 3712</span>&#160;  <a class="code" href="dcigettext_8c.html#a03a200320a749aaf2faa1d1719ffb4de">alloca</a> (0);</div><div class="line"><a name="l03713"></a><span class="lineno"> 3713</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160;  <span class="keywordflow">return</span> result;</div><div class="line"><a name="l03716"></a><span class="lineno"> 3716</span>&#160;}</div><div class="line"><a name="l03717"></a><span class="lineno"> 3717</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* not emacs */</span><span class="preprocessor"></span></div><div class="line"><a name="l03718"></a><span class="lineno"> 3718</span>&#160;</div><div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160;<span class="keyword">static</span> <span class="keywordtype">boolean</span> <a class="code" href="regex_8c.html#ac1a3adc04ca27d22992ea483708c5812">group_match_null_string_p</a> <a class="code" href="regex_8c.html#a6a88312ef40c670049fcf09f759eeca9">_RE_ARGS</a> ((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> **p,</div><div class="line"><a name="l03720"></a><span class="lineno"> 3720</span>&#160;                                                    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *end,</div><div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160;                                                <a class="code" href="unionregister__info__type.html">register_info_type</a> *reg_info));</div><div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160;<span class="keyword">static</span> <span class="keywordtype">boolean</span> <a class="code" href="regex_8c.html#a4d088a8cdab2f2daa400a5df18cbf594">alt_match_null_string_p</a> <a class="code" href="regex_8c.html#a6a88312ef40c670049fcf09f759eeca9">_RE_ARGS</a> ((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *p,</div><div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;                                                  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *end,</div><div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160;                                                <a class="code" href="unionregister__info__type.html">register_info_type</a> *reg_info));</div><div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;<span class="keyword">static</span> <span class="keywordtype">boolean</span> <a class="code" href="regex_8c.html#a97ff784b1a6ed91bbc1013a3a44a05da">common_op_match_null_string_p</a> <a class="code" href="regex_8c.html#a6a88312ef40c670049fcf09f759eeca9">_RE_ARGS</a> ((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> **p,</div><div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;                                                        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *end,</div><div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;                                                <a class="code" href="unionregister__info__type.html">register_info_type</a> *reg_info));</div><div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="regex_8c.html#a831fca3c806cff281a70c8757c40b134">bcmp_translate</a> <a class="code" href="regex_8c.html#a6a88312ef40c670049fcf09f759eeca9">_RE_ARGS</a> ((<span class="keyword">const</span> <span class="keywordtype">char</span> *s1, <span class="keyword">const</span> <span class="keywordtype">char</span> *s2,</div><div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160;                                     <span class="keywordtype">int</span> len, <span class="keywordtype">char</span> *translate));</div><div class="line"><a name="l03730"></a><span class="lineno"> 3730</span>&#160;</div><div class="line"><a name="l03731"></a><span class="lineno"> 3731</span>&#160;<span class="comment">/* re_match_2 matches the compiled pattern in BUFP against the</span></div><div class="line"><a name="l03732"></a><span class="lineno"> 3732</span>&#160;<span class="comment">   the (virtual) concatenation of STRING1 and STRING2 (of length SIZE1</span></div><div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160;<span class="comment">   and SIZE2, respectively).  We start matching at POS, and stop</span></div><div class="line"><a name="l03734"></a><span class="lineno"> 3734</span>&#160;<span class="comment">   matching at STOP.</span></div><div class="line"><a name="l03735"></a><span class="lineno"> 3735</span>&#160;<span class="comment"></span></div><div class="line"><a name="l03736"></a><span class="lineno"> 3736</span>&#160;<span class="comment">   If REGS is non-null and the `no_sub&#39; field of BUFP is nonzero, we</span></div><div class="line"><a name="l03737"></a><span class="lineno"> 3737</span>&#160;<span class="comment">   store offsets for the substring each group matched in REGS.  See the</span></div><div class="line"><a name="l03738"></a><span class="lineno"> 3738</span>&#160;<span class="comment">   documentation for exactly how many groups we fill.</span></div><div class="line"><a name="l03739"></a><span class="lineno"> 3739</span>&#160;<span class="comment"></span></div><div class="line"><a name="l03740"></a><span class="lineno"> 3740</span>&#160;<span class="comment">   We return -1 if no match, -2 if an internal error (such as the</span></div><div class="line"><a name="l03741"></a><span class="lineno"> 3741</span>&#160;<span class="comment">   failure stack overflowing).  Otherwise, we return the length of the</span></div><div class="line"><a name="l03742"></a><span class="lineno"> 3742</span>&#160;<span class="comment">   matched substring.  */</span></div><div class="line"><a name="l03743"></a><span class="lineno"> 3743</span>&#160;</div><div class="line"><a name="l03744"></a><span class="lineno"> 3744</span>&#160;<span class="keywordtype">int</span></div><div class="line"><a name="l03745"></a><span class="lineno"><a class="line" href="regex_8c.html#ae4aacc367337cbfc7513b4be57808b78"> 3745</a></span>&#160;<a class="code" href="regex_8c.html#ae4aacc367337cbfc7513b4be57808b78">re_match_2</a> (bufp, string1, size1, string2, size2, pos, regs, stop)</div><div class="line"><a name="l03746"></a><span class="lineno"> 3746</span>&#160;     <span class="keyword">struct </span><a class="code" href="structre__pattern__buffer.html">re_pattern_buffer</a> *bufp;</div><div class="line"><a name="l03747"></a><span class="lineno"> 3747</span>&#160;     <span class="keyword">const</span> <span class="keywordtype">char</span> *string1, *string2;</div><div class="line"><a name="l03748"></a><span class="lineno"> 3748</span>&#160;     <span class="keywordtype">int</span> size1, size2;</div><div class="line"><a name="l03749"></a><span class="lineno"> 3749</span>&#160;     <span class="keywordtype">int</span> pos;</div><div class="line"><a name="l03750"></a><span class="lineno"> 3750</span>&#160;     <span class="keyword">struct </span><a class="code" href="structre__registers.html">re_registers</a> *regs;</div><div class="line"><a name="l03751"></a><span class="lineno"> 3751</span>&#160;     <span class="keywordtype">int</span> stop;</div><div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160;{</div><div class="line"><a name="l03753"></a><span class="lineno"> 3753</span>&#160;  <span class="keywordtype">int</span> result = <a class="code" href="regex_8c.html#a3b426565d92028a1cf7113fcf41942c8">re_match_2_internal</a> (bufp, string1, size1, string2, size2,</div><div class="line"><a name="l03754"></a><span class="lineno"> 3754</span>&#160;                                    pos, regs, stop);</div><div class="line"><a name="l03755"></a><span class="lineno"> 3755</span>&#160;<span class="preprocessor">#ifndef REGEX_MALLOC</span></div><div class="line"><a name="l03756"></a><span class="lineno"> 3756</span>&#160;<span class="preprocessor">#ifdef C_ALLOCA</span></div><div class="line"><a name="l03757"></a><span class="lineno"> 3757</span>&#160;  <a class="code" href="dcigettext_8c.html#a03a200320a749aaf2faa1d1719ffb4de">alloca</a> (0);</div><div class="line"><a name="l03758"></a><span class="lineno"> 3758</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03759"></a><span class="lineno"> 3759</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03760"></a><span class="lineno"> 3760</span>&#160;  <span class="keywordflow">return</span> result;</div><div class="line"><a name="l03761"></a><span class="lineno"> 3761</span>&#160;}</div><div class="line"><a name="l03762"></a><span class="lineno"> 3762</span>&#160;</div><div class="line"><a name="l03763"></a><span class="lineno"> 3763</span>&#160;<span class="comment">/* This is a separate function so that we can force an alloca cleanup</span></div><div class="line"><a name="l03764"></a><span class="lineno"> 3764</span>&#160;<span class="comment">   afterwards.  */</span></div><div class="line"><a name="l03765"></a><span class="lineno"> 3765</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span></div><div class="line"><a name="l03766"></a><span class="lineno"><a class="line" href="regex_8c.html#a3b426565d92028a1cf7113fcf41942c8"> 3766</a></span>&#160;<a class="code" href="regex_8c.html#a3b426565d92028a1cf7113fcf41942c8">re_match_2_internal</a> (bufp, string1, size1, string2, size2, pos, regs, stop)</div><div class="line"><a name="l03767"></a><span class="lineno"> 3767</span>&#160;     <span class="keyword">struct </span><a class="code" href="structre__pattern__buffer.html">re_pattern_buffer</a> *bufp;</div><div class="line"><a name="l03768"></a><span class="lineno"> 3768</span>&#160;     <span class="keyword">const</span> <span class="keywordtype">char</span> *string1, *string2;</div><div class="line"><a name="l03769"></a><span class="lineno"> 3769</span>&#160;     <span class="keywordtype">int</span> size1, size2;</div><div class="line"><a name="l03770"></a><span class="lineno"> 3770</span>&#160;     <span class="keywordtype">int</span> pos;</div><div class="line"><a name="l03771"></a><span class="lineno"> 3771</span>&#160;     <span class="keyword">struct </span><a class="code" href="structre__registers.html">re_registers</a> *regs;</div><div class="line"><a name="l03772"></a><span class="lineno"> 3772</span>&#160;     <span class="keywordtype">int</span> stop;</div><div class="line"><a name="l03773"></a><span class="lineno"> 3773</span>&#160;{</div><div class="line"><a name="l03774"></a><span class="lineno"> 3774</span>&#160;  <span class="comment">/* General temporaries.  */</span></div><div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160;  <span class="keywordtype">int</span> mcnt;</div><div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *p1;</div><div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160;</div><div class="line"><a name="l03778"></a><span class="lineno"> 3778</span>&#160;  <span class="comment">/* Just past the end of the corresponding string.  */</span></div><div class="line"><a name="l03779"></a><span class="lineno"> 3779</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *end1, *end2;</div><div class="line"><a name="l03780"></a><span class="lineno"> 3780</span>&#160;</div><div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160;  <span class="comment">/* Pointers into string1 and string2, just past the last characters in</span></div><div class="line"><a name="l03782"></a><span class="lineno"> 3782</span>&#160;<span class="comment">     each to consider matching.  */</span></div><div class="line"><a name="l03783"></a><span class="lineno"> 3783</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *end_match_1, *end_match_2;</div><div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160;</div><div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160;  <span class="comment">/* Where we are in the data, and the end of the current string.  */</span></div><div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *d, *dend;</div><div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160;</div><div class="line"><a name="l03788"></a><span class="lineno"> 3788</span>&#160;  <span class="comment">/* Where we are in the pattern, and the end of the pattern.  */</span></div><div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *p = bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a84025dce422d70b263288329274a888d">buffer</a>;</div><div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160;  <span class="keyword">register</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *pend = p + bufp-&gt;<a class="code" href="structre__pattern__buffer.html#ae53a42d0d93039e283f1d937e6e710a7">used</a>;</div><div class="line"><a name="l03791"></a><span class="lineno"> 3791</span>&#160;</div><div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;  <span class="comment">/* Mark the opcode just after a start_memory, so we can test for an</span></div><div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160;<span class="comment">     empty subpattern when we get to the stop_memory.  */</span></div><div class="line"><a name="l03794"></a><span class="lineno"> 3794</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *just_past_start_mem = 0;</div><div class="line"><a name="l03795"></a><span class="lineno"> 3795</span>&#160;</div><div class="line"><a name="l03796"></a><span class="lineno"> 3796</span>&#160;  <span class="comment">/* We use this to map every character in the string.  */</span></div><div class="line"><a name="l03797"></a><span class="lineno"> 3797</span>&#160;  <a class="code" href="__regex_8h.html#a96c9fb9c7074cb21740b63092b0637a4">RE_TRANSLATE_TYPE</a> translate = bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a0a2f7fd160aa3cc0195fc7ee91e41195">translate</a>;</div><div class="line"><a name="l03798"></a><span class="lineno"> 3798</span>&#160;</div><div class="line"><a name="l03799"></a><span class="lineno"> 3799</span>&#160;  <span class="comment">/* Failure point stack.  Each place that can handle a failure further</span></div><div class="line"><a name="l03800"></a><span class="lineno"> 3800</span>&#160;<span class="comment">     down the line pushes a failure point on this stack.  It consists of</span></div><div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160;<span class="comment">     restart, regend, and reg_info for all registers corresponding to</span></div><div class="line"><a name="l03802"></a><span class="lineno"> 3802</span>&#160;<span class="comment">     the subexpressions we&#39;re currently inside, plus the number of such</span></div><div class="line"><a name="l03803"></a><span class="lineno"> 3803</span>&#160;<span class="comment">     registers, and, finally, two char *&#39;s.  The first char * is where</span></div><div class="line"><a name="l03804"></a><span class="lineno"> 3804</span>&#160;<span class="comment">     to resume scanning the pattern; the second one is where to resume</span></div><div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160;<span class="comment">     scanning the strings.  If the latter is zero, the failure point is</span></div><div class="line"><a name="l03806"></a><span class="lineno"> 3806</span>&#160;<span class="comment">     a ``dummy&#39;&#39;; if a failure happens and the failure point is a dummy,</span></div><div class="line"><a name="l03807"></a><span class="lineno"> 3807</span>&#160;<span class="comment">     it gets discarded and the next next one is tried.  */</span></div><div class="line"><a name="l03808"></a><span class="lineno"> 3808</span>&#160;<span class="preprocessor">#ifdef MATCH_MAY_ALLOCATE </span><span class="comment">/* otherwise, this is global.  */</span><span class="preprocessor"></span></div><div class="line"><a name="l03809"></a><span class="lineno"> 3809</span>&#160;  <a class="code" href="structfail__stack__type.html">fail_stack_type</a> fail_stack;</div><div class="line"><a name="l03810"></a><span class="lineno"> 3810</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div><div class="line"><a name="l03812"></a><span class="lineno"> 3812</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">unsigned</span> failure_id = 0;</div><div class="line"><a name="l03813"></a><span class="lineno"> 3813</span>&#160;  <span class="keywordtype">unsigned</span> nfailure_points_pushed = 0, nfailure_points_popped = 0;</div><div class="line"><a name="l03814"></a><span class="lineno"> 3814</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03815"></a><span class="lineno"> 3815</span>&#160;</div><div class="line"><a name="l03816"></a><span class="lineno"> 3816</span>&#160;<span class="preprocessor">#ifdef REL_ALLOC</span></div><div class="line"><a name="l03817"></a><span class="lineno"> 3817</span>&#160;  <span class="comment">/* This holds the pointer to the failure stack, when</span></div><div class="line"><a name="l03818"></a><span class="lineno"> 3818</span>&#160;<span class="comment">     it is allocated relocatably.  */</span></div><div class="line"><a name="l03819"></a><span class="lineno"> 3819</span>&#160;  fail_stack_elt_t *failure_stack_ptr;</div><div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03821"></a><span class="lineno"> 3821</span>&#160;</div><div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160;  <span class="comment">/* We fill all the registers internally, independent of what we</span></div><div class="line"><a name="l03823"></a><span class="lineno"> 3823</span>&#160;<span class="comment">     return, for use in backreferences.  The number here includes</span></div><div class="line"><a name="l03824"></a><span class="lineno"> 3824</span>&#160;<span class="comment">     an element for register zero.  */</span></div><div class="line"><a name="l03825"></a><span class="lineno"> 3825</span>&#160;  <span class="keywordtype">size_t</span> num_regs = bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a4dfc1ce26c896695b77854da7d607ec8">re_nsub</a> + 1;</div><div class="line"><a name="l03826"></a><span class="lineno"> 3826</span>&#160;</div><div class="line"><a name="l03827"></a><span class="lineno"> 3827</span>&#160;  <span class="comment">/* The currently active registers.  */</span></div><div class="line"><a name="l03828"></a><span class="lineno"> 3828</span>&#160;  <a class="code" href="__regex_8h.html#ab64c4b3b9990d5c9e7e30219aecec37a">active_reg_t</a> lowest_active_reg = <a class="code" href="regex_8c.html#a508c8adae6628ee43b8498249272efb9">NO_LOWEST_ACTIVE_REG</a>;</div><div class="line"><a name="l03829"></a><span class="lineno"> 3829</span>&#160;  <a class="code" href="__regex_8h.html#ab64c4b3b9990d5c9e7e30219aecec37a">active_reg_t</a> highest_active_reg = <a class="code" href="regex_8c.html#ab79c167c4cd771eeb9f88cf07c8b66c2">NO_HIGHEST_ACTIVE_REG</a>;</div><div class="line"><a name="l03830"></a><span class="lineno"> 3830</span>&#160;</div><div class="line"><a name="l03831"></a><span class="lineno"> 3831</span>&#160;  <span class="comment">/* Information on the contents of registers. These are pointers into</span></div><div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160;<span class="comment">     the input strings; they record just what was matched (on this</span></div><div class="line"><a name="l03833"></a><span class="lineno"> 3833</span>&#160;<span class="comment">     attempt) by a subexpression part of the pattern, that is, the</span></div><div class="line"><a name="l03834"></a><span class="lineno"> 3834</span>&#160;<span class="comment">     regnum-th regstart pointer points to where in the pattern we began</span></div><div class="line"><a name="l03835"></a><span class="lineno"> 3835</span>&#160;<span class="comment">     matching and the regnum-th regend points to right after where we</span></div><div class="line"><a name="l03836"></a><span class="lineno"> 3836</span>&#160;<span class="comment">     stopped matching the regnum-th subexpression.  (The zeroth register</span></div><div class="line"><a name="l03837"></a><span class="lineno"> 3837</span>&#160;<span class="comment">     keeps track of what the whole pattern matches.)  */</span></div><div class="line"><a name="l03838"></a><span class="lineno"> 3838</span>&#160;<span class="preprocessor">#ifdef MATCH_MAY_ALLOCATE </span><span class="comment">/* otherwise, these are global.  */</span><span class="preprocessor"></span></div><div class="line"><a name="l03839"></a><span class="lineno"> 3839</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> **regstart, **regend;</div><div class="line"><a name="l03840"></a><span class="lineno"> 3840</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160;</div><div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160;  <span class="comment">/* If a group that&#39;s operated upon by a repetition operator fails to</span></div><div class="line"><a name="l03843"></a><span class="lineno"> 3843</span>&#160;<span class="comment">     match anything, then the register for its start will need to be</span></div><div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160;<span class="comment">     restored because it will have been set to wherever in the string we</span></div><div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160;<span class="comment">     are when we last see its open-group operator.  Similarly for a</span></div><div class="line"><a name="l03846"></a><span class="lineno"> 3846</span>&#160;<span class="comment">     register&#39;s end.  */</span></div><div class="line"><a name="l03847"></a><span class="lineno"> 3847</span>&#160;<span class="preprocessor">#ifdef MATCH_MAY_ALLOCATE </span><span class="comment">/* otherwise, these are global.  */</span><span class="preprocessor"></span></div><div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> **old_regstart, **old_regend;</div><div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160;</div><div class="line"><a name="l03851"></a><span class="lineno"> 3851</span>&#160;  <span class="comment">/* The is_active field of reg_info helps us keep track of which (possibly</span></div><div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160;<span class="comment">     nested) subexpressions we are currently in. The matched_something</span></div><div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;<span class="comment">     field of reg_info[reg_num] helps us tell whether or not we have</span></div><div class="line"><a name="l03854"></a><span class="lineno"> 3854</span>&#160;<span class="comment">     matched any of the pattern so far this time through the reg_num-th</span></div><div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160;<span class="comment">     subexpression.  These two fields get reset each time through any</span></div><div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160;<span class="comment">     loop their register is in.  */</span></div><div class="line"><a name="l03857"></a><span class="lineno"> 3857</span>&#160;<span class="preprocessor">#ifdef MATCH_MAY_ALLOCATE </span><span class="comment">/* otherwise, this is global.  */</span><span class="preprocessor"></span></div><div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160;  <a class="code" href="unionregister__info__type.html">register_info_type</a> *reg_info;</div><div class="line"><a name="l03859"></a><span class="lineno"> 3859</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03860"></a><span class="lineno"> 3860</span>&#160;</div><div class="line"><a name="l03861"></a><span class="lineno"> 3861</span>&#160;  <span class="comment">/* The following record the register info as found in the above</span></div><div class="line"><a name="l03862"></a><span class="lineno"> 3862</span>&#160;<span class="comment">     variables when we find a match better than any we&#39;ve seen before.</span></div><div class="line"><a name="l03863"></a><span class="lineno"> 3863</span>&#160;<span class="comment">     This happens as we backtrack through the failure points, which in</span></div><div class="line"><a name="l03864"></a><span class="lineno"> 3864</span>&#160;<span class="comment">     turn happens only if we have not yet matched the entire string. */</span></div><div class="line"><a name="l03865"></a><span class="lineno"> 3865</span>&#160;  <span class="keywordtype">unsigned</span> best_regs_set = <span class="keyword">false</span>;</div><div class="line"><a name="l03866"></a><span class="lineno"> 3866</span>&#160;<span class="preprocessor">#ifdef MATCH_MAY_ALLOCATE </span><span class="comment">/* otherwise, these are global.  */</span><span class="preprocessor"></span></div><div class="line"><a name="l03867"></a><span class="lineno"> 3867</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> **best_regstart, **best_regend;</div><div class="line"><a name="l03868"></a><span class="lineno"> 3868</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03869"></a><span class="lineno"> 3869</span>&#160;</div><div class="line"><a name="l03870"></a><span class="lineno"> 3870</span>&#160;  <span class="comment">/* Logically, this is `best_regend[0]&#39;.  But we don&#39;t want to have to</span></div><div class="line"><a name="l03871"></a><span class="lineno"> 3871</span>&#160;<span class="comment">     allocate space for that if we&#39;re not allocating space for anything</span></div><div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160;<span class="comment">     else (see below).  Also, we never need info about register 0 for</span></div><div class="line"><a name="l03873"></a><span class="lineno"> 3873</span>&#160;<span class="comment">     any of the other register vectors, and it seems rather a kludge to</span></div><div class="line"><a name="l03874"></a><span class="lineno"> 3874</span>&#160;<span class="comment">     treat `best_regend&#39; differently than the rest.  So we keep track of</span></div><div class="line"><a name="l03875"></a><span class="lineno"> 3875</span>&#160;<span class="comment">     the end of the best match so far in a separate variable.  We</span></div><div class="line"><a name="l03876"></a><span class="lineno"> 3876</span>&#160;<span class="comment">     initialize this to NULL so that when we backtrack the first time</span></div><div class="line"><a name="l03877"></a><span class="lineno"> 3877</span>&#160;<span class="comment">     and need to test it, it&#39;s not garbage.  */</span></div><div class="line"><a name="l03878"></a><span class="lineno"> 3878</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *match_end = <a class="code" href="regex_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03879"></a><span class="lineno"> 3879</span>&#160;</div><div class="line"><a name="l03880"></a><span class="lineno"> 3880</span>&#160;  <span class="comment">/* This helps SET_REGS_MATCHED avoid doing redundant work.  */</span></div><div class="line"><a name="l03881"></a><span class="lineno"> 3881</span>&#160;  <span class="keywordtype">int</span> set_regs_matched_done = 0;</div><div class="line"><a name="l03882"></a><span class="lineno"> 3882</span>&#160;</div><div class="line"><a name="l03883"></a><span class="lineno"> 3883</span>&#160;  <span class="comment">/* Used when we pop values we don&#39;t care about.  */</span></div><div class="line"><a name="l03884"></a><span class="lineno"> 3884</span>&#160;<span class="preprocessor">#ifdef MATCH_MAY_ALLOCATE </span><span class="comment">/* otherwise, these are global.  */</span><span class="preprocessor"></span></div><div class="line"><a name="l03885"></a><span class="lineno"> 3885</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> **reg_dummy;</div><div class="line"><a name="l03886"></a><span class="lineno"> 3886</span>&#160;  <a class="code" href="unionregister__info__type.html">register_info_type</a> *reg_info_dummy;</div><div class="line"><a name="l03887"></a><span class="lineno"> 3887</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03888"></a><span class="lineno"> 3888</span>&#160;</div><div class="line"><a name="l03889"></a><span class="lineno"> 3889</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div><div class="line"><a name="l03890"></a><span class="lineno"> 3890</span>&#160;  <span class="comment">/* Counts the total number of registers pushed.  */</span></div><div class="line"><a name="l03891"></a><span class="lineno"> 3891</span>&#160;  <span class="keywordtype">unsigned</span> num_regs_pushed = 0;</div><div class="line"><a name="l03892"></a><span class="lineno"> 3892</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03893"></a><span class="lineno"> 3893</span>&#160;</div><div class="line"><a name="l03894"></a><span class="lineno"> 3894</span>&#160;  <a class="code" href="regex_8c.html#a90a312923984a45f83767acea95b84a1">DEBUG_PRINT1</a> (<span class="stringliteral">&quot;\n\nEntering re_match_2.\n&quot;</span>);</div><div class="line"><a name="l03895"></a><span class="lineno"> 3895</span>&#160;</div><div class="line"><a name="l03896"></a><span class="lineno"> 3896</span>&#160;  <a class="code" href="regex_8c.html#a0a97c6a1ac97ed1288cb47dceabc56df">INIT_FAIL_STACK</a> ();</div><div class="line"><a name="l03897"></a><span class="lineno"> 3897</span>&#160;</div><div class="line"><a name="l03898"></a><span class="lineno"> 3898</span>&#160;<span class="preprocessor">#ifdef MATCH_MAY_ALLOCATE</span></div><div class="line"><a name="l03899"></a><span class="lineno"> 3899</span>&#160;  <span class="comment">/* Do not bother to initialize all the register variables if there are</span></div><div class="line"><a name="l03900"></a><span class="lineno"> 3900</span>&#160;<span class="comment">     no groups in the pattern, as it takes a fair amount of time.  If</span></div><div class="line"><a name="l03901"></a><span class="lineno"> 3901</span>&#160;<span class="comment">     there are groups, we include space for register 0 (the whole</span></div><div class="line"><a name="l03902"></a><span class="lineno"> 3902</span>&#160;<span class="comment">     pattern), even though we never use it, since it simplifies the</span></div><div class="line"><a name="l03903"></a><span class="lineno"> 3903</span>&#160;<span class="comment">     array indexing.  We should fix this.  */</span></div><div class="line"><a name="l03904"></a><span class="lineno"> 3904</span>&#160;  <span class="keywordflow">if</span> (bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a4dfc1ce26c896695b77854da7d607ec8">re_nsub</a>)</div><div class="line"><a name="l03905"></a><span class="lineno"> 3905</span>&#160;    {</div><div class="line"><a name="l03906"></a><span class="lineno"> 3906</span>&#160;      regstart = <a class="code" href="regex_8c.html#aa55c07b38a55837693a65170c5aa4c76">REGEX_TALLOC</a> (num_regs, <span class="keyword">const</span> <span class="keywordtype">char</span> *);</div><div class="line"><a name="l03907"></a><span class="lineno"> 3907</span>&#160;      regend = <a class="code" href="regex_8c.html#aa55c07b38a55837693a65170c5aa4c76">REGEX_TALLOC</a> (num_regs, <span class="keyword">const</span> <span class="keywordtype">char</span> *);</div><div class="line"><a name="l03908"></a><span class="lineno"> 3908</span>&#160;      old_regstart = <a class="code" href="regex_8c.html#aa55c07b38a55837693a65170c5aa4c76">REGEX_TALLOC</a> (num_regs, <span class="keyword">const</span> <span class="keywordtype">char</span> *);</div><div class="line"><a name="l03909"></a><span class="lineno"> 3909</span>&#160;      old_regend = <a class="code" href="regex_8c.html#aa55c07b38a55837693a65170c5aa4c76">REGEX_TALLOC</a> (num_regs, <span class="keyword">const</span> <span class="keywordtype">char</span> *);</div><div class="line"><a name="l03910"></a><span class="lineno"> 3910</span>&#160;      best_regstart = <a class="code" href="regex_8c.html#aa55c07b38a55837693a65170c5aa4c76">REGEX_TALLOC</a> (num_regs, <span class="keyword">const</span> <span class="keywordtype">char</span> *);</div><div class="line"><a name="l03911"></a><span class="lineno"> 3911</span>&#160;      best_regend = <a class="code" href="regex_8c.html#aa55c07b38a55837693a65170c5aa4c76">REGEX_TALLOC</a> (num_regs, <span class="keyword">const</span> <span class="keywordtype">char</span> *);</div><div class="line"><a name="l03912"></a><span class="lineno"> 3912</span>&#160;      reg_info = <a class="code" href="regex_8c.html#aa55c07b38a55837693a65170c5aa4c76">REGEX_TALLOC</a> (num_regs, <a class="code" href="unionregister__info__type.html">register_info_type</a>);</div><div class="line"><a name="l03913"></a><span class="lineno"> 3913</span>&#160;      reg_dummy = <a class="code" href="regex_8c.html#aa55c07b38a55837693a65170c5aa4c76">REGEX_TALLOC</a> (num_regs, <span class="keyword">const</span> <span class="keywordtype">char</span> *);</div><div class="line"><a name="l03914"></a><span class="lineno"> 3914</span>&#160;      reg_info_dummy = <a class="code" href="regex_8c.html#aa55c07b38a55837693a65170c5aa4c76">REGEX_TALLOC</a> (num_regs, <a class="code" href="unionregister__info__type.html">register_info_type</a>);</div><div class="line"><a name="l03915"></a><span class="lineno"> 3915</span>&#160;</div><div class="line"><a name="l03916"></a><span class="lineno"> 3916</span>&#160;      <span class="keywordflow">if</span> (!(regstart &amp;&amp; regend &amp;&amp; old_regstart &amp;&amp; old_regend &amp;&amp; reg_info</div><div class="line"><a name="l03917"></a><span class="lineno"> 3917</span>&#160;            &amp;&amp; best_regstart &amp;&amp; best_regend &amp;&amp; reg_dummy &amp;&amp; reg_info_dummy))</div><div class="line"><a name="l03918"></a><span class="lineno"> 3918</span>&#160;        {</div><div class="line"><a name="l03919"></a><span class="lineno"> 3919</span>&#160;          <a class="code" href="regex_8c.html#a7f3f2410fe2ae0089be0a2f3005f15dd">FREE_VARIABLES</a> ();</div><div class="line"><a name="l03920"></a><span class="lineno"> 3920</span>&#160;          <span class="keywordflow">return</span> -2;</div><div class="line"><a name="l03921"></a><span class="lineno"> 3921</span>&#160;        }</div><div class="line"><a name="l03922"></a><span class="lineno"> 3922</span>&#160;    }</div><div class="line"><a name="l03923"></a><span class="lineno"> 3923</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l03924"></a><span class="lineno"> 3924</span>&#160;    {</div><div class="line"><a name="l03925"></a><span class="lineno"> 3925</span>&#160;      <span class="comment">/* We must initialize all our variables to NULL, so that</span></div><div class="line"><a name="l03926"></a><span class="lineno"> 3926</span>&#160;<span class="comment">         `FREE_VARIABLES&#39; doesn&#39;t try to free them.  */</span></div><div class="line"><a name="l03927"></a><span class="lineno"> 3927</span>&#160;      regstart = regend = old_regstart = old_regend = best_regstart</div><div class="line"><a name="l03928"></a><span class="lineno"> 3928</span>&#160;        = best_regend = reg_dummy = <a class="code" href="regex_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03929"></a><span class="lineno"> 3929</span>&#160;      reg_info = reg_info_dummy = (<a class="code" href="unionregister__info__type.html">register_info_type</a> *) <a class="code" href="regex_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03930"></a><span class="lineno"> 3930</span>&#160;    }</div><div class="line"><a name="l03931"></a><span class="lineno"> 3931</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* MATCH_MAY_ALLOCATE */</span><span class="preprocessor"></span></div><div class="line"><a name="l03932"></a><span class="lineno"> 3932</span>&#160;</div><div class="line"><a name="l03933"></a><span class="lineno"> 3933</span>&#160;  <span class="comment">/* The starting position is bogus.  */</span></div><div class="line"><a name="l03934"></a><span class="lineno"> 3934</span>&#160;  <span class="keywordflow">if</span> (pos &lt; 0 || pos &gt; size1 + size2)</div><div class="line"><a name="l03935"></a><span class="lineno"> 3935</span>&#160;    {</div><div class="line"><a name="l03936"></a><span class="lineno"> 3936</span>&#160;      <a class="code" href="regex_8c.html#a7f3f2410fe2ae0089be0a2f3005f15dd">FREE_VARIABLES</a> ();</div><div class="line"><a name="l03937"></a><span class="lineno"> 3937</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03938"></a><span class="lineno"> 3938</span>&#160;    }</div><div class="line"><a name="l03939"></a><span class="lineno"> 3939</span>&#160;</div><div class="line"><a name="l03940"></a><span class="lineno"> 3940</span>&#160;  <span class="comment">/* Initialize subexpression text positions to -1 to mark ones that no</span></div><div class="line"><a name="l03941"></a><span class="lineno"> 3941</span>&#160;<span class="comment">     start_memory/stop_memory has been seen for. Also initialize the</span></div><div class="line"><a name="l03942"></a><span class="lineno"> 3942</span>&#160;<span class="comment">     register information struct.  */</span></div><div class="line"><a name="l03943"></a><span class="lineno"> 3943</span>&#160;  <span class="keywordflow">for</span> (mcnt = 1; (unsigned) mcnt &lt; num_regs; mcnt++)</div><div class="line"><a name="l03944"></a><span class="lineno"> 3944</span>&#160;    {</div><div class="line"><a name="l03945"></a><span class="lineno"> 3945</span>&#160;      regstart[mcnt] = regend[mcnt]</div><div class="line"><a name="l03946"></a><span class="lineno"> 3946</span>&#160;        = old_regstart[mcnt] = old_regend[mcnt] = <a class="code" href="regex_8c.html#a78d7e87774e3c9ae84570f8ab88f55a5">REG_UNSET_VALUE</a>;</div><div class="line"><a name="l03947"></a><span class="lineno"> 3947</span>&#160;</div><div class="line"><a name="l03948"></a><span class="lineno"> 3948</span>&#160;      <a class="code" href="regex_8c.html#ac840f4f2ecf1841ed894bd361236715b">REG_MATCH_NULL_STRING_P</a> (reg_info[mcnt]) = <a class="code" href="regex_8c.html#a9fbdd9b78059994c85d9f064f9fa9ec3">MATCH_NULL_UNSET_VALUE</a>;</div><div class="line"><a name="l03949"></a><span class="lineno"> 3949</span>&#160;      <a class="code" href="regex_8c.html#a4f6628b4b02e356efb3c4c8e6cf8eaff">IS_ACTIVE</a> (reg_info[mcnt]) = 0;</div><div class="line"><a name="l03950"></a><span class="lineno"> 3950</span>&#160;      <a class="code" href="regex_8c.html#a37aeb4969c6ded152f5be7582330e6e5">MATCHED_SOMETHING</a> (reg_info[mcnt]) = 0;</div><div class="line"><a name="l03951"></a><span class="lineno"> 3951</span>&#160;      <a class="code" href="regex_8c.html#ad4e9639db811e6b09f31ff92466b404e">EVER_MATCHED_SOMETHING</a> (reg_info[mcnt]) = 0;</div><div class="line"><a name="l03952"></a><span class="lineno"> 3952</span>&#160;    }</div><div class="line"><a name="l03953"></a><span class="lineno"> 3953</span>&#160;</div><div class="line"><a name="l03954"></a><span class="lineno"> 3954</span>&#160;  <span class="comment">/* We move `string1&#39; into `string2&#39; if the latter&#39;s empty -- but not if</span></div><div class="line"><a name="l03955"></a><span class="lineno"> 3955</span>&#160;<span class="comment">     `string1&#39; is null.  */</span></div><div class="line"><a name="l03956"></a><span class="lineno"> 3956</span>&#160;  <span class="keywordflow">if</span> (size2 == 0 &amp;&amp; string1 != <a class="code" href="regex_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l03957"></a><span class="lineno"> 3957</span>&#160;    {</div><div class="line"><a name="l03958"></a><span class="lineno"> 3958</span>&#160;      string2 = string1;</div><div class="line"><a name="l03959"></a><span class="lineno"> 3959</span>&#160;      size2 = size1;</div><div class="line"><a name="l03960"></a><span class="lineno"> 3960</span>&#160;      string1 = 0;</div><div class="line"><a name="l03961"></a><span class="lineno"> 3961</span>&#160;      size1 = 0;</div><div class="line"><a name="l03962"></a><span class="lineno"> 3962</span>&#160;    }</div><div class="line"><a name="l03963"></a><span class="lineno"> 3963</span>&#160;  end1 = string1 + size1;</div><div class="line"><a name="l03964"></a><span class="lineno"> 3964</span>&#160;  end2 = string2 + size2;</div><div class="line"><a name="l03965"></a><span class="lineno"> 3965</span>&#160;</div><div class="line"><a name="l03966"></a><span class="lineno"> 3966</span>&#160;  <span class="comment">/* Compute where to stop matching, within the two strings.  */</span></div><div class="line"><a name="l03967"></a><span class="lineno"> 3967</span>&#160;  <span class="keywordflow">if</span> (stop &lt;= size1)</div><div class="line"><a name="l03968"></a><span class="lineno"> 3968</span>&#160;    {</div><div class="line"><a name="l03969"></a><span class="lineno"> 3969</span>&#160;      end_match_1 = string1 + stop;</div><div class="line"><a name="l03970"></a><span class="lineno"> 3970</span>&#160;      end_match_2 = string2;</div><div class="line"><a name="l03971"></a><span class="lineno"> 3971</span>&#160;    }</div><div class="line"><a name="l03972"></a><span class="lineno"> 3972</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l03973"></a><span class="lineno"> 3973</span>&#160;    {</div><div class="line"><a name="l03974"></a><span class="lineno"> 3974</span>&#160;      end_match_1 = end1;</div><div class="line"><a name="l03975"></a><span class="lineno"> 3975</span>&#160;      end_match_2 = string2 + stop - size1;</div><div class="line"><a name="l03976"></a><span class="lineno"> 3976</span>&#160;    }</div><div class="line"><a name="l03977"></a><span class="lineno"> 3977</span>&#160;</div><div class="line"><a name="l03978"></a><span class="lineno"> 3978</span>&#160;  <span class="comment">/* `p&#39; scans through the pattern as `d&#39; scans through the data.</span></div><div class="line"><a name="l03979"></a><span class="lineno"> 3979</span>&#160;<span class="comment">     `dend&#39; is the end of the input string that `d&#39; points within.  `d&#39;</span></div><div class="line"><a name="l03980"></a><span class="lineno"> 3980</span>&#160;<span class="comment">     is advanced into the following input string whenever necessary, but</span></div><div class="line"><a name="l03981"></a><span class="lineno"> 3981</span>&#160;<span class="comment">     this happens before fetching; therefore, at the beginning of the</span></div><div class="line"><a name="l03982"></a><span class="lineno"> 3982</span>&#160;<span class="comment">     loop, `d&#39; can be pointing at the end of a string, but it cannot</span></div><div class="line"><a name="l03983"></a><span class="lineno"> 3983</span>&#160;<span class="comment">     equal `string2&#39;.  */</span></div><div class="line"><a name="l03984"></a><span class="lineno"> 3984</span>&#160;  <span class="keywordflow">if</span> (size1 &gt; 0 &amp;&amp; pos &lt;= size1)</div><div class="line"><a name="l03985"></a><span class="lineno"> 3985</span>&#160;    {</div><div class="line"><a name="l03986"></a><span class="lineno"> 3986</span>&#160;      d = string1 + pos;</div><div class="line"><a name="l03987"></a><span class="lineno"> 3987</span>&#160;      dend = end_match_1;</div><div class="line"><a name="l03988"></a><span class="lineno"> 3988</span>&#160;    }</div><div class="line"><a name="l03989"></a><span class="lineno"> 3989</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l03990"></a><span class="lineno"> 3990</span>&#160;    {</div><div class="line"><a name="l03991"></a><span class="lineno"> 3991</span>&#160;      d = string2 + pos - size1;</div><div class="line"><a name="l03992"></a><span class="lineno"> 3992</span>&#160;      dend = end_match_2;</div><div class="line"><a name="l03993"></a><span class="lineno"> 3993</span>&#160;    }</div><div class="line"><a name="l03994"></a><span class="lineno"> 3994</span>&#160;</div><div class="line"><a name="l03995"></a><span class="lineno"> 3995</span>&#160;  <a class="code" href="regex_8c.html#a90a312923984a45f83767acea95b84a1">DEBUG_PRINT1</a> (<span class="stringliteral">&quot;The compiled pattern is:\n&quot;</span>);</div><div class="line"><a name="l03996"></a><span class="lineno"> 3996</span>&#160;  <a class="code" href="regex_8c.html#ac9718b28cdc916b46e7f98bd4c38151e">DEBUG_PRINT_COMPILED_PATTERN</a> (bufp, p, pend);</div><div class="line"><a name="l03997"></a><span class="lineno"> 3997</span>&#160;  <a class="code" href="regex_8c.html#a90a312923984a45f83767acea95b84a1">DEBUG_PRINT1</a> (<span class="stringliteral">&quot;The string to match is: `&quot;</span>);</div><div class="line"><a name="l03998"></a><span class="lineno"> 3998</span>&#160;  <a class="code" href="regex_8c.html#ac98cc201be49e8dd0e1d05264e7651d7">DEBUG_PRINT_DOUBLE_STRING</a> (d, string1, size1, string2, size2);</div><div class="line"><a name="l03999"></a><span class="lineno"> 3999</span>&#160;  <a class="code" href="regex_8c.html#a90a312923984a45f83767acea95b84a1">DEBUG_PRINT1</a> (<span class="stringliteral">&quot;&#39;\n&quot;</span>);</div><div class="line"><a name="l04000"></a><span class="lineno"> 4000</span>&#160;</div><div class="line"><a name="l04001"></a><span class="lineno"> 4001</span>&#160;  <span class="comment">/* This loops over pattern commands.  It exits by returning from the</span></div><div class="line"><a name="l04002"></a><span class="lineno"> 4002</span>&#160;<span class="comment">     function if the match is complete, or it drops through if the match</span></div><div class="line"><a name="l04003"></a><span class="lineno"> 4003</span>&#160;<span class="comment">     fails at this starting point in the input data.  */</span></div><div class="line"><a name="l04004"></a><span class="lineno"> 4004</span>&#160;  <span class="keywordflow">for</span> (;;)</div><div class="line"><a name="l04005"></a><span class="lineno"> 4005</span>&#160;    {</div><div class="line"><a name="l04006"></a><span class="lineno"> 4006</span>&#160;<span class="preprocessor">#ifdef _LIBC</span></div><div class="line"><a name="l04007"></a><span class="lineno"> 4007</span>&#160;      <a class="code" href="regex_8c.html#aa56b1ff14ec552b5af8e9af50bc9d5cc">DEBUG_PRINT2</a> (<span class="stringliteral">&quot;\n%p: &quot;</span>, p);</div><div class="line"><a name="l04008"></a><span class="lineno"> 4008</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l04009"></a><span class="lineno"> 4009</span>&#160;      <a class="code" href="regex_8c.html#aa56b1ff14ec552b5af8e9af50bc9d5cc">DEBUG_PRINT2</a> (<span class="stringliteral">&quot;\n0x%x: &quot;</span>, p);</div><div class="line"><a name="l04010"></a><span class="lineno"> 4010</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04011"></a><span class="lineno"> 4011</span>&#160;</div><div class="line"><a name="l04012"></a><span class="lineno"> 4012</span>&#160;      <span class="keywordflow">if</span> (p == pend)</div><div class="line"><a name="l04013"></a><span class="lineno"> 4013</span>&#160;        { <span class="comment">/* End of pattern means we might have succeeded.  */</span></div><div class="line"><a name="l04014"></a><span class="lineno"> 4014</span>&#160;          <a class="code" href="regex_8c.html#a90a312923984a45f83767acea95b84a1">DEBUG_PRINT1</a> (<span class="stringliteral">&quot;end of pattern ... &quot;</span>);</div><div class="line"><a name="l04015"></a><span class="lineno"> 4015</span>&#160;</div><div class="line"><a name="l04016"></a><span class="lineno"> 4016</span>&#160;          <span class="comment">/* If we haven&#39;t matched the entire string, and we want the</span></div><div class="line"><a name="l04017"></a><span class="lineno"> 4017</span>&#160;<span class="comment">             longest match, try backtracking.  */</span></div><div class="line"><a name="l04018"></a><span class="lineno"> 4018</span>&#160;          <span class="keywordflow">if</span> (d != end_match_2)</div><div class="line"><a name="l04019"></a><span class="lineno"> 4019</span>&#160;            {</div><div class="line"><a name="l04020"></a><span class="lineno"> 4020</span>&#160;              <span class="comment">/* 1 if this match ends in the same string (string1 or string2)</span></div><div class="line"><a name="l04021"></a><span class="lineno"> 4021</span>&#160;<span class="comment">                 as the best previous match.  */</span></div><div class="line"><a name="l04022"></a><span class="lineno"> 4022</span>&#160;              <span class="keywordtype">boolean</span> same_str_p = (<a class="code" href="regex_8c.html#a490c47f87b80eb6afdb77510567659e4">FIRST_STRING_P</a> (match_end)</div><div class="line"><a name="l04023"></a><span class="lineno"> 4023</span>&#160;                                    == <a class="code" href="regex_8c.html#a7c5c8716cb01b2ad2cb50732817cbe4d">MATCHING_IN_FIRST_STRING</a>);</div><div class="line"><a name="l04024"></a><span class="lineno"> 4024</span>&#160;              <span class="comment">/* 1 if this match is the best seen so far.  */</span></div><div class="line"><a name="l04025"></a><span class="lineno"> 4025</span>&#160;              <span class="keywordtype">boolean</span> best_match_p;</div><div class="line"><a name="l04026"></a><span class="lineno"> 4026</span>&#160;</div><div class="line"><a name="l04027"></a><span class="lineno"> 4027</span>&#160;              <span class="comment">/* AIX compiler got confused when this was combined</span></div><div class="line"><a name="l04028"></a><span class="lineno"> 4028</span>&#160;<span class="comment">                 with the previous declaration.  */</span></div><div class="line"><a name="l04029"></a><span class="lineno"> 4029</span>&#160;              <span class="keywordflow">if</span> (same_str_p)</div><div class="line"><a name="l04030"></a><span class="lineno"> 4030</span>&#160;                best_match_p = d &gt; match_end;</div><div class="line"><a name="l04031"></a><span class="lineno"> 4031</span>&#160;              <span class="keywordflow">else</span></div><div class="line"><a name="l04032"></a><span class="lineno"> 4032</span>&#160;                best_match_p = !<a class="code" href="regex_8c.html#a7c5c8716cb01b2ad2cb50732817cbe4d">MATCHING_IN_FIRST_STRING</a>;</div><div class="line"><a name="l04033"></a><span class="lineno"> 4033</span>&#160;</div><div class="line"><a name="l04034"></a><span class="lineno"> 4034</span>&#160;              <a class="code" href="regex_8c.html#a90a312923984a45f83767acea95b84a1">DEBUG_PRINT1</a> (<span class="stringliteral">&quot;backtracking.\n&quot;</span>);</div><div class="line"><a name="l04035"></a><span class="lineno"> 4035</span>&#160;</div><div class="line"><a name="l04036"></a><span class="lineno"> 4036</span>&#160;              <span class="keywordflow">if</span> (!<a class="code" href="regex_8c.html#a222a4648230cba6a1801e51b4e2ced77">FAIL_STACK_EMPTY</a> ())</div><div class="line"><a name="l04037"></a><span class="lineno"> 4037</span>&#160;                { <span class="comment">/* More failure points to try.  */</span></div><div class="line"><a name="l04038"></a><span class="lineno"> 4038</span>&#160;</div><div class="line"><a name="l04039"></a><span class="lineno"> 4039</span>&#160;                  <span class="comment">/* If exceeds best match so far, save it.  */</span></div><div class="line"><a name="l04040"></a><span class="lineno"> 4040</span>&#160;                  <span class="keywordflow">if</span> (!best_regs_set || best_match_p)</div><div class="line"><a name="l04041"></a><span class="lineno"> 4041</span>&#160;                    {</div><div class="line"><a name="l04042"></a><span class="lineno"> 4042</span>&#160;                      best_regs_set = <span class="keyword">true</span>;</div><div class="line"><a name="l04043"></a><span class="lineno"> 4043</span>&#160;                      match_end = d;</div><div class="line"><a name="l04044"></a><span class="lineno"> 4044</span>&#160;</div><div class="line"><a name="l04045"></a><span class="lineno"> 4045</span>&#160;                      <a class="code" href="regex_8c.html#a90a312923984a45f83767acea95b84a1">DEBUG_PRINT1</a> (<span class="stringliteral">&quot;\nSAVING match as best so far.\n&quot;</span>);</div><div class="line"><a name="l04046"></a><span class="lineno"> 4046</span>&#160;</div><div class="line"><a name="l04047"></a><span class="lineno"> 4047</span>&#160;                      <span class="keywordflow">for</span> (mcnt = 1; (unsigned) mcnt &lt; num_regs; mcnt++)</div><div class="line"><a name="l04048"></a><span class="lineno"> 4048</span>&#160;                        {</div><div class="line"><a name="l04049"></a><span class="lineno"> 4049</span>&#160;                          best_regstart[mcnt] = regstart[mcnt];</div><div class="line"><a name="l04050"></a><span class="lineno"> 4050</span>&#160;                          best_regend[mcnt] = regend[mcnt];</div><div class="line"><a name="l04051"></a><span class="lineno"> 4051</span>&#160;                        }</div><div class="line"><a name="l04052"></a><span class="lineno"> 4052</span>&#160;                    }</div><div class="line"><a name="l04053"></a><span class="lineno"> 4053</span>&#160;                  <span class="keywordflow">goto</span> fail;</div><div class="line"><a name="l04054"></a><span class="lineno"> 4054</span>&#160;                }</div><div class="line"><a name="l04055"></a><span class="lineno"> 4055</span>&#160;</div><div class="line"><a name="l04056"></a><span class="lineno"> 4056</span>&#160;              <span class="comment">/* If no failure points, don&#39;t restore garbage.  And if</span></div><div class="line"><a name="l04057"></a><span class="lineno"> 4057</span>&#160;<span class="comment">                 last match is real best match, don&#39;t restore second</span></div><div class="line"><a name="l04058"></a><span class="lineno"> 4058</span>&#160;<span class="comment">                 best one. */</span></div><div class="line"><a name="l04059"></a><span class="lineno"> 4059</span>&#160;              <span class="keywordflow">else</span> <span class="keywordflow">if</span> (best_regs_set &amp;&amp; !best_match_p)</div><div class="line"><a name="l04060"></a><span class="lineno"> 4060</span>&#160;                {</div><div class="line"><a name="l04061"></a><span class="lineno"> 4061</span>&#160;                restore_best_regs:</div><div class="line"><a name="l04062"></a><span class="lineno"> 4062</span>&#160;                  <span class="comment">/* Restore best match.  It may happen that `dend ==</span></div><div class="line"><a name="l04063"></a><span class="lineno"> 4063</span>&#160;<span class="comment">                     end_match_1&#39; while the restored d is in string2.</span></div><div class="line"><a name="l04064"></a><span class="lineno"> 4064</span>&#160;<span class="comment">                     For example, the pattern `x.*y.*z&#39; against the</span></div><div class="line"><a name="l04065"></a><span class="lineno"> 4065</span>&#160;<span class="comment">                     strings `x-&#39; and `y-z-&#39;, if the two strings are</span></div><div class="line"><a name="l04066"></a><span class="lineno"> 4066</span>&#160;<span class="comment">                     not consecutive in memory.  */</span></div><div class="line"><a name="l04067"></a><span class="lineno"> 4067</span>&#160;                  <a class="code" href="regex_8c.html#a90a312923984a45f83767acea95b84a1">DEBUG_PRINT1</a> (<span class="stringliteral">&quot;Restoring best registers.\n&quot;</span>);</div><div class="line"><a name="l04068"></a><span class="lineno"> 4068</span>&#160;</div><div class="line"><a name="l04069"></a><span class="lineno"> 4069</span>&#160;                  d = match_end;</div><div class="line"><a name="l04070"></a><span class="lineno"> 4070</span>&#160;                  dend = ((d &gt;= string1 &amp;&amp; d &lt;= end1)</div><div class="line"><a name="l04071"></a><span class="lineno"> 4071</span>&#160;                           ? end_match_1 : end_match_2);</div><div class="line"><a name="l04072"></a><span class="lineno"> 4072</span>&#160;</div><div class="line"><a name="l04073"></a><span class="lineno"> 4073</span>&#160;                  <span class="keywordflow">for</span> (mcnt = 1; (unsigned) mcnt &lt; num_regs; mcnt++)</div><div class="line"><a name="l04074"></a><span class="lineno"> 4074</span>&#160;                    {</div><div class="line"><a name="l04075"></a><span class="lineno"> 4075</span>&#160;                      regstart[mcnt] = best_regstart[mcnt];</div><div class="line"><a name="l04076"></a><span class="lineno"> 4076</span>&#160;                      regend[mcnt] = best_regend[mcnt];</div><div class="line"><a name="l04077"></a><span class="lineno"> 4077</span>&#160;                    }</div><div class="line"><a name="l04078"></a><span class="lineno"> 4078</span>&#160;                }</div><div class="line"><a name="l04079"></a><span class="lineno"> 4079</span>&#160;            } <span class="comment">/* d != end_match_2 */</span></div><div class="line"><a name="l04080"></a><span class="lineno"> 4080</span>&#160;</div><div class="line"><a name="l04081"></a><span class="lineno"> 4081</span>&#160;        succeed_label:</div><div class="line"><a name="l04082"></a><span class="lineno"> 4082</span>&#160;          <a class="code" href="regex_8c.html#a90a312923984a45f83767acea95b84a1">DEBUG_PRINT1</a> (<span class="stringliteral">&quot;Accepting match.\n&quot;</span>);</div><div class="line"><a name="l04083"></a><span class="lineno"> 4083</span>&#160;</div><div class="line"><a name="l04084"></a><span class="lineno"> 4084</span>&#160;          <span class="comment">/* If caller wants register contents data back, do it.  */</span></div><div class="line"><a name="l04085"></a><span class="lineno"> 4085</span>&#160;          <span class="keywordflow">if</span> (regs &amp;&amp; !bufp-&gt;<a class="code" href="structre__pattern__buffer.html#af65d7e2e2a760b6a14546fb9084843aa">no_sub</a>)</div><div class="line"><a name="l04086"></a><span class="lineno"> 4086</span>&#160;            {</div><div class="line"><a name="l04087"></a><span class="lineno"> 4087</span>&#160;              <span class="comment">/* Have the register data arrays been allocated?  */</span></div><div class="line"><a name="l04088"></a><span class="lineno"> 4088</span>&#160;              <span class="keywordflow">if</span> (bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a5d2b01dbcd7226fbfe60d755825d73e3">regs_allocated</a> == <a class="code" href="__regex_8h.html#a2714d3e1903c4824ef31ccae36e702c7">REGS_UNALLOCATED</a>)</div><div class="line"><a name="l04089"></a><span class="lineno"> 4089</span>&#160;                { <span class="comment">/* No.  So allocate them with malloc.  We need one</span></div><div class="line"><a name="l04090"></a><span class="lineno"> 4090</span>&#160;<span class="comment">                     extra element beyond `num_regs&#39; for the `-1&#39; marker</span></div><div class="line"><a name="l04091"></a><span class="lineno"> 4091</span>&#160;<span class="comment">                     GNU code uses.  */</span></div><div class="line"><a name="l04092"></a><span class="lineno"> 4092</span>&#160;                  regs-&gt;<a class="code" href="structre__registers.html#aeae8140aadf339f6fe0c49277d6aa7b5">num_regs</a> = <a class="code" href="regex_8c.html#afa99ec4acc4ecb2dc3c2d05da15d0e3f">MAX</a> (<a class="code" href="__regex_8h.html#a36fa5b4c2430ba987abcc9a0d60ba37e">RE_NREGS</a>, num_regs + 1);</div><div class="line"><a name="l04093"></a><span class="lineno"> 4093</span>&#160;                  regs-&gt;<a class="code" href="structre__registers.html#a6676ddb6ab07e50191e149b04dbcfe03">start</a> = <a class="code" href="regex_8c.html#aaf77bcbd178f50762a35333d83bacd09">TALLOC</a> (regs-&gt;<a class="code" href="structre__registers.html#aeae8140aadf339f6fe0c49277d6aa7b5">num_regs</a>, <a class="code" href="__regex_8h.html#a5b34995b47432512ee4ffa32b836e65f">regoff_t</a>);</div><div class="line"><a name="l04094"></a><span class="lineno"> 4094</span>&#160;                  regs-&gt;<a class="code" href="structre__registers.html#a0a9d373f1ab74c9c2063f233476fa5d4">end</a> = <a class="code" href="regex_8c.html#aaf77bcbd178f50762a35333d83bacd09">TALLOC</a> (regs-&gt;<a class="code" href="structre__registers.html#aeae8140aadf339f6fe0c49277d6aa7b5">num_regs</a>, <a class="code" href="__regex_8h.html#a5b34995b47432512ee4ffa32b836e65f">regoff_t</a>);</div><div class="line"><a name="l04095"></a><span class="lineno"> 4095</span>&#160;                  <span class="keywordflow">if</span> (regs-&gt;<a class="code" href="structre__registers.html#a6676ddb6ab07e50191e149b04dbcfe03">start</a> == <a class="code" href="regex_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || regs-&gt;<a class="code" href="structre__registers.html#a0a9d373f1ab74c9c2063f233476fa5d4">end</a> == <a class="code" href="regex_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l04096"></a><span class="lineno"> 4096</span>&#160;                    {</div><div class="line"><a name="l04097"></a><span class="lineno"> 4097</span>&#160;                      <a class="code" href="regex_8c.html#a7f3f2410fe2ae0089be0a2f3005f15dd">FREE_VARIABLES</a> ();</div><div class="line"><a name="l04098"></a><span class="lineno"> 4098</span>&#160;                      <span class="keywordflow">return</span> -2;</div><div class="line"><a name="l04099"></a><span class="lineno"> 4099</span>&#160;                    }</div><div class="line"><a name="l04100"></a><span class="lineno"> 4100</span>&#160;                  bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a5d2b01dbcd7226fbfe60d755825d73e3">regs_allocated</a> = <a class="code" href="__regex_8h.html#a87642301f41c9c37e7f4d10ab5ade987">REGS_REALLOCATE</a>;</div><div class="line"><a name="l04101"></a><span class="lineno"> 4101</span>&#160;                }</div><div class="line"><a name="l04102"></a><span class="lineno"> 4102</span>&#160;              <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a5d2b01dbcd7226fbfe60d755825d73e3">regs_allocated</a> == <a class="code" href="__regex_8h.html#a87642301f41c9c37e7f4d10ab5ade987">REGS_REALLOCATE</a>)</div><div class="line"><a name="l04103"></a><span class="lineno"> 4103</span>&#160;                { <span class="comment">/* Yes.  If we need more elements than were already</span></div><div class="line"><a name="l04104"></a><span class="lineno"> 4104</span>&#160;<span class="comment">                     allocated, reallocate them.  If we need fewer, just</span></div><div class="line"><a name="l04105"></a><span class="lineno"> 4105</span>&#160;<span class="comment">                     leave it alone.  */</span></div><div class="line"><a name="l04106"></a><span class="lineno"> 4106</span>&#160;                  <span class="keywordflow">if</span> (regs-&gt;<a class="code" href="structre__registers.html#aeae8140aadf339f6fe0c49277d6aa7b5">num_regs</a> &lt; num_regs + 1)</div><div class="line"><a name="l04107"></a><span class="lineno"> 4107</span>&#160;                    {</div><div class="line"><a name="l04108"></a><span class="lineno"> 4108</span>&#160;                      regs-&gt;<a class="code" href="structre__registers.html#aeae8140aadf339f6fe0c49277d6aa7b5">num_regs</a> = num_regs + 1;</div><div class="line"><a name="l04109"></a><span class="lineno"> 4109</span>&#160;                      <a class="code" href="regex_8c.html#ae247cb248fa0309737dce6bdfc3a6a3d">RETALLOC</a> (regs-&gt;<a class="code" href="structre__registers.html#a6676ddb6ab07e50191e149b04dbcfe03">start</a>, regs-&gt;<a class="code" href="structre__registers.html#aeae8140aadf339f6fe0c49277d6aa7b5">num_regs</a>, <a class="code" href="__regex_8h.html#a5b34995b47432512ee4ffa32b836e65f">regoff_t</a>);</div><div class="line"><a name="l04110"></a><span class="lineno"> 4110</span>&#160;                      <a class="code" href="regex_8c.html#ae247cb248fa0309737dce6bdfc3a6a3d">RETALLOC</a> (regs-&gt;<a class="code" href="structre__registers.html#a0a9d373f1ab74c9c2063f233476fa5d4">end</a>, regs-&gt;<a class="code" href="structre__registers.html#aeae8140aadf339f6fe0c49277d6aa7b5">num_regs</a>, <a class="code" href="__regex_8h.html#a5b34995b47432512ee4ffa32b836e65f">regoff_t</a>);</div><div class="line"><a name="l04111"></a><span class="lineno"> 4111</span>&#160;                      <span class="keywordflow">if</span> (regs-&gt;<a class="code" href="structre__registers.html#a6676ddb6ab07e50191e149b04dbcfe03">start</a> == <a class="code" href="regex_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || regs-&gt;<a class="code" href="structre__registers.html#a0a9d373f1ab74c9c2063f233476fa5d4">end</a> == <a class="code" href="regex_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l04112"></a><span class="lineno"> 4112</span>&#160;                        {</div><div class="line"><a name="l04113"></a><span class="lineno"> 4113</span>&#160;                          <a class="code" href="regex_8c.html#a7f3f2410fe2ae0089be0a2f3005f15dd">FREE_VARIABLES</a> ();</div><div class="line"><a name="l04114"></a><span class="lineno"> 4114</span>&#160;                          <span class="keywordflow">return</span> -2;</div><div class="line"><a name="l04115"></a><span class="lineno"> 4115</span>&#160;                        }</div><div class="line"><a name="l04116"></a><span class="lineno"> 4116</span>&#160;                    }</div><div class="line"><a name="l04117"></a><span class="lineno"> 4117</span>&#160;                }</div><div class="line"><a name="l04118"></a><span class="lineno"> 4118</span>&#160;              <span class="keywordflow">else</span></div><div class="line"><a name="l04119"></a><span class="lineno"> 4119</span>&#160;                {</div><div class="line"><a name="l04120"></a><span class="lineno"> 4120</span>&#160;                  <span class="comment">/* These braces fend off a &quot;empty body in an else-statement&quot;</span></div><div class="line"><a name="l04121"></a><span class="lineno"> 4121</span>&#160;<span class="comment">                     warning under GCC when assert expands to nothing.  */</span></div><div class="line"><a name="l04122"></a><span class="lineno"> 4122</span>&#160;                  <a class="code" href="sendlib_8c.html#af576bf8ffa22a44e53018c67095ffbf0">assert</a> (bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a5d2b01dbcd7226fbfe60d755825d73e3">regs_allocated</a> == <a class="code" href="__regex_8h.html#a54c8820fca418980dbcd43ebd78ed5a6">REGS_FIXED</a>);</div><div class="line"><a name="l04123"></a><span class="lineno"> 4123</span>&#160;                }</div><div class="line"><a name="l04124"></a><span class="lineno"> 4124</span>&#160;</div><div class="line"><a name="l04125"></a><span class="lineno"> 4125</span>&#160;              <span class="comment">/* Convert the pointer data in `regstart&#39; and `regend&#39; to</span></div><div class="line"><a name="l04126"></a><span class="lineno"> 4126</span>&#160;<span class="comment">                 indices.  Register zero has to be set differently,</span></div><div class="line"><a name="l04127"></a><span class="lineno"> 4127</span>&#160;<span class="comment">                 since we haven&#39;t kept track of any info for it.  */</span></div><div class="line"><a name="l04128"></a><span class="lineno"> 4128</span>&#160;              <span class="keywordflow">if</span> (regs-&gt;<a class="code" href="structre__registers.html#aeae8140aadf339f6fe0c49277d6aa7b5">num_regs</a> &gt; 0)</div><div class="line"><a name="l04129"></a><span class="lineno"> 4129</span>&#160;                {</div><div class="line"><a name="l04130"></a><span class="lineno"> 4130</span>&#160;                  regs-&gt;<a class="code" href="structre__registers.html#a6676ddb6ab07e50191e149b04dbcfe03">start</a>[0] = pos;</div><div class="line"><a name="l04131"></a><span class="lineno"> 4131</span>&#160;                  regs-&gt;<a class="code" href="structre__registers.html#a0a9d373f1ab74c9c2063f233476fa5d4">end</a>[0] = (<a class="code" href="regex_8c.html#a7c5c8716cb01b2ad2cb50732817cbe4d">MATCHING_IN_FIRST_STRING</a></div><div class="line"><a name="l04132"></a><span class="lineno"> 4132</span>&#160;                                  ? ((<a class="code" href="__regex_8h.html#a5b34995b47432512ee4ffa32b836e65f">regoff_t</a>) (d - string1))</div><div class="line"><a name="l04133"></a><span class="lineno"> 4133</span>&#160;                                  : ((<a class="code" href="__regex_8h.html#a5b34995b47432512ee4ffa32b836e65f">regoff_t</a>) (d - string2 + size1)));</div><div class="line"><a name="l04134"></a><span class="lineno"> 4134</span>&#160;                }</div><div class="line"><a name="l04135"></a><span class="lineno"> 4135</span>&#160;</div><div class="line"><a name="l04136"></a><span class="lineno"> 4136</span>&#160;              <span class="comment">/* Go through the first `min (num_regs, regs-&gt;num_regs)&#39;</span></div><div class="line"><a name="l04137"></a><span class="lineno"> 4137</span>&#160;<span class="comment">                 registers, since that is all we initialized.  */</span></div><div class="line"><a name="l04138"></a><span class="lineno"> 4138</span>&#160;              <span class="keywordflow">for</span> (mcnt = 1; (unsigned) mcnt &lt; <a class="code" href="regex_8c.html#a3acffbd305ee72dcd4593c0d8af64a4f">MIN</a> (num_regs, regs-&gt;<a class="code" href="structre__registers.html#aeae8140aadf339f6fe0c49277d6aa7b5">num_regs</a>);</div><div class="line"><a name="l04139"></a><span class="lineno"> 4139</span>&#160;                   mcnt++)</div><div class="line"><a name="l04140"></a><span class="lineno"> 4140</span>&#160;                {</div><div class="line"><a name="l04141"></a><span class="lineno"> 4141</span>&#160;                  <span class="keywordflow">if</span> (<a class="code" href="regex_8c.html#afefb76392029f59835538d01a0c13242">REG_UNSET</a> (regstart[mcnt]) || <a class="code" href="regex_8c.html#afefb76392029f59835538d01a0c13242">REG_UNSET</a> (regend[mcnt]))</div><div class="line"><a name="l04142"></a><span class="lineno"> 4142</span>&#160;                    regs-&gt;<a class="code" href="structre__registers.html#a6676ddb6ab07e50191e149b04dbcfe03">start</a>[mcnt] = regs-&gt;<a class="code" href="structre__registers.html#a0a9d373f1ab74c9c2063f233476fa5d4">end</a>[mcnt] = -1;</div><div class="line"><a name="l04143"></a><span class="lineno"> 4143</span>&#160;                  <span class="keywordflow">else</span></div><div class="line"><a name="l04144"></a><span class="lineno"> 4144</span>&#160;                    {</div><div class="line"><a name="l04145"></a><span class="lineno"> 4145</span>&#160;                      regs-&gt;<a class="code" href="structre__registers.html#a6676ddb6ab07e50191e149b04dbcfe03">start</a>[mcnt]</div><div class="line"><a name="l04146"></a><span class="lineno"> 4146</span>&#160;                        = (<a class="code" href="__regex_8h.html#a5b34995b47432512ee4ffa32b836e65f">regoff_t</a>) <a class="code" href="regex_8c.html#a8bebab7ed279441748e37304f7a2c78a">POINTER_TO_OFFSET</a> (regstart[mcnt]);</div><div class="line"><a name="l04147"></a><span class="lineno"> 4147</span>&#160;                      regs-&gt;<a class="code" href="structre__registers.html#a0a9d373f1ab74c9c2063f233476fa5d4">end</a>[mcnt]</div><div class="line"><a name="l04148"></a><span class="lineno"> 4148</span>&#160;                        = (<a class="code" href="__regex_8h.html#a5b34995b47432512ee4ffa32b836e65f">regoff_t</a>) <a class="code" href="regex_8c.html#a8bebab7ed279441748e37304f7a2c78a">POINTER_TO_OFFSET</a> (regend[mcnt]);</div><div class="line"><a name="l04149"></a><span class="lineno"> 4149</span>&#160;                    }</div><div class="line"><a name="l04150"></a><span class="lineno"> 4150</span>&#160;                }</div><div class="line"><a name="l04151"></a><span class="lineno"> 4151</span>&#160;</div><div class="line"><a name="l04152"></a><span class="lineno"> 4152</span>&#160;              <span class="comment">/* If the regs structure we return has more elements than</span></div><div class="line"><a name="l04153"></a><span class="lineno"> 4153</span>&#160;<span class="comment">                 were in the pattern, set the extra elements to -1.  If</span></div><div class="line"><a name="l04154"></a><span class="lineno"> 4154</span>&#160;<span class="comment">                 we (re)allocated the registers, this is the case,</span></div><div class="line"><a name="l04155"></a><span class="lineno"> 4155</span>&#160;<span class="comment">                 because we always allocate enough to have at least one</span></div><div class="line"><a name="l04156"></a><span class="lineno"> 4156</span>&#160;<span class="comment">                 -1 at the end.  */</span></div><div class="line"><a name="l04157"></a><span class="lineno"> 4157</span>&#160;              <span class="keywordflow">for</span> (mcnt = num_regs; (unsigned) mcnt &lt; regs-&gt;num_regs; mcnt++)</div><div class="line"><a name="l04158"></a><span class="lineno"> 4158</span>&#160;                regs-&gt;<a class="code" href="structre__registers.html#a6676ddb6ab07e50191e149b04dbcfe03">start</a>[mcnt] = regs-&gt;<a class="code" href="structre__registers.html#a0a9d373f1ab74c9c2063f233476fa5d4">end</a>[mcnt] = -1;</div><div class="line"><a name="l04159"></a><span class="lineno"> 4159</span>&#160;            } <span class="comment">/* regs &amp;&amp; !bufp-&gt;no_sub */</span></div><div class="line"><a name="l04160"></a><span class="lineno"> 4160</span>&#160;</div><div class="line"><a name="l04161"></a><span class="lineno"> 4161</span>&#160;          <a class="code" href="regex_8c.html#aca55c7b840c46d7e72964a9ecf52310f">DEBUG_PRINT4</a> (<span class="stringliteral">&quot;%u failure points pushed, %u popped (%u remain).\n&quot;</span>,</div><div class="line"><a name="l04162"></a><span class="lineno"> 4162</span>&#160;                        nfailure_points_pushed, nfailure_points_popped,</div><div class="line"><a name="l04163"></a><span class="lineno"> 4163</span>&#160;                        nfailure_points_pushed - nfailure_points_popped);</div><div class="line"><a name="l04164"></a><span class="lineno"> 4164</span>&#160;          <a class="code" href="regex_8c.html#aa56b1ff14ec552b5af8e9af50bc9d5cc">DEBUG_PRINT2</a> (<span class="stringliteral">&quot;%u registers pushed.\n&quot;</span>, num_regs_pushed);</div><div class="line"><a name="l04165"></a><span class="lineno"> 4165</span>&#160;</div><div class="line"><a name="l04166"></a><span class="lineno"> 4166</span>&#160;          mcnt = d - pos - (<a class="code" href="regex_8c.html#a7c5c8716cb01b2ad2cb50732817cbe4d">MATCHING_IN_FIRST_STRING</a></div><div class="line"><a name="l04167"></a><span class="lineno"> 4167</span>&#160;                            ? string1</div><div class="line"><a name="l04168"></a><span class="lineno"> 4168</span>&#160;                            : string2 - size1);</div><div class="line"><a name="l04169"></a><span class="lineno"> 4169</span>&#160;</div><div class="line"><a name="l04170"></a><span class="lineno"> 4170</span>&#160;          <a class="code" href="regex_8c.html#aa56b1ff14ec552b5af8e9af50bc9d5cc">DEBUG_PRINT2</a> (<span class="stringliteral">&quot;Returning %d from re_match_2.\n&quot;</span>, mcnt);</div><div class="line"><a name="l04171"></a><span class="lineno"> 4171</span>&#160;</div><div class="line"><a name="l04172"></a><span class="lineno"> 4172</span>&#160;          <a class="code" href="regex_8c.html#a7f3f2410fe2ae0089be0a2f3005f15dd">FREE_VARIABLES</a> ();</div><div class="line"><a name="l04173"></a><span class="lineno"> 4173</span>&#160;          <span class="keywordflow">return</span> mcnt;</div><div class="line"><a name="l04174"></a><span class="lineno"> 4174</span>&#160;        }</div><div class="line"><a name="l04175"></a><span class="lineno"> 4175</span>&#160;</div><div class="line"><a name="l04176"></a><span class="lineno"> 4176</span>&#160;      <span class="comment">/* Otherwise match next pattern command.  */</span></div><div class="line"><a name="l04177"></a><span class="lineno"> 4177</span>&#160;      <span class="keywordflow">switch</span> (<a class="code" href="regex_8c.html#a95cf7f68f7a75751d4abd454d6add11a">SWITCH_ENUM_CAST</a> ((re_opcode_t) *p++))</div><div class="line"><a name="l04178"></a><span class="lineno"> 4178</span>&#160;        {</div><div class="line"><a name="l04179"></a><span class="lineno"> 4179</span>&#160;        <span class="comment">/* Ignore these.  Used to ignore the n of succeed_n&#39;s which</span></div><div class="line"><a name="l04180"></a><span class="lineno"> 4180</span>&#160;<span class="comment">           currently have n == 0.  */</span></div><div class="line"><a name="l04181"></a><span class="lineno"> 4181</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a292eb17c5d97bf50ef0c4f733e56c836">no_op</a>:</div><div class="line"><a name="l04182"></a><span class="lineno"> 4182</span>&#160;          <a class="code" href="regex_8c.html#a90a312923984a45f83767acea95b84a1">DEBUG_PRINT1</a> (<span class="stringliteral">&quot;EXECUTING no_op.\n&quot;</span>);</div><div class="line"><a name="l04183"></a><span class="lineno"> 4183</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l04184"></a><span class="lineno"> 4184</span>&#160;</div><div class="line"><a name="l04185"></a><span class="lineno"> 4185</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a37fe3367d5bf38cb0ac666ebae52d4f9">succeed</a>:</div><div class="line"><a name="l04186"></a><span class="lineno"> 4186</span>&#160;          <a class="code" href="regex_8c.html#a90a312923984a45f83767acea95b84a1">DEBUG_PRINT1</a> (<span class="stringliteral">&quot;EXECUTING succeed.\n&quot;</span>);</div><div class="line"><a name="l04187"></a><span class="lineno"> 4187</span>&#160;          <span class="keywordflow">goto</span> succeed_label;</div><div class="line"><a name="l04188"></a><span class="lineno"> 4188</span>&#160;</div><div class="line"><a name="l04189"></a><span class="lineno"> 4189</span>&#160;        <span class="comment">/* Match the next n pattern characters exactly.  The following</span></div><div class="line"><a name="l04190"></a><span class="lineno"> 4190</span>&#160;<span class="comment">           byte in the pattern defines n, and the n bytes after that</span></div><div class="line"><a name="l04191"></a><span class="lineno"> 4191</span>&#160;<span class="comment">           are the characters to match.  */</span></div><div class="line"><a name="l04192"></a><span class="lineno"> 4192</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118ab0eca0e160953a14bcb41d151287d1f1">exactn</a>:</div><div class="line"><a name="l04193"></a><span class="lineno"> 4193</span>&#160;          mcnt = *p++;</div><div class="line"><a name="l04194"></a><span class="lineno"> 4194</span>&#160;          <a class="code" href="regex_8c.html#aa56b1ff14ec552b5af8e9af50bc9d5cc">DEBUG_PRINT2</a> (<span class="stringliteral">&quot;EXECUTING exactn %d.\n&quot;</span>, mcnt);</div><div class="line"><a name="l04195"></a><span class="lineno"> 4195</span>&#160;</div><div class="line"><a name="l04196"></a><span class="lineno"> 4196</span>&#160;          <span class="comment">/* This is written out as an if-else so we don&#39;t waste time</span></div><div class="line"><a name="l04197"></a><span class="lineno"> 4197</span>&#160;<span class="comment">             testing `translate&#39; inside the loop.  */</span></div><div class="line"><a name="l04198"></a><span class="lineno"> 4198</span>&#160;          <span class="keywordflow">if</span> (translate)</div><div class="line"><a name="l04199"></a><span class="lineno"> 4199</span>&#160;            {</div><div class="line"><a name="l04200"></a><span class="lineno"> 4200</span>&#160;              <span class="keywordflow">do</span></div><div class="line"><a name="l04201"></a><span class="lineno"> 4201</span>&#160;                {</div><div class="line"><a name="l04202"></a><span class="lineno"> 4202</span>&#160;                  <a class="code" href="regex_8c.html#a03e91c701217af9b9faab62cb2a65d7d">PREFETCH</a> ();</div><div class="line"><a name="l04203"></a><span class="lineno"> 4203</span>&#160;                  <span class="keywordflow">if</span> ((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>) translate[(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>) *d++]</div><div class="line"><a name="l04204"></a><span class="lineno"> 4204</span>&#160;                      != (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>) *p++)</div><div class="line"><a name="l04205"></a><span class="lineno"> 4205</span>&#160;                    <span class="keywordflow">goto</span> fail;</div><div class="line"><a name="l04206"></a><span class="lineno"> 4206</span>&#160;                }</div><div class="line"><a name="l04207"></a><span class="lineno"> 4207</span>&#160;              <span class="keywordflow">while</span> (--mcnt);</div><div class="line"><a name="l04208"></a><span class="lineno"> 4208</span>&#160;            }</div><div class="line"><a name="l04209"></a><span class="lineno"> 4209</span>&#160;          <span class="keywordflow">else</span></div><div class="line"><a name="l04210"></a><span class="lineno"> 4210</span>&#160;            {</div><div class="line"><a name="l04211"></a><span class="lineno"> 4211</span>&#160;              <span class="keywordflow">do</span></div><div class="line"><a name="l04212"></a><span class="lineno"> 4212</span>&#160;                {</div><div class="line"><a name="l04213"></a><span class="lineno"> 4213</span>&#160;                  <a class="code" href="regex_8c.html#a03e91c701217af9b9faab62cb2a65d7d">PREFETCH</a> ();</div><div class="line"><a name="l04214"></a><span class="lineno"> 4214</span>&#160;                  <span class="keywordflow">if</span> (*d++ != (<span class="keywordtype">char</span>) *p++) <span class="keywordflow">goto</span> fail;</div><div class="line"><a name="l04215"></a><span class="lineno"> 4215</span>&#160;                }</div><div class="line"><a name="l04216"></a><span class="lineno"> 4216</span>&#160;              <span class="keywordflow">while</span> (--mcnt);</div><div class="line"><a name="l04217"></a><span class="lineno"> 4217</span>&#160;            }</div><div class="line"><a name="l04218"></a><span class="lineno"> 4218</span>&#160;          <a class="code" href="regex_8c.html#aa286396ee78a5823c6bedd72e303e4c9">SET_REGS_MATCHED</a> ();</div><div class="line"><a name="l04219"></a><span class="lineno"> 4219</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l04220"></a><span class="lineno"> 4220</span>&#160;</div><div class="line"><a name="l04221"></a><span class="lineno"> 4221</span>&#160;</div><div class="line"><a name="l04222"></a><span class="lineno"> 4222</span>&#160;        <span class="comment">/* Match any character except possibly a newline or a null.  */</span></div><div class="line"><a name="l04223"></a><span class="lineno"> 4223</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a375d40bb404dcb4aedbb775f40e7f648">anychar</a>:</div><div class="line"><a name="l04224"></a><span class="lineno"> 4224</span>&#160;          <a class="code" href="regex_8c.html#a90a312923984a45f83767acea95b84a1">DEBUG_PRINT1</a> (<span class="stringliteral">&quot;EXECUTING anychar.\n&quot;</span>);</div><div class="line"><a name="l04225"></a><span class="lineno"> 4225</span>&#160;</div><div class="line"><a name="l04226"></a><span class="lineno"> 4226</span>&#160;          <a class="code" href="regex_8c.html#a03e91c701217af9b9faab62cb2a65d7d">PREFETCH</a> ();</div><div class="line"><a name="l04227"></a><span class="lineno"> 4227</span>&#160;</div><div class="line"><a name="l04228"></a><span class="lineno"> 4228</span>&#160;          <span class="keywordflow">if</span> ((!(bufp-&gt;<a class="code" href="structre__pattern__buffer.html#af3e24760a69608d163661c6d8977c358">syntax</a> &amp; <a class="code" href="__regex_8h.html#a405fe43871f2df60407b3c8272f4624c">RE_DOT_NEWLINE</a>) &amp;&amp; <a class="code" href="regex_8c.html#a2eeeb49b77aa0f299d2d3c23dc1bfa17">TRANSLATE</a> (*d) == <span class="charliteral">&#39;\n&#39;</span>)</div><div class="line"><a name="l04229"></a><span class="lineno"> 4229</span>&#160;              || (bufp-&gt;<a class="code" href="structre__pattern__buffer.html#af3e24760a69608d163661c6d8977c358">syntax</a> &amp; <a class="code" href="__regex_8h.html#a30d6a2fb42df1a210e830f3cd3f06977">RE_DOT_NOT_NULL</a> &amp;&amp; <a class="code" href="regex_8c.html#a2eeeb49b77aa0f299d2d3c23dc1bfa17">TRANSLATE</a> (*d) == <span class="charliteral">&#39;\000&#39;</span>))</div><div class="line"><a name="l04230"></a><span class="lineno"> 4230</span>&#160;            <span class="keywordflow">goto</span> fail;</div><div class="line"><a name="l04231"></a><span class="lineno"> 4231</span>&#160;</div><div class="line"><a name="l04232"></a><span class="lineno"> 4232</span>&#160;          <a class="code" href="regex_8c.html#aa286396ee78a5823c6bedd72e303e4c9">SET_REGS_MATCHED</a> ();</div><div class="line"><a name="l04233"></a><span class="lineno"> 4233</span>&#160;          <a class="code" href="regex_8c.html#aa56b1ff14ec552b5af8e9af50bc9d5cc">DEBUG_PRINT2</a> (<span class="stringliteral">&quot;  Matched `%d&#39;.\n&quot;</span>, *d);</div><div class="line"><a name="l04234"></a><span class="lineno"> 4234</span>&#160;          d++;</div><div class="line"><a name="l04235"></a><span class="lineno"> 4235</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l04236"></a><span class="lineno"> 4236</span>&#160;</div><div class="line"><a name="l04237"></a><span class="lineno"> 4237</span>&#160;</div><div class="line"><a name="l04238"></a><span class="lineno"> 4238</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a6247a0132ac9bb1af7dbc840afe09c88">charset</a>:</div><div class="line"><a name="l04239"></a><span class="lineno"> 4239</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118abcbe9b8a81da1098e4ffbb7c4f4a8e2e">charset_not</a>:</div><div class="line"><a name="l04240"></a><span class="lineno"> 4240</span>&#160;          {</div><div class="line"><a name="l04241"></a><span class="lineno"> 4241</span>&#160;            <span class="keyword">register</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> c;</div><div class="line"><a name="l04242"></a><span class="lineno"> 4242</span>&#160;            <span class="keywordtype">boolean</span> not = (<a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118">re_opcode_t</a>) *(p - 1) == <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118abcbe9b8a81da1098e4ffbb7c4f4a8e2e">charset_not</a>;</div><div class="line"><a name="l04243"></a><span class="lineno"> 4243</span>&#160;</div><div class="line"><a name="l04244"></a><span class="lineno"> 4244</span>&#160;            <a class="code" href="regex_8c.html#aa56b1ff14ec552b5af8e9af50bc9d5cc">DEBUG_PRINT2</a> (<span class="stringliteral">&quot;EXECUTING charset%s.\n&quot;</span>, not ? <span class="stringliteral">&quot;_not&quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l04245"></a><span class="lineno"> 4245</span>&#160;</div><div class="line"><a name="l04246"></a><span class="lineno"> 4246</span>&#160;            <a class="code" href="regex_8c.html#a03e91c701217af9b9faab62cb2a65d7d">PREFETCH</a> ();</div><div class="line"><a name="l04247"></a><span class="lineno"> 4247</span>&#160;            c = <a class="code" href="regex_8c.html#a2eeeb49b77aa0f299d2d3c23dc1bfa17">TRANSLATE</a> (*d); <span class="comment">/* The character to match.  */</span></div><div class="line"><a name="l04248"></a><span class="lineno"> 4248</span>&#160;</div><div class="line"><a name="l04249"></a><span class="lineno"> 4249</span>&#160;            <span class="comment">/* Cast to `unsigned&#39; instead of `unsigned char&#39; in case the</span></div><div class="line"><a name="l04250"></a><span class="lineno"> 4250</span>&#160;<span class="comment">               bit list is a full 32 bytes long.  */</span></div><div class="line"><a name="l04251"></a><span class="lineno"> 4251</span>&#160;            <span class="keywordflow">if</span> (c &lt; (<span class="keywordtype">unsigned</span>) (*p * <a class="code" href="regex_8c.html#ad72dc64cd2c9bc3598f792dc518d03b2">BYTEWIDTH</a>)</div><div class="line"><a name="l04252"></a><span class="lineno"> 4252</span>&#160;                &amp;&amp; p[1 + c / BYTEWIDTH] &amp; (1 &lt;&lt; (c % BYTEWIDTH)))</div><div class="line"><a name="l04253"></a><span class="lineno"> 4253</span>&#160;              not = !not;</div><div class="line"><a name="l04254"></a><span class="lineno"> 4254</span>&#160;</div><div class="line"><a name="l04255"></a><span class="lineno"> 4255</span>&#160;            p += 1 + *p;</div><div class="line"><a name="l04256"></a><span class="lineno"> 4256</span>&#160;</div><div class="line"><a name="l04257"></a><span class="lineno"> 4257</span>&#160;            <span class="keywordflow">if</span> (!not) <span class="keywordflow">goto</span> fail;</div><div class="line"><a name="l04258"></a><span class="lineno"> 4258</span>&#160;</div><div class="line"><a name="l04259"></a><span class="lineno"> 4259</span>&#160;            <a class="code" href="regex_8c.html#aa286396ee78a5823c6bedd72e303e4c9">SET_REGS_MATCHED</a> ();</div><div class="line"><a name="l04260"></a><span class="lineno"> 4260</span>&#160;            d++;</div><div class="line"><a name="l04261"></a><span class="lineno"> 4261</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l04262"></a><span class="lineno"> 4262</span>&#160;          }</div><div class="line"><a name="l04263"></a><span class="lineno"> 4263</span>&#160;</div><div class="line"><a name="l04264"></a><span class="lineno"> 4264</span>&#160;</div><div class="line"><a name="l04265"></a><span class="lineno"> 4265</span>&#160;        <span class="comment">/* The beginning of a group is represented by start_memory.</span></div><div class="line"><a name="l04266"></a><span class="lineno"> 4266</span>&#160;<span class="comment">           The arguments are the register number in the next byte, and the</span></div><div class="line"><a name="l04267"></a><span class="lineno"> 4267</span>&#160;<span class="comment">           number of groups inner to this one in the next.  The text</span></div><div class="line"><a name="l04268"></a><span class="lineno"> 4268</span>&#160;<span class="comment">           matched within the group is recorded (in the internal</span></div><div class="line"><a name="l04269"></a><span class="lineno"> 4269</span>&#160;<span class="comment">           registers data structure) under the register number.  */</span></div><div class="line"><a name="l04270"></a><span class="lineno"> 4270</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118affba14708233f194802bf7981fd7717e">start_memory</a>:</div><div class="line"><a name="l04271"></a><span class="lineno"> 4271</span>&#160;          <a class="code" href="regex_8c.html#ae1a07ee1a4b73aa71754bce23d0690aa">DEBUG_PRINT3</a> (<span class="stringliteral">&quot;EXECUTING start_memory %d (%d):\n&quot;</span>, *p, p[1]);</div><div class="line"><a name="l04272"></a><span class="lineno"> 4272</span>&#160;</div><div class="line"><a name="l04273"></a><span class="lineno"> 4273</span>&#160;          <span class="comment">/* Find out if this group can match the empty string.  */</span></div><div class="line"><a name="l04274"></a><span class="lineno"> 4274</span>&#160;          p1 = p;               <span class="comment">/* To send to group_match_null_string_p.  */</span></div><div class="line"><a name="l04275"></a><span class="lineno"> 4275</span>&#160;</div><div class="line"><a name="l04276"></a><span class="lineno"> 4276</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="regex_8c.html#ac840f4f2ecf1841ed894bd361236715b">REG_MATCH_NULL_STRING_P</a> (reg_info[*p]) == <a class="code" href="regex_8c.html#a9fbdd9b78059994c85d9f064f9fa9ec3">MATCH_NULL_UNSET_VALUE</a>)</div><div class="line"><a name="l04277"></a><span class="lineno"> 4277</span>&#160;            <a class="code" href="regex_8c.html#ac840f4f2ecf1841ed894bd361236715b">REG_MATCH_NULL_STRING_P</a> (reg_info[*p])</div><div class="line"><a name="l04278"></a><span class="lineno"> 4278</span>&#160;              = <a class="code" href="regex_8c.html#ac1a3adc04ca27d22992ea483708c5812">group_match_null_string_p</a> (&amp;p1, pend, reg_info);</div><div class="line"><a name="l04279"></a><span class="lineno"> 4279</span>&#160;</div><div class="line"><a name="l04280"></a><span class="lineno"> 4280</span>&#160;          <span class="comment">/* Save the position in the string where we were the last time</span></div><div class="line"><a name="l04281"></a><span class="lineno"> 4281</span>&#160;<span class="comment">             we were at this open-group operator in case the group is</span></div><div class="line"><a name="l04282"></a><span class="lineno"> 4282</span>&#160;<span class="comment">             operated upon by a repetition operator, e.g., with `(a*)*b&#39;</span></div><div class="line"><a name="l04283"></a><span class="lineno"> 4283</span>&#160;<span class="comment">             against `ab&#39;; then we want to ignore where we are now in</span></div><div class="line"><a name="l04284"></a><span class="lineno"> 4284</span>&#160;<span class="comment">             the string in case this attempt to match fails.  */</span></div><div class="line"><a name="l04285"></a><span class="lineno"> 4285</span>&#160;          old_regstart[*p] = <a class="code" href="regex_8c.html#ac840f4f2ecf1841ed894bd361236715b">REG_MATCH_NULL_STRING_P</a> (reg_info[*p])</div><div class="line"><a name="l04286"></a><span class="lineno"> 4286</span>&#160;                             ? <a class="code" href="regex_8c.html#afefb76392029f59835538d01a0c13242">REG_UNSET</a> (regstart[*p]) ? d : regstart[*p]</div><div class="line"><a name="l04287"></a><span class="lineno"> 4287</span>&#160;                             : regstart[*p];</div><div class="line"><a name="l04288"></a><span class="lineno"> 4288</span>&#160;          <a class="code" href="regex_8c.html#aa56b1ff14ec552b5af8e9af50bc9d5cc">DEBUG_PRINT2</a> (<span class="stringliteral">&quot;  old_regstart: %d\n&quot;</span>,</div><div class="line"><a name="l04289"></a><span class="lineno"> 4289</span>&#160;                         <a class="code" href="regex_8c.html#a8bebab7ed279441748e37304f7a2c78a">POINTER_TO_OFFSET</a> (old_regstart[*p]));</div><div class="line"><a name="l04290"></a><span class="lineno"> 4290</span>&#160;</div><div class="line"><a name="l04291"></a><span class="lineno"> 4291</span>&#160;          regstart[*p] = d;</div><div class="line"><a name="l04292"></a><span class="lineno"> 4292</span>&#160;          <a class="code" href="regex_8c.html#aa56b1ff14ec552b5af8e9af50bc9d5cc">DEBUG_PRINT2</a> (<span class="stringliteral">&quot;  regstart: %d\n&quot;</span>, <a class="code" href="regex_8c.html#a8bebab7ed279441748e37304f7a2c78a">POINTER_TO_OFFSET</a> (regstart[*p]));</div><div class="line"><a name="l04293"></a><span class="lineno"> 4293</span>&#160;</div><div class="line"><a name="l04294"></a><span class="lineno"> 4294</span>&#160;          <a class="code" href="regex_8c.html#a4f6628b4b02e356efb3c4c8e6cf8eaff">IS_ACTIVE</a> (reg_info[*p]) = 1;</div><div class="line"><a name="l04295"></a><span class="lineno"> 4295</span>&#160;          <a class="code" href="regex_8c.html#a37aeb4969c6ded152f5be7582330e6e5">MATCHED_SOMETHING</a> (reg_info[*p]) = 0;</div><div class="line"><a name="l04296"></a><span class="lineno"> 4296</span>&#160;</div><div class="line"><a name="l04297"></a><span class="lineno"> 4297</span>&#160;          <span class="comment">/* Clear this whenever we change the register activity status.  */</span></div><div class="line"><a name="l04298"></a><span class="lineno"> 4298</span>&#160;          set_regs_matched_done = 0;</div><div class="line"><a name="l04299"></a><span class="lineno"> 4299</span>&#160;</div><div class="line"><a name="l04300"></a><span class="lineno"> 4300</span>&#160;          <span class="comment">/* This is the new highest active register.  */</span></div><div class="line"><a name="l04301"></a><span class="lineno"> 4301</span>&#160;          highest_active_reg = *p;</div><div class="line"><a name="l04302"></a><span class="lineno"> 4302</span>&#160;</div><div class="line"><a name="l04303"></a><span class="lineno"> 4303</span>&#160;          <span class="comment">/* If nothing was active before, this is the new lowest active</span></div><div class="line"><a name="l04304"></a><span class="lineno"> 4304</span>&#160;<span class="comment">             register.  */</span></div><div class="line"><a name="l04305"></a><span class="lineno"> 4305</span>&#160;          <span class="keywordflow">if</span> (lowest_active_reg == <a class="code" href="regex_8c.html#a508c8adae6628ee43b8498249272efb9">NO_LOWEST_ACTIVE_REG</a>)</div><div class="line"><a name="l04306"></a><span class="lineno"> 4306</span>&#160;            lowest_active_reg = *p;</div><div class="line"><a name="l04307"></a><span class="lineno"> 4307</span>&#160;</div><div class="line"><a name="l04308"></a><span class="lineno"> 4308</span>&#160;          <span class="comment">/* Move past the register number and inner group count.  */</span></div><div class="line"><a name="l04309"></a><span class="lineno"> 4309</span>&#160;          p += 2;</div><div class="line"><a name="l04310"></a><span class="lineno"> 4310</span>&#160;          just_past_start_mem = p;</div><div class="line"><a name="l04311"></a><span class="lineno"> 4311</span>&#160;</div><div class="line"><a name="l04312"></a><span class="lineno"> 4312</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l04313"></a><span class="lineno"> 4313</span>&#160;</div><div class="line"><a name="l04314"></a><span class="lineno"> 4314</span>&#160;</div><div class="line"><a name="l04315"></a><span class="lineno"> 4315</span>&#160;        <span class="comment">/* The stop_memory opcode represents the end of a group.  Its</span></div><div class="line"><a name="l04316"></a><span class="lineno"> 4316</span>&#160;<span class="comment">           arguments are the same as start_memory&#39;s: the register</span></div><div class="line"><a name="l04317"></a><span class="lineno"> 4317</span>&#160;<span class="comment">           number, and the number of inner groups.  */</span></div><div class="line"><a name="l04318"></a><span class="lineno"> 4318</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a6a42f30575b66116b79f4527493d0ce9">stop_memory</a>:</div><div class="line"><a name="l04319"></a><span class="lineno"> 4319</span>&#160;          <a class="code" href="regex_8c.html#ae1a07ee1a4b73aa71754bce23d0690aa">DEBUG_PRINT3</a> (<span class="stringliteral">&quot;EXECUTING stop_memory %d (%d):\n&quot;</span>, *p, p[1]);</div><div class="line"><a name="l04320"></a><span class="lineno"> 4320</span>&#160;</div><div class="line"><a name="l04321"></a><span class="lineno"> 4321</span>&#160;          <span class="comment">/* We need to save the string position the last time we were at</span></div><div class="line"><a name="l04322"></a><span class="lineno"> 4322</span>&#160;<span class="comment">             this close-group operator in case the group is operated</span></div><div class="line"><a name="l04323"></a><span class="lineno"> 4323</span>&#160;<span class="comment">             upon by a repetition operator, e.g., with `((a*)*(b*)*)*&#39;</span></div><div class="line"><a name="l04324"></a><span class="lineno"> 4324</span>&#160;<span class="comment">             against `aba&#39;; then we want to ignore where we are now in</span></div><div class="line"><a name="l04325"></a><span class="lineno"> 4325</span>&#160;<span class="comment">             the string in case this attempt to match fails.  */</span></div><div class="line"><a name="l04326"></a><span class="lineno"> 4326</span>&#160;          old_regend[*p] = <a class="code" href="regex_8c.html#ac840f4f2ecf1841ed894bd361236715b">REG_MATCH_NULL_STRING_P</a> (reg_info[*p])</div><div class="line"><a name="l04327"></a><span class="lineno"> 4327</span>&#160;                           ? <a class="code" href="regex_8c.html#afefb76392029f59835538d01a0c13242">REG_UNSET</a> (regend[*p]) ? d : regend[*p]</div><div class="line"><a name="l04328"></a><span class="lineno"> 4328</span>&#160;                           : regend[*p];</div><div class="line"><a name="l04329"></a><span class="lineno"> 4329</span>&#160;          <a class="code" href="regex_8c.html#aa56b1ff14ec552b5af8e9af50bc9d5cc">DEBUG_PRINT2</a> (<span class="stringliteral">&quot;      old_regend: %d\n&quot;</span>,</div><div class="line"><a name="l04330"></a><span class="lineno"> 4330</span>&#160;                         <a class="code" href="regex_8c.html#a8bebab7ed279441748e37304f7a2c78a">POINTER_TO_OFFSET</a> (old_regend[*p]));</div><div class="line"><a name="l04331"></a><span class="lineno"> 4331</span>&#160;</div><div class="line"><a name="l04332"></a><span class="lineno"> 4332</span>&#160;          regend[*p] = d;</div><div class="line"><a name="l04333"></a><span class="lineno"> 4333</span>&#160;          <a class="code" href="regex_8c.html#aa56b1ff14ec552b5af8e9af50bc9d5cc">DEBUG_PRINT2</a> (<span class="stringliteral">&quot;      regend: %d\n&quot;</span>, <a class="code" href="regex_8c.html#a8bebab7ed279441748e37304f7a2c78a">POINTER_TO_OFFSET</a> (regend[*p]));</div><div class="line"><a name="l04334"></a><span class="lineno"> 4334</span>&#160;</div><div class="line"><a name="l04335"></a><span class="lineno"> 4335</span>&#160;          <span class="comment">/* This register isn&#39;t active anymore.  */</span></div><div class="line"><a name="l04336"></a><span class="lineno"> 4336</span>&#160;          <a class="code" href="regex_8c.html#a4f6628b4b02e356efb3c4c8e6cf8eaff">IS_ACTIVE</a> (reg_info[*p]) = 0;</div><div class="line"><a name="l04337"></a><span class="lineno"> 4337</span>&#160;</div><div class="line"><a name="l04338"></a><span class="lineno"> 4338</span>&#160;          <span class="comment">/* Clear this whenever we change the register activity status.  */</span></div><div class="line"><a name="l04339"></a><span class="lineno"> 4339</span>&#160;          set_regs_matched_done = 0;</div><div class="line"><a name="l04340"></a><span class="lineno"> 4340</span>&#160;</div><div class="line"><a name="l04341"></a><span class="lineno"> 4341</span>&#160;          <span class="comment">/* If this was the only register active, nothing is active</span></div><div class="line"><a name="l04342"></a><span class="lineno"> 4342</span>&#160;<span class="comment">             anymore.  */</span></div><div class="line"><a name="l04343"></a><span class="lineno"> 4343</span>&#160;          <span class="keywordflow">if</span> (lowest_active_reg == highest_active_reg)</div><div class="line"><a name="l04344"></a><span class="lineno"> 4344</span>&#160;            {</div><div class="line"><a name="l04345"></a><span class="lineno"> 4345</span>&#160;              lowest_active_reg = <a class="code" href="regex_8c.html#a508c8adae6628ee43b8498249272efb9">NO_LOWEST_ACTIVE_REG</a>;</div><div class="line"><a name="l04346"></a><span class="lineno"> 4346</span>&#160;              highest_active_reg = <a class="code" href="regex_8c.html#ab79c167c4cd771eeb9f88cf07c8b66c2">NO_HIGHEST_ACTIVE_REG</a>;</div><div class="line"><a name="l04347"></a><span class="lineno"> 4347</span>&#160;            }</div><div class="line"><a name="l04348"></a><span class="lineno"> 4348</span>&#160;          <span class="keywordflow">else</span></div><div class="line"><a name="l04349"></a><span class="lineno"> 4349</span>&#160;            { <span class="comment">/* We must scan for the new highest active register, since</span></div><div class="line"><a name="l04350"></a><span class="lineno"> 4350</span>&#160;<span class="comment">                 it isn&#39;t necessarily one less than now: consider</span></div><div class="line"><a name="l04351"></a><span class="lineno"> 4351</span>&#160;<span class="comment">                 (a(b)c(d(e)f)g).  When group 3 ends, after the f), the</span></div><div class="line"><a name="l04352"></a><span class="lineno"> 4352</span>&#160;<span class="comment">                 new highest active register is 1.  */</span></div><div class="line"><a name="l04353"></a><span class="lineno"> 4353</span>&#160;              <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> r = *p - 1;</div><div class="line"><a name="l04354"></a><span class="lineno"> 4354</span>&#160;              <span class="keywordflow">while</span> (r &gt; 0 &amp;&amp; !<a class="code" href="regex_8c.html#a4f6628b4b02e356efb3c4c8e6cf8eaff">IS_ACTIVE</a> (reg_info[r]))</div><div class="line"><a name="l04355"></a><span class="lineno"> 4355</span>&#160;                r--;</div><div class="line"><a name="l04356"></a><span class="lineno"> 4356</span>&#160;</div><div class="line"><a name="l04357"></a><span class="lineno"> 4357</span>&#160;              <span class="comment">/* If we end up at register zero, that means that we saved</span></div><div class="line"><a name="l04358"></a><span class="lineno"> 4358</span>&#160;<span class="comment">                 the registers as the result of an `on_failure_jump&#39;, not</span></div><div class="line"><a name="l04359"></a><span class="lineno"> 4359</span>&#160;<span class="comment">                 a `start_memory&#39;, and we jumped to past the innermost</span></div><div class="line"><a name="l04360"></a><span class="lineno"> 4360</span>&#160;<span class="comment">                 `stop_memory&#39;.  For example, in ((.)*) we save</span></div><div class="line"><a name="l04361"></a><span class="lineno"> 4361</span>&#160;<span class="comment">                 registers 1 and 2 as a result of the *, but when we pop</span></div><div class="line"><a name="l04362"></a><span class="lineno"> 4362</span>&#160;<span class="comment">                 back to the second ), we are at the stop_memory 1.</span></div><div class="line"><a name="l04363"></a><span class="lineno"> 4363</span>&#160;<span class="comment">                 Thus, nothing is active.  */</span></div><div class="line"><a name="l04364"></a><span class="lineno"> 4364</span>&#160;              <span class="keywordflow">if</span> (r == 0)</div><div class="line"><a name="l04365"></a><span class="lineno"> 4365</span>&#160;                {</div><div class="line"><a name="l04366"></a><span class="lineno"> 4366</span>&#160;                  lowest_active_reg = <a class="code" href="regex_8c.html#a508c8adae6628ee43b8498249272efb9">NO_LOWEST_ACTIVE_REG</a>;</div><div class="line"><a name="l04367"></a><span class="lineno"> 4367</span>&#160;                  highest_active_reg = <a class="code" href="regex_8c.html#ab79c167c4cd771eeb9f88cf07c8b66c2">NO_HIGHEST_ACTIVE_REG</a>;</div><div class="line"><a name="l04368"></a><span class="lineno"> 4368</span>&#160;                }</div><div class="line"><a name="l04369"></a><span class="lineno"> 4369</span>&#160;              <span class="keywordflow">else</span></div><div class="line"><a name="l04370"></a><span class="lineno"> 4370</span>&#160;                highest_active_reg = r;</div><div class="line"><a name="l04371"></a><span class="lineno"> 4371</span>&#160;            }</div><div class="line"><a name="l04372"></a><span class="lineno"> 4372</span>&#160;</div><div class="line"><a name="l04373"></a><span class="lineno"> 4373</span>&#160;          <span class="comment">/* If just failed to match something this time around with a</span></div><div class="line"><a name="l04374"></a><span class="lineno"> 4374</span>&#160;<span class="comment">             group that&#39;s operated on by a repetition operator, try to</span></div><div class="line"><a name="l04375"></a><span class="lineno"> 4375</span>&#160;<span class="comment">             force exit from the ``loop&#39;&#39;, and restore the register</span></div><div class="line"><a name="l04376"></a><span class="lineno"> 4376</span>&#160;<span class="comment">             information for this group that we had before trying this</span></div><div class="line"><a name="l04377"></a><span class="lineno"> 4377</span>&#160;<span class="comment">             last match.  */</span></div><div class="line"><a name="l04378"></a><span class="lineno"> 4378</span>&#160;          <span class="keywordflow">if</span> ((!<a class="code" href="regex_8c.html#a37aeb4969c6ded152f5be7582330e6e5">MATCHED_SOMETHING</a> (reg_info[*p])</div><div class="line"><a name="l04379"></a><span class="lineno"> 4379</span>&#160;               || just_past_start_mem == p - 1)</div><div class="line"><a name="l04380"></a><span class="lineno"> 4380</span>&#160;              &amp;&amp; (p + 2) &lt; pend)</div><div class="line"><a name="l04381"></a><span class="lineno"> 4381</span>&#160;            {</div><div class="line"><a name="l04382"></a><span class="lineno"> 4382</span>&#160;              <span class="keywordtype">boolean</span> is_a_jump_n = <span class="keyword">false</span>;</div><div class="line"><a name="l04383"></a><span class="lineno"> 4383</span>&#160;</div><div class="line"><a name="l04384"></a><span class="lineno"> 4384</span>&#160;              p1 = p + 2;</div><div class="line"><a name="l04385"></a><span class="lineno"> 4385</span>&#160;              mcnt = 0;</div><div class="line"><a name="l04386"></a><span class="lineno"> 4386</span>&#160;              <span class="keywordflow">switch</span> ((re_opcode_t) *p1++)</div><div class="line"><a name="l04387"></a><span class="lineno"> 4387</span>&#160;                {</div><div class="line"><a name="l04388"></a><span class="lineno"> 4388</span>&#160;                  <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a333721a24859c29322c8abdae4159e1b">jump_n</a>:</div><div class="line"><a name="l04389"></a><span class="lineno"> 4389</span>&#160;                    is_a_jump_n = <span class="keyword">true</span>;</div><div class="line"><a name="l04390"></a><span class="lineno"> 4390</span>&#160;                  <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a24cdcea4f39ca8613374deb4bfe5b2cb">pop_failure_jump</a>:</div><div class="line"><a name="l04391"></a><span class="lineno"> 4391</span>&#160;                  <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a54819e2968ab91bf6ad492f131d7f37b">maybe_pop_jump</a>:</div><div class="line"><a name="l04392"></a><span class="lineno"> 4392</span>&#160;                  <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a5a08a3c1fa135350961630d2f9c2b849">jump</a>:</div><div class="line"><a name="l04393"></a><span class="lineno"> 4393</span>&#160;                  <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a3918fb85c0fd4b2f8c84afad14836eba">dummy_failure_jump</a>:</div><div class="line"><a name="l04394"></a><span class="lineno"> 4394</span>&#160;                    <a class="code" href="regex_8c.html#abf958c753956f073a33bd336660e9038">EXTRACT_NUMBER_AND_INCR</a> (mcnt, p1);</div><div class="line"><a name="l04395"></a><span class="lineno"> 4395</span>&#160;                    <span class="keywordflow">if</span> (is_a_jump_n)</div><div class="line"><a name="l04396"></a><span class="lineno"> 4396</span>&#160;                      p1 += 2;</div><div class="line"><a name="l04397"></a><span class="lineno"> 4397</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l04398"></a><span class="lineno"> 4398</span>&#160;</div><div class="line"><a name="l04399"></a><span class="lineno"> 4399</span>&#160;                  <span class="keywordflow">default</span>:</div><div class="line"><a name="l04400"></a><span class="lineno"> 4400</span>&#160;                    <span class="comment">/* do nothing */</span> ;</div><div class="line"><a name="l04401"></a><span class="lineno"> 4401</span>&#160;                }</div><div class="line"><a name="l04402"></a><span class="lineno"> 4402</span>&#160;              p1 += mcnt;</div><div class="line"><a name="l04403"></a><span class="lineno"> 4403</span>&#160;</div><div class="line"><a name="l04404"></a><span class="lineno"> 4404</span>&#160;              <span class="comment">/* If the next operation is a jump backwards in the pattern</span></div><div class="line"><a name="l04405"></a><span class="lineno"> 4405</span>&#160;<span class="comment">                 to an on_failure_jump right before the start_memory</span></div><div class="line"><a name="l04406"></a><span class="lineno"> 4406</span>&#160;<span class="comment">                 corresponding to this stop_memory, exit from the loop</span></div><div class="line"><a name="l04407"></a><span class="lineno"> 4407</span>&#160;<span class="comment">                 by forcing a failure after pushing on the stack the</span></div><div class="line"><a name="l04408"></a><span class="lineno"> 4408</span>&#160;<span class="comment">                 on_failure_jump&#39;s jump in the pattern, and d.  */</span></div><div class="line"><a name="l04409"></a><span class="lineno"> 4409</span>&#160;              <span class="keywordflow">if</span> (mcnt &lt; 0 &amp;&amp; (re_opcode_t) *p1 == <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a5ca3d8a56cc5259243bcaffedd070287">on_failure_jump</a></div><div class="line"><a name="l04410"></a><span class="lineno"> 4410</span>&#160;                  &amp;&amp; (re_opcode_t) p1[3] == <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118affba14708233f194802bf7981fd7717e">start_memory</a> &amp;&amp; p1[4] == *p)</div><div class="line"><a name="l04411"></a><span class="lineno"> 4411</span>&#160;                {</div><div class="line"><a name="l04412"></a><span class="lineno"> 4412</span>&#160;                  <span class="comment">/* If this group ever matched anything, then restore</span></div><div class="line"><a name="l04413"></a><span class="lineno"> 4413</span>&#160;<span class="comment">                     what its registers were before trying this last</span></div><div class="line"><a name="l04414"></a><span class="lineno"> 4414</span>&#160;<span class="comment">                     failed match, e.g., with `(a*)*b&#39; against `ab&#39; for</span></div><div class="line"><a name="l04415"></a><span class="lineno"> 4415</span>&#160;<span class="comment">                     regstart[1], and, e.g., with `((a*)*(b*)*)*&#39;</span></div><div class="line"><a name="l04416"></a><span class="lineno"> 4416</span>&#160;<span class="comment">                     against `aba&#39; for regend[3].</span></div><div class="line"><a name="l04417"></a><span class="lineno"> 4417</span>&#160;<span class="comment"></span></div><div class="line"><a name="l04418"></a><span class="lineno"> 4418</span>&#160;<span class="comment">                     Also restore the registers for inner groups for,</span></div><div class="line"><a name="l04419"></a><span class="lineno"> 4419</span>&#160;<span class="comment">                     e.g., `((a*)(b*))*&#39; against `aba&#39; (register 3 would</span></div><div class="line"><a name="l04420"></a><span class="lineno"> 4420</span>&#160;<span class="comment">                     otherwise get trashed).  */</span></div><div class="line"><a name="l04421"></a><span class="lineno"> 4421</span>&#160;</div><div class="line"><a name="l04422"></a><span class="lineno"> 4422</span>&#160;                  <span class="keywordflow">if</span> (<a class="code" href="regex_8c.html#ad4e9639db811e6b09f31ff92466b404e">EVER_MATCHED_SOMETHING</a> (reg_info[*p]))</div><div class="line"><a name="l04423"></a><span class="lineno"> 4423</span>&#160;                    {</div><div class="line"><a name="l04424"></a><span class="lineno"> 4424</span>&#160;                      <span class="keywordtype">unsigned</span> r;</div><div class="line"><a name="l04425"></a><span class="lineno"> 4425</span>&#160;</div><div class="line"><a name="l04426"></a><span class="lineno"> 4426</span>&#160;                      <a class="code" href="regex_8c.html#ad4e9639db811e6b09f31ff92466b404e">EVER_MATCHED_SOMETHING</a> (reg_info[*p]) = 0;</div><div class="line"><a name="l04427"></a><span class="lineno"> 4427</span>&#160;</div><div class="line"><a name="l04428"></a><span class="lineno"> 4428</span>&#160;                      <span class="comment">/* Restore this and inner groups&#39; (if any) registers.  */</span></div><div class="line"><a name="l04429"></a><span class="lineno"> 4429</span>&#160;                      <span class="keywordflow">for</span> (r = *p; r &lt; (unsigned) *p + (<span class="keywordtype">unsigned</span>) *(p + 1);</div><div class="line"><a name="l04430"></a><span class="lineno"> 4430</span>&#160;                           r++)</div><div class="line"><a name="l04431"></a><span class="lineno"> 4431</span>&#160;                        {</div><div class="line"><a name="l04432"></a><span class="lineno"> 4432</span>&#160;                          regstart[r] = old_regstart[r];</div><div class="line"><a name="l04433"></a><span class="lineno"> 4433</span>&#160;</div><div class="line"><a name="l04434"></a><span class="lineno"> 4434</span>&#160;                          <span class="comment">/* xx why this test?  */</span></div><div class="line"><a name="l04435"></a><span class="lineno"> 4435</span>&#160;                          <span class="keywordflow">if</span> (old_regend[r] &gt;= regstart[r])</div><div class="line"><a name="l04436"></a><span class="lineno"> 4436</span>&#160;                            regend[r] = old_regend[r];</div><div class="line"><a name="l04437"></a><span class="lineno"> 4437</span>&#160;                        }</div><div class="line"><a name="l04438"></a><span class="lineno"> 4438</span>&#160;                    }</div><div class="line"><a name="l04439"></a><span class="lineno"> 4439</span>&#160;                  p1++;</div><div class="line"><a name="l04440"></a><span class="lineno"> 4440</span>&#160;                  <a class="code" href="regex_8c.html#abf958c753956f073a33bd336660e9038">EXTRACT_NUMBER_AND_INCR</a> (mcnt, p1);</div><div class="line"><a name="l04441"></a><span class="lineno"> 4441</span>&#160;                  <a class="code" href="regex_8c.html#a74904744b0c1f8fe8cb2bf1584da2b3b">PUSH_FAILURE_POINT</a> (p1 + mcnt, d, -2);</div><div class="line"><a name="l04442"></a><span class="lineno"> 4442</span>&#160;</div><div class="line"><a name="l04443"></a><span class="lineno"> 4443</span>&#160;                  <span class="keywordflow">goto</span> fail;</div><div class="line"><a name="l04444"></a><span class="lineno"> 4444</span>&#160;                }</div><div class="line"><a name="l04445"></a><span class="lineno"> 4445</span>&#160;            }</div><div class="line"><a name="l04446"></a><span class="lineno"> 4446</span>&#160;</div><div class="line"><a name="l04447"></a><span class="lineno"> 4447</span>&#160;          <span class="comment">/* Move past the register number and the inner group count.  */</span></div><div class="line"><a name="l04448"></a><span class="lineno"> 4448</span>&#160;          p += 2;</div><div class="line"><a name="l04449"></a><span class="lineno"> 4449</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l04450"></a><span class="lineno"> 4450</span>&#160;</div><div class="line"><a name="l04451"></a><span class="lineno"> 4451</span>&#160;</div><div class="line"><a name="l04452"></a><span class="lineno"> 4452</span>&#160;        <span class="comment">/* &lt;digit&gt; has been turned into a `duplicate&#39; command which is</span></div><div class="line"><a name="l04453"></a><span class="lineno"> 4453</span>&#160;<span class="comment">           followed by the numeric value of &lt;digit&gt; as the register number.  */</span></div><div class="line"><a name="l04454"></a><span class="lineno"> 4454</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a0c02fe9db75630f52c6e9e44dd55d9de">duplicate</a>:</div><div class="line"><a name="l04455"></a><span class="lineno"> 4455</span>&#160;          {</div><div class="line"><a name="l04456"></a><span class="lineno"> 4456</span>&#160;            <span class="keyword">register</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *d2, *dend2;</div><div class="line"><a name="l04457"></a><span class="lineno"> 4457</span>&#160;            <span class="keywordtype">int</span> regno = *p++;   <span class="comment">/* Get which register to match against.  */</span></div><div class="line"><a name="l04458"></a><span class="lineno"> 4458</span>&#160;            <a class="code" href="regex_8c.html#aa56b1ff14ec552b5af8e9af50bc9d5cc">DEBUG_PRINT2</a> (<span class="stringliteral">&quot;EXECUTING duplicate %d.\n&quot;</span>, regno);</div><div class="line"><a name="l04459"></a><span class="lineno"> 4459</span>&#160;</div><div class="line"><a name="l04460"></a><span class="lineno"> 4460</span>&#160;            <span class="comment">/* Can&#39;t back reference a group which we&#39;ve never matched.  */</span></div><div class="line"><a name="l04461"></a><span class="lineno"> 4461</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="regex_8c.html#afefb76392029f59835538d01a0c13242">REG_UNSET</a> (regstart[regno]) || <a class="code" href="regex_8c.html#afefb76392029f59835538d01a0c13242">REG_UNSET</a> (regend[regno]))</div><div class="line"><a name="l04462"></a><span class="lineno"> 4462</span>&#160;              <span class="keywordflow">goto</span> fail;</div><div class="line"><a name="l04463"></a><span class="lineno"> 4463</span>&#160;</div><div class="line"><a name="l04464"></a><span class="lineno"> 4464</span>&#160;            <span class="comment">/* Where in input to try to start matching.  */</span></div><div class="line"><a name="l04465"></a><span class="lineno"> 4465</span>&#160;            d2 = regstart[regno];</div><div class="line"><a name="l04466"></a><span class="lineno"> 4466</span>&#160;</div><div class="line"><a name="l04467"></a><span class="lineno"> 4467</span>&#160;            <span class="comment">/* Where to stop matching; if both the place to start and</span></div><div class="line"><a name="l04468"></a><span class="lineno"> 4468</span>&#160;<span class="comment">               the place to stop matching are in the same string, then</span></div><div class="line"><a name="l04469"></a><span class="lineno"> 4469</span>&#160;<span class="comment">               set to the place to stop, otherwise, for now have to use</span></div><div class="line"><a name="l04470"></a><span class="lineno"> 4470</span>&#160;<span class="comment">               the end of the first string.  */</span></div><div class="line"><a name="l04471"></a><span class="lineno"> 4471</span>&#160;</div><div class="line"><a name="l04472"></a><span class="lineno"> 4472</span>&#160;            dend2 = ((<a class="code" href="regex_8c.html#a490c47f87b80eb6afdb77510567659e4">FIRST_STRING_P</a> (regstart[regno])</div><div class="line"><a name="l04473"></a><span class="lineno"> 4473</span>&#160;                      == <a class="code" href="regex_8c.html#a490c47f87b80eb6afdb77510567659e4">FIRST_STRING_P</a> (regend[regno]))</div><div class="line"><a name="l04474"></a><span class="lineno"> 4474</span>&#160;                     ? regend[regno] : end_match_1);</div><div class="line"><a name="l04475"></a><span class="lineno"> 4475</span>&#160;            <span class="keywordflow">for</span> (;;)</div><div class="line"><a name="l04476"></a><span class="lineno"> 4476</span>&#160;              {</div><div class="line"><a name="l04477"></a><span class="lineno"> 4477</span>&#160;                <span class="comment">/* If necessary, advance to next segment in register</span></div><div class="line"><a name="l04478"></a><span class="lineno"> 4478</span>&#160;<span class="comment">                   contents.  */</span></div><div class="line"><a name="l04479"></a><span class="lineno"> 4479</span>&#160;                <span class="keywordflow">while</span> (d2 == dend2)</div><div class="line"><a name="l04480"></a><span class="lineno"> 4480</span>&#160;                  {</div><div class="line"><a name="l04481"></a><span class="lineno"> 4481</span>&#160;                    <span class="keywordflow">if</span> (dend2 == end_match_2) <span class="keywordflow">break</span>;</div><div class="line"><a name="l04482"></a><span class="lineno"> 4482</span>&#160;                    <span class="keywordflow">if</span> (dend2 == regend[regno]) <span class="keywordflow">break</span>;</div><div class="line"><a name="l04483"></a><span class="lineno"> 4483</span>&#160;</div><div class="line"><a name="l04484"></a><span class="lineno"> 4484</span>&#160;                    <span class="comment">/* End of string1 =&gt; advance to string2. */</span></div><div class="line"><a name="l04485"></a><span class="lineno"> 4485</span>&#160;                    d2 = string2;</div><div class="line"><a name="l04486"></a><span class="lineno"> 4486</span>&#160;                    dend2 = regend[regno];</div><div class="line"><a name="l04487"></a><span class="lineno"> 4487</span>&#160;                  }</div><div class="line"><a name="l04488"></a><span class="lineno"> 4488</span>&#160;                <span class="comment">/* At end of register contents =&gt; success */</span></div><div class="line"><a name="l04489"></a><span class="lineno"> 4489</span>&#160;                <span class="keywordflow">if</span> (d2 == dend2) <span class="keywordflow">break</span>;</div><div class="line"><a name="l04490"></a><span class="lineno"> 4490</span>&#160;</div><div class="line"><a name="l04491"></a><span class="lineno"> 4491</span>&#160;                <span class="comment">/* If necessary, advance to next segment in data.  */</span></div><div class="line"><a name="l04492"></a><span class="lineno"> 4492</span>&#160;                <a class="code" href="regex_8c.html#a03e91c701217af9b9faab62cb2a65d7d">PREFETCH</a> ();</div><div class="line"><a name="l04493"></a><span class="lineno"> 4493</span>&#160;</div><div class="line"><a name="l04494"></a><span class="lineno"> 4494</span>&#160;                <span class="comment">/* How many characters left in this segment to match.  */</span></div><div class="line"><a name="l04495"></a><span class="lineno"> 4495</span>&#160;                mcnt = dend - d;</div><div class="line"><a name="l04496"></a><span class="lineno"> 4496</span>&#160;</div><div class="line"><a name="l04497"></a><span class="lineno"> 4497</span>&#160;                <span class="comment">/* Want how many consecutive characters we can match in</span></div><div class="line"><a name="l04498"></a><span class="lineno"> 4498</span>&#160;<span class="comment">                   one shot, so, if necessary, adjust the count.  */</span></div><div class="line"><a name="l04499"></a><span class="lineno"> 4499</span>&#160;                <span class="keywordflow">if</span> (mcnt &gt; dend2 - d2)</div><div class="line"><a name="l04500"></a><span class="lineno"> 4500</span>&#160;                  mcnt = dend2 - d2;</div><div class="line"><a name="l04501"></a><span class="lineno"> 4501</span>&#160;</div><div class="line"><a name="l04502"></a><span class="lineno"> 4502</span>&#160;                <span class="comment">/* Compare that many; failure if mismatch, else move</span></div><div class="line"><a name="l04503"></a><span class="lineno"> 4503</span>&#160;<span class="comment">                   past them.  */</span></div><div class="line"><a name="l04504"></a><span class="lineno"> 4504</span>&#160;                <span class="keywordflow">if</span> (translate</div><div class="line"><a name="l04505"></a><span class="lineno"> 4505</span>&#160;                    ? <a class="code" href="regex_8c.html#a831fca3c806cff281a70c8757c40b134">bcmp_translate</a> (d, d2, mcnt, translate)</div><div class="line"><a name="l04506"></a><span class="lineno"> 4506</span>&#160;                    : bcmp (d, d2, mcnt))</div><div class="line"><a name="l04507"></a><span class="lineno"> 4507</span>&#160;                  <span class="keywordflow">goto</span> fail;</div><div class="line"><a name="l04508"></a><span class="lineno"> 4508</span>&#160;                d += mcnt, d2 += mcnt;</div><div class="line"><a name="l04509"></a><span class="lineno"> 4509</span>&#160;</div><div class="line"><a name="l04510"></a><span class="lineno"> 4510</span>&#160;                <span class="comment">/* Do this because we&#39;ve match some characters.  */</span></div><div class="line"><a name="l04511"></a><span class="lineno"> 4511</span>&#160;                <a class="code" href="regex_8c.html#aa286396ee78a5823c6bedd72e303e4c9">SET_REGS_MATCHED</a> ();</div><div class="line"><a name="l04512"></a><span class="lineno"> 4512</span>&#160;              }</div><div class="line"><a name="l04513"></a><span class="lineno"> 4513</span>&#160;          }</div><div class="line"><a name="l04514"></a><span class="lineno"> 4514</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l04515"></a><span class="lineno"> 4515</span>&#160;</div><div class="line"><a name="l04516"></a><span class="lineno"> 4516</span>&#160;</div><div class="line"><a name="l04517"></a><span class="lineno"> 4517</span>&#160;        <span class="comment">/* begline matches the empty string at the beginning of the string</span></div><div class="line"><a name="l04518"></a><span class="lineno"> 4518</span>&#160;<span class="comment">           (unless `not_bol&#39; is set in `bufp&#39;), and, if</span></div><div class="line"><a name="l04519"></a><span class="lineno"> 4519</span>&#160;<span class="comment">           `newline_anchor&#39; is set, after newlines.  */</span></div><div class="line"><a name="l04520"></a><span class="lineno"> 4520</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a4780b4642f63093c414b1833e2d40107">begline</a>:</div><div class="line"><a name="l04521"></a><span class="lineno"> 4521</span>&#160;          <a class="code" href="regex_8c.html#a90a312923984a45f83767acea95b84a1">DEBUG_PRINT1</a> (<span class="stringliteral">&quot;EXECUTING begline.\n&quot;</span>);</div><div class="line"><a name="l04522"></a><span class="lineno"> 4522</span>&#160;</div><div class="line"><a name="l04523"></a><span class="lineno"> 4523</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="regex_8c.html#a4ae509096aba99683d03e7731c8e1095">AT_STRINGS_BEG</a> (d))</div><div class="line"><a name="l04524"></a><span class="lineno"> 4524</span>&#160;            {</div><div class="line"><a name="l04525"></a><span class="lineno"> 4525</span>&#160;              <span class="keywordflow">if</span> (!bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a1e21330e18a5a87f4803932c4af32881">not_bol</a>) <span class="keywordflow">break</span>;</div><div class="line"><a name="l04526"></a><span class="lineno"> 4526</span>&#160;            }</div><div class="line"><a name="l04527"></a><span class="lineno"> 4527</span>&#160;          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (d[-1] == <span class="charliteral">&#39;\n&#39;</span> &amp;&amp; bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a8d2bf18d174b513250c8dab7a01f156e">newline_anchor</a>)</div><div class="line"><a name="l04528"></a><span class="lineno"> 4528</span>&#160;            {</div><div class="line"><a name="l04529"></a><span class="lineno"> 4529</span>&#160;              <span class="keywordflow">break</span>;</div><div class="line"><a name="l04530"></a><span class="lineno"> 4530</span>&#160;            }</div><div class="line"><a name="l04531"></a><span class="lineno"> 4531</span>&#160;          <span class="comment">/* In all other cases, we fail.  */</span></div><div class="line"><a name="l04532"></a><span class="lineno"> 4532</span>&#160;          <span class="keywordflow">goto</span> fail;</div><div class="line"><a name="l04533"></a><span class="lineno"> 4533</span>&#160;</div><div class="line"><a name="l04534"></a><span class="lineno"> 4534</span>&#160;</div><div class="line"><a name="l04535"></a><span class="lineno"> 4535</span>&#160;        <span class="comment">/* endline is the dual of begline.  */</span></div><div class="line"><a name="l04536"></a><span class="lineno"> 4536</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a0556771866997767489c4da274f15aa4">endline</a>:</div><div class="line"><a name="l04537"></a><span class="lineno"> 4537</span>&#160;          <a class="code" href="regex_8c.html#a90a312923984a45f83767acea95b84a1">DEBUG_PRINT1</a> (<span class="stringliteral">&quot;EXECUTING endline.\n&quot;</span>);</div><div class="line"><a name="l04538"></a><span class="lineno"> 4538</span>&#160;</div><div class="line"><a name="l04539"></a><span class="lineno"> 4539</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="regex_8c.html#a828f1cb8f3855b8656267c902effad75">AT_STRINGS_END</a> (d))</div><div class="line"><a name="l04540"></a><span class="lineno"> 4540</span>&#160;            {</div><div class="line"><a name="l04541"></a><span class="lineno"> 4541</span>&#160;              <span class="keywordflow">if</span> (!bufp-&gt;<a class="code" href="structre__pattern__buffer.html#ab6ca2aea079c8ac7c399dfbac8b8d3a4">not_eol</a>) <span class="keywordflow">break</span>;</div><div class="line"><a name="l04542"></a><span class="lineno"> 4542</span>&#160;            }</div><div class="line"><a name="l04543"></a><span class="lineno"> 4543</span>&#160;</div><div class="line"><a name="l04544"></a><span class="lineno"> 4544</span>&#160;          <span class="comment">/* We have to ``prefetch&#39;&#39; the next character.  */</span></div><div class="line"><a name="l04545"></a><span class="lineno"> 4545</span>&#160;          <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((d == end1 ? *string2 : *d) == <span class="charliteral">&#39;\n&#39;</span></div><div class="line"><a name="l04546"></a><span class="lineno"> 4546</span>&#160;                   &amp;&amp; bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a8d2bf18d174b513250c8dab7a01f156e">newline_anchor</a>)</div><div class="line"><a name="l04547"></a><span class="lineno"> 4547</span>&#160;            {</div><div class="line"><a name="l04548"></a><span class="lineno"> 4548</span>&#160;              <span class="keywordflow">break</span>;</div><div class="line"><a name="l04549"></a><span class="lineno"> 4549</span>&#160;            }</div><div class="line"><a name="l04550"></a><span class="lineno"> 4550</span>&#160;          <span class="keywordflow">goto</span> fail;</div><div class="line"><a name="l04551"></a><span class="lineno"> 4551</span>&#160;</div><div class="line"><a name="l04552"></a><span class="lineno"> 4552</span>&#160;</div><div class="line"><a name="l04553"></a><span class="lineno"> 4553</span>&#160;        <span class="comment">/* Match at the very beginning of the data.  */</span></div><div class="line"><a name="l04554"></a><span class="lineno"> 4554</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118ab428f43b6557e8dfc45e452a8891b598">begbuf</a>:</div><div class="line"><a name="l04555"></a><span class="lineno"> 4555</span>&#160;          <a class="code" href="regex_8c.html#a90a312923984a45f83767acea95b84a1">DEBUG_PRINT1</a> (<span class="stringliteral">&quot;EXECUTING begbuf.\n&quot;</span>);</div><div class="line"><a name="l04556"></a><span class="lineno"> 4556</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="regex_8c.html#a4ae509096aba99683d03e7731c8e1095">AT_STRINGS_BEG</a> (d))</div><div class="line"><a name="l04557"></a><span class="lineno"> 4557</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l04558"></a><span class="lineno"> 4558</span>&#160;          <span class="keywordflow">goto</span> fail;</div><div class="line"><a name="l04559"></a><span class="lineno"> 4559</span>&#160;</div><div class="line"><a name="l04560"></a><span class="lineno"> 4560</span>&#160;</div><div class="line"><a name="l04561"></a><span class="lineno"> 4561</span>&#160;        <span class="comment">/* Match at the very end of the data.  */</span></div><div class="line"><a name="l04562"></a><span class="lineno"> 4562</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a4962434097279c747aa6ba59df478775">endbuf</a>:</div><div class="line"><a name="l04563"></a><span class="lineno"> 4563</span>&#160;          <a class="code" href="regex_8c.html#a90a312923984a45f83767acea95b84a1">DEBUG_PRINT1</a> (<span class="stringliteral">&quot;EXECUTING endbuf.\n&quot;</span>);</div><div class="line"><a name="l04564"></a><span class="lineno"> 4564</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="regex_8c.html#a828f1cb8f3855b8656267c902effad75">AT_STRINGS_END</a> (d))</div><div class="line"><a name="l04565"></a><span class="lineno"> 4565</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l04566"></a><span class="lineno"> 4566</span>&#160;          <span class="keywordflow">goto</span> fail;</div><div class="line"><a name="l04567"></a><span class="lineno"> 4567</span>&#160;</div><div class="line"><a name="l04568"></a><span class="lineno"> 4568</span>&#160;</div><div class="line"><a name="l04569"></a><span class="lineno"> 4569</span>&#160;        <span class="comment">/* on_failure_keep_string_jump is used to optimize `.*\n&#39;.  It</span></div><div class="line"><a name="l04570"></a><span class="lineno"> 4570</span>&#160;<span class="comment">           pushes NULL as the value for the string on the stack.  Then</span></div><div class="line"><a name="l04571"></a><span class="lineno"> 4571</span>&#160;<span class="comment">           `pop_failure_point&#39; will keep the current value for the</span></div><div class="line"><a name="l04572"></a><span class="lineno"> 4572</span>&#160;<span class="comment">           string, instead of restoring it.  To see why, consider</span></div><div class="line"><a name="l04573"></a><span class="lineno"> 4573</span>&#160;<span class="comment">           matching `foo\nbar&#39; against `.*\n&#39;.  The .* matches the foo;</span></div><div class="line"><a name="l04574"></a><span class="lineno"> 4574</span>&#160;<span class="comment">           then the . fails against the \n.  But the next thing we want</span></div><div class="line"><a name="l04575"></a><span class="lineno"> 4575</span>&#160;<span class="comment">           to do is match the \n against the \n; if we restored the</span></div><div class="line"><a name="l04576"></a><span class="lineno"> 4576</span>&#160;<span class="comment">           string value, we would be back at the foo.</span></div><div class="line"><a name="l04577"></a><span class="lineno"> 4577</span>&#160;<span class="comment"></span></div><div class="line"><a name="l04578"></a><span class="lineno"> 4578</span>&#160;<span class="comment">           Because this is used only in specific cases, we don&#39;t need to</span></div><div class="line"><a name="l04579"></a><span class="lineno"> 4579</span>&#160;<span class="comment">           check all the things that `on_failure_jump&#39; does, to make</span></div><div class="line"><a name="l04580"></a><span class="lineno"> 4580</span>&#160;<span class="comment">           sure the right things get saved on the stack.  Hence we don&#39;t</span></div><div class="line"><a name="l04581"></a><span class="lineno"> 4581</span>&#160;<span class="comment">           share its code.  The only reason to push anything on the</span></div><div class="line"><a name="l04582"></a><span class="lineno"> 4582</span>&#160;<span class="comment">           stack at all is that otherwise we would have to change</span></div><div class="line"><a name="l04583"></a><span class="lineno"> 4583</span>&#160;<span class="comment">           `anychar&#39;s code to do something besides goto fail in this</span></div><div class="line"><a name="l04584"></a><span class="lineno"> 4584</span>&#160;<span class="comment">           case; that seems worse than this.  */</span></div><div class="line"><a name="l04585"></a><span class="lineno"> 4585</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118adbebd35172fa7358845d6dd61727883b">on_failure_keep_string_jump</a>:</div><div class="line"><a name="l04586"></a><span class="lineno"> 4586</span>&#160;          <a class="code" href="regex_8c.html#a90a312923984a45f83767acea95b84a1">DEBUG_PRINT1</a> (<span class="stringliteral">&quot;EXECUTING on_failure_keep_string_jump&quot;</span>);</div><div class="line"><a name="l04587"></a><span class="lineno"> 4587</span>&#160;</div><div class="line"><a name="l04588"></a><span class="lineno"> 4588</span>&#160;          <a class="code" href="regex_8c.html#abf958c753956f073a33bd336660e9038">EXTRACT_NUMBER_AND_INCR</a> (mcnt, p);</div><div class="line"><a name="l04589"></a><span class="lineno"> 4589</span>&#160;<span class="preprocessor">#ifdef _LIBC</span></div><div class="line"><a name="l04590"></a><span class="lineno"> 4590</span>&#160;          <a class="code" href="regex_8c.html#ae1a07ee1a4b73aa71754bce23d0690aa">DEBUG_PRINT3</a> (<span class="stringliteral">&quot; %d (to %p):\n&quot;</span>, mcnt, p + mcnt);</div><div class="line"><a name="l04591"></a><span class="lineno"> 4591</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l04592"></a><span class="lineno"> 4592</span>&#160;          <a class="code" href="regex_8c.html#ae1a07ee1a4b73aa71754bce23d0690aa">DEBUG_PRINT3</a> (<span class="stringliteral">&quot; %d (to 0x%x):\n&quot;</span>, mcnt, p + mcnt);</div><div class="line"><a name="l04593"></a><span class="lineno"> 4593</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04594"></a><span class="lineno"> 4594</span>&#160;</div><div class="line"><a name="l04595"></a><span class="lineno"> 4595</span>&#160;          <a class="code" href="regex_8c.html#a74904744b0c1f8fe8cb2bf1584da2b3b">PUSH_FAILURE_POINT</a> (p + mcnt, <a class="code" href="regex_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -2);</div><div class="line"><a name="l04596"></a><span class="lineno"> 4596</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l04597"></a><span class="lineno"> 4597</span>&#160;</div><div class="line"><a name="l04598"></a><span class="lineno"> 4598</span>&#160;</div><div class="line"><a name="l04599"></a><span class="lineno"> 4599</span>&#160;        <span class="comment">/* Uses of on_failure_jump:</span></div><div class="line"><a name="l04600"></a><span class="lineno"> 4600</span>&#160;<span class="comment"></span></div><div class="line"><a name="l04601"></a><span class="lineno"> 4601</span>&#160;<span class="comment">           Each alternative starts with an on_failure_jump that points</span></div><div class="line"><a name="l04602"></a><span class="lineno"> 4602</span>&#160;<span class="comment">           to the beginning of the next alternative.  Each alternative</span></div><div class="line"><a name="l04603"></a><span class="lineno"> 4603</span>&#160;<span class="comment">           except the last ends with a jump that in effect jumps past</span></div><div class="line"><a name="l04604"></a><span class="lineno"> 4604</span>&#160;<span class="comment">           the rest of the alternatives.  (They really jump to the</span></div><div class="line"><a name="l04605"></a><span class="lineno"> 4605</span>&#160;<span class="comment">           ending jump of the following alternative, because tensioning</span></div><div class="line"><a name="l04606"></a><span class="lineno"> 4606</span>&#160;<span class="comment">           these jumps is a hassle.)</span></div><div class="line"><a name="l04607"></a><span class="lineno"> 4607</span>&#160;<span class="comment"></span></div><div class="line"><a name="l04608"></a><span class="lineno"> 4608</span>&#160;<span class="comment">           Repeats start with an on_failure_jump that points past both</span></div><div class="line"><a name="l04609"></a><span class="lineno"> 4609</span>&#160;<span class="comment">           the repetition text and either the following jump or</span></div><div class="line"><a name="l04610"></a><span class="lineno"> 4610</span>&#160;<span class="comment">           pop_failure_jump back to this on_failure_jump.  */</span></div><div class="line"><a name="l04611"></a><span class="lineno"> 4611</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a5ca3d8a56cc5259243bcaffedd070287">on_failure_jump</a>:</div><div class="line"><a name="l04612"></a><span class="lineno"> 4612</span>&#160;        on_failure:</div><div class="line"><a name="l04613"></a><span class="lineno"> 4613</span>&#160;          <a class="code" href="regex_8c.html#a90a312923984a45f83767acea95b84a1">DEBUG_PRINT1</a> (<span class="stringliteral">&quot;EXECUTING on_failure_jump&quot;</span>);</div><div class="line"><a name="l04614"></a><span class="lineno"> 4614</span>&#160;</div><div class="line"><a name="l04615"></a><span class="lineno"> 4615</span>&#160;          <a class="code" href="regex_8c.html#abf958c753956f073a33bd336660e9038">EXTRACT_NUMBER_AND_INCR</a> (mcnt, p);</div><div class="line"><a name="l04616"></a><span class="lineno"> 4616</span>&#160;<span class="preprocessor">#ifdef _LIBC</span></div><div class="line"><a name="l04617"></a><span class="lineno"> 4617</span>&#160;          <a class="code" href="regex_8c.html#ae1a07ee1a4b73aa71754bce23d0690aa">DEBUG_PRINT3</a> (<span class="stringliteral">&quot; %d (to %p)&quot;</span>, mcnt, p + mcnt);</div><div class="line"><a name="l04618"></a><span class="lineno"> 4618</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l04619"></a><span class="lineno"> 4619</span>&#160;          <a class="code" href="regex_8c.html#ae1a07ee1a4b73aa71754bce23d0690aa">DEBUG_PRINT3</a> (<span class="stringliteral">&quot; %d (to 0x%x)&quot;</span>, mcnt, p + mcnt);</div><div class="line"><a name="l04620"></a><span class="lineno"> 4620</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04621"></a><span class="lineno"> 4621</span>&#160;</div><div class="line"><a name="l04622"></a><span class="lineno"> 4622</span>&#160;          <span class="comment">/* If this on_failure_jump comes right before a group (i.e.,</span></div><div class="line"><a name="l04623"></a><span class="lineno"> 4623</span>&#160;<span class="comment">             the original * applied to a group), save the information</span></div><div class="line"><a name="l04624"></a><span class="lineno"> 4624</span>&#160;<span class="comment">             for that group and all inner ones, so that if we fail back</span></div><div class="line"><a name="l04625"></a><span class="lineno"> 4625</span>&#160;<span class="comment">             to this point, the group&#39;s information will be correct.</span></div><div class="line"><a name="l04626"></a><span class="lineno"> 4626</span>&#160;<span class="comment">             For example, in \(a*\)*\1, we need the preceding group,</span></div><div class="line"><a name="l04627"></a><span class="lineno"> 4627</span>&#160;<span class="comment">             and in \(zz\(a*\)b*\)\2, we need the inner group.  */</span></div><div class="line"><a name="l04628"></a><span class="lineno"> 4628</span>&#160;</div><div class="line"><a name="l04629"></a><span class="lineno"> 4629</span>&#160;          <span class="comment">/* We can&#39;t use `p&#39; to check ahead because we push</span></div><div class="line"><a name="l04630"></a><span class="lineno"> 4630</span>&#160;<span class="comment">             a failure point to `p + mcnt&#39; after we do this.  */</span></div><div class="line"><a name="l04631"></a><span class="lineno"> 4631</span>&#160;          p1 = p;</div><div class="line"><a name="l04632"></a><span class="lineno"> 4632</span>&#160;</div><div class="line"><a name="l04633"></a><span class="lineno"> 4633</span>&#160;          <span class="comment">/* We need to skip no_op&#39;s before we look for the</span></div><div class="line"><a name="l04634"></a><span class="lineno"> 4634</span>&#160;<span class="comment">             start_memory in case this on_failure_jump is happening as</span></div><div class="line"><a name="l04635"></a><span class="lineno"> 4635</span>&#160;<span class="comment">             the result of a completed succeed_n, as in \(a\)\{1,3\}b\1</span></div><div class="line"><a name="l04636"></a><span class="lineno"> 4636</span>&#160;<span class="comment">             against aba.  */</span></div><div class="line"><a name="l04637"></a><span class="lineno"> 4637</span>&#160;          <span class="keywordflow">while</span> (p1 &lt; pend &amp;&amp; (re_opcode_t) *p1 == <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a292eb17c5d97bf50ef0c4f733e56c836">no_op</a>)</div><div class="line"><a name="l04638"></a><span class="lineno"> 4638</span>&#160;            p1++;</div><div class="line"><a name="l04639"></a><span class="lineno"> 4639</span>&#160;</div><div class="line"><a name="l04640"></a><span class="lineno"> 4640</span>&#160;          <span class="keywordflow">if</span> (p1 &lt; pend &amp;&amp; (re_opcode_t) *p1 == <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118affba14708233f194802bf7981fd7717e">start_memory</a>)</div><div class="line"><a name="l04641"></a><span class="lineno"> 4641</span>&#160;            {</div><div class="line"><a name="l04642"></a><span class="lineno"> 4642</span>&#160;              <span class="comment">/* We have a new highest active register now.  This will</span></div><div class="line"><a name="l04643"></a><span class="lineno"> 4643</span>&#160;<span class="comment">                 get reset at the start_memory we are about to get to,</span></div><div class="line"><a name="l04644"></a><span class="lineno"> 4644</span>&#160;<span class="comment">                 but we will have saved all the registers relevant to</span></div><div class="line"><a name="l04645"></a><span class="lineno"> 4645</span>&#160;<span class="comment">                 this repetition op, as described above.  */</span></div><div class="line"><a name="l04646"></a><span class="lineno"> 4646</span>&#160;              highest_active_reg = *(p1 + 1) + *(p1 + 2);</div><div class="line"><a name="l04647"></a><span class="lineno"> 4647</span>&#160;              <span class="keywordflow">if</span> (lowest_active_reg == <a class="code" href="regex_8c.html#a508c8adae6628ee43b8498249272efb9">NO_LOWEST_ACTIVE_REG</a>)</div><div class="line"><a name="l04648"></a><span class="lineno"> 4648</span>&#160;                lowest_active_reg = *(p1 + 1);</div><div class="line"><a name="l04649"></a><span class="lineno"> 4649</span>&#160;            }</div><div class="line"><a name="l04650"></a><span class="lineno"> 4650</span>&#160;</div><div class="line"><a name="l04651"></a><span class="lineno"> 4651</span>&#160;          <a class="code" href="regex_8c.html#a90a312923984a45f83767acea95b84a1">DEBUG_PRINT1</a> (<span class="stringliteral">&quot;:\n&quot;</span>);</div><div class="line"><a name="l04652"></a><span class="lineno"> 4652</span>&#160;          <a class="code" href="regex_8c.html#a74904744b0c1f8fe8cb2bf1584da2b3b">PUSH_FAILURE_POINT</a> (p + mcnt, d, -2);</div><div class="line"><a name="l04653"></a><span class="lineno"> 4653</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l04654"></a><span class="lineno"> 4654</span>&#160;</div><div class="line"><a name="l04655"></a><span class="lineno"> 4655</span>&#160;</div><div class="line"><a name="l04656"></a><span class="lineno"> 4656</span>&#160;        <span class="comment">/* A smart repeat ends with `maybe_pop_jump&#39;.</span></div><div class="line"><a name="l04657"></a><span class="lineno"> 4657</span>&#160;<span class="comment">           We change it to either `pop_failure_jump&#39; or `jump&#39;.  */</span></div><div class="line"><a name="l04658"></a><span class="lineno"> 4658</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a54819e2968ab91bf6ad492f131d7f37b">maybe_pop_jump</a>:</div><div class="line"><a name="l04659"></a><span class="lineno"> 4659</span>&#160;          <a class="code" href="regex_8c.html#abf958c753956f073a33bd336660e9038">EXTRACT_NUMBER_AND_INCR</a> (mcnt, p);</div><div class="line"><a name="l04660"></a><span class="lineno"> 4660</span>&#160;          <a class="code" href="regex_8c.html#aa56b1ff14ec552b5af8e9af50bc9d5cc">DEBUG_PRINT2</a> (<span class="stringliteral">&quot;EXECUTING maybe_pop_jump %d.\n&quot;</span>, mcnt);</div><div class="line"><a name="l04661"></a><span class="lineno"> 4661</span>&#160;          {</div><div class="line"><a name="l04662"></a><span class="lineno"> 4662</span>&#160;            <span class="keyword">register</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *p2 = p;</div><div class="line"><a name="l04663"></a><span class="lineno"> 4663</span>&#160;</div><div class="line"><a name="l04664"></a><span class="lineno"> 4664</span>&#160;            <span class="comment">/* Compare the beginning of the repeat with what in the</span></div><div class="line"><a name="l04665"></a><span class="lineno"> 4665</span>&#160;<span class="comment">               pattern follows its end. If we can establish that there</span></div><div class="line"><a name="l04666"></a><span class="lineno"> 4666</span>&#160;<span class="comment">               is nothing that they would both match, i.e., that we</span></div><div class="line"><a name="l04667"></a><span class="lineno"> 4667</span>&#160;<span class="comment">               would have to backtrack because of (as in, e.g., `a*a&#39;)</span></div><div class="line"><a name="l04668"></a><span class="lineno"> 4668</span>&#160;<span class="comment">               then we can change to pop_failure_jump, because we&#39;ll</span></div><div class="line"><a name="l04669"></a><span class="lineno"> 4669</span>&#160;<span class="comment">               never have to backtrack.</span></div><div class="line"><a name="l04670"></a><span class="lineno"> 4670</span>&#160;<span class="comment"></span></div><div class="line"><a name="l04671"></a><span class="lineno"> 4671</span>&#160;<span class="comment">               This is not true in the case of alternatives: in</span></div><div class="line"><a name="l04672"></a><span class="lineno"> 4672</span>&#160;<span class="comment">               `(a|ab)*&#39; we do need to backtrack to the `ab&#39; alternative</span></div><div class="line"><a name="l04673"></a><span class="lineno"> 4673</span>&#160;<span class="comment">               (e.g., if the string was `ab&#39;).  But instead of trying to</span></div><div class="line"><a name="l04674"></a><span class="lineno"> 4674</span>&#160;<span class="comment">               detect that here, the alternative has put on a dummy</span></div><div class="line"><a name="l04675"></a><span class="lineno"> 4675</span>&#160;<span class="comment">               failure point which is what we will end up popping.  */</span></div><div class="line"><a name="l04676"></a><span class="lineno"> 4676</span>&#160;</div><div class="line"><a name="l04677"></a><span class="lineno"> 4677</span>&#160;            <span class="comment">/* Skip over open/close-group commands.</span></div><div class="line"><a name="l04678"></a><span class="lineno"> 4678</span>&#160;<span class="comment">               If what follows this loop is a ...+ construct,</span></div><div class="line"><a name="l04679"></a><span class="lineno"> 4679</span>&#160;<span class="comment">               look at what begins its body, since we will have to</span></div><div class="line"><a name="l04680"></a><span class="lineno"> 4680</span>&#160;<span class="comment">               match at least one of that.  */</span></div><div class="line"><a name="l04681"></a><span class="lineno"> 4681</span>&#160;            <span class="keywordflow">while</span> (1)</div><div class="line"><a name="l04682"></a><span class="lineno"> 4682</span>&#160;              {</div><div class="line"><a name="l04683"></a><span class="lineno"> 4683</span>&#160;                <span class="keywordflow">if</span> (p2 + 2 &lt; pend</div><div class="line"><a name="l04684"></a><span class="lineno"> 4684</span>&#160;                    &amp;&amp; ((re_opcode_t) *p2 == <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a6a42f30575b66116b79f4527493d0ce9">stop_memory</a></div><div class="line"><a name="l04685"></a><span class="lineno"> 4685</span>&#160;                        || (re_opcode_t) *p2 == <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118affba14708233f194802bf7981fd7717e">start_memory</a>))</div><div class="line"><a name="l04686"></a><span class="lineno"> 4686</span>&#160;                  p2 += 3;</div><div class="line"><a name="l04687"></a><span class="lineno"> 4687</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (p2 + 6 &lt; pend</div><div class="line"><a name="l04688"></a><span class="lineno"> 4688</span>&#160;                         &amp;&amp; (re_opcode_t) *p2 == <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a3918fb85c0fd4b2f8c84afad14836eba">dummy_failure_jump</a>)</div><div class="line"><a name="l04689"></a><span class="lineno"> 4689</span>&#160;                  p2 += 6;</div><div class="line"><a name="l04690"></a><span class="lineno"> 4690</span>&#160;                <span class="keywordflow">else</span></div><div class="line"><a name="l04691"></a><span class="lineno"> 4691</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l04692"></a><span class="lineno"> 4692</span>&#160;              }</div><div class="line"><a name="l04693"></a><span class="lineno"> 4693</span>&#160;</div><div class="line"><a name="l04694"></a><span class="lineno"> 4694</span>&#160;            p1 = p + mcnt;</div><div class="line"><a name="l04695"></a><span class="lineno"> 4695</span>&#160;            <span class="comment">/* p1[0] ... p1[2] are the `on_failure_jump&#39; corresponding</span></div><div class="line"><a name="l04696"></a><span class="lineno"> 4696</span>&#160;<span class="comment">               to the `maybe_finalize_jump&#39; of this case.  Examine what</span></div><div class="line"><a name="l04697"></a><span class="lineno"> 4697</span>&#160;<span class="comment">               follows.  */</span></div><div class="line"><a name="l04698"></a><span class="lineno"> 4698</span>&#160;</div><div class="line"><a name="l04699"></a><span class="lineno"> 4699</span>&#160;            <span class="comment">/* If we&#39;re at the end of the pattern, we can change.  */</span></div><div class="line"><a name="l04700"></a><span class="lineno"> 4700</span>&#160;            <span class="keywordflow">if</span> (p2 == pend)</div><div class="line"><a name="l04701"></a><span class="lineno"> 4701</span>&#160;              {</div><div class="line"><a name="l04702"></a><span class="lineno"> 4702</span>&#160;                <span class="comment">/* Consider what happens when matching &quot;:\(.*\)&quot;</span></div><div class="line"><a name="l04703"></a><span class="lineno"> 4703</span>&#160;<span class="comment">                   against &quot;:/&quot;.  I don&#39;t really understand this code</span></div><div class="line"><a name="l04704"></a><span class="lineno"> 4704</span>&#160;<span class="comment">                   yet.  */</span></div><div class="line"><a name="l04705"></a><span class="lineno"> 4705</span>&#160;                p[-3] = (<span class="keywordtype">unsigned</span> char) <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a24cdcea4f39ca8613374deb4bfe5b2cb">pop_failure_jump</a>;</div><div class="line"><a name="l04706"></a><span class="lineno"> 4706</span>&#160;                <a class="code" href="regex_8c.html#a90a312923984a45f83767acea95b84a1">DEBUG_PRINT1</a></div><div class="line"><a name="l04707"></a><span class="lineno"> 4707</span>&#160;                  (<span class="stringliteral">&quot;  End of pattern: change to `pop_failure_jump&#39;.\n&quot;</span>);</div><div class="line"><a name="l04708"></a><span class="lineno"> 4708</span>&#160;              }</div><div class="line"><a name="l04709"></a><span class="lineno"> 4709</span>&#160;</div><div class="line"><a name="l04710"></a><span class="lineno"> 4710</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((re_opcode_t) *p2 == <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118ab0eca0e160953a14bcb41d151287d1f1">exactn</a></div><div class="line"><a name="l04711"></a><span class="lineno"> 4711</span>&#160;                     || (bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a8d2bf18d174b513250c8dab7a01f156e">newline_anchor</a> &amp;&amp; (re_opcode_t) *p2 == <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a0556771866997767489c4da274f15aa4">endline</a>))</div><div class="line"><a name="l04712"></a><span class="lineno"> 4712</span>&#160;              {</div><div class="line"><a name="l04713"></a><span class="lineno"> 4713</span>&#160;                <span class="keyword">register</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> c</div><div class="line"><a name="l04714"></a><span class="lineno"> 4714</span>&#160;                  = *p2 == (<span class="keywordtype">unsigned</span> char) <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a0556771866997767489c4da274f15aa4">endline</a> ? <span class="charliteral">&#39;\n&#39;</span> : p2[2];</div><div class="line"><a name="l04715"></a><span class="lineno"> 4715</span>&#160;</div><div class="line"><a name="l04716"></a><span class="lineno"> 4716</span>&#160;                <span class="keywordflow">if</span> ((re_opcode_t) p1[3] == <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118ab0eca0e160953a14bcb41d151287d1f1">exactn</a> &amp;&amp; p1[5] != c)</div><div class="line"><a name="l04717"></a><span class="lineno"> 4717</span>&#160;                  {</div><div class="line"><a name="l04718"></a><span class="lineno"> 4718</span>&#160;                    p[-3] = (<span class="keywordtype">unsigned</span> char) <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a24cdcea4f39ca8613374deb4bfe5b2cb">pop_failure_jump</a>;</div><div class="line"><a name="l04719"></a><span class="lineno"> 4719</span>&#160;                    <a class="code" href="regex_8c.html#ae1a07ee1a4b73aa71754bce23d0690aa">DEBUG_PRINT3</a> (<span class="stringliteral">&quot;  %c != %c =&gt; pop_failure_jump.\n&quot;</span>,</div><div class="line"><a name="l04720"></a><span class="lineno"> 4720</span>&#160;                                  c, p1[5]);</div><div class="line"><a name="l04721"></a><span class="lineno"> 4721</span>&#160;                  }</div><div class="line"><a name="l04722"></a><span class="lineno"> 4722</span>&#160;</div><div class="line"><a name="l04723"></a><span class="lineno"> 4723</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((re_opcode_t) p1[3] == <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a6247a0132ac9bb1af7dbc840afe09c88">charset</a></div><div class="line"><a name="l04724"></a><span class="lineno"> 4724</span>&#160;                         || (re_opcode_t) p1[3] == <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118abcbe9b8a81da1098e4ffbb7c4f4a8e2e">charset_not</a>)</div><div class="line"><a name="l04725"></a><span class="lineno"> 4725</span>&#160;                  {</div><div class="line"><a name="l04726"></a><span class="lineno"> 4726</span>&#160;                    <span class="keywordtype">int</span> not = (<a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118">re_opcode_t</a>) p1[3] == <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118abcbe9b8a81da1098e4ffbb7c4f4a8e2e">charset_not</a>;</div><div class="line"><a name="l04727"></a><span class="lineno"> 4727</span>&#160;</div><div class="line"><a name="l04728"></a><span class="lineno"> 4728</span>&#160;                    <span class="keywordflow">if</span> (c &lt; (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>) (p1[4] * <a class="code" href="regex_8c.html#ad72dc64cd2c9bc3598f792dc518d03b2">BYTEWIDTH</a>)</div><div class="line"><a name="l04729"></a><span class="lineno"> 4729</span>&#160;                        &amp;&amp; p1[5 + c / <a class="code" href="regex_8c.html#ad72dc64cd2c9bc3598f792dc518d03b2">BYTEWIDTH</a>] &amp; (1 &lt;&lt; (c % <a class="code" href="regex_8c.html#ad72dc64cd2c9bc3598f792dc518d03b2">BYTEWIDTH</a>)))</div><div class="line"><a name="l04730"></a><span class="lineno"> 4730</span>&#160;                      not = !not;</div><div class="line"><a name="l04731"></a><span class="lineno"> 4731</span>&#160;</div><div class="line"><a name="l04732"></a><span class="lineno"> 4732</span>&#160;                    <span class="comment">/* `not&#39; is equal to 1 if c would match, which means</span></div><div class="line"><a name="l04733"></a><span class="lineno"> 4733</span>&#160;<span class="comment">                        that we can&#39;t change to pop_failure_jump.  */</span></div><div class="line"><a name="l04734"></a><span class="lineno"> 4734</span>&#160;                    <span class="keywordflow">if</span> (!not)</div><div class="line"><a name="l04735"></a><span class="lineno"> 4735</span>&#160;                      {</div><div class="line"><a name="l04736"></a><span class="lineno"> 4736</span>&#160;                        p[-3] = (<span class="keywordtype">unsigned</span> char) <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a24cdcea4f39ca8613374deb4bfe5b2cb">pop_failure_jump</a>;</div><div class="line"><a name="l04737"></a><span class="lineno"> 4737</span>&#160;                        <a class="code" href="regex_8c.html#a90a312923984a45f83767acea95b84a1">DEBUG_PRINT1</a> (<span class="stringliteral">&quot;  No match =&gt; pop_failure_jump.\n&quot;</span>);</div><div class="line"><a name="l04738"></a><span class="lineno"> 4738</span>&#160;                      }</div><div class="line"><a name="l04739"></a><span class="lineno"> 4739</span>&#160;                  }</div><div class="line"><a name="l04740"></a><span class="lineno"> 4740</span>&#160;              }</div><div class="line"><a name="l04741"></a><span class="lineno"> 4741</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((re_opcode_t) *p2 == <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a6247a0132ac9bb1af7dbc840afe09c88">charset</a>)</div><div class="line"><a name="l04742"></a><span class="lineno"> 4742</span>&#160;              {</div><div class="line"><a name="l04743"></a><span class="lineno"> 4743</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div><div class="line"><a name="l04744"></a><span class="lineno"> 4744</span>&#160;                <span class="keyword">register</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> c</div><div class="line"><a name="l04745"></a><span class="lineno"> 4745</span>&#160;                  = *p2 == (<span class="keywordtype">unsigned</span> char) <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a0556771866997767489c4da274f15aa4">endline</a> ? <span class="charliteral">&#39;\n&#39;</span> : p2[2];</div><div class="line"><a name="l04746"></a><span class="lineno"> 4746</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04747"></a><span class="lineno"> 4747</span>&#160;</div><div class="line"><a name="l04748"></a><span class="lineno"> 4748</span>&#160;<span class="preprocessor">#if 0</span></div><div class="line"><a name="l04749"></a><span class="lineno"> 4749</span>&#160;                <span class="keywordflow">if</span> ((re_opcode_t) p1[3] == <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118ab0eca0e160953a14bcb41d151287d1f1">exactn</a></div><div class="line"><a name="l04750"></a><span class="lineno"> 4750</span>&#160;                    &amp;&amp; ! ((int) p2[1] * <a class="code" href="regex_8c.html#ad72dc64cd2c9bc3598f792dc518d03b2">BYTEWIDTH</a> &gt; (<span class="keywordtype">int</span>) p1[5]</div><div class="line"><a name="l04751"></a><span class="lineno"> 4751</span>&#160;                          &amp;&amp; (p2[2 + p1[5] / <a class="code" href="regex_8c.html#ad72dc64cd2c9bc3598f792dc518d03b2">BYTEWIDTH</a>]</div><div class="line"><a name="l04752"></a><span class="lineno"> 4752</span>&#160;                              &amp; (1 &lt;&lt; (p1[5] % <a class="code" href="regex_8c.html#ad72dc64cd2c9bc3598f792dc518d03b2">BYTEWIDTH</a>)))))</div><div class="line"><a name="l04753"></a><span class="lineno"> 4753</span>&#160;#<span class="keywordflow">else</span></div><div class="line"><a name="l04754"></a><span class="lineno"> 4754</span>&#160;                <span class="keywordflow">if</span> ((re_opcode_t) p1[3] == <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118ab0eca0e160953a14bcb41d151287d1f1">exactn</a></div><div class="line"><a name="l04755"></a><span class="lineno"> 4755</span>&#160;                    &amp;&amp; ! ((int) p2[1] * <a class="code" href="regex_8c.html#ad72dc64cd2c9bc3598f792dc518d03b2">BYTEWIDTH</a> &gt; (<span class="keywordtype">int</span>) p1[4]</div><div class="line"><a name="l04756"></a><span class="lineno"> 4756</span>&#160;                          &amp;&amp; (p2[2 + p1[4] / <a class="code" href="regex_8c.html#ad72dc64cd2c9bc3598f792dc518d03b2">BYTEWIDTH</a>]</div><div class="line"><a name="l04757"></a><span class="lineno"> 4757</span>&#160;                              &amp; (1 &lt;&lt; (p1[4] % <a class="code" href="regex_8c.html#ad72dc64cd2c9bc3598f792dc518d03b2">BYTEWIDTH</a>)))))</div><div class="line"><a name="l04758"></a><span class="lineno"> 4758</span>&#160;#endif</div><div class="line"><a name="l04759"></a><span class="lineno"> 4759</span>&#160;                  {</div><div class="line"><a name="l04760"></a><span class="lineno"> 4760</span>&#160;                    p[-3] = (<span class="keywordtype">unsigned</span> char) <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a24cdcea4f39ca8613374deb4bfe5b2cb">pop_failure_jump</a>;</div><div class="line"><a name="l04761"></a><span class="lineno"> 4761</span>&#160;                    <a class="code" href="regex_8c.html#ae1a07ee1a4b73aa71754bce23d0690aa">DEBUG_PRINT3</a> (<span class="stringliteral">&quot;  %c != %c =&gt; pop_failure_jump.\n&quot;</span>,</div><div class="line"><a name="l04762"></a><span class="lineno"> 4762</span>&#160;                                  c, p1[5]);</div><div class="line"><a name="l04763"></a><span class="lineno"> 4763</span>&#160;                  }</div><div class="line"><a name="l04764"></a><span class="lineno"> 4764</span>&#160;</div><div class="line"><a name="l04765"></a><span class="lineno"> 4765</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((re_opcode_t) p1[3] == <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118abcbe9b8a81da1098e4ffbb7c4f4a8e2e">charset_not</a>)</div><div class="line"><a name="l04766"></a><span class="lineno"> 4766</span>&#160;                  {</div><div class="line"><a name="l04767"></a><span class="lineno"> 4767</span>&#160;                    <span class="keywordtype">int</span> idx;</div><div class="line"><a name="l04768"></a><span class="lineno"> 4768</span>&#160;                    <span class="comment">/* We win if the charset_not inside the loop</span></div><div class="line"><a name="l04769"></a><span class="lineno"> 4769</span>&#160;<span class="comment">                       lists every character listed in the charset after.  */</span></div><div class="line"><a name="l04770"></a><span class="lineno"> 4770</span>&#160;                    <span class="keywordflow">for</span> (idx = 0; idx &lt; (int) p2[1]; idx++)</div><div class="line"><a name="l04771"></a><span class="lineno"> 4771</span>&#160;                      <span class="keywordflow">if</span> (! (p2[2 + idx] == 0</div><div class="line"><a name="l04772"></a><span class="lineno"> 4772</span>&#160;                             || (idx &lt; (<span class="keywordtype">int</span>) p1[4]</div><div class="line"><a name="l04773"></a><span class="lineno"> 4773</span>&#160;                                 &amp;&amp; ((p2[2 + idx] &amp; ~ p1[5 + idx]) == 0))))</div><div class="line"><a name="l04774"></a><span class="lineno"> 4774</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04775"></a><span class="lineno"> 4775</span>&#160;</div><div class="line"><a name="l04776"></a><span class="lineno"> 4776</span>&#160;                    <span class="keywordflow">if</span> (idx == p2[1])</div><div class="line"><a name="l04777"></a><span class="lineno"> 4777</span>&#160;                      {</div><div class="line"><a name="l04778"></a><span class="lineno"> 4778</span>&#160;                        p[-3] = (<span class="keywordtype">unsigned</span> char) <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a24cdcea4f39ca8613374deb4bfe5b2cb">pop_failure_jump</a>;</div><div class="line"><a name="l04779"></a><span class="lineno"> 4779</span>&#160;                        <a class="code" href="regex_8c.html#a90a312923984a45f83767acea95b84a1">DEBUG_PRINT1</a> (<span class="stringliteral">&quot;  No match =&gt; pop_failure_jump.\n&quot;</span>);</div><div class="line"><a name="l04780"></a><span class="lineno"> 4780</span>&#160;                      }</div><div class="line"><a name="l04781"></a><span class="lineno"> 4781</span>&#160;                  }</div><div class="line"><a name="l04782"></a><span class="lineno"> 4782</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((re_opcode_t) p1[3] == <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a6247a0132ac9bb1af7dbc840afe09c88">charset</a>)</div><div class="line"><a name="l04783"></a><span class="lineno"> 4783</span>&#160;                  {</div><div class="line"><a name="l04784"></a><span class="lineno"> 4784</span>&#160;                    <span class="keywordtype">int</span> idx;</div><div class="line"><a name="l04785"></a><span class="lineno"> 4785</span>&#160;                    <span class="comment">/* We win if the charset inside the loop</span></div><div class="line"><a name="l04786"></a><span class="lineno"> 4786</span>&#160;<span class="comment">                       has no overlap with the one after the loop.  */</span></div><div class="line"><a name="l04787"></a><span class="lineno"> 4787</span>&#160;                    <span class="keywordflow">for</span> (idx = 0;</div><div class="line"><a name="l04788"></a><span class="lineno"> 4788</span>&#160;                         idx &lt; (int) p2[1] &amp;&amp; idx &lt; (<span class="keywordtype">int</span>) p1[4];</div><div class="line"><a name="l04789"></a><span class="lineno"> 4789</span>&#160;                         idx++)</div><div class="line"><a name="l04790"></a><span class="lineno"> 4790</span>&#160;                      <span class="keywordflow">if</span> ((p2[2 + idx] &amp; p1[5 + idx]) != 0)</div><div class="line"><a name="l04791"></a><span class="lineno"> 4791</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04792"></a><span class="lineno"> 4792</span>&#160;</div><div class="line"><a name="l04793"></a><span class="lineno"> 4793</span>&#160;                    <span class="keywordflow">if</span> (idx == p2[1] || idx == p1[4])</div><div class="line"><a name="l04794"></a><span class="lineno"> 4794</span>&#160;                      {</div><div class="line"><a name="l04795"></a><span class="lineno"> 4795</span>&#160;                        p[-3] = (<span class="keywordtype">unsigned</span> char) <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a24cdcea4f39ca8613374deb4bfe5b2cb">pop_failure_jump</a>;</div><div class="line"><a name="l04796"></a><span class="lineno"> 4796</span>&#160;                        <a class="code" href="regex_8c.html#a90a312923984a45f83767acea95b84a1">DEBUG_PRINT1</a> (<span class="stringliteral">&quot;  No match =&gt; pop_failure_jump.\n&quot;</span>);</div><div class="line"><a name="l04797"></a><span class="lineno"> 4797</span>&#160;                      }</div><div class="line"><a name="l04798"></a><span class="lineno"> 4798</span>&#160;                  }</div><div class="line"><a name="l04799"></a><span class="lineno"> 4799</span>&#160;              }</div><div class="line"><a name="l04800"></a><span class="lineno"> 4800</span>&#160;          }</div><div class="line"><a name="l04801"></a><span class="lineno"> 4801</span>&#160;          p -= 2;               <span class="comment">/* Point at relative address again.  */</span></div><div class="line"><a name="l04802"></a><span class="lineno"> 4802</span>&#160;          <span class="keywordflow">if</span> ((re_opcode_t) p[-1] != <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a24cdcea4f39ca8613374deb4bfe5b2cb">pop_failure_jump</a>)</div><div class="line"><a name="l04803"></a><span class="lineno"> 4803</span>&#160;            {</div><div class="line"><a name="l04804"></a><span class="lineno"> 4804</span>&#160;              p[-1] = (<span class="keywordtype">unsigned</span> char) <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a5a08a3c1fa135350961630d2f9c2b849">jump</a>;</div><div class="line"><a name="l04805"></a><span class="lineno"> 4805</span>&#160;              <a class="code" href="regex_8c.html#a90a312923984a45f83767acea95b84a1">DEBUG_PRINT1</a> (<span class="stringliteral">&quot;  Match =&gt; jump.\n&quot;</span>);</div><div class="line"><a name="l04806"></a><span class="lineno"> 4806</span>&#160;              <span class="keywordflow">goto</span> unconditional_jump;</div><div class="line"><a name="l04807"></a><span class="lineno"> 4807</span>&#160;            }</div><div class="line"><a name="l04808"></a><span class="lineno"> 4808</span>&#160;        <span class="comment">/* Note fall through.  */</span></div><div class="line"><a name="l04809"></a><span class="lineno"> 4809</span>&#160;</div><div class="line"><a name="l04810"></a><span class="lineno"> 4810</span>&#160;</div><div class="line"><a name="l04811"></a><span class="lineno"> 4811</span>&#160;        <span class="comment">/* The end of a simple repeat has a pop_failure_jump back to</span></div><div class="line"><a name="l04812"></a><span class="lineno"> 4812</span>&#160;<span class="comment">           its matching on_failure_jump, where the latter will push a</span></div><div class="line"><a name="l04813"></a><span class="lineno"> 4813</span>&#160;<span class="comment">           failure point.  The pop_failure_jump takes off failure</span></div><div class="line"><a name="l04814"></a><span class="lineno"> 4814</span>&#160;<span class="comment">           points put on by this pop_failure_jump&#39;s matching</span></div><div class="line"><a name="l04815"></a><span class="lineno"> 4815</span>&#160;<span class="comment">           on_failure_jump; we got through the pattern to here from the</span></div><div class="line"><a name="l04816"></a><span class="lineno"> 4816</span>&#160;<span class="comment">           matching on_failure_jump, so didn&#39;t fail.  */</span></div><div class="line"><a name="l04817"></a><span class="lineno"> 4817</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a24cdcea4f39ca8613374deb4bfe5b2cb">pop_failure_jump</a>:</div><div class="line"><a name="l04818"></a><span class="lineno"> 4818</span>&#160;          {</div><div class="line"><a name="l04819"></a><span class="lineno"> 4819</span>&#160;            <span class="comment">/* We need to pass separate storage for the lowest and</span></div><div class="line"><a name="l04820"></a><span class="lineno"> 4820</span>&#160;<span class="comment">               highest registers, even though we don&#39;t care about the</span></div><div class="line"><a name="l04821"></a><span class="lineno"> 4821</span>&#160;<span class="comment">               actual values.  Otherwise, we will restore only one</span></div><div class="line"><a name="l04822"></a><span class="lineno"> 4822</span>&#160;<span class="comment">               register from the stack, since lowest will == highest in</span></div><div class="line"><a name="l04823"></a><span class="lineno"> 4823</span>&#160;<span class="comment">               `pop_failure_point&#39;.  */</span></div><div class="line"><a name="l04824"></a><span class="lineno"> 4824</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div><div class="line"><a name="l04825"></a><span class="lineno"> 4825</span>&#160;            <a class="code" href="__regex_8h.html#ab64c4b3b9990d5c9e7e30219aecec37a">active_reg_t</a> dummy_low_reg, dummy_high_reg;</div><div class="line"><a name="l04826"></a><span class="lineno"> 4826</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *pdummy;</div><div class="line"><a name="l04827"></a><span class="lineno"> 4827</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">char</span> *sdummy;</div><div class="line"><a name="l04828"></a><span class="lineno"> 4828</span>&#160;</div><div class="line"><a name="l04829"></a><span class="lineno"> 4829</span>&#160;            <a class="code" href="regex_8c.html#a90a312923984a45f83767acea95b84a1">DEBUG_PRINT1</a> (<span class="stringliteral">&quot;EXECUTING pop_failure_jump.\n&quot;</span>);</div><div class="line"><a name="l04830"></a><span class="lineno"> 4830</span>&#160;            <a class="code" href="regex_8c.html#a51d78204b5e3cc240058c986103c8b8e">POP_FAILURE_POINT</a> (sdummy, pdummy,</div><div class="line"><a name="l04831"></a><span class="lineno"> 4831</span>&#160;                               dummy_low_reg, dummy_high_reg,</div><div class="line"><a name="l04832"></a><span class="lineno"> 4832</span>&#160;                               reg_dummy, reg_dummy, reg_info_dummy);</div><div class="line"><a name="l04833"></a><span class="lineno"> 4833</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04834"></a><span class="lineno"> 4834</span>&#160;          }</div><div class="line"><a name="l04835"></a><span class="lineno"> 4835</span>&#160;          <span class="comment">/* Note fall through.  */</span></div><div class="line"><a name="l04836"></a><span class="lineno"> 4836</span>&#160;</div><div class="line"><a name="l04837"></a><span class="lineno"> 4837</span>&#160;        unconditional_jump:</div><div class="line"><a name="l04838"></a><span class="lineno"> 4838</span>&#160;<span class="preprocessor">#ifdef _LIBC</span></div><div class="line"><a name="l04839"></a><span class="lineno"> 4839</span>&#160;          <a class="code" href="regex_8c.html#aa56b1ff14ec552b5af8e9af50bc9d5cc">DEBUG_PRINT2</a> (<span class="stringliteral">&quot;\n%p: &quot;</span>, p);</div><div class="line"><a name="l04840"></a><span class="lineno"> 4840</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l04841"></a><span class="lineno"> 4841</span>&#160;          <a class="code" href="regex_8c.html#aa56b1ff14ec552b5af8e9af50bc9d5cc">DEBUG_PRINT2</a> (<span class="stringliteral">&quot;\n0x%x: &quot;</span>, p);</div><div class="line"><a name="l04842"></a><span class="lineno"> 4842</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04843"></a><span class="lineno"> 4843</span>&#160;          <span class="comment">/* Note fall through.  */</span></div><div class="line"><a name="l04844"></a><span class="lineno"> 4844</span>&#160;</div><div class="line"><a name="l04845"></a><span class="lineno"> 4845</span>&#160;        <span class="comment">/* Unconditionally jump (without popping any failure points).  */</span></div><div class="line"><a name="l04846"></a><span class="lineno"> 4846</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a5a08a3c1fa135350961630d2f9c2b849">jump</a>:</div><div class="line"><a name="l04847"></a><span class="lineno"> 4847</span>&#160;          <a class="code" href="regex_8c.html#abf958c753956f073a33bd336660e9038">EXTRACT_NUMBER_AND_INCR</a> (mcnt, p);    <span class="comment">/* Get the amount to jump.  */</span></div><div class="line"><a name="l04848"></a><span class="lineno"> 4848</span>&#160;          <a class="code" href="regex_8c.html#aa56b1ff14ec552b5af8e9af50bc9d5cc">DEBUG_PRINT2</a> (<span class="stringliteral">&quot;EXECUTING jump %d &quot;</span>, mcnt);</div><div class="line"><a name="l04849"></a><span class="lineno"> 4849</span>&#160;          p += mcnt;                            <span class="comment">/* Do the jump.  */</span></div><div class="line"><a name="l04850"></a><span class="lineno"> 4850</span>&#160;<span class="preprocessor">#ifdef _LIBC</span></div><div class="line"><a name="l04851"></a><span class="lineno"> 4851</span>&#160;          <a class="code" href="regex_8c.html#aa56b1ff14ec552b5af8e9af50bc9d5cc">DEBUG_PRINT2</a> (<span class="stringliteral">&quot;(to %p).\n&quot;</span>, p);</div><div class="line"><a name="l04852"></a><span class="lineno"> 4852</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l04853"></a><span class="lineno"> 4853</span>&#160;          <a class="code" href="regex_8c.html#aa56b1ff14ec552b5af8e9af50bc9d5cc">DEBUG_PRINT2</a> (<span class="stringliteral">&quot;(to 0x%x).\n&quot;</span>, p);</div><div class="line"><a name="l04854"></a><span class="lineno"> 4854</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04855"></a><span class="lineno"> 4855</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l04856"></a><span class="lineno"> 4856</span>&#160;</div><div class="line"><a name="l04857"></a><span class="lineno"> 4857</span>&#160;</div><div class="line"><a name="l04858"></a><span class="lineno"> 4858</span>&#160;        <span class="comment">/* We need this opcode so we can detect where alternatives end</span></div><div class="line"><a name="l04859"></a><span class="lineno"> 4859</span>&#160;<span class="comment">           in `group_match_null_string_p&#39; et al.  */</span></div><div class="line"><a name="l04860"></a><span class="lineno"> 4860</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a2b75b8e92a52c848de16544d9ceb08da">jump_past_alt</a>:</div><div class="line"><a name="l04861"></a><span class="lineno"> 4861</span>&#160;          <a class="code" href="regex_8c.html#a90a312923984a45f83767acea95b84a1">DEBUG_PRINT1</a> (<span class="stringliteral">&quot;EXECUTING jump_past_alt.\n&quot;</span>);</div><div class="line"><a name="l04862"></a><span class="lineno"> 4862</span>&#160;          <span class="keywordflow">goto</span> unconditional_jump;</div><div class="line"><a name="l04863"></a><span class="lineno"> 4863</span>&#160;</div><div class="line"><a name="l04864"></a><span class="lineno"> 4864</span>&#160;</div><div class="line"><a name="l04865"></a><span class="lineno"> 4865</span>&#160;        <span class="comment">/* Normally, the on_failure_jump pushes a failure point, which</span></div><div class="line"><a name="l04866"></a><span class="lineno"> 4866</span>&#160;<span class="comment">           then gets popped at pop_failure_jump.  We will end up at</span></div><div class="line"><a name="l04867"></a><span class="lineno"> 4867</span>&#160;<span class="comment">           pop_failure_jump, also, and with a pattern of, say, `a+&#39;, we</span></div><div class="line"><a name="l04868"></a><span class="lineno"> 4868</span>&#160;<span class="comment">           are skipping over the on_failure_jump, so we have to push</span></div><div class="line"><a name="l04869"></a><span class="lineno"> 4869</span>&#160;<span class="comment">           something meaningless for pop_failure_jump to pop.  */</span></div><div class="line"><a name="l04870"></a><span class="lineno"> 4870</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a3918fb85c0fd4b2f8c84afad14836eba">dummy_failure_jump</a>:</div><div class="line"><a name="l04871"></a><span class="lineno"> 4871</span>&#160;          <a class="code" href="regex_8c.html#a90a312923984a45f83767acea95b84a1">DEBUG_PRINT1</a> (<span class="stringliteral">&quot;EXECUTING dummy_failure_jump.\n&quot;</span>);</div><div class="line"><a name="l04872"></a><span class="lineno"> 4872</span>&#160;          <span class="comment">/* It doesn&#39;t matter what we push for the string here.  What</span></div><div class="line"><a name="l04873"></a><span class="lineno"> 4873</span>&#160;<span class="comment">             the code at `fail&#39; tests is the value for the pattern.  */</span></div><div class="line"><a name="l04874"></a><span class="lineno"> 4874</span>&#160;          <a class="code" href="regex_8c.html#a74904744b0c1f8fe8cb2bf1584da2b3b">PUSH_FAILURE_POINT</a> (0, 0, -2);</div><div class="line"><a name="l04875"></a><span class="lineno"> 4875</span>&#160;          <span class="keywordflow">goto</span> unconditional_jump;</div><div class="line"><a name="l04876"></a><span class="lineno"> 4876</span>&#160;</div><div class="line"><a name="l04877"></a><span class="lineno"> 4877</span>&#160;</div><div class="line"><a name="l04878"></a><span class="lineno"> 4878</span>&#160;        <span class="comment">/* At the end of an alternative, we need to push a dummy failure</span></div><div class="line"><a name="l04879"></a><span class="lineno"> 4879</span>&#160;<span class="comment">           point in case we are followed by a `pop_failure_jump&#39;, because</span></div><div class="line"><a name="l04880"></a><span class="lineno"> 4880</span>&#160;<span class="comment">           we don&#39;t want the failure point for the alternative to be</span></div><div class="line"><a name="l04881"></a><span class="lineno"> 4881</span>&#160;<span class="comment">           popped.  For example, matching `(a|ab)*&#39; against `aab&#39;</span></div><div class="line"><a name="l04882"></a><span class="lineno"> 4882</span>&#160;<span class="comment">           requires that we match the `ab&#39; alternative.  */</span></div><div class="line"><a name="l04883"></a><span class="lineno"> 4883</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118ae96f67086c4f61cc6fd32b6b493dc17f">push_dummy_failure</a>:</div><div class="line"><a name="l04884"></a><span class="lineno"> 4884</span>&#160;          <a class="code" href="regex_8c.html#a90a312923984a45f83767acea95b84a1">DEBUG_PRINT1</a> (<span class="stringliteral">&quot;EXECUTING push_dummy_failure.\n&quot;</span>);</div><div class="line"><a name="l04885"></a><span class="lineno"> 4885</span>&#160;          <span class="comment">/* See comments just above at `dummy_failure_jump&#39; about the</span></div><div class="line"><a name="l04886"></a><span class="lineno"> 4886</span>&#160;<span class="comment">             two zeroes.  */</span></div><div class="line"><a name="l04887"></a><span class="lineno"> 4887</span>&#160;          <a class="code" href="regex_8c.html#a74904744b0c1f8fe8cb2bf1584da2b3b">PUSH_FAILURE_POINT</a> (0, 0, -2);</div><div class="line"><a name="l04888"></a><span class="lineno"> 4888</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l04889"></a><span class="lineno"> 4889</span>&#160;</div><div class="line"><a name="l04890"></a><span class="lineno"> 4890</span>&#160;        <span class="comment">/* Have to succeed matching what follows at least n times.</span></div><div class="line"><a name="l04891"></a><span class="lineno"> 4891</span>&#160;<span class="comment">           After that, handle like `on_failure_jump&#39;.  */</span></div><div class="line"><a name="l04892"></a><span class="lineno"> 4892</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118ae45bee3e6749253a8ba8769646f79734">succeed_n</a>:</div><div class="line"><a name="l04893"></a><span class="lineno"> 4893</span>&#160;          <a class="code" href="regex_8c.html#a9afddc5990335682b1958801af7e4bf3">EXTRACT_NUMBER</a> (mcnt, p + 2);</div><div class="line"><a name="l04894"></a><span class="lineno"> 4894</span>&#160;          <a class="code" href="regex_8c.html#aa56b1ff14ec552b5af8e9af50bc9d5cc">DEBUG_PRINT2</a> (<span class="stringliteral">&quot;EXECUTING succeed_n %d.\n&quot;</span>, mcnt);</div><div class="line"><a name="l04895"></a><span class="lineno"> 4895</span>&#160;</div><div class="line"><a name="l04896"></a><span class="lineno"> 4896</span>&#160;          <a class="code" href="sendlib_8c.html#af576bf8ffa22a44e53018c67095ffbf0">assert</a> (mcnt &gt;= 0);</div><div class="line"><a name="l04897"></a><span class="lineno"> 4897</span>&#160;          <span class="comment">/* Originally, this is how many times we HAVE to succeed.  */</span></div><div class="line"><a name="l04898"></a><span class="lineno"> 4898</span>&#160;          <span class="keywordflow">if</span> (mcnt &gt; 0)</div><div class="line"><a name="l04899"></a><span class="lineno"> 4899</span>&#160;            {</div><div class="line"><a name="l04900"></a><span class="lineno"> 4900</span>&#160;               mcnt--;</div><div class="line"><a name="l04901"></a><span class="lineno"> 4901</span>&#160;               p += 2;</div><div class="line"><a name="l04902"></a><span class="lineno"> 4902</span>&#160;               <a class="code" href="regex_8c.html#aec2d0e7545b2756d65a556d3ac7cdf89">STORE_NUMBER_AND_INCR</a> (p, mcnt);</div><div class="line"><a name="l04903"></a><span class="lineno"> 4903</span>&#160;<span class="preprocessor">#ifdef _LIBC</span></div><div class="line"><a name="l04904"></a><span class="lineno"> 4904</span>&#160;               <a class="code" href="regex_8c.html#ae1a07ee1a4b73aa71754bce23d0690aa">DEBUG_PRINT3</a> (<span class="stringliteral">&quot;  Setting %p to %d.\n&quot;</span>, p - 2, mcnt);</div><div class="line"><a name="l04905"></a><span class="lineno"> 4905</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l04906"></a><span class="lineno"> 4906</span>&#160;               <a class="code" href="regex_8c.html#ae1a07ee1a4b73aa71754bce23d0690aa">DEBUG_PRINT3</a> (<span class="stringliteral">&quot;  Setting 0x%x to %d.\n&quot;</span>, p - 2, mcnt);</div><div class="line"><a name="l04907"></a><span class="lineno"> 4907</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04908"></a><span class="lineno"> 4908</span>&#160;            }</div><div class="line"><a name="l04909"></a><span class="lineno"> 4909</span>&#160;          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mcnt == 0)</div><div class="line"><a name="l04910"></a><span class="lineno"> 4910</span>&#160;            {</div><div class="line"><a name="l04911"></a><span class="lineno"> 4911</span>&#160;<span class="preprocessor">#ifdef _LIBC</span></div><div class="line"><a name="l04912"></a><span class="lineno"> 4912</span>&#160;              <a class="code" href="regex_8c.html#aa56b1ff14ec552b5af8e9af50bc9d5cc">DEBUG_PRINT2</a> (<span class="stringliteral">&quot;  Setting two bytes from %p to no_op.\n&quot;</span>, p+2);</div><div class="line"><a name="l04913"></a><span class="lineno"> 4913</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l04914"></a><span class="lineno"> 4914</span>&#160;              <a class="code" href="regex_8c.html#aa56b1ff14ec552b5af8e9af50bc9d5cc">DEBUG_PRINT2</a> (<span class="stringliteral">&quot;  Setting two bytes from 0x%x to no_op.\n&quot;</span>, p+2);</div><div class="line"><a name="l04915"></a><span class="lineno"> 4915</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04916"></a><span class="lineno"> 4916</span>&#160;              p[2] = (<span class="keywordtype">unsigned</span> char) <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a292eb17c5d97bf50ef0c4f733e56c836">no_op</a>;</div><div class="line"><a name="l04917"></a><span class="lineno"> 4917</span>&#160;              p[3] = (<span class="keywordtype">unsigned</span> char) <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a292eb17c5d97bf50ef0c4f733e56c836">no_op</a>;</div><div class="line"><a name="l04918"></a><span class="lineno"> 4918</span>&#160;              <span class="keywordflow">goto</span> on_failure;</div><div class="line"><a name="l04919"></a><span class="lineno"> 4919</span>&#160;            }</div><div class="line"><a name="l04920"></a><span class="lineno"> 4920</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l04921"></a><span class="lineno"> 4921</span>&#160;</div><div class="line"><a name="l04922"></a><span class="lineno"> 4922</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a333721a24859c29322c8abdae4159e1b">jump_n</a>:</div><div class="line"><a name="l04923"></a><span class="lineno"> 4923</span>&#160;          <a class="code" href="regex_8c.html#a9afddc5990335682b1958801af7e4bf3">EXTRACT_NUMBER</a> (mcnt, p + 2);</div><div class="line"><a name="l04924"></a><span class="lineno"> 4924</span>&#160;          <a class="code" href="regex_8c.html#aa56b1ff14ec552b5af8e9af50bc9d5cc">DEBUG_PRINT2</a> (<span class="stringliteral">&quot;EXECUTING jump_n %d.\n&quot;</span>, mcnt);</div><div class="line"><a name="l04925"></a><span class="lineno"> 4925</span>&#160;</div><div class="line"><a name="l04926"></a><span class="lineno"> 4926</span>&#160;          <span class="comment">/* Originally, this is how many times we CAN jump.  */</span></div><div class="line"><a name="l04927"></a><span class="lineno"> 4927</span>&#160;          <span class="keywordflow">if</span> (mcnt)</div><div class="line"><a name="l04928"></a><span class="lineno"> 4928</span>&#160;            {</div><div class="line"><a name="l04929"></a><span class="lineno"> 4929</span>&#160;               mcnt--;</div><div class="line"><a name="l04930"></a><span class="lineno"> 4930</span>&#160;               <a class="code" href="regex_8c.html#a6878991bbaf83ac3debe1d74f4a450e1">STORE_NUMBER</a> (p + 2, mcnt);</div><div class="line"><a name="l04931"></a><span class="lineno"> 4931</span>&#160;<span class="preprocessor">#ifdef _LIBC</span></div><div class="line"><a name="l04932"></a><span class="lineno"> 4932</span>&#160;               <a class="code" href="regex_8c.html#ae1a07ee1a4b73aa71754bce23d0690aa">DEBUG_PRINT3</a> (<span class="stringliteral">&quot;  Setting %p to %d.\n&quot;</span>, p + 2, mcnt);</div><div class="line"><a name="l04933"></a><span class="lineno"> 4933</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l04934"></a><span class="lineno"> 4934</span>&#160;               <a class="code" href="regex_8c.html#ae1a07ee1a4b73aa71754bce23d0690aa">DEBUG_PRINT3</a> (<span class="stringliteral">&quot;  Setting 0x%x to %d.\n&quot;</span>, p + 2, mcnt);</div><div class="line"><a name="l04935"></a><span class="lineno"> 4935</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04936"></a><span class="lineno"> 4936</span>&#160;               <span class="keywordflow">goto</span> unconditional_jump;</div><div class="line"><a name="l04937"></a><span class="lineno"> 4937</span>&#160;            }</div><div class="line"><a name="l04938"></a><span class="lineno"> 4938</span>&#160;          <span class="comment">/* If don&#39;t have to jump any more, skip over the rest of command.  */</span></div><div class="line"><a name="l04939"></a><span class="lineno"> 4939</span>&#160;          <span class="keywordflow">else</span></div><div class="line"><a name="l04940"></a><span class="lineno"> 4940</span>&#160;            p += 4;</div><div class="line"><a name="l04941"></a><span class="lineno"> 4941</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l04942"></a><span class="lineno"> 4942</span>&#160;</div><div class="line"><a name="l04943"></a><span class="lineno"> 4943</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a0f280efb7129538f3b07aa789fc99fa1">set_number_at</a>:</div><div class="line"><a name="l04944"></a><span class="lineno"> 4944</span>&#160;          {</div><div class="line"><a name="l04945"></a><span class="lineno"> 4945</span>&#160;            <a class="code" href="regex_8c.html#a90a312923984a45f83767acea95b84a1">DEBUG_PRINT1</a> (<span class="stringliteral">&quot;EXECUTING set_number_at.\n&quot;</span>);</div><div class="line"><a name="l04946"></a><span class="lineno"> 4946</span>&#160;</div><div class="line"><a name="l04947"></a><span class="lineno"> 4947</span>&#160;            <a class="code" href="regex_8c.html#abf958c753956f073a33bd336660e9038">EXTRACT_NUMBER_AND_INCR</a> (mcnt, p);</div><div class="line"><a name="l04948"></a><span class="lineno"> 4948</span>&#160;            p1 = p + mcnt;</div><div class="line"><a name="l04949"></a><span class="lineno"> 4949</span>&#160;            <a class="code" href="regex_8c.html#abf958c753956f073a33bd336660e9038">EXTRACT_NUMBER_AND_INCR</a> (mcnt, p);</div><div class="line"><a name="l04950"></a><span class="lineno"> 4950</span>&#160;<span class="preprocessor">#ifdef _LIBC</span></div><div class="line"><a name="l04951"></a><span class="lineno"> 4951</span>&#160;            <a class="code" href="regex_8c.html#ae1a07ee1a4b73aa71754bce23d0690aa">DEBUG_PRINT3</a> (<span class="stringliteral">&quot;  Setting %p to %d.\n&quot;</span>, p1, mcnt);</div><div class="line"><a name="l04952"></a><span class="lineno"> 4952</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l04953"></a><span class="lineno"> 4953</span>&#160;            <a class="code" href="regex_8c.html#ae1a07ee1a4b73aa71754bce23d0690aa">DEBUG_PRINT3</a> (<span class="stringliteral">&quot;  Setting 0x%x to %d.\n&quot;</span>, p1, mcnt);</div><div class="line"><a name="l04954"></a><span class="lineno"> 4954</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04955"></a><span class="lineno"> 4955</span>&#160;            <a class="code" href="regex_8c.html#a6878991bbaf83ac3debe1d74f4a450e1">STORE_NUMBER</a> (p1, mcnt);</div><div class="line"><a name="l04956"></a><span class="lineno"> 4956</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l04957"></a><span class="lineno"> 4957</span>&#160;          }</div><div class="line"><a name="l04958"></a><span class="lineno"> 4958</span>&#160;</div><div class="line"><a name="l04959"></a><span class="lineno"> 4959</span>&#160;<span class="preprocessor">#if 0</span></div><div class="line"><a name="l04960"></a><span class="lineno"> 4960</span>&#160;        <span class="comment">/* The DEC Alpha C compiler 3.x generates incorrect code for the</span></div><div class="line"><a name="l04961"></a><span class="lineno"> 4961</span>&#160;<span class="comment">           test  WORDCHAR_P (d - 1) != WORDCHAR_P (d)  in the expansion of</span></div><div class="line"><a name="l04962"></a><span class="lineno"> 4962</span>&#160;<span class="comment">           AT_WORD_BOUNDARY, so this code is disabled.  Expanding the</span></div><div class="line"><a name="l04963"></a><span class="lineno"> 4963</span>&#160;<span class="comment">           macro and introducing temporary variables works around the bug.  */</span></div><div class="line"><a name="l04964"></a><span class="lineno"> 4964</span>&#160;</div><div class="line"><a name="l04965"></a><span class="lineno"> 4965</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a47168d753b8d555d2e89416a4b660da9">wordbound</a>:</div><div class="line"><a name="l04966"></a><span class="lineno"> 4966</span>&#160;          <a class="code" href="regex_8c.html#a90a312923984a45f83767acea95b84a1">DEBUG_PRINT1</a> (<span class="stringliteral">&quot;EXECUTING wordbound.\n&quot;</span>);</div><div class="line"><a name="l04967"></a><span class="lineno"> 4967</span>&#160;          <span class="keywordflow">if</span> (AT_WORD_BOUNDARY (d))</div><div class="line"><a name="l04968"></a><span class="lineno"> 4968</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l04969"></a><span class="lineno"> 4969</span>&#160;          <span class="keywordflow">goto</span> fail;</div><div class="line"><a name="l04970"></a><span class="lineno"> 4970</span>&#160;</div><div class="line"><a name="l04971"></a><span class="lineno"> 4971</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a9077999caa8f316015aabfd83b3745a0">notwordbound</a>:</div><div class="line"><a name="l04972"></a><span class="lineno"> 4972</span>&#160;          <a class="code" href="regex_8c.html#a90a312923984a45f83767acea95b84a1">DEBUG_PRINT1</a> (<span class="stringliteral">&quot;EXECUTING notwordbound.\n&quot;</span>);</div><div class="line"><a name="l04973"></a><span class="lineno"> 4973</span>&#160;          <span class="keywordflow">if</span> (AT_WORD_BOUNDARY (d))</div><div class="line"><a name="l04974"></a><span class="lineno"> 4974</span>&#160;            <span class="keywordflow">goto</span> fail;</div><div class="line"><a name="l04975"></a><span class="lineno"> 4975</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l04976"></a><span class="lineno"> 4976</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l04977"></a><span class="lineno"> 4977</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a47168d753b8d555d2e89416a4b660da9">wordbound</a>:</div><div class="line"><a name="l04978"></a><span class="lineno"> 4978</span>&#160;        {</div><div class="line"><a name="l04979"></a><span class="lineno"> 4979</span>&#160;          <span class="keywordtype">boolean</span> prevchar, thischar;</div><div class="line"><a name="l04980"></a><span class="lineno"> 4980</span>&#160;</div><div class="line"><a name="l04981"></a><span class="lineno"> 4981</span>&#160;          <a class="code" href="regex_8c.html#a90a312923984a45f83767acea95b84a1">DEBUG_PRINT1</a> (<span class="stringliteral">&quot;EXECUTING wordbound.\n&quot;</span>);</div><div class="line"><a name="l04982"></a><span class="lineno"> 4982</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="regex_8c.html#a4ae509096aba99683d03e7731c8e1095">AT_STRINGS_BEG</a> (d) || <a class="code" href="regex_8c.html#a828f1cb8f3855b8656267c902effad75">AT_STRINGS_END</a> (d))</div><div class="line"><a name="l04983"></a><span class="lineno"> 4983</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l04984"></a><span class="lineno"> 4984</span>&#160;</div><div class="line"><a name="l04985"></a><span class="lineno"> 4985</span>&#160;          prevchar = <a class="code" href="regex_8c.html#a9cb82d6af5bb56ce088c91cef5127ce6">WORDCHAR_P</a> (d - 1);</div><div class="line"><a name="l04986"></a><span class="lineno"> 4986</span>&#160;          thischar = <a class="code" href="regex_8c.html#a9cb82d6af5bb56ce088c91cef5127ce6">WORDCHAR_P</a> (d);</div><div class="line"><a name="l04987"></a><span class="lineno"> 4987</span>&#160;          <span class="keywordflow">if</span> (prevchar != thischar)</div><div class="line"><a name="l04988"></a><span class="lineno"> 4988</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l04989"></a><span class="lineno"> 4989</span>&#160;          <span class="keywordflow">goto</span> fail;</div><div class="line"><a name="l04990"></a><span class="lineno"> 4990</span>&#160;        }</div><div class="line"><a name="l04991"></a><span class="lineno"> 4991</span>&#160;</div><div class="line"><a name="l04992"></a><span class="lineno"> 4992</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a9077999caa8f316015aabfd83b3745a0">notwordbound</a>:</div><div class="line"><a name="l04993"></a><span class="lineno"> 4993</span>&#160;        {</div><div class="line"><a name="l04994"></a><span class="lineno"> 4994</span>&#160;          <span class="keywordtype">boolean</span> prevchar, thischar;</div><div class="line"><a name="l04995"></a><span class="lineno"> 4995</span>&#160;</div><div class="line"><a name="l04996"></a><span class="lineno"> 4996</span>&#160;          <a class="code" href="regex_8c.html#a90a312923984a45f83767acea95b84a1">DEBUG_PRINT1</a> (<span class="stringliteral">&quot;EXECUTING notwordbound.\n&quot;</span>);</div><div class="line"><a name="l04997"></a><span class="lineno"> 4997</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="regex_8c.html#a4ae509096aba99683d03e7731c8e1095">AT_STRINGS_BEG</a> (d) || <a class="code" href="regex_8c.html#a828f1cb8f3855b8656267c902effad75">AT_STRINGS_END</a> (d))</div><div class="line"><a name="l04998"></a><span class="lineno"> 4998</span>&#160;            <span class="keywordflow">goto</span> fail;</div><div class="line"><a name="l04999"></a><span class="lineno"> 4999</span>&#160;</div><div class="line"><a name="l05000"></a><span class="lineno"> 5000</span>&#160;          prevchar = <a class="code" href="regex_8c.html#a9cb82d6af5bb56ce088c91cef5127ce6">WORDCHAR_P</a> (d - 1);</div><div class="line"><a name="l05001"></a><span class="lineno"> 5001</span>&#160;          thischar = <a class="code" href="regex_8c.html#a9cb82d6af5bb56ce088c91cef5127ce6">WORDCHAR_P</a> (d);</div><div class="line"><a name="l05002"></a><span class="lineno"> 5002</span>&#160;          <span class="keywordflow">if</span> (prevchar != thischar)</div><div class="line"><a name="l05003"></a><span class="lineno"> 5003</span>&#160;            <span class="keywordflow">goto</span> fail;</div><div class="line"><a name="l05004"></a><span class="lineno"> 5004</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l05005"></a><span class="lineno"> 5005</span>&#160;        }</div><div class="line"><a name="l05006"></a><span class="lineno"> 5006</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l05007"></a><span class="lineno"> 5007</span>&#160;</div><div class="line"><a name="l05008"></a><span class="lineno"> 5008</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118ad88e0028985b6bc61df64cd9578d3f18">wordbeg</a>:</div><div class="line"><a name="l05009"></a><span class="lineno"> 5009</span>&#160;          <a class="code" href="regex_8c.html#a90a312923984a45f83767acea95b84a1">DEBUG_PRINT1</a> (<span class="stringliteral">&quot;EXECUTING wordbeg.\n&quot;</span>);</div><div class="line"><a name="l05010"></a><span class="lineno"> 5010</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="regex_8c.html#a9cb82d6af5bb56ce088c91cef5127ce6">WORDCHAR_P</a> (d) &amp;&amp; (<a class="code" href="regex_8c.html#a4ae509096aba99683d03e7731c8e1095">AT_STRINGS_BEG</a> (d) || !<a class="code" href="regex_8c.html#a9cb82d6af5bb56ce088c91cef5127ce6">WORDCHAR_P</a> (d - 1)))</div><div class="line"><a name="l05011"></a><span class="lineno"> 5011</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l05012"></a><span class="lineno"> 5012</span>&#160;          <span class="keywordflow">goto</span> fail;</div><div class="line"><a name="l05013"></a><span class="lineno"> 5013</span>&#160;</div><div class="line"><a name="l05014"></a><span class="lineno"> 5014</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118accd3c02d3bd48af753cf5261bfb084ac">wordend</a>:</div><div class="line"><a name="l05015"></a><span class="lineno"> 5015</span>&#160;          <a class="code" href="regex_8c.html#a90a312923984a45f83767acea95b84a1">DEBUG_PRINT1</a> (<span class="stringliteral">&quot;EXECUTING wordend.\n&quot;</span>);</div><div class="line"><a name="l05016"></a><span class="lineno"> 5016</span>&#160;          <span class="keywordflow">if</span> (!<a class="code" href="regex_8c.html#a4ae509096aba99683d03e7731c8e1095">AT_STRINGS_BEG</a> (d) &amp;&amp; <a class="code" href="regex_8c.html#a9cb82d6af5bb56ce088c91cef5127ce6">WORDCHAR_P</a> (d - 1)</div><div class="line"><a name="l05017"></a><span class="lineno"> 5017</span>&#160;              &amp;&amp; (!<a class="code" href="regex_8c.html#a9cb82d6af5bb56ce088c91cef5127ce6">WORDCHAR_P</a> (d) || <a class="code" href="regex_8c.html#a828f1cb8f3855b8656267c902effad75">AT_STRINGS_END</a> (d)))</div><div class="line"><a name="l05018"></a><span class="lineno"> 5018</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l05019"></a><span class="lineno"> 5019</span>&#160;          <span class="keywordflow">goto</span> fail;</div><div class="line"><a name="l05020"></a><span class="lineno"> 5020</span>&#160;</div><div class="line"><a name="l05021"></a><span class="lineno"> 5021</span>&#160;<span class="preprocessor">#ifdef emacs</span></div><div class="line"><a name="l05022"></a><span class="lineno"> 5022</span>&#160;        <span class="keywordflow">case</span> before_dot:</div><div class="line"><a name="l05023"></a><span class="lineno"> 5023</span>&#160;          <a class="code" href="regex_8c.html#a90a312923984a45f83767acea95b84a1">DEBUG_PRINT1</a> (<span class="stringliteral">&quot;EXECUTING before_dot.\n&quot;</span>);</div><div class="line"><a name="l05024"></a><span class="lineno"> 5024</span>&#160;          <span class="keywordflow">if</span> (PTR_CHAR_POS ((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) d) &gt;= point)</div><div class="line"><a name="l05025"></a><span class="lineno"> 5025</span>&#160;            <span class="keywordflow">goto</span> fail;</div><div class="line"><a name="l05026"></a><span class="lineno"> 5026</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l05027"></a><span class="lineno"> 5027</span>&#160;</div><div class="line"><a name="l05028"></a><span class="lineno"> 5028</span>&#160;        <span class="keywordflow">case</span> at_dot:</div><div class="line"><a name="l05029"></a><span class="lineno"> 5029</span>&#160;          <a class="code" href="regex_8c.html#a90a312923984a45f83767acea95b84a1">DEBUG_PRINT1</a> (<span class="stringliteral">&quot;EXECUTING at_dot.\n&quot;</span>);</div><div class="line"><a name="l05030"></a><span class="lineno"> 5030</span>&#160;          <span class="keywordflow">if</span> (PTR_CHAR_POS ((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) d) != point)</div><div class="line"><a name="l05031"></a><span class="lineno"> 5031</span>&#160;            <span class="keywordflow">goto</span> fail;</div><div class="line"><a name="l05032"></a><span class="lineno"> 5032</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l05033"></a><span class="lineno"> 5033</span>&#160;</div><div class="line"><a name="l05034"></a><span class="lineno"> 5034</span>&#160;        <span class="keywordflow">case</span> after_dot:</div><div class="line"><a name="l05035"></a><span class="lineno"> 5035</span>&#160;          <a class="code" href="regex_8c.html#a90a312923984a45f83767acea95b84a1">DEBUG_PRINT1</a> (<span class="stringliteral">&quot;EXECUTING after_dot.\n&quot;</span>);</div><div class="line"><a name="l05036"></a><span class="lineno"> 5036</span>&#160;          <span class="keywordflow">if</span> (PTR_CHAR_POS ((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) d) &lt;= point)</div><div class="line"><a name="l05037"></a><span class="lineno"> 5037</span>&#160;            <span class="keywordflow">goto</span> fail;</div><div class="line"><a name="l05038"></a><span class="lineno"> 5038</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l05039"></a><span class="lineno"> 5039</span>&#160;</div><div class="line"><a name="l05040"></a><span class="lineno"> 5040</span>&#160;        <span class="keywordflow">case</span> syntaxspec:</div><div class="line"><a name="l05041"></a><span class="lineno"> 5041</span>&#160;          <a class="code" href="regex_8c.html#aa56b1ff14ec552b5af8e9af50bc9d5cc">DEBUG_PRINT2</a> (<span class="stringliteral">&quot;EXECUTING syntaxspec %d.\n&quot;</span>, mcnt);</div><div class="line"><a name="l05042"></a><span class="lineno"> 5042</span>&#160;          mcnt = *p++;</div><div class="line"><a name="l05043"></a><span class="lineno"> 5043</span>&#160;          <span class="keywordflow">goto</span> matchsyntax;</div><div class="line"><a name="l05044"></a><span class="lineno"> 5044</span>&#160;</div><div class="line"><a name="l05045"></a><span class="lineno"> 5045</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a26eed2ae578da61bebc7b55e7610cf0b">wordchar</a>:</div><div class="line"><a name="l05046"></a><span class="lineno"> 5046</span>&#160;          <a class="code" href="regex_8c.html#a90a312923984a45f83767acea95b84a1">DEBUG_PRINT1</a> (<span class="stringliteral">&quot;EXECUTING Emacs wordchar.\n&quot;</span>);</div><div class="line"><a name="l05047"></a><span class="lineno"> 5047</span>&#160;          mcnt = (int) <a class="code" href="regex_8c.html#a3c4fa96131648fe8cb5bb3055015e73a">Sword</a>;</div><div class="line"><a name="l05048"></a><span class="lineno"> 5048</span>&#160;        matchsyntax:</div><div class="line"><a name="l05049"></a><span class="lineno"> 5049</span>&#160;          <a class="code" href="regex_8c.html#a03e91c701217af9b9faab62cb2a65d7d">PREFETCH</a> ();</div><div class="line"><a name="l05050"></a><span class="lineno"> 5050</span>&#160;          <span class="comment">/* Can&#39;t use *d++ here; SYNTAX may be an unsafe macro.  */</span></div><div class="line"><a name="l05051"></a><span class="lineno"> 5051</span>&#160;          d++;</div><div class="line"><a name="l05052"></a><span class="lineno"> 5052</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="regex_8c.html#aa3ac3cf24b0571b34350ae5cf10f354e">SYNTAX</a> (d[-1]) != (<span class="keyword">enum</span> syntaxcode) mcnt)</div><div class="line"><a name="l05053"></a><span class="lineno"> 5053</span>&#160;            <span class="keywordflow">goto</span> fail;</div><div class="line"><a name="l05054"></a><span class="lineno"> 5054</span>&#160;          <a class="code" href="regex_8c.html#aa286396ee78a5823c6bedd72e303e4c9">SET_REGS_MATCHED</a> ();</div><div class="line"><a name="l05055"></a><span class="lineno"> 5055</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l05056"></a><span class="lineno"> 5056</span>&#160;</div><div class="line"><a name="l05057"></a><span class="lineno"> 5057</span>&#160;        <span class="keywordflow">case</span> notsyntaxspec:</div><div class="line"><a name="l05058"></a><span class="lineno"> 5058</span>&#160;          <a class="code" href="regex_8c.html#aa56b1ff14ec552b5af8e9af50bc9d5cc">DEBUG_PRINT2</a> (<span class="stringliteral">&quot;EXECUTING notsyntaxspec %d.\n&quot;</span>, mcnt);</div><div class="line"><a name="l05059"></a><span class="lineno"> 5059</span>&#160;          mcnt = *p++;</div><div class="line"><a name="l05060"></a><span class="lineno"> 5060</span>&#160;          <span class="keywordflow">goto</span> matchnotsyntax;</div><div class="line"><a name="l05061"></a><span class="lineno"> 5061</span>&#160;</div><div class="line"><a name="l05062"></a><span class="lineno"> 5062</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a01398d7bcfdbcb84b318fc65a7ef9c93">notwordchar</a>:</div><div class="line"><a name="l05063"></a><span class="lineno"> 5063</span>&#160;          <a class="code" href="regex_8c.html#a90a312923984a45f83767acea95b84a1">DEBUG_PRINT1</a> (<span class="stringliteral">&quot;EXECUTING Emacs notwordchar.\n&quot;</span>);</div><div class="line"><a name="l05064"></a><span class="lineno"> 5064</span>&#160;          mcnt = (int) <a class="code" href="regex_8c.html#a3c4fa96131648fe8cb5bb3055015e73a">Sword</a>;</div><div class="line"><a name="l05065"></a><span class="lineno"> 5065</span>&#160;        matchnotsyntax:</div><div class="line"><a name="l05066"></a><span class="lineno"> 5066</span>&#160;          <a class="code" href="regex_8c.html#a03e91c701217af9b9faab62cb2a65d7d">PREFETCH</a> ();</div><div class="line"><a name="l05067"></a><span class="lineno"> 5067</span>&#160;          <span class="comment">/* Can&#39;t use *d++ here; SYNTAX may be an unsafe macro.  */</span></div><div class="line"><a name="l05068"></a><span class="lineno"> 5068</span>&#160;          d++;</div><div class="line"><a name="l05069"></a><span class="lineno"> 5069</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="regex_8c.html#aa3ac3cf24b0571b34350ae5cf10f354e">SYNTAX</a> (d[-1]) == (<span class="keyword">enum</span> syntaxcode) mcnt)</div><div class="line"><a name="l05070"></a><span class="lineno"> 5070</span>&#160;            <span class="keywordflow">goto</span> fail;</div><div class="line"><a name="l05071"></a><span class="lineno"> 5071</span>&#160;          <a class="code" href="regex_8c.html#aa286396ee78a5823c6bedd72e303e4c9">SET_REGS_MATCHED</a> ();</div><div class="line"><a name="l05072"></a><span class="lineno"> 5072</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l05073"></a><span class="lineno"> 5073</span>&#160;</div><div class="line"><a name="l05074"></a><span class="lineno"> 5074</span>&#160;<span class="preprocessor">#else </span><span class="comment">/* not emacs */</span><span class="preprocessor"></span></div><div class="line"><a name="l05075"></a><span class="lineno"> 5075</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a26eed2ae578da61bebc7b55e7610cf0b">wordchar</a>:</div><div class="line"><a name="l05076"></a><span class="lineno"> 5076</span>&#160;          <a class="code" href="regex_8c.html#a90a312923984a45f83767acea95b84a1">DEBUG_PRINT1</a> (<span class="stringliteral">&quot;EXECUTING non-Emacs wordchar.\n&quot;</span>);</div><div class="line"><a name="l05077"></a><span class="lineno"> 5077</span>&#160;          <a class="code" href="regex_8c.html#a03e91c701217af9b9faab62cb2a65d7d">PREFETCH</a> ();</div><div class="line"><a name="l05078"></a><span class="lineno"> 5078</span>&#160;          <span class="keywordflow">if</span> (!<a class="code" href="regex_8c.html#a9cb82d6af5bb56ce088c91cef5127ce6">WORDCHAR_P</a> (d))</div><div class="line"><a name="l05079"></a><span class="lineno"> 5079</span>&#160;            <span class="keywordflow">goto</span> fail;</div><div class="line"><a name="l05080"></a><span class="lineno"> 5080</span>&#160;          <a class="code" href="regex_8c.html#aa286396ee78a5823c6bedd72e303e4c9">SET_REGS_MATCHED</a> ();</div><div class="line"><a name="l05081"></a><span class="lineno"> 5081</span>&#160;          d++;</div><div class="line"><a name="l05082"></a><span class="lineno"> 5082</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l05083"></a><span class="lineno"> 5083</span>&#160;</div><div class="line"><a name="l05084"></a><span class="lineno"> 5084</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a01398d7bcfdbcb84b318fc65a7ef9c93">notwordchar</a>:</div><div class="line"><a name="l05085"></a><span class="lineno"> 5085</span>&#160;          <a class="code" href="regex_8c.html#a90a312923984a45f83767acea95b84a1">DEBUG_PRINT1</a> (<span class="stringliteral">&quot;EXECUTING non-Emacs notwordchar.\n&quot;</span>);</div><div class="line"><a name="l05086"></a><span class="lineno"> 5086</span>&#160;          <a class="code" href="regex_8c.html#a03e91c701217af9b9faab62cb2a65d7d">PREFETCH</a> ();</div><div class="line"><a name="l05087"></a><span class="lineno"> 5087</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="regex_8c.html#a9cb82d6af5bb56ce088c91cef5127ce6">WORDCHAR_P</a> (d))</div><div class="line"><a name="l05088"></a><span class="lineno"> 5088</span>&#160;            <span class="keywordflow">goto</span> fail;</div><div class="line"><a name="l05089"></a><span class="lineno"> 5089</span>&#160;          <a class="code" href="regex_8c.html#aa286396ee78a5823c6bedd72e303e4c9">SET_REGS_MATCHED</a> ();</div><div class="line"><a name="l05090"></a><span class="lineno"> 5090</span>&#160;          d++;</div><div class="line"><a name="l05091"></a><span class="lineno"> 5091</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l05092"></a><span class="lineno"> 5092</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* not emacs */</span><span class="preprocessor"></span></div><div class="line"><a name="l05093"></a><span class="lineno"> 5093</span>&#160;</div><div class="line"><a name="l05094"></a><span class="lineno"> 5094</span>&#160;        <span class="keywordflow">default</span>:</div><div class="line"><a name="l05095"></a><span class="lineno"> 5095</span>&#160;          abort ();</div><div class="line"><a name="l05096"></a><span class="lineno"> 5096</span>&#160;        }</div><div class="line"><a name="l05097"></a><span class="lineno"> 5097</span>&#160;      <span class="keywordflow">continue</span>;  <span class="comment">/* Successfully executed one pattern command; keep going.  */</span></div><div class="line"><a name="l05098"></a><span class="lineno"> 5098</span>&#160;</div><div class="line"><a name="l05099"></a><span class="lineno"> 5099</span>&#160;</div><div class="line"><a name="l05100"></a><span class="lineno"> 5100</span>&#160;    <span class="comment">/* We goto here if a matching operation fails. */</span></div><div class="line"><a name="l05101"></a><span class="lineno"> 5101</span>&#160;    fail:</div><div class="line"><a name="l05102"></a><span class="lineno"> 5102</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="regex_8c.html#a222a4648230cba6a1801e51b4e2ced77">FAIL_STACK_EMPTY</a> ())</div><div class="line"><a name="l05103"></a><span class="lineno"> 5103</span>&#160;        { <span class="comment">/* A restart point is known.  Restore to that state.  */</span></div><div class="line"><a name="l05104"></a><span class="lineno"> 5104</span>&#160;          <a class="code" href="regex_8c.html#a90a312923984a45f83767acea95b84a1">DEBUG_PRINT1</a> (<span class="stringliteral">&quot;\nFAIL:\n&quot;</span>);</div><div class="line"><a name="l05105"></a><span class="lineno"> 5105</span>&#160;          <a class="code" href="regex_8c.html#a51d78204b5e3cc240058c986103c8b8e">POP_FAILURE_POINT</a> (d, p,</div><div class="line"><a name="l05106"></a><span class="lineno"> 5106</span>&#160;                             lowest_active_reg, highest_active_reg,</div><div class="line"><a name="l05107"></a><span class="lineno"> 5107</span>&#160;                             regstart, regend, reg_info);</div><div class="line"><a name="l05108"></a><span class="lineno"> 5108</span>&#160;</div><div class="line"><a name="l05109"></a><span class="lineno"> 5109</span>&#160;          <span class="comment">/* If this failure point is a dummy, try the next one.  */</span></div><div class="line"><a name="l05110"></a><span class="lineno"> 5110</span>&#160;          <span class="keywordflow">if</span> (!p)</div><div class="line"><a name="l05111"></a><span class="lineno"> 5111</span>&#160;            <span class="keywordflow">goto</span> fail;</div><div class="line"><a name="l05112"></a><span class="lineno"> 5112</span>&#160;</div><div class="line"><a name="l05113"></a><span class="lineno"> 5113</span>&#160;          <span class="comment">/* If we failed to the end of the pattern, don&#39;t examine *p.  */</span></div><div class="line"><a name="l05114"></a><span class="lineno"> 5114</span>&#160;          <a class="code" href="sendlib_8c.html#af576bf8ffa22a44e53018c67095ffbf0">assert</a> (p &lt;= pend);</div><div class="line"><a name="l05115"></a><span class="lineno"> 5115</span>&#160;          <span class="keywordflow">if</span> (p &lt; pend)</div><div class="line"><a name="l05116"></a><span class="lineno"> 5116</span>&#160;            {</div><div class="line"><a name="l05117"></a><span class="lineno"> 5117</span>&#160;              <span class="keywordtype">boolean</span> is_a_jump_n = <span class="keyword">false</span>;</div><div class="line"><a name="l05118"></a><span class="lineno"> 5118</span>&#160;</div><div class="line"><a name="l05119"></a><span class="lineno"> 5119</span>&#160;              <span class="comment">/* If failed to a backwards jump that&#39;s part of a repetition</span></div><div class="line"><a name="l05120"></a><span class="lineno"> 5120</span>&#160;<span class="comment">                 loop, need to pop this failure point and use the next one.  */</span></div><div class="line"><a name="l05121"></a><span class="lineno"> 5121</span>&#160;              <span class="keywordflow">switch</span> ((re_opcode_t) *p)</div><div class="line"><a name="l05122"></a><span class="lineno"> 5122</span>&#160;                {</div><div class="line"><a name="l05123"></a><span class="lineno"> 5123</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a333721a24859c29322c8abdae4159e1b">jump_n</a>:</div><div class="line"><a name="l05124"></a><span class="lineno"> 5124</span>&#160;                  is_a_jump_n = <span class="keyword">true</span>;</div><div class="line"><a name="l05125"></a><span class="lineno"> 5125</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a54819e2968ab91bf6ad492f131d7f37b">maybe_pop_jump</a>:</div><div class="line"><a name="l05126"></a><span class="lineno"> 5126</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a24cdcea4f39ca8613374deb4bfe5b2cb">pop_failure_jump</a>:</div><div class="line"><a name="l05127"></a><span class="lineno"> 5127</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a5a08a3c1fa135350961630d2f9c2b849">jump</a>:</div><div class="line"><a name="l05128"></a><span class="lineno"> 5128</span>&#160;                  p1 = p + 1;</div><div class="line"><a name="l05129"></a><span class="lineno"> 5129</span>&#160;                  <a class="code" href="regex_8c.html#abf958c753956f073a33bd336660e9038">EXTRACT_NUMBER_AND_INCR</a> (mcnt, p1);</div><div class="line"><a name="l05130"></a><span class="lineno"> 5130</span>&#160;                  p1 += mcnt;</div><div class="line"><a name="l05131"></a><span class="lineno"> 5131</span>&#160;</div><div class="line"><a name="l05132"></a><span class="lineno"> 5132</span>&#160;                  <span class="keywordflow">if</span> ((is_a_jump_n &amp;&amp; (re_opcode_t) *p1 == <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118ae45bee3e6749253a8ba8769646f79734">succeed_n</a>)</div><div class="line"><a name="l05133"></a><span class="lineno"> 5133</span>&#160;                      || (!is_a_jump_n</div><div class="line"><a name="l05134"></a><span class="lineno"> 5134</span>&#160;                          &amp;&amp; (re_opcode_t) *p1 == <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a5ca3d8a56cc5259243bcaffedd070287">on_failure_jump</a>))</div><div class="line"><a name="l05135"></a><span class="lineno"> 5135</span>&#160;                    <span class="keywordflow">goto</span> fail;</div><div class="line"><a name="l05136"></a><span class="lineno"> 5136</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l05137"></a><span class="lineno"> 5137</span>&#160;                <span class="keywordflow">default</span>:</div><div class="line"><a name="l05138"></a><span class="lineno"> 5138</span>&#160;                  <span class="comment">/* do nothing */</span> ;</div><div class="line"><a name="l05139"></a><span class="lineno"> 5139</span>&#160;                }</div><div class="line"><a name="l05140"></a><span class="lineno"> 5140</span>&#160;            }</div><div class="line"><a name="l05141"></a><span class="lineno"> 5141</span>&#160;</div><div class="line"><a name="l05142"></a><span class="lineno"> 5142</span>&#160;          <span class="keywordflow">if</span> (d &gt;= string1 &amp;&amp; d &lt;= end1)</div><div class="line"><a name="l05143"></a><span class="lineno"> 5143</span>&#160;            dend = end_match_1;</div><div class="line"><a name="l05144"></a><span class="lineno"> 5144</span>&#160;        }</div><div class="line"><a name="l05145"></a><span class="lineno"> 5145</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l05146"></a><span class="lineno"> 5146</span>&#160;        <span class="keywordflow">break</span>;   <span class="comment">/* Matching at this starting point really fails.  */</span></div><div class="line"><a name="l05147"></a><span class="lineno"> 5147</span>&#160;    } <span class="comment">/* for (;;) */</span></div><div class="line"><a name="l05148"></a><span class="lineno"> 5148</span>&#160;</div><div class="line"><a name="l05149"></a><span class="lineno"> 5149</span>&#160;  <span class="keywordflow">if</span> (best_regs_set)</div><div class="line"><a name="l05150"></a><span class="lineno"> 5150</span>&#160;    <span class="keywordflow">goto</span> restore_best_regs;</div><div class="line"><a name="l05151"></a><span class="lineno"> 5151</span>&#160;</div><div class="line"><a name="l05152"></a><span class="lineno"> 5152</span>&#160;  <a class="code" href="regex_8c.html#a7f3f2410fe2ae0089be0a2f3005f15dd">FREE_VARIABLES</a> ();</div><div class="line"><a name="l05153"></a><span class="lineno"> 5153</span>&#160;</div><div class="line"><a name="l05154"></a><span class="lineno"> 5154</span>&#160;  <span class="keywordflow">return</span> -1;                            <span class="comment">/* Failure to match.  */</span></div><div class="line"><a name="l05155"></a><span class="lineno"> 5155</span>&#160;} <span class="comment">/* re_match_2 */</span></div><div class="line"><a name="l05156"></a><span class="lineno"> 5156</span>&#160;</div><div class="line"><a name="l05157"></a><span class="lineno"> 5157</span>&#160;<span class="comment">/* Subroutine definitions for re_match_2.  */</span></div><div class="line"><a name="l05158"></a><span class="lineno"> 5158</span>&#160;</div><div class="line"><a name="l05159"></a><span class="lineno"> 5159</span>&#160;</div><div class="line"><a name="l05160"></a><span class="lineno"> 5160</span>&#160;<span class="comment">/* We are passed P pointing to a register number after a start_memory.</span></div><div class="line"><a name="l05161"></a><span class="lineno"> 5161</span>&#160;<span class="comment"></span></div><div class="line"><a name="l05162"></a><span class="lineno"> 5162</span>&#160;<span class="comment">   Return true if the pattern up to the corresponding stop_memory can</span></div><div class="line"><a name="l05163"></a><span class="lineno"> 5163</span>&#160;<span class="comment">   match the empty string, and false otherwise.</span></div><div class="line"><a name="l05164"></a><span class="lineno"> 5164</span>&#160;<span class="comment"></span></div><div class="line"><a name="l05165"></a><span class="lineno"> 5165</span>&#160;<span class="comment">   If we find the matching stop_memory, sets P to point to one past its number.</span></div><div class="line"><a name="l05166"></a><span class="lineno"> 5166</span>&#160;<span class="comment">   Otherwise, sets P to an undefined byte less than or equal to END.</span></div><div class="line"><a name="l05167"></a><span class="lineno"> 5167</span>&#160;<span class="comment"></span></div><div class="line"><a name="l05168"></a><span class="lineno"> 5168</span>&#160;<span class="comment">   We don&#39;t handle duplicates properly (yet).  */</span></div><div class="line"><a name="l05169"></a><span class="lineno"> 5169</span>&#160;</div><div class="line"><a name="l05170"></a><span class="lineno"> 5170</span>&#160;<span class="keyword">static</span> <span class="keywordtype">boolean</span></div><div class="line"><a name="l05171"></a><span class="lineno"><a class="line" href="regex_8c.html#ac1a3adc04ca27d22992ea483708c5812"> 5171</a></span>&#160;<a class="code" href="regex_8c.html#ac1a3adc04ca27d22992ea483708c5812">group_match_null_string_p</a> (p, end, reg_info)</div><div class="line"><a name="l05172"></a><span class="lineno"> 5172</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> **p, *<a class="code" href="structre__registers.html#a0a9d373f1ab74c9c2063f233476fa5d4">end</a>;</div><div class="line"><a name="l05173"></a><span class="lineno"> 5173</span>&#160;    <a class="code" href="unionregister__info__type.html">register_info_type</a> *reg_info;</div><div class="line"><a name="l05174"></a><span class="lineno"> 5174</span>&#160;{</div><div class="line"><a name="l05175"></a><span class="lineno"> 5175</span>&#160;  <span class="keywordtype">int</span> mcnt;</div><div class="line"><a name="l05176"></a><span class="lineno"> 5176</span>&#160;  <span class="comment">/* Point to after the args to the start_memory.  */</span></div><div class="line"><a name="l05177"></a><span class="lineno"> 5177</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *p1 = *p + 2;</div><div class="line"><a name="l05178"></a><span class="lineno"> 5178</span>&#160;</div><div class="line"><a name="l05179"></a><span class="lineno"> 5179</span>&#160;  <span class="keywordflow">while</span> (p1 &lt; end)</div><div class="line"><a name="l05180"></a><span class="lineno"> 5180</span>&#160;    {</div><div class="line"><a name="l05181"></a><span class="lineno"> 5181</span>&#160;      <span class="comment">/* Skip over opcodes that can match nothing, and return true or</span></div><div class="line"><a name="l05182"></a><span class="lineno"> 5182</span>&#160;<span class="comment">         false, as appropriate, when we get to one that can&#39;t, or to the</span></div><div class="line"><a name="l05183"></a><span class="lineno"> 5183</span>&#160;<span class="comment">         matching stop_memory.  */</span></div><div class="line"><a name="l05184"></a><span class="lineno"> 5184</span>&#160;</div><div class="line"><a name="l05185"></a><span class="lineno"> 5185</span>&#160;      <span class="keywordflow">switch</span> ((re_opcode_t) *p1)</div><div class="line"><a name="l05186"></a><span class="lineno"> 5186</span>&#160;        {</div><div class="line"><a name="l05187"></a><span class="lineno"> 5187</span>&#160;        <span class="comment">/* Could be either a loop or a series of alternatives.  */</span></div><div class="line"><a name="l05188"></a><span class="lineno"> 5188</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a5ca3d8a56cc5259243bcaffedd070287">on_failure_jump</a>:</div><div class="line"><a name="l05189"></a><span class="lineno"> 5189</span>&#160;          p1++;</div><div class="line"><a name="l05190"></a><span class="lineno"> 5190</span>&#160;          <a class="code" href="regex_8c.html#abf958c753956f073a33bd336660e9038">EXTRACT_NUMBER_AND_INCR</a> (mcnt, p1);</div><div class="line"><a name="l05191"></a><span class="lineno"> 5191</span>&#160;</div><div class="line"><a name="l05192"></a><span class="lineno"> 5192</span>&#160;          <span class="comment">/* If the next operation is not a jump backwards in the</span></div><div class="line"><a name="l05193"></a><span class="lineno"> 5193</span>&#160;<span class="comment">             pattern.  */</span></div><div class="line"><a name="l05194"></a><span class="lineno"> 5194</span>&#160;</div><div class="line"><a name="l05195"></a><span class="lineno"> 5195</span>&#160;          <span class="keywordflow">if</span> (mcnt &gt;= 0)</div><div class="line"><a name="l05196"></a><span class="lineno"> 5196</span>&#160;            {</div><div class="line"><a name="l05197"></a><span class="lineno"> 5197</span>&#160;              <span class="comment">/* Go through the on_failure_jumps of the alternatives,</span></div><div class="line"><a name="l05198"></a><span class="lineno"> 5198</span>&#160;<span class="comment">                 seeing if any of the alternatives cannot match nothing.</span></div><div class="line"><a name="l05199"></a><span class="lineno"> 5199</span>&#160;<span class="comment">                 The last alternative starts with only a jump,</span></div><div class="line"><a name="l05200"></a><span class="lineno"> 5200</span>&#160;<span class="comment">                 whereas the rest start with on_failure_jump and end</span></div><div class="line"><a name="l05201"></a><span class="lineno"> 5201</span>&#160;<span class="comment">                 with a jump, e.g., here is the pattern for `a|b|c&#39;:</span></div><div class="line"><a name="l05202"></a><span class="lineno"> 5202</span>&#160;<span class="comment"></span></div><div class="line"><a name="l05203"></a><span class="lineno"> 5203</span>&#160;<span class="comment">                 /on_failure_jump/0/6/exactn/1/a/jump_past_alt/0/6</span></div><div class="line"><a name="l05204"></a><span class="lineno"> 5204</span>&#160;<span class="comment">                 /on_failure_jump/0/6/exactn/1/b/jump_past_alt/0/3</span></div><div class="line"><a name="l05205"></a><span class="lineno"> 5205</span>&#160;<span class="comment">                 /exactn/1/c</span></div><div class="line"><a name="l05206"></a><span class="lineno"> 5206</span>&#160;<span class="comment"></span></div><div class="line"><a name="l05207"></a><span class="lineno"> 5207</span>&#160;<span class="comment">                 So, we have to first go through the first (n-1)</span></div><div class="line"><a name="l05208"></a><span class="lineno"> 5208</span>&#160;<span class="comment">                 alternatives and then deal with the last one separately.  */</span></div><div class="line"><a name="l05209"></a><span class="lineno"> 5209</span>&#160;</div><div class="line"><a name="l05210"></a><span class="lineno"> 5210</span>&#160;</div><div class="line"><a name="l05211"></a><span class="lineno"> 5211</span>&#160;              <span class="comment">/* Deal with the first (n-1) alternatives, which start</span></div><div class="line"><a name="l05212"></a><span class="lineno"> 5212</span>&#160;<span class="comment">                 with an on_failure_jump (see above) that jumps to right</span></div><div class="line"><a name="l05213"></a><span class="lineno"> 5213</span>&#160;<span class="comment">                 past a jump_past_alt.  */</span></div><div class="line"><a name="l05214"></a><span class="lineno"> 5214</span>&#160;</div><div class="line"><a name="l05215"></a><span class="lineno"> 5215</span>&#160;              <span class="keywordflow">while</span> ((re_opcode_t) p1[mcnt-3] == <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a2b75b8e92a52c848de16544d9ceb08da">jump_past_alt</a>)</div><div class="line"><a name="l05216"></a><span class="lineno"> 5216</span>&#160;                {</div><div class="line"><a name="l05217"></a><span class="lineno"> 5217</span>&#160;                  <span class="comment">/* `mcnt&#39; holds how many bytes long the alternative</span></div><div class="line"><a name="l05218"></a><span class="lineno"> 5218</span>&#160;<span class="comment">                     is, including the ending `jump_past_alt&#39; and</span></div><div class="line"><a name="l05219"></a><span class="lineno"> 5219</span>&#160;<span class="comment">                     its number.  */</span></div><div class="line"><a name="l05220"></a><span class="lineno"> 5220</span>&#160;</div><div class="line"><a name="l05221"></a><span class="lineno"> 5221</span>&#160;                  <span class="keywordflow">if</span> (!<a class="code" href="regex_8c.html#a4d088a8cdab2f2daa400a5df18cbf594">alt_match_null_string_p</a> (p1, p1 + mcnt - 3,</div><div class="line"><a name="l05222"></a><span class="lineno"> 5222</span>&#160;                                                      reg_info))</div><div class="line"><a name="l05223"></a><span class="lineno"> 5223</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l05224"></a><span class="lineno"> 5224</span>&#160;</div><div class="line"><a name="l05225"></a><span class="lineno"> 5225</span>&#160;                  <span class="comment">/* Move to right after this alternative, including the</span></div><div class="line"><a name="l05226"></a><span class="lineno"> 5226</span>&#160;<span class="comment">                     jump_past_alt.  */</span></div><div class="line"><a name="l05227"></a><span class="lineno"> 5227</span>&#160;                  p1 += mcnt;</div><div class="line"><a name="l05228"></a><span class="lineno"> 5228</span>&#160;</div><div class="line"><a name="l05229"></a><span class="lineno"> 5229</span>&#160;                  <span class="comment">/* Break if it&#39;s the beginning of an n-th alternative</span></div><div class="line"><a name="l05230"></a><span class="lineno"> 5230</span>&#160;<span class="comment">                     that doesn&#39;t begin with an on_failure_jump.  */</span></div><div class="line"><a name="l05231"></a><span class="lineno"> 5231</span>&#160;                  <span class="keywordflow">if</span> ((re_opcode_t) *p1 != <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a5ca3d8a56cc5259243bcaffedd070287">on_failure_jump</a>)</div><div class="line"><a name="l05232"></a><span class="lineno"> 5232</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l05233"></a><span class="lineno"> 5233</span>&#160;</div><div class="line"><a name="l05234"></a><span class="lineno"> 5234</span>&#160;                  <span class="comment">/* Still have to check that it&#39;s not an n-th</span></div><div class="line"><a name="l05235"></a><span class="lineno"> 5235</span>&#160;<span class="comment">                     alternative that starts with an on_failure_jump.  */</span></div><div class="line"><a name="l05236"></a><span class="lineno"> 5236</span>&#160;                  p1++;</div><div class="line"><a name="l05237"></a><span class="lineno"> 5237</span>&#160;                  <a class="code" href="regex_8c.html#abf958c753956f073a33bd336660e9038">EXTRACT_NUMBER_AND_INCR</a> (mcnt, p1);</div><div class="line"><a name="l05238"></a><span class="lineno"> 5238</span>&#160;                  <span class="keywordflow">if</span> ((re_opcode_t) p1[mcnt-3] != <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a2b75b8e92a52c848de16544d9ceb08da">jump_past_alt</a>)</div><div class="line"><a name="l05239"></a><span class="lineno"> 5239</span>&#160;                    {</div><div class="line"><a name="l05240"></a><span class="lineno"> 5240</span>&#160;                      <span class="comment">/* Get to the beginning of the n-th alternative.  */</span></div><div class="line"><a name="l05241"></a><span class="lineno"> 5241</span>&#160;                      p1 -= 3;</div><div class="line"><a name="l05242"></a><span class="lineno"> 5242</span>&#160;                      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05243"></a><span class="lineno"> 5243</span>&#160;                    }</div><div class="line"><a name="l05244"></a><span class="lineno"> 5244</span>&#160;                }</div><div class="line"><a name="l05245"></a><span class="lineno"> 5245</span>&#160;</div><div class="line"><a name="l05246"></a><span class="lineno"> 5246</span>&#160;              <span class="comment">/* Deal with the last alternative: go back and get number</span></div><div class="line"><a name="l05247"></a><span class="lineno"> 5247</span>&#160;<span class="comment">                 of the `jump_past_alt&#39; just before it.  `mcnt&#39; contains</span></div><div class="line"><a name="l05248"></a><span class="lineno"> 5248</span>&#160;<span class="comment">                 the length of the alternative.  */</span></div><div class="line"><a name="l05249"></a><span class="lineno"> 5249</span>&#160;              <a class="code" href="regex_8c.html#a9afddc5990335682b1958801af7e4bf3">EXTRACT_NUMBER</a> (mcnt, p1 - 2);</div><div class="line"><a name="l05250"></a><span class="lineno"> 5250</span>&#160;</div><div class="line"><a name="l05251"></a><span class="lineno"> 5251</span>&#160;              <span class="keywordflow">if</span> (!<a class="code" href="regex_8c.html#a4d088a8cdab2f2daa400a5df18cbf594">alt_match_null_string_p</a> (p1, p1 + mcnt, reg_info))</div><div class="line"><a name="l05252"></a><span class="lineno"> 5252</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l05253"></a><span class="lineno"> 5253</span>&#160;</div><div class="line"><a name="l05254"></a><span class="lineno"> 5254</span>&#160;              p1 += mcnt;       <span class="comment">/* Get past the n-th alternative.  */</span></div><div class="line"><a name="l05255"></a><span class="lineno"> 5255</span>&#160;            } <span class="comment">/* if mcnt &gt; 0 */</span></div><div class="line"><a name="l05256"></a><span class="lineno"> 5256</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l05257"></a><span class="lineno"> 5257</span>&#160;</div><div class="line"><a name="l05258"></a><span class="lineno"> 5258</span>&#160;</div><div class="line"><a name="l05259"></a><span class="lineno"> 5259</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a6a42f30575b66116b79f4527493d0ce9">stop_memory</a>:</div><div class="line"><a name="l05260"></a><span class="lineno"> 5260</span>&#160;          <a class="code" href="sendlib_8c.html#af576bf8ffa22a44e53018c67095ffbf0">assert</a> (p1[1] == **p);</div><div class="line"><a name="l05261"></a><span class="lineno"> 5261</span>&#160;          *p = p1 + 2;</div><div class="line"><a name="l05262"></a><span class="lineno"> 5262</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l05263"></a><span class="lineno"> 5263</span>&#160;</div><div class="line"><a name="l05264"></a><span class="lineno"> 5264</span>&#160;</div><div class="line"><a name="l05265"></a><span class="lineno"> 5265</span>&#160;        <span class="keywordflow">default</span>:</div><div class="line"><a name="l05266"></a><span class="lineno"> 5266</span>&#160;          <span class="keywordflow">if</span> (!<a class="code" href="regex_8c.html#a97ff784b1a6ed91bbc1013a3a44a05da">common_op_match_null_string_p</a> (&amp;p1, end, reg_info))</div><div class="line"><a name="l05267"></a><span class="lineno"> 5267</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l05268"></a><span class="lineno"> 5268</span>&#160;        }</div><div class="line"><a name="l05269"></a><span class="lineno"> 5269</span>&#160;    } <span class="comment">/* while p1 &lt; end */</span></div><div class="line"><a name="l05270"></a><span class="lineno"> 5270</span>&#160;</div><div class="line"><a name="l05271"></a><span class="lineno"> 5271</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l05272"></a><span class="lineno"> 5272</span>&#160;} <span class="comment">/* group_match_null_string_p */</span></div><div class="line"><a name="l05273"></a><span class="lineno"> 5273</span>&#160;</div><div class="line"><a name="l05274"></a><span class="lineno"> 5274</span>&#160;</div><div class="line"><a name="l05275"></a><span class="lineno"> 5275</span>&#160;<span class="comment">/* Similar to group_match_null_string_p, but doesn&#39;t deal with alternatives:</span></div><div class="line"><a name="l05276"></a><span class="lineno"> 5276</span>&#160;<span class="comment">   It expects P to be the first byte of a single alternative and END one</span></div><div class="line"><a name="l05277"></a><span class="lineno"> 5277</span>&#160;<span class="comment">   byte past the last. The alternative can contain groups.  */</span></div><div class="line"><a name="l05278"></a><span class="lineno"> 5278</span>&#160;</div><div class="line"><a name="l05279"></a><span class="lineno"> 5279</span>&#160;<span class="keyword">static</span> <span class="keywordtype">boolean</span></div><div class="line"><a name="l05280"></a><span class="lineno"><a class="line" href="regex_8c.html#a4d088a8cdab2f2daa400a5df18cbf594"> 5280</a></span>&#160;<a class="code" href="regex_8c.html#a4d088a8cdab2f2daa400a5df18cbf594">alt_match_null_string_p</a> (p, end, reg_info)</div><div class="line"><a name="l05281"></a><span class="lineno"> 5281</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *p, *<a class="code" href="structre__registers.html#a0a9d373f1ab74c9c2063f233476fa5d4">end</a>;</div><div class="line"><a name="l05282"></a><span class="lineno"> 5282</span>&#160;    <a class="code" href="unionregister__info__type.html">register_info_type</a> *reg_info;</div><div class="line"><a name="l05283"></a><span class="lineno"> 5283</span>&#160;{</div><div class="line"><a name="l05284"></a><span class="lineno"> 5284</span>&#160;  <span class="keywordtype">int</span> mcnt;</div><div class="line"><a name="l05285"></a><span class="lineno"> 5285</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *p1 = p;</div><div class="line"><a name="l05286"></a><span class="lineno"> 5286</span>&#160;</div><div class="line"><a name="l05287"></a><span class="lineno"> 5287</span>&#160;  <span class="keywordflow">while</span> (p1 &lt; end)</div><div class="line"><a name="l05288"></a><span class="lineno"> 5288</span>&#160;    {</div><div class="line"><a name="l05289"></a><span class="lineno"> 5289</span>&#160;      <span class="comment">/* Skip over opcodes that can match nothing, and break when we get</span></div><div class="line"><a name="l05290"></a><span class="lineno"> 5290</span>&#160;<span class="comment">         to one that can&#39;t.  */</span></div><div class="line"><a name="l05291"></a><span class="lineno"> 5291</span>&#160;</div><div class="line"><a name="l05292"></a><span class="lineno"> 5292</span>&#160;      <span class="keywordflow">switch</span> ((re_opcode_t) *p1)</div><div class="line"><a name="l05293"></a><span class="lineno"> 5293</span>&#160;        {</div><div class="line"><a name="l05294"></a><span class="lineno"> 5294</span>&#160;        <span class="comment">/* It&#39;s a loop.  */</span></div><div class="line"><a name="l05295"></a><span class="lineno"> 5295</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a5ca3d8a56cc5259243bcaffedd070287">on_failure_jump</a>:</div><div class="line"><a name="l05296"></a><span class="lineno"> 5296</span>&#160;          p1++;</div><div class="line"><a name="l05297"></a><span class="lineno"> 5297</span>&#160;          <a class="code" href="regex_8c.html#abf958c753956f073a33bd336660e9038">EXTRACT_NUMBER_AND_INCR</a> (mcnt, p1);</div><div class="line"><a name="l05298"></a><span class="lineno"> 5298</span>&#160;          p1 += mcnt;</div><div class="line"><a name="l05299"></a><span class="lineno"> 5299</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l05300"></a><span class="lineno"> 5300</span>&#160;</div><div class="line"><a name="l05301"></a><span class="lineno"> 5301</span>&#160;        <span class="keywordflow">default</span>:</div><div class="line"><a name="l05302"></a><span class="lineno"> 5302</span>&#160;          <span class="keywordflow">if</span> (!<a class="code" href="regex_8c.html#a97ff784b1a6ed91bbc1013a3a44a05da">common_op_match_null_string_p</a> (&amp;p1, end, reg_info))</div><div class="line"><a name="l05303"></a><span class="lineno"> 5303</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l05304"></a><span class="lineno"> 5304</span>&#160;        }</div><div class="line"><a name="l05305"></a><span class="lineno"> 5305</span>&#160;    }  <span class="comment">/* while p1 &lt; end */</span></div><div class="line"><a name="l05306"></a><span class="lineno"> 5306</span>&#160;</div><div class="line"><a name="l05307"></a><span class="lineno"> 5307</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l05308"></a><span class="lineno"> 5308</span>&#160;} <span class="comment">/* alt_match_null_string_p */</span></div><div class="line"><a name="l05309"></a><span class="lineno"> 5309</span>&#160;</div><div class="line"><a name="l05310"></a><span class="lineno"> 5310</span>&#160;</div><div class="line"><a name="l05311"></a><span class="lineno"> 5311</span>&#160;<span class="comment">/* Deals with the ops common to group_match_null_string_p and</span></div><div class="line"><a name="l05312"></a><span class="lineno"> 5312</span>&#160;<span class="comment">   alt_match_null_string_p.</span></div><div class="line"><a name="l05313"></a><span class="lineno"> 5313</span>&#160;<span class="comment"></span></div><div class="line"><a name="l05314"></a><span class="lineno"> 5314</span>&#160;<span class="comment">   Sets P to one after the op and its arguments, if any.  */</span></div><div class="line"><a name="l05315"></a><span class="lineno"> 5315</span>&#160;</div><div class="line"><a name="l05316"></a><span class="lineno"> 5316</span>&#160;<span class="keyword">static</span> <span class="keywordtype">boolean</span></div><div class="line"><a name="l05317"></a><span class="lineno"><a class="line" href="regex_8c.html#a97ff784b1a6ed91bbc1013a3a44a05da"> 5317</a></span>&#160;<a class="code" href="regex_8c.html#a97ff784b1a6ed91bbc1013a3a44a05da">common_op_match_null_string_p</a> (p, end, reg_info)</div><div class="line"><a name="l05318"></a><span class="lineno"> 5318</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> **p, *<a class="code" href="structre__registers.html#a0a9d373f1ab74c9c2063f233476fa5d4">end</a>;</div><div class="line"><a name="l05319"></a><span class="lineno"> 5319</span>&#160;    <a class="code" href="unionregister__info__type.html">register_info_type</a> *reg_info;</div><div class="line"><a name="l05320"></a><span class="lineno"> 5320</span>&#160;{</div><div class="line"><a name="l05321"></a><span class="lineno"> 5321</span>&#160;  <span class="keywordtype">int</span> mcnt;</div><div class="line"><a name="l05322"></a><span class="lineno"> 5322</span>&#160;  <span class="keywordtype">boolean</span> ret;</div><div class="line"><a name="l05323"></a><span class="lineno"> 5323</span>&#160;  <span class="keywordtype">int</span> reg_no;</div><div class="line"><a name="l05324"></a><span class="lineno"> 5324</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *p1 = *p;</div><div class="line"><a name="l05325"></a><span class="lineno"> 5325</span>&#160;</div><div class="line"><a name="l05326"></a><span class="lineno"> 5326</span>&#160;  <span class="keywordflow">switch</span> ((re_opcode_t) *p1++)</div><div class="line"><a name="l05327"></a><span class="lineno"> 5327</span>&#160;    {</div><div class="line"><a name="l05328"></a><span class="lineno"> 5328</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a292eb17c5d97bf50ef0c4f733e56c836">no_op</a>:</div><div class="line"><a name="l05329"></a><span class="lineno"> 5329</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a4780b4642f63093c414b1833e2d40107">begline</a>:</div><div class="line"><a name="l05330"></a><span class="lineno"> 5330</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a0556771866997767489c4da274f15aa4">endline</a>:</div><div class="line"><a name="l05331"></a><span class="lineno"> 5331</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118ab428f43b6557e8dfc45e452a8891b598">begbuf</a>:</div><div class="line"><a name="l05332"></a><span class="lineno"> 5332</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a4962434097279c747aa6ba59df478775">endbuf</a>:</div><div class="line"><a name="l05333"></a><span class="lineno"> 5333</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118ad88e0028985b6bc61df64cd9578d3f18">wordbeg</a>:</div><div class="line"><a name="l05334"></a><span class="lineno"> 5334</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118accd3c02d3bd48af753cf5261bfb084ac">wordend</a>:</div><div class="line"><a name="l05335"></a><span class="lineno"> 5335</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a47168d753b8d555d2e89416a4b660da9">wordbound</a>:</div><div class="line"><a name="l05336"></a><span class="lineno"> 5336</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a9077999caa8f316015aabfd83b3745a0">notwordbound</a>:</div><div class="line"><a name="l05337"></a><span class="lineno"> 5337</span>&#160;<span class="preprocessor">#ifdef emacs</span></div><div class="line"><a name="l05338"></a><span class="lineno"> 5338</span>&#160;    <span class="keywordflow">case</span> before_dot:</div><div class="line"><a name="l05339"></a><span class="lineno"> 5339</span>&#160;    <span class="keywordflow">case</span> at_dot:</div><div class="line"><a name="l05340"></a><span class="lineno"> 5340</span>&#160;    <span class="keywordflow">case</span> after_dot:</div><div class="line"><a name="l05341"></a><span class="lineno"> 5341</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l05342"></a><span class="lineno"> 5342</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05343"></a><span class="lineno"> 5343</span>&#160;</div><div class="line"><a name="l05344"></a><span class="lineno"> 5344</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118affba14708233f194802bf7981fd7717e">start_memory</a>:</div><div class="line"><a name="l05345"></a><span class="lineno"> 5345</span>&#160;      reg_no = *p1;</div><div class="line"><a name="l05346"></a><span class="lineno"> 5346</span>&#160;      <a class="code" href="sendlib_8c.html#af576bf8ffa22a44e53018c67095ffbf0">assert</a> (reg_no &gt; 0 &amp;&amp; reg_no &lt;= <a class="code" href="regex_8c.html#af1b3c3e22fe42152c272df6027b1bf4b">MAX_REGNUM</a>);</div><div class="line"><a name="l05347"></a><span class="lineno"> 5347</span>&#160;      ret = <a class="code" href="regex_8c.html#ac1a3adc04ca27d22992ea483708c5812">group_match_null_string_p</a> (&amp;p1, end, reg_info);</div><div class="line"><a name="l05348"></a><span class="lineno"> 5348</span>&#160;</div><div class="line"><a name="l05349"></a><span class="lineno"> 5349</span>&#160;      <span class="comment">/* Have to set this here in case we&#39;re checking a group which</span></div><div class="line"><a name="l05350"></a><span class="lineno"> 5350</span>&#160;<span class="comment">         contains a group and a back reference to it.  */</span></div><div class="line"><a name="l05351"></a><span class="lineno"> 5351</span>&#160;</div><div class="line"><a name="l05352"></a><span class="lineno"> 5352</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="regex_8c.html#ac840f4f2ecf1841ed894bd361236715b">REG_MATCH_NULL_STRING_P</a> (reg_info[reg_no]) == <a class="code" href="regex_8c.html#a9fbdd9b78059994c85d9f064f9fa9ec3">MATCH_NULL_UNSET_VALUE</a>)</div><div class="line"><a name="l05353"></a><span class="lineno"> 5353</span>&#160;        <a class="code" href="regex_8c.html#ac840f4f2ecf1841ed894bd361236715b">REG_MATCH_NULL_STRING_P</a> (reg_info[reg_no]) = ret;</div><div class="line"><a name="l05354"></a><span class="lineno"> 5354</span>&#160;</div><div class="line"><a name="l05355"></a><span class="lineno"> 5355</span>&#160;      <span class="keywordflow">if</span> (!ret)</div><div class="line"><a name="l05356"></a><span class="lineno"> 5356</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l05357"></a><span class="lineno"> 5357</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05358"></a><span class="lineno"> 5358</span>&#160;</div><div class="line"><a name="l05359"></a><span class="lineno"> 5359</span>&#160;    <span class="comment">/* If this is an optimized succeed_n for zero times, make the jump.  */</span></div><div class="line"><a name="l05360"></a><span class="lineno"> 5360</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a5a08a3c1fa135350961630d2f9c2b849">jump</a>:</div><div class="line"><a name="l05361"></a><span class="lineno"> 5361</span>&#160;      <a class="code" href="regex_8c.html#abf958c753956f073a33bd336660e9038">EXTRACT_NUMBER_AND_INCR</a> (mcnt, p1);</div><div class="line"><a name="l05362"></a><span class="lineno"> 5362</span>&#160;      <span class="keywordflow">if</span> (mcnt &gt;= 0)</div><div class="line"><a name="l05363"></a><span class="lineno"> 5363</span>&#160;        p1 += mcnt;</div><div class="line"><a name="l05364"></a><span class="lineno"> 5364</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l05365"></a><span class="lineno"> 5365</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l05366"></a><span class="lineno"> 5366</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05367"></a><span class="lineno"> 5367</span>&#160;</div><div class="line"><a name="l05368"></a><span class="lineno"> 5368</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118ae45bee3e6749253a8ba8769646f79734">succeed_n</a>:</div><div class="line"><a name="l05369"></a><span class="lineno"> 5369</span>&#160;      <span class="comment">/* Get to the number of times to succeed.  */</span></div><div class="line"><a name="l05370"></a><span class="lineno"> 5370</span>&#160;      p1 += 2;</div><div class="line"><a name="l05371"></a><span class="lineno"> 5371</span>&#160;      <a class="code" href="regex_8c.html#abf958c753956f073a33bd336660e9038">EXTRACT_NUMBER_AND_INCR</a> (mcnt, p1);</div><div class="line"><a name="l05372"></a><span class="lineno"> 5372</span>&#160;</div><div class="line"><a name="l05373"></a><span class="lineno"> 5373</span>&#160;      <span class="keywordflow">if</span> (mcnt == 0)</div><div class="line"><a name="l05374"></a><span class="lineno"> 5374</span>&#160;        {</div><div class="line"><a name="l05375"></a><span class="lineno"> 5375</span>&#160;          p1 -= 4;</div><div class="line"><a name="l05376"></a><span class="lineno"> 5376</span>&#160;          <a class="code" href="regex_8c.html#abf958c753956f073a33bd336660e9038">EXTRACT_NUMBER_AND_INCR</a> (mcnt, p1);</div><div class="line"><a name="l05377"></a><span class="lineno"> 5377</span>&#160;          p1 += mcnt;</div><div class="line"><a name="l05378"></a><span class="lineno"> 5378</span>&#160;        }</div><div class="line"><a name="l05379"></a><span class="lineno"> 5379</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l05380"></a><span class="lineno"> 5380</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l05381"></a><span class="lineno"> 5381</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05382"></a><span class="lineno"> 5382</span>&#160;</div><div class="line"><a name="l05383"></a><span class="lineno"> 5383</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a0c02fe9db75630f52c6e9e44dd55d9de">duplicate</a>:</div><div class="line"><a name="l05384"></a><span class="lineno"> 5384</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="regex_8c.html#ac840f4f2ecf1841ed894bd361236715b">REG_MATCH_NULL_STRING_P</a> (reg_info[*p1]))</div><div class="line"><a name="l05385"></a><span class="lineno"> 5385</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l05386"></a><span class="lineno"> 5386</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05387"></a><span class="lineno"> 5387</span>&#160;</div><div class="line"><a name="l05388"></a><span class="lineno"> 5388</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a0f280efb7129538f3b07aa789fc99fa1">set_number_at</a>:</div><div class="line"><a name="l05389"></a><span class="lineno"> 5389</span>&#160;      p1 += 4;</div><div class="line"><a name="l05390"></a><span class="lineno"> 5390</span>&#160;</div><div class="line"><a name="l05391"></a><span class="lineno"> 5391</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l05392"></a><span class="lineno"> 5392</span>&#160;      <span class="comment">/* All other opcodes mean we cannot match the empty string.  */</span></div><div class="line"><a name="l05393"></a><span class="lineno"> 5393</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l05394"></a><span class="lineno"> 5394</span>&#160;  }</div><div class="line"><a name="l05395"></a><span class="lineno"> 5395</span>&#160;</div><div class="line"><a name="l05396"></a><span class="lineno"> 5396</span>&#160;  *p = p1;</div><div class="line"><a name="l05397"></a><span class="lineno"> 5397</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l05398"></a><span class="lineno"> 5398</span>&#160;} <span class="comment">/* common_op_match_null_string_p */</span></div><div class="line"><a name="l05399"></a><span class="lineno"> 5399</span>&#160;</div><div class="line"><a name="l05400"></a><span class="lineno"> 5400</span>&#160;</div><div class="line"><a name="l05401"></a><span class="lineno"> 5401</span>&#160;<span class="comment">/* Return zero if TRANSLATE[S1] and TRANSLATE[S2] are identical for LEN</span></div><div class="line"><a name="l05402"></a><span class="lineno"> 5402</span>&#160;<span class="comment">   bytes; nonzero otherwise.  */</span></div><div class="line"><a name="l05403"></a><span class="lineno"> 5403</span>&#160;</div><div class="line"><a name="l05404"></a><span class="lineno"> 5404</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span></div><div class="line"><a name="l05405"></a><span class="lineno"><a class="line" href="regex_8c.html#a831fca3c806cff281a70c8757c40b134"> 5405</a></span>&#160;<a class="code" href="regex_8c.html#a831fca3c806cff281a70c8757c40b134">bcmp_translate</a> (s1, s2, len, translate)</div><div class="line"><a name="l05406"></a><span class="lineno"> 5406</span>&#160;     <span class="keyword">const</span> <span class="keywordtype">char</span> *s1, *s2;</div><div class="line"><a name="l05407"></a><span class="lineno"> 5407</span>&#160;     <span class="keyword">register</span> <span class="keywordtype">int</span> len;</div><div class="line"><a name="l05408"></a><span class="lineno"> 5408</span>&#160;     <a class="code" href="__regex_8h.html#a96c9fb9c7074cb21740b63092b0637a4">RE_TRANSLATE_TYPE</a> translate;</div><div class="line"><a name="l05409"></a><span class="lineno"> 5409</span>&#160;{</div><div class="line"><a name="l05410"></a><span class="lineno"> 5410</span>&#160;  <span class="keyword">register</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *p1 = (<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) s1;</div><div class="line"><a name="l05411"></a><span class="lineno"> 5411</span>&#160;  <span class="keyword">register</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *p2 = (<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) s2;</div><div class="line"><a name="l05412"></a><span class="lineno"> 5412</span>&#160;  <span class="keywordflow">while</span> (len)</div><div class="line"><a name="l05413"></a><span class="lineno"> 5413</span>&#160;    {</div><div class="line"><a name="l05414"></a><span class="lineno"> 5414</span>&#160;      <span class="keywordflow">if</span> (translate[*p1++] != translate[*p2++]) <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l05415"></a><span class="lineno"> 5415</span>&#160;      len--;</div><div class="line"><a name="l05416"></a><span class="lineno"> 5416</span>&#160;    }</div><div class="line"><a name="l05417"></a><span class="lineno"> 5417</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05418"></a><span class="lineno"> 5418</span>&#160;}</div><div class="line"><a name="l05419"></a><span class="lineno"> 5419</span>&#160;</div><div class="line"><a name="l05420"></a><span class="lineno"> 5420</span>&#160;<span class="comment">/* Entry points for GNU code.  */</span></div><div class="line"><a name="l05421"></a><span class="lineno"> 5421</span>&#160;</div><div class="line"><a name="l05422"></a><span class="lineno"> 5422</span>&#160;<span class="comment">/* re_compile_pattern is the GNU regular expression compiler: it</span></div><div class="line"><a name="l05423"></a><span class="lineno"> 5423</span>&#160;<span class="comment">   compiles PATTERN (of length SIZE) and puts the result in BUFP.</span></div><div class="line"><a name="l05424"></a><span class="lineno"> 5424</span>&#160;<span class="comment">   Returns 0 if the pattern was valid, otherwise an error string.</span></div><div class="line"><a name="l05425"></a><span class="lineno"> 5425</span>&#160;<span class="comment"></span></div><div class="line"><a name="l05426"></a><span class="lineno"> 5426</span>&#160;<span class="comment">   Assumes the `allocated&#39; (and perhaps `buffer&#39;) and `translate&#39; fields</span></div><div class="line"><a name="l05427"></a><span class="lineno"> 5427</span>&#160;<span class="comment">   are set in BUFP on entry.</span></div><div class="line"><a name="l05428"></a><span class="lineno"> 5428</span>&#160;<span class="comment"></span></div><div class="line"><a name="l05429"></a><span class="lineno"> 5429</span>&#160;<span class="comment">   We call regex_compile to do the actual compilation.  */</span></div><div class="line"><a name="l05430"></a><span class="lineno"> 5430</span>&#160;</div><div class="line"><a name="l05431"></a><span class="lineno"> 5431</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *</div><div class="line"><a name="l05432"></a><span class="lineno"><a class="line" href="regex_8c.html#af8f972d3f97fde09a38ee8f8e204b6c3"> 5432</a></span>&#160;<a class="code" href="regex_8c.html#af8f972d3f97fde09a38ee8f8e204b6c3">re_compile_pattern</a> (pattern, length, bufp)</div><div class="line"><a name="l05433"></a><span class="lineno"> 5433</span>&#160;     <span class="keyword">const</span> <span class="keywordtype">char</span> *pattern;</div><div class="line"><a name="l05434"></a><span class="lineno"> 5434</span>&#160;     <span class="keywordtype">size_t</span> length;</div><div class="line"><a name="l05435"></a><span class="lineno"> 5435</span>&#160;     <span class="keyword">struct </span><a class="code" href="structre__pattern__buffer.html">re_pattern_buffer</a> *bufp;</div><div class="line"><a name="l05436"></a><span class="lineno"> 5436</span>&#160;{</div><div class="line"><a name="l05437"></a><span class="lineno"> 5437</span>&#160;  <a class="code" href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5ae">reg_errcode_t</a> ret;</div><div class="line"><a name="l05438"></a><span class="lineno"> 5438</span>&#160;</div><div class="line"><a name="l05439"></a><span class="lineno"> 5439</span>&#160;  <span class="comment">/* GNU code is written to assume at least RE_NREGS registers will be set</span></div><div class="line"><a name="l05440"></a><span class="lineno"> 5440</span>&#160;<span class="comment">     (and at least one extra will be -1).  */</span></div><div class="line"><a name="l05441"></a><span class="lineno"> 5441</span>&#160;  bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a5d2b01dbcd7226fbfe60d755825d73e3">regs_allocated</a> = <a class="code" href="__regex_8h.html#a2714d3e1903c4824ef31ccae36e702c7">REGS_UNALLOCATED</a>;</div><div class="line"><a name="l05442"></a><span class="lineno"> 5442</span>&#160;</div><div class="line"><a name="l05443"></a><span class="lineno"> 5443</span>&#160;  <span class="comment">/* And GNU code determines whether or not to get register information</span></div><div class="line"><a name="l05444"></a><span class="lineno"> 5444</span>&#160;<span class="comment">     by passing null for the REGS argument to re_match, etc., not by</span></div><div class="line"><a name="l05445"></a><span class="lineno"> 5445</span>&#160;<span class="comment">     setting no_sub.  */</span></div><div class="line"><a name="l05446"></a><span class="lineno"> 5446</span>&#160;  bufp-&gt;<a class="code" href="structre__pattern__buffer.html#af65d7e2e2a760b6a14546fb9084843aa">no_sub</a> = 0;</div><div class="line"><a name="l05447"></a><span class="lineno"> 5447</span>&#160;</div><div class="line"><a name="l05448"></a><span class="lineno"> 5448</span>&#160;  <span class="comment">/* Match anchors at newline.  */</span></div><div class="line"><a name="l05449"></a><span class="lineno"> 5449</span>&#160;  bufp-&gt;<a class="code" href="structre__pattern__buffer.html#a8d2bf18d174b513250c8dab7a01f156e">newline_anchor</a> = 1;</div><div class="line"><a name="l05450"></a><span class="lineno"> 5450</span>&#160;</div><div class="line"><a name="l05451"></a><span class="lineno"> 5451</span>&#160;  ret = <a class="code" href="regex_8c.html#a6a04e18fe89cacd4b8d04a474def5985">regex_compile</a> (pattern, length, re_syntax_options, bufp);</div><div class="line"><a name="l05452"></a><span class="lineno"> 5452</span>&#160;</div><div class="line"><a name="l05453"></a><span class="lineno"> 5453</span>&#160;  <span class="keywordflow">if</span> (!ret)</div><div class="line"><a name="l05454"></a><span class="lineno"> 5454</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="regex_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05455"></a><span class="lineno"> 5455</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="regex_8c.html#a84591b979e395c1ecf40f06963f89d8b">gettext</a> (re_error_msgid[(<span class="keywordtype">int</span>) ret]);</div><div class="line"><a name="l05456"></a><span class="lineno"> 5456</span>&#160;}</div><div class="line"><a name="l05457"></a><span class="lineno"> 5457</span>&#160;</div><div class="line"><a name="l05458"></a><span class="lineno"> 5458</span>&#160;<span class="comment">/* Entry points compatible with 4.2 BSD regex library.  We don&#39;t define</span></div><div class="line"><a name="l05459"></a><span class="lineno"> 5459</span>&#160;<span class="comment">   them unless specifically requested.  */</span></div><div class="line"><a name="l05460"></a><span class="lineno"> 5460</span>&#160;</div><div class="line"><a name="l05461"></a><span class="lineno"> 5461</span>&#160;<span class="preprocessor">#if defined (_REGEX_RE_COMP) || defined (_LIBC)</span></div><div class="line"><a name="l05462"></a><span class="lineno"> 5462</span>&#160;</div><div class="line"><a name="l05463"></a><span class="lineno"> 5463</span>&#160;<span class="comment">/* BSD has one and only one pattern buffer.  */</span></div><div class="line"><a name="l05464"></a><span class="lineno"> 5464</span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structre__pattern__buffer.html">re_pattern_buffer</a> re_comp_buf;</div><div class="line"><a name="l05465"></a><span class="lineno"> 5465</span>&#160;</div><div class="line"><a name="l05466"></a><span class="lineno"> 5466</span>&#160;<span class="keywordtype">char</span> *</div><div class="line"><a name="l05467"></a><span class="lineno"> 5467</span>&#160;<span class="preprocessor">#ifdef _LIBC</span></div><div class="line"><a name="l05468"></a><span class="lineno"> 5468</span>&#160;<span class="comment">/* Make these definitions weak in libc, so POSIX programs can redefine</span></div><div class="line"><a name="l05469"></a><span class="lineno"> 5469</span>&#160;<span class="comment">   these names if they don&#39;t use our functions, and still use</span></div><div class="line"><a name="l05470"></a><span class="lineno"> 5470</span>&#160;<span class="comment">   regcomp/regexec below without link errors.  */</span></div><div class="line"><a name="l05471"></a><span class="lineno"> 5471</span>&#160;weak_function</div><div class="line"><a name="l05472"></a><span class="lineno"> 5472</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l05473"></a><span class="lineno"> 5473</span>&#160;re_comp (s)</div><div class="line"><a name="l05474"></a><span class="lineno"> 5474</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *s;</div><div class="line"><a name="l05475"></a><span class="lineno"> 5475</span>&#160;{</div><div class="line"><a name="l05476"></a><span class="lineno"> 5476</span>&#160;  <a class="code" href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5ae">reg_errcode_t</a> ret;</div><div class="line"><a name="l05477"></a><span class="lineno"> 5477</span>&#160;</div><div class="line"><a name="l05478"></a><span class="lineno"> 5478</span>&#160;  <span class="keywordflow">if</span> (!s)</div><div class="line"><a name="l05479"></a><span class="lineno"> 5479</span>&#160;    {</div><div class="line"><a name="l05480"></a><span class="lineno"> 5480</span>&#160;      <span class="keywordflow">if</span> (!re_comp_buf.<a class="code" href="structre__pattern__buffer.html#a84025dce422d70b263288329274a888d">buffer</a>)</div><div class="line"><a name="l05481"></a><span class="lineno"> 5481</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="regex_8c.html#a84591b979e395c1ecf40f06963f89d8b">gettext</a> (<span class="stringliteral">&quot;No previous regular expression&quot;</span>);</div><div class="line"><a name="l05482"></a><span class="lineno"> 5482</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05483"></a><span class="lineno"> 5483</span>&#160;    }</div><div class="line"><a name="l05484"></a><span class="lineno"> 5484</span>&#160;</div><div class="line"><a name="l05485"></a><span class="lineno"> 5485</span>&#160;  <span class="keywordflow">if</span> (!re_comp_buf.<a class="code" href="structre__pattern__buffer.html#a84025dce422d70b263288329274a888d">buffer</a>)</div><div class="line"><a name="l05486"></a><span class="lineno"> 5486</span>&#160;    {</div><div class="line"><a name="l05487"></a><span class="lineno"> 5487</span>&#160;      re_comp_buf.<a class="code" href="structre__pattern__buffer.html#a84025dce422d70b263288329274a888d">buffer</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) <a class="code" href="regex_8c.html#ab7e36af3707843f77cc5b4e831c2fa6d">malloc</a> (200);      <span class="comment">/* __MEM_CHECKED__ */</span></div><div class="line"><a name="l05488"></a><span class="lineno"> 5488</span>&#160;      <span class="keywordflow">if</span> (re_comp_buf.<a class="code" href="structre__pattern__buffer.html#a84025dce422d70b263288329274a888d">buffer</a> == <a class="code" href="regex_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l05489"></a><span class="lineno"> 5489</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="regex_8c.html#a84591b979e395c1ecf40f06963f89d8b">gettext</a> (re_error_msgid[(<span class="keywordtype">int</span>) <a class="code" href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5aeaabf0128b7050c81c0fb933ea7265ebe9">REG_ESPACE</a>]);</div><div class="line"><a name="l05490"></a><span class="lineno"> 5490</span>&#160;      re_comp_buf.<a class="code" href="structre__pattern__buffer.html#a5f2c847d392dbddc45d478729a091ab0">allocated</a> = 200;</div><div class="line"><a name="l05491"></a><span class="lineno"> 5491</span>&#160;</div><div class="line"><a name="l05492"></a><span class="lineno"> 5492</span>&#160;      re_comp_buf.<a class="code" href="structre__pattern__buffer.html#aa356b59c2846045ffba6d3d84dc7cbac">fastmap</a> = (<span class="keywordtype">char</span> *) <a class="code" href="regex_8c.html#ab7e36af3707843f77cc5b4e831c2fa6d">malloc</a> (1 &lt;&lt; <a class="code" href="regex_8c.html#ad72dc64cd2c9bc3598f792dc518d03b2">BYTEWIDTH</a>);   <span class="comment">/* __MEM_CHECKED__ */</span></div><div class="line"><a name="l05493"></a><span class="lineno"> 5493</span>&#160;      <span class="keywordflow">if</span> (re_comp_buf.<a class="code" href="structre__pattern__buffer.html#aa356b59c2846045ffba6d3d84dc7cbac">fastmap</a> == <a class="code" href="regex_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l05494"></a><span class="lineno"> 5494</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="regex_8c.html#a84591b979e395c1ecf40f06963f89d8b">gettext</a> (re_error_msgid[(<span class="keywordtype">int</span>) REG_ESPACE]);</div><div class="line"><a name="l05495"></a><span class="lineno"> 5495</span>&#160;    }</div><div class="line"><a name="l05496"></a><span class="lineno"> 5496</span>&#160;</div><div class="line"><a name="l05497"></a><span class="lineno"> 5497</span>&#160;  <span class="comment">/* Since `re_exec&#39; always passes NULL for the `regs&#39; argument, we</span></div><div class="line"><a name="l05498"></a><span class="lineno"> 5498</span>&#160;<span class="comment">     don&#39;t need to initialize the pattern buffer fields which affect it.  */</span></div><div class="line"><a name="l05499"></a><span class="lineno"> 5499</span>&#160;</div><div class="line"><a name="l05500"></a><span class="lineno"> 5500</span>&#160;  <span class="comment">/* Match anchors at newlines.  */</span></div><div class="line"><a name="l05501"></a><span class="lineno"> 5501</span>&#160;  re_comp_buf.<a class="code" href="structre__pattern__buffer.html#a8d2bf18d174b513250c8dab7a01f156e">newline_anchor</a> = 1;</div><div class="line"><a name="l05502"></a><span class="lineno"> 5502</span>&#160;</div><div class="line"><a name="l05503"></a><span class="lineno"> 5503</span>&#160;  ret = <a class="code" href="regex_8c.html#a6a04e18fe89cacd4b8d04a474def5985">regex_compile</a> (s, strlen (s), re_syntax_options, &amp;re_comp_buf);</div><div class="line"><a name="l05504"></a><span class="lineno"> 5504</span>&#160;</div><div class="line"><a name="l05505"></a><span class="lineno"> 5505</span>&#160;  <span class="keywordflow">if</span> (!ret)</div><div class="line"><a name="l05506"></a><span class="lineno"> 5506</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="regex_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05507"></a><span class="lineno"> 5507</span>&#160;</div><div class="line"><a name="l05508"></a><span class="lineno"> 5508</span>&#160;  <span class="comment">/* Yes, we&#39;re discarding `const&#39; here if !HAVE_LIBINTL.  */</span></div><div class="line"><a name="l05509"></a><span class="lineno"> 5509</span>&#160;  <span class="keywordflow">return</span> (<span class="keywordtype">char</span> *) <a class="code" href="regex_8c.html#a84591b979e395c1ecf40f06963f89d8b">gettext</a> (re_error_msgid[(<span class="keywordtype">int</span>) ret]);</div><div class="line"><a name="l05510"></a><span class="lineno"> 5510</span>&#160;}</div><div class="line"><a name="l05511"></a><span class="lineno"> 5511</span>&#160;</div><div class="line"><a name="l05512"></a><span class="lineno"> 5512</span>&#160;</div><div class="line"><a name="l05513"></a><span class="lineno"> 5513</span>&#160;<span class="keywordtype">int</span></div><div class="line"><a name="l05514"></a><span class="lineno"> 5514</span>&#160;<span class="preprocessor">#ifdef _LIBC</span></div><div class="line"><a name="l05515"></a><span class="lineno"> 5515</span>&#160;weak_function</div><div class="line"><a name="l05516"></a><span class="lineno"> 5516</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l05517"></a><span class="lineno"> 5517</span>&#160;re_exec (s)</div><div class="line"><a name="l05518"></a><span class="lineno"> 5518</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *s;</div><div class="line"><a name="l05519"></a><span class="lineno"> 5519</span>&#160;{</div><div class="line"><a name="l05520"></a><span class="lineno"> 5520</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> len = strlen (s);</div><div class="line"><a name="l05521"></a><span class="lineno"> 5521</span>&#160;  <span class="keywordflow">return</span></div><div class="line"><a name="l05522"></a><span class="lineno"> 5522</span>&#160;    0 &lt;= <a class="code" href="regex_8c.html#afe0743116f59f62a4d00f50a9e9a4932">re_search</a> (&amp;re_comp_buf, s, len, 0, len, (<span class="keyword">struct</span> <a class="code" href="structre__registers.html">re_registers</a> *) 0);</div><div class="line"><a name="l05523"></a><span class="lineno"> 5523</span>&#160;}</div><div class="line"><a name="l05524"></a><span class="lineno"> 5524</span>&#160;</div><div class="line"><a name="l05525"></a><span class="lineno"> 5525</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* _REGEX_RE_COMP */</span><span class="preprocessor"></span></div><div class="line"><a name="l05526"></a><span class="lineno"> 5526</span>&#160;</div><div class="line"><a name="l05527"></a><span class="lineno"> 5527</span>&#160;<span class="comment">/* POSIX.2 functions.  Don&#39;t define these for Emacs.  */</span></div><div class="line"><a name="l05528"></a><span class="lineno"> 5528</span>&#160;</div><div class="line"><a name="l05529"></a><span class="lineno"> 5529</span>&#160;<span class="preprocessor">#ifndef emacs</span></div><div class="line"><a name="l05530"></a><span class="lineno"> 5530</span>&#160;</div><div class="line"><a name="l05531"></a><span class="lineno"> 5531</span>&#160;<span class="comment">/* regcomp takes a regular expression as a string and compiles it.</span></div><div class="line"><a name="l05532"></a><span class="lineno"> 5532</span>&#160;<span class="comment"></span></div><div class="line"><a name="l05533"></a><span class="lineno"> 5533</span>&#160;<span class="comment">   PREG is a regex_t *.  We do not expect any fields to be initialized,</span></div><div class="line"><a name="l05534"></a><span class="lineno"> 5534</span>&#160;<span class="comment">   since POSIX says we shouldn&#39;t.  Thus, we set</span></div><div class="line"><a name="l05535"></a><span class="lineno"> 5535</span>&#160;<span class="comment"></span></div><div class="line"><a name="l05536"></a><span class="lineno"> 5536</span>&#160;<span class="comment">     `buffer&#39; to the compiled pattern;</span></div><div class="line"><a name="l05537"></a><span class="lineno"> 5537</span>&#160;<span class="comment">     `used&#39; to the length of the compiled pattern;</span></div><div class="line"><a name="l05538"></a><span class="lineno"> 5538</span>&#160;<span class="comment">     `syntax&#39; to RE_SYNTAX_POSIX_EXTENDED if the</span></div><div class="line"><a name="l05539"></a><span class="lineno"> 5539</span>&#160;<span class="comment">       REG_EXTENDED bit in CFLAGS is set; otherwise, to</span></div><div class="line"><a name="l05540"></a><span class="lineno"> 5540</span>&#160;<span class="comment">       RE_SYNTAX_POSIX_BASIC;</span></div><div class="line"><a name="l05541"></a><span class="lineno"> 5541</span>&#160;<span class="comment">     `newline_anchor&#39; to REG_NEWLINE being set in CFLAGS;</span></div><div class="line"><a name="l05542"></a><span class="lineno"> 5542</span>&#160;<span class="comment">     `fastmap&#39; and `fastmap_accurate&#39; to zero;</span></div><div class="line"><a name="l05543"></a><span class="lineno"> 5543</span>&#160;<span class="comment">     `re_nsub&#39; to the number of subexpressions in PATTERN.</span></div><div class="line"><a name="l05544"></a><span class="lineno"> 5544</span>&#160;<span class="comment"></span></div><div class="line"><a name="l05545"></a><span class="lineno"> 5545</span>&#160;<span class="comment">   PATTERN is the address of the pattern string.</span></div><div class="line"><a name="l05546"></a><span class="lineno"> 5546</span>&#160;<span class="comment"></span></div><div class="line"><a name="l05547"></a><span class="lineno"> 5547</span>&#160;<span class="comment">   CFLAGS is a series of bits which affect compilation.</span></div><div class="line"><a name="l05548"></a><span class="lineno"> 5548</span>&#160;<span class="comment"></span></div><div class="line"><a name="l05549"></a><span class="lineno"> 5549</span>&#160;<span class="comment">     If REG_EXTENDED is set, we use POSIX extended syntax; otherwise, we</span></div><div class="line"><a name="l05550"></a><span class="lineno"> 5550</span>&#160;<span class="comment">     use POSIX basic syntax.</span></div><div class="line"><a name="l05551"></a><span class="lineno"> 5551</span>&#160;<span class="comment"></span></div><div class="line"><a name="l05552"></a><span class="lineno"> 5552</span>&#160;<span class="comment">     If REG_NEWLINE is set, then . and [^...] don&#39;t match newline.</span></div><div class="line"><a name="l05553"></a><span class="lineno"> 5553</span>&#160;<span class="comment">     Also, regexec will try a match beginning after every newline.</span></div><div class="line"><a name="l05554"></a><span class="lineno"> 5554</span>&#160;<span class="comment"></span></div><div class="line"><a name="l05555"></a><span class="lineno"> 5555</span>&#160;<span class="comment">     If REG_ICASE is set, then we considers upper- and lowercase</span></div><div class="line"><a name="l05556"></a><span class="lineno"> 5556</span>&#160;<span class="comment">     versions of letters to be equivalent when matching.</span></div><div class="line"><a name="l05557"></a><span class="lineno"> 5557</span>&#160;<span class="comment"></span></div><div class="line"><a name="l05558"></a><span class="lineno"> 5558</span>&#160;<span class="comment">     If REG_NOSUB is set, then when PREG is passed to regexec, that</span></div><div class="line"><a name="l05559"></a><span class="lineno"> 5559</span>&#160;<span class="comment">     routine will report only success or failure, and nothing about the</span></div><div class="line"><a name="l05560"></a><span class="lineno"> 5560</span>&#160;<span class="comment">     registers.</span></div><div class="line"><a name="l05561"></a><span class="lineno"> 5561</span>&#160;<span class="comment"></span></div><div class="line"><a name="l05562"></a><span class="lineno"> 5562</span>&#160;<span class="comment">   It returns 0 if it succeeds, nonzero if it doesn&#39;t.  (See regex.h for</span></div><div class="line"><a name="l05563"></a><span class="lineno"> 5563</span>&#160;<span class="comment">   the return codes and their meanings.)  */</span></div><div class="line"><a name="l05564"></a><span class="lineno"> 5564</span>&#160;</div><div class="line"><a name="l05565"></a><span class="lineno"> 5565</span>&#160;<span class="keywordtype">int</span></div><div class="line"><a name="l05566"></a><span class="lineno"><a class="line" href="regex_8c.html#a38bbfba560a12468196f72aa88486406"> 5566</a></span>&#160;<a class="code" href="regex_8c.html#a38bbfba560a12468196f72aa88486406">regcomp</a> (preg, pattern, cflags)</div><div class="line"><a name="l05567"></a><span class="lineno"> 5567</span>&#160;    regex_t *preg;</div><div class="line"><a name="l05568"></a><span class="lineno"> 5568</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *pattern;</div><div class="line"><a name="l05569"></a><span class="lineno"> 5569</span>&#160;    <span class="keywordtype">int</span> cflags;</div><div class="line"><a name="l05570"></a><span class="lineno"> 5570</span>&#160;{</div><div class="line"><a name="l05571"></a><span class="lineno"> 5571</span>&#160;  <a class="code" href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5ae">reg_errcode_t</a> ret;</div><div class="line"><a name="l05572"></a><span class="lineno"> 5572</span>&#160;  <a class="code" href="__regex_8h.html#a7e0565199a2fabaca3d67a5a44fc4229">reg_syntax_t</a> syntax</div><div class="line"><a name="l05573"></a><span class="lineno"> 5573</span>&#160;    = (cflags &amp; <a class="code" href="__regex_8h.html#a5fc31e6da9b77e09ea62b4544ac4767f">REG_EXTENDED</a>) ?</div><div class="line"><a name="l05574"></a><span class="lineno"> 5574</span>&#160;      <a class="code" href="__regex_8h.html#a18701b3ee3894b158993efa18f3958ec">RE_SYNTAX_POSIX_EXTENDED</a> : <a class="code" href="__regex_8h.html#af0f03965e6d6bdc7576fe863c81bb7af">RE_SYNTAX_POSIX_BASIC</a>;</div><div class="line"><a name="l05575"></a><span class="lineno"> 5575</span>&#160;</div><div class="line"><a name="l05576"></a><span class="lineno"> 5576</span>&#160;  <span class="comment">/* regex_compile will allocate the space for the compiled pattern.  */</span></div><div class="line"><a name="l05577"></a><span class="lineno"> 5577</span>&#160;  preg-&gt;buffer = 0;</div><div class="line"><a name="l05578"></a><span class="lineno"> 5578</span>&#160;  preg-&gt;allocated = 0;</div><div class="line"><a name="l05579"></a><span class="lineno"> 5579</span>&#160;  preg-&gt;used = 0;</div><div class="line"><a name="l05580"></a><span class="lineno"> 5580</span>&#160;</div><div class="line"><a name="l05581"></a><span class="lineno"> 5581</span>&#160;  <span class="comment">/* Don&#39;t bother to use a fastmap when searching.  This simplifies the</span></div><div class="line"><a name="l05582"></a><span class="lineno"> 5582</span>&#160;<span class="comment">     REG_NEWLINE case: if we used a fastmap, we&#39;d have to put all the</span></div><div class="line"><a name="l05583"></a><span class="lineno"> 5583</span>&#160;<span class="comment">     characters after newlines into the fastmap.  This way, we just try</span></div><div class="line"><a name="l05584"></a><span class="lineno"> 5584</span>&#160;<span class="comment">     every character.  */</span></div><div class="line"><a name="l05585"></a><span class="lineno"> 5585</span>&#160;  preg-&gt;fastmap = 0;</div><div class="line"><a name="l05586"></a><span class="lineno"> 5586</span>&#160;</div><div class="line"><a name="l05587"></a><span class="lineno"> 5587</span>&#160;  <span class="keywordflow">if</span> (cflags &amp; <a class="code" href="__regex_8h.html#a0c3e7b1d5bc9c2d278a544fe9b61b67a">REG_ICASE</a>)</div><div class="line"><a name="l05588"></a><span class="lineno"> 5588</span>&#160;    {</div><div class="line"><a name="l05589"></a><span class="lineno"> 5589</span>&#160;      <span class="keywordtype">unsigned</span> <a class="code" href="gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>;</div><div class="line"><a name="l05590"></a><span class="lineno"> 5590</span>&#160;</div><div class="line"><a name="l05591"></a><span class="lineno"> 5591</span>&#160;      preg-&gt;translate</div><div class="line"><a name="l05592"></a><span class="lineno"> 5592</span>&#160;        = (<a class="code" href="__regex_8h.html#a96c9fb9c7074cb21740b63092b0637a4">RE_TRANSLATE_TYPE</a>) <a class="code" href="regex_8c.html#ab7e36af3707843f77cc5b4e831c2fa6d">malloc</a> (<a class="code" href="regex_8c.html#adebebe79bb84190296da4c5d67e4e434">CHAR_SET_SIZE</a>     <span class="comment">/* __MEM_CHECKED__ */</span></div><div class="line"><a name="l05593"></a><span class="lineno"> 5593</span>&#160;                                      * <span class="keyword">sizeof</span> (*(<a class="code" href="__regex_8h.html#a96c9fb9c7074cb21740b63092b0637a4">RE_TRANSLATE_TYPE</a>)0));</div><div class="line"><a name="l05594"></a><span class="lineno"> 5594</span>&#160;      <span class="keywordflow">if</span> (preg-&gt;translate == <a class="code" href="regex_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l05595"></a><span class="lineno"> 5595</span>&#160;        <span class="keywordflow">return</span> (<span class="keywordtype">int</span>) <a class="code" href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5aeaabf0128b7050c81c0fb933ea7265ebe9">REG_ESPACE</a>;</div><div class="line"><a name="l05596"></a><span class="lineno"> 5596</span>&#160;</div><div class="line"><a name="l05597"></a><span class="lineno"> 5597</span>&#160;      <span class="comment">/* Map uppercase characters to corresponding lowercase ones.  */</span></div><div class="line"><a name="l05598"></a><span class="lineno"> 5598</span>&#160;      <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="regex_8c.html#adebebe79bb84190296da4c5d67e4e434">CHAR_SET_SIZE</a>; i++)</div><div class="line"><a name="l05599"></a><span class="lineno"> 5599</span>&#160;        preg-&gt;translate[i] = <a class="code" href="regex_8c.html#a2bfd4177f165a5968d95960d42578ab6">ISUPPER</a> (i) ? <a class="code" href="protos_8h.html#ab22cf5c41757a2736a03f64384be7e7b">tolower</a> (i) : <a class="code" href="gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>;</div><div class="line"><a name="l05600"></a><span class="lineno"> 5600</span>&#160;    }</div><div class="line"><a name="l05601"></a><span class="lineno"> 5601</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l05602"></a><span class="lineno"> 5602</span>&#160;    preg-&gt;translate = <a class="code" href="regex_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05603"></a><span class="lineno"> 5603</span>&#160;</div><div class="line"><a name="l05604"></a><span class="lineno"> 5604</span>&#160;  <span class="comment">/* If REG_NEWLINE is set, newlines are treated differently.  */</span></div><div class="line"><a name="l05605"></a><span class="lineno"> 5605</span>&#160;  <span class="keywordflow">if</span> (cflags &amp; <a class="code" href="__regex_8h.html#ab678ef3b27bf7de2fb82c79cb2cd9d8a">REG_NEWLINE</a>)</div><div class="line"><a name="l05606"></a><span class="lineno"> 5606</span>&#160;    { <span class="comment">/* REG_NEWLINE implies neither . nor [^...] match newline.  */</span></div><div class="line"><a name="l05607"></a><span class="lineno"> 5607</span>&#160;      syntax &amp;= ~<a class="code" href="__regex_8h.html#a405fe43871f2df60407b3c8272f4624c">RE_DOT_NEWLINE</a>;</div><div class="line"><a name="l05608"></a><span class="lineno"> 5608</span>&#160;      syntax |= <a class="code" href="__regex_8h.html#aad6ec0e3f8f0bb3c53213e3f9ca77d8e">RE_HAT_LISTS_NOT_NEWLINE</a>;</div><div class="line"><a name="l05609"></a><span class="lineno"> 5609</span>&#160;      <span class="comment">/* It also changes the matching behavior.  */</span></div><div class="line"><a name="l05610"></a><span class="lineno"> 5610</span>&#160;      preg-&gt;newline_anchor = 1;</div><div class="line"><a name="l05611"></a><span class="lineno"> 5611</span>&#160;    }</div><div class="line"><a name="l05612"></a><span class="lineno"> 5612</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l05613"></a><span class="lineno"> 5613</span>&#160;    preg-&gt;newline_anchor = 0;</div><div class="line"><a name="l05614"></a><span class="lineno"> 5614</span>&#160;</div><div class="line"><a name="l05615"></a><span class="lineno"> 5615</span>&#160;  preg-&gt;no_sub = !!(cflags &amp; <a class="code" href="__regex_8h.html#abb835c7fe6f1673fc0efeff0064510ab">REG_NOSUB</a>);</div><div class="line"><a name="l05616"></a><span class="lineno"> 5616</span>&#160;</div><div class="line"><a name="l05617"></a><span class="lineno"> 5617</span>&#160;  <span class="comment">/* POSIX says a null character in the pattern terminates it, so we</span></div><div class="line"><a name="l05618"></a><span class="lineno"> 5618</span>&#160;<span class="comment">     can use strlen here in compiling the pattern.  */</span></div><div class="line"><a name="l05619"></a><span class="lineno"> 5619</span>&#160;  ret = <a class="code" href="regex_8c.html#a6a04e18fe89cacd4b8d04a474def5985">regex_compile</a> (pattern, strlen (pattern), syntax, preg);</div><div class="line"><a name="l05620"></a><span class="lineno"> 5620</span>&#160;</div><div class="line"><a name="l05621"></a><span class="lineno"> 5621</span>&#160;  <span class="comment">/* POSIX doesn&#39;t distinguish between an unmatched open-group and an</span></div><div class="line"><a name="l05622"></a><span class="lineno"> 5622</span>&#160;<span class="comment">     unmatched close-group: both are REG_EPAREN.  */</span></div><div class="line"><a name="l05623"></a><span class="lineno"> 5623</span>&#160;  <span class="keywordflow">if</span> (ret == <a class="code" href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5aea5797541a6619c4a5dbe28fe3bb58661b">REG_ERPAREN</a>) ret = <a class="code" href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5aeabde1462e3a1660e121d79ce2d0cc5664">REG_EPAREN</a>;</div><div class="line"><a name="l05624"></a><span class="lineno"> 5624</span>&#160;</div><div class="line"><a name="l05625"></a><span class="lineno"> 5625</span>&#160;  <span class="keywordflow">return</span> (<span class="keywordtype">int</span>) ret;</div><div class="line"><a name="l05626"></a><span class="lineno"> 5626</span>&#160;}</div><div class="line"><a name="l05627"></a><span class="lineno"> 5627</span>&#160;</div><div class="line"><a name="l05628"></a><span class="lineno"> 5628</span>&#160;</div><div class="line"><a name="l05629"></a><span class="lineno"> 5629</span>&#160;<span class="comment">/* regexec searches for a given pattern, specified by PREG, in the</span></div><div class="line"><a name="l05630"></a><span class="lineno"> 5630</span>&#160;<span class="comment">   string STRING.</span></div><div class="line"><a name="l05631"></a><span class="lineno"> 5631</span>&#160;<span class="comment"></span></div><div class="line"><a name="l05632"></a><span class="lineno"> 5632</span>&#160;<span class="comment">   If NMATCH is zero or REG_NOSUB was set in the cflags argument to</span></div><div class="line"><a name="l05633"></a><span class="lineno"> 5633</span>&#160;<span class="comment">   `regcomp&#39;, we ignore PMATCH.  Otherwise, we assume PMATCH has at</span></div><div class="line"><a name="l05634"></a><span class="lineno"> 5634</span>&#160;<span class="comment">   least NMATCH elements, and we set them to the offsets of the</span></div><div class="line"><a name="l05635"></a><span class="lineno"> 5635</span>&#160;<span class="comment">   corresponding matched substrings.</span></div><div class="line"><a name="l05636"></a><span class="lineno"> 5636</span>&#160;<span class="comment"></span></div><div class="line"><a name="l05637"></a><span class="lineno"> 5637</span>&#160;<span class="comment">   EFLAGS specifies `execution flags&#39; which affect matching: if</span></div><div class="line"><a name="l05638"></a><span class="lineno"> 5638</span>&#160;<span class="comment">   REG_NOTBOL is set, then ^ does not match at the beginning of the</span></div><div class="line"><a name="l05639"></a><span class="lineno"> 5639</span>&#160;<span class="comment">   string; if REG_NOTEOL is set, then $ does not match at the end.</span></div><div class="line"><a name="l05640"></a><span class="lineno"> 5640</span>&#160;<span class="comment"></span></div><div class="line"><a name="l05641"></a><span class="lineno"> 5641</span>&#160;<span class="comment">   We return 0 if we find a match and REG_NOMATCH if not.  */</span></div><div class="line"><a name="l05642"></a><span class="lineno"> 5642</span>&#160;</div><div class="line"><a name="l05643"></a><span class="lineno"> 5643</span>&#160;<span class="keywordtype">int</span></div><div class="line"><a name="l05644"></a><span class="lineno"><a class="line" href="regex_8c.html#a0298f60fae70832d70e8ec5d032472a8"> 5644</a></span>&#160;<a class="code" href="regex_8c.html#a0298f60fae70832d70e8ec5d032472a8">regexec</a> (preg, <span class="keywordtype">string</span>, nmatch, pmatch, eflags)</div><div class="line"><a name="l05645"></a><span class="lineno"> 5645</span>&#160;    <span class="keyword">const</span> regex_t *preg;</div><div class="line"><a name="l05646"></a><span class="lineno"> 5646</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *string;</div><div class="line"><a name="l05647"></a><span class="lineno"> 5647</span>&#160;    <span class="keywordtype">size_t</span> nmatch;</div><div class="line"><a name="l05648"></a><span class="lineno"> 5648</span>&#160;    <a class="code" href="structregmatch__t.html">regmatch_t</a> pmatch[];</div><div class="line"><a name="l05649"></a><span class="lineno"> 5649</span>&#160;    <span class="keywordtype">int</span> eflags;</div><div class="line"><a name="l05650"></a><span class="lineno"> 5650</span>&#160;{</div><div class="line"><a name="l05651"></a><span class="lineno"> 5651</span>&#160;  <span class="keywordtype">int</span> ret;</div><div class="line"><a name="l05652"></a><span class="lineno"> 5652</span>&#160;  <span class="keyword">struct </span><a class="code" href="structre__registers.html">re_registers</a> regs;</div><div class="line"><a name="l05653"></a><span class="lineno"> 5653</span>&#160;  regex_t private_preg;</div><div class="line"><a name="l05654"></a><span class="lineno"> 5654</span>&#160;  <span class="keywordtype">int</span> len = strlen (<span class="keywordtype">string</span>);</div><div class="line"><a name="l05655"></a><span class="lineno"> 5655</span>&#160;  <span class="keywordtype">boolean</span> want_reg_info = !preg-&gt;no_sub &amp;&amp; nmatch &gt; 0;</div><div class="line"><a name="l05656"></a><span class="lineno"> 5656</span>&#160;</div><div class="line"><a name="l05657"></a><span class="lineno"> 5657</span>&#160;  private_preg = *preg;</div><div class="line"><a name="l05658"></a><span class="lineno"> 5658</span>&#160;</div><div class="line"><a name="l05659"></a><span class="lineno"> 5659</span>&#160;  private_preg.not_bol = !!(eflags &amp; <a class="code" href="__regex_8h.html#aa0ca15a79530976f6d4ef90326c46858">REG_NOTBOL</a>);</div><div class="line"><a name="l05660"></a><span class="lineno"> 5660</span>&#160;  private_preg.not_eol = !!(eflags &amp; <a class="code" href="__regex_8h.html#a9d97d85ef86123060a845723d28a92cb">REG_NOTEOL</a>);</div><div class="line"><a name="l05661"></a><span class="lineno"> 5661</span>&#160;</div><div class="line"><a name="l05662"></a><span class="lineno"> 5662</span>&#160;  <span class="comment">/* The user has told us exactly how many registers to return</span></div><div class="line"><a name="l05663"></a><span class="lineno"> 5663</span>&#160;<span class="comment">     information about, via `nmatch&#39;.  We have to pass that on to the</span></div><div class="line"><a name="l05664"></a><span class="lineno"> 5664</span>&#160;<span class="comment">     matching routines.  */</span></div><div class="line"><a name="l05665"></a><span class="lineno"> 5665</span>&#160;  private_preg.regs_allocated = <a class="code" href="__regex_8h.html#a54c8820fca418980dbcd43ebd78ed5a6">REGS_FIXED</a>;</div><div class="line"><a name="l05666"></a><span class="lineno"> 5666</span>&#160;</div><div class="line"><a name="l05667"></a><span class="lineno"> 5667</span>&#160;  <span class="keywordflow">if</span> (want_reg_info)</div><div class="line"><a name="l05668"></a><span class="lineno"> 5668</span>&#160;    {</div><div class="line"><a name="l05669"></a><span class="lineno"> 5669</span>&#160;      regs.<a class="code" href="structre__registers.html#aeae8140aadf339f6fe0c49277d6aa7b5">num_regs</a> = nmatch;</div><div class="line"><a name="l05670"></a><span class="lineno"> 5670</span>&#160;      regs.<a class="code" href="structre__registers.html#a6676ddb6ab07e50191e149b04dbcfe03">start</a> = <a class="code" href="regex_8c.html#aaf77bcbd178f50762a35333d83bacd09">TALLOC</a> (nmatch, <a class="code" href="__regex_8h.html#a5b34995b47432512ee4ffa32b836e65f">regoff_t</a>);</div><div class="line"><a name="l05671"></a><span class="lineno"> 5671</span>&#160;      regs.<a class="code" href="structre__registers.html#a0a9d373f1ab74c9c2063f233476fa5d4">end</a> = <a class="code" href="regex_8c.html#aaf77bcbd178f50762a35333d83bacd09">TALLOC</a> (nmatch, <a class="code" href="__regex_8h.html#a5b34995b47432512ee4ffa32b836e65f">regoff_t</a>);</div><div class="line"><a name="l05672"></a><span class="lineno"> 5672</span>&#160;      <span class="keywordflow">if</span> (regs.<a class="code" href="structre__registers.html#a6676ddb6ab07e50191e149b04dbcfe03">start</a> == <a class="code" href="regex_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || regs.<a class="code" href="structre__registers.html#a0a9d373f1ab74c9c2063f233476fa5d4">end</a> == <a class="code" href="regex_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l05673"></a><span class="lineno"> 5673</span>&#160;        <span class="keywordflow">return</span> (<span class="keywordtype">int</span>) <a class="code" href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5aea4cc3b232a9ce92df5523d8c464c7beb2">REG_NOMATCH</a>;</div><div class="line"><a name="l05674"></a><span class="lineno"> 5674</span>&#160;    }</div><div class="line"><a name="l05675"></a><span class="lineno"> 5675</span>&#160;</div><div class="line"><a name="l05676"></a><span class="lineno"> 5676</span>&#160;  <span class="comment">/* Perform the searching operation.  */</span></div><div class="line"><a name="l05677"></a><span class="lineno"> 5677</span>&#160;  ret = <a class="code" href="regex_8c.html#afe0743116f59f62a4d00f50a9e9a4932">re_search</a> (&amp;private_preg, <span class="keywordtype">string</span>, len,</div><div class="line"><a name="l05678"></a><span class="lineno"> 5678</span>&#160;                   <span class="comment">/* start: */</span> 0, <span class="comment">/* range: */</span> len,</div><div class="line"><a name="l05679"></a><span class="lineno"> 5679</span>&#160;                   want_reg_info ? &amp;regs : (<span class="keyword">struct</span> <a class="code" href="structre__registers.html">re_registers</a> *) 0);</div><div class="line"><a name="l05680"></a><span class="lineno"> 5680</span>&#160;</div><div class="line"><a name="l05681"></a><span class="lineno"> 5681</span>&#160;  <span class="comment">/* Copy the register information to the POSIX structure.  */</span></div><div class="line"><a name="l05682"></a><span class="lineno"> 5682</span>&#160;  <span class="keywordflow">if</span> (want_reg_info)</div><div class="line"><a name="l05683"></a><span class="lineno"> 5683</span>&#160;    {</div><div class="line"><a name="l05684"></a><span class="lineno"> 5684</span>&#160;      <span class="keywordflow">if</span> (ret &gt;= 0)</div><div class="line"><a name="l05685"></a><span class="lineno"> 5685</span>&#160;        {</div><div class="line"><a name="l05686"></a><span class="lineno"> 5686</span>&#160;          <span class="keywordtype">unsigned</span> r;</div><div class="line"><a name="l05687"></a><span class="lineno"> 5687</span>&#160;</div><div class="line"><a name="l05688"></a><span class="lineno"> 5688</span>&#160;          <span class="keywordflow">for</span> (r = 0; r &lt; nmatch; r++)</div><div class="line"><a name="l05689"></a><span class="lineno"> 5689</span>&#160;            {</div><div class="line"><a name="l05690"></a><span class="lineno"> 5690</span>&#160;              pmatch[r].<a class="code" href="structregmatch__t.html#a90ac8973d256eaffdbb20de676ff45a4">rm_so</a> = regs.<a class="code" href="structre__registers.html#a6676ddb6ab07e50191e149b04dbcfe03">start</a>[r];</div><div class="line"><a name="l05691"></a><span class="lineno"> 5691</span>&#160;              pmatch[r].<a class="code" href="structregmatch__t.html#a728c28b9b23fa28c4e0b90e3a1a29efc">rm_eo</a> = regs.<a class="code" href="structre__registers.html#a0a9d373f1ab74c9c2063f233476fa5d4">end</a>[r];</div><div class="line"><a name="l05692"></a><span class="lineno"> 5692</span>&#160;            }</div><div class="line"><a name="l05693"></a><span class="lineno"> 5693</span>&#160;        }</div><div class="line"><a name="l05694"></a><span class="lineno"> 5694</span>&#160;</div><div class="line"><a name="l05695"></a><span class="lineno"> 5695</span>&#160;      <span class="comment">/* If we needed the temporary register info, free the space now.  */</span></div><div class="line"><a name="l05696"></a><span class="lineno"> 5696</span>&#160;      <a class="code" href="plural_8c.html#a117d0dd7f4ff1696cf76f1fec37bf4d1">free</a> (regs.<a class="code" href="structre__registers.html#a6676ddb6ab07e50191e149b04dbcfe03">start</a>);        <span class="comment">/* __MEM_CHECKED__ */</span></div><div class="line"><a name="l05697"></a><span class="lineno"> 5697</span>&#160;      <a class="code" href="plural_8c.html#a117d0dd7f4ff1696cf76f1fec37bf4d1">free</a> (regs.<a class="code" href="structre__registers.html#a0a9d373f1ab74c9c2063f233476fa5d4">end</a>);          <span class="comment">/* __MEM_CHECKED__ */</span></div><div class="line"><a name="l05698"></a><span class="lineno"> 5698</span>&#160;    }</div><div class="line"><a name="l05699"></a><span class="lineno"> 5699</span>&#160;</div><div class="line"><a name="l05700"></a><span class="lineno"> 5700</span>&#160;  <span class="comment">/* We want zero return to mean success, unlike `re_search&#39;.  */</span></div><div class="line"><a name="l05701"></a><span class="lineno"> 5701</span>&#160;  <span class="keywordflow">return</span> ret &gt;= 0 ? (int) <a class="code" href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5aeafa64e5a57596c8c859f982512f52cd6b">REG_NOERROR</a> : (<span class="keywordtype">int</span>) <a class="code" href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5aea4cc3b232a9ce92df5523d8c464c7beb2">REG_NOMATCH</a>;</div><div class="line"><a name="l05702"></a><span class="lineno"> 5702</span>&#160;}</div><div class="line"><a name="l05703"></a><span class="lineno"> 5703</span>&#160;</div><div class="line"><a name="l05704"></a><span class="lineno"> 5704</span>&#160;</div><div class="line"><a name="l05705"></a><span class="lineno"> 5705</span>&#160;<span class="comment">/* Returns a message corresponding to an error code, ERRCODE, returned</span></div><div class="line"><a name="l05706"></a><span class="lineno"> 5706</span>&#160;<span class="comment">   from either regcomp or regexec.   We don&#39;t use PREG here.  */</span></div><div class="line"><a name="l05707"></a><span class="lineno"> 5707</span>&#160;</div><div class="line"><a name="l05708"></a><span class="lineno"> 5708</span>&#160;<span class="keywordtype">size_t</span></div><div class="line"><a name="l05709"></a><span class="lineno"><a class="line" href="regex_8c.html#a091f175aa7e3ae5450ce2ee33495b901"> 5709</a></span>&#160;<a class="code" href="regex_8c.html#a091f175aa7e3ae5450ce2ee33495b901">regerror</a> (errcode, preg, errbuf, errbuf_size)</div><div class="line"><a name="l05710"></a><span class="lineno"> 5710</span>&#160;    <span class="keywordtype">int</span> errcode;</div><div class="line"><a name="l05711"></a><span class="lineno"> 5711</span>&#160;    <span class="keyword">const</span> regex_t *preg;</div><div class="line"><a name="l05712"></a><span class="lineno"> 5712</span>&#160;    <span class="keywordtype">char</span> *errbuf;</div><div class="line"><a name="l05713"></a><span class="lineno"> 5713</span>&#160;    <span class="keywordtype">size_t</span> errbuf_size;</div><div class="line"><a name="l05714"></a><span class="lineno"> 5714</span>&#160;{</div><div class="line"><a name="l05715"></a><span class="lineno"> 5715</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *msg;</div><div class="line"><a name="l05716"></a><span class="lineno"> 5716</span>&#160;  <span class="keywordtype">size_t</span> msg_size;</div><div class="line"><a name="l05717"></a><span class="lineno"> 5717</span>&#160;</div><div class="line"><a name="l05718"></a><span class="lineno"> 5718</span>&#160;  <span class="keywordflow">if</span> (errcode &lt; 0</div><div class="line"><a name="l05719"></a><span class="lineno"> 5719</span>&#160;      || errcode &gt;= (<span class="keywordtype">int</span>) (<span class="keyword">sizeof</span> (re_error_msgid)</div><div class="line"><a name="l05720"></a><span class="lineno"> 5720</span>&#160;                           / <span class="keyword">sizeof</span> (re_error_msgid[0])))</div><div class="line"><a name="l05721"></a><span class="lineno"> 5721</span>&#160;    <span class="comment">/* Only error codes returned by the rest of the code should be passed</span></div><div class="line"><a name="l05722"></a><span class="lineno"> 5722</span>&#160;<span class="comment">       to this routine.  If we are given anything else, or if other regex</span></div><div class="line"><a name="l05723"></a><span class="lineno"> 5723</span>&#160;<span class="comment">       code generates an invalid error code, then the program has a bug.</span></div><div class="line"><a name="l05724"></a><span class="lineno"> 5724</span>&#160;<span class="comment">       Dump core so we can fix it.  */</span></div><div class="line"><a name="l05725"></a><span class="lineno"> 5725</span>&#160;    abort ();</div><div class="line"><a name="l05726"></a><span class="lineno"> 5726</span>&#160;</div><div class="line"><a name="l05727"></a><span class="lineno"> 5727</span>&#160;  msg = <a class="code" href="regex_8c.html#a84591b979e395c1ecf40f06963f89d8b">gettext</a> (re_error_msgid[errcode]);</div><div class="line"><a name="l05728"></a><span class="lineno"> 5728</span>&#160;</div><div class="line"><a name="l05729"></a><span class="lineno"> 5729</span>&#160;  msg_size = strlen (msg) + 1; <span class="comment">/* Includes the null.  */</span></div><div class="line"><a name="l05730"></a><span class="lineno"> 5730</span>&#160;</div><div class="line"><a name="l05731"></a><span class="lineno"> 5731</span>&#160;  <span class="keywordflow">if</span> (errbuf_size != 0)</div><div class="line"><a name="l05732"></a><span class="lineno"> 5732</span>&#160;    {</div><div class="line"><a name="l05733"></a><span class="lineno"> 5733</span>&#160;      <span class="keywordflow">if</span> (msg_size &gt; errbuf_size)</div><div class="line"><a name="l05734"></a><span class="lineno"> 5734</span>&#160;        {</div><div class="line"><a name="l05735"></a><span class="lineno"> 5735</span>&#160;          strncpy (errbuf, msg, errbuf_size - 1);</div><div class="line"><a name="l05736"></a><span class="lineno"> 5736</span>&#160;          errbuf[errbuf_size - 1] = 0;</div><div class="line"><a name="l05737"></a><span class="lineno"> 5737</span>&#160;        }</div><div class="line"><a name="l05738"></a><span class="lineno"> 5738</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l05739"></a><span class="lineno"> 5739</span>&#160;        strcpy (errbuf, msg);   <span class="comment">/* __STRCPY_CHECKED__ */</span></div><div class="line"><a name="l05740"></a><span class="lineno"> 5740</span>&#160;    }</div><div class="line"><a name="l05741"></a><span class="lineno"> 5741</span>&#160;</div><div class="line"><a name="l05742"></a><span class="lineno"> 5742</span>&#160;  <span class="keywordflow">return</span> msg_size;</div><div class="line"><a name="l05743"></a><span class="lineno"> 5743</span>&#160;}</div><div class="line"><a name="l05744"></a><span class="lineno"> 5744</span>&#160;</div><div class="line"><a name="l05745"></a><span class="lineno"> 5745</span>&#160;</div><div class="line"><a name="l05746"></a><span class="lineno"> 5746</span>&#160;<span class="comment">/* Free dynamically allocated space used by PREG.  */</span></div><div class="line"><a name="l05747"></a><span class="lineno"> 5747</span>&#160;</div><div class="line"><a name="l05748"></a><span class="lineno"> 5748</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l05749"></a><span class="lineno"><a class="line" href="regex_8c.html#ad94d0de532eaa4fd959b8adde4d64898"> 5749</a></span>&#160;<a class="code" href="regex_8c.html#ad94d0de532eaa4fd959b8adde4d64898">regfree</a> (preg)</div><div class="line"><a name="l05750"></a><span class="lineno"> 5750</span>&#160;    regex_t *preg;</div><div class="line"><a name="l05751"></a><span class="lineno"> 5751</span>&#160;{</div><div class="line"><a name="l05752"></a><span class="lineno"> 5752</span>&#160;  <span class="keywordflow">if</span> (preg-&gt;buffer != <a class="code" href="regex_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l05753"></a><span class="lineno"> 5753</span>&#160;    <a class="code" href="plural_8c.html#a117d0dd7f4ff1696cf76f1fec37bf4d1">free</a> (preg-&gt;buffer);        <span class="comment">/* __MEM_CHECKED__ */</span></div><div class="line"><a name="l05754"></a><span class="lineno"> 5754</span>&#160;  preg-&gt;buffer = <a class="code" href="regex_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05755"></a><span class="lineno"> 5755</span>&#160;</div><div class="line"><a name="l05756"></a><span class="lineno"> 5756</span>&#160;  preg-&gt;allocated = 0;</div><div class="line"><a name="l05757"></a><span class="lineno"> 5757</span>&#160;  preg-&gt;used = 0;</div><div class="line"><a name="l05758"></a><span class="lineno"> 5758</span>&#160;</div><div class="line"><a name="l05759"></a><span class="lineno"> 5759</span>&#160;  <span class="keywordflow">if</span> (preg-&gt;fastmap != <a class="code" href="regex_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l05760"></a><span class="lineno"> 5760</span>&#160;    <a class="code" href="plural_8c.html#a117d0dd7f4ff1696cf76f1fec37bf4d1">free</a> (preg-&gt;fastmap);       <span class="comment">/* __MEM_CHECKED__ */</span></div><div class="line"><a name="l05761"></a><span class="lineno"> 5761</span>&#160;  preg-&gt;fastmap = <a class="code" href="regex_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05762"></a><span class="lineno"> 5762</span>&#160;  preg-&gt;fastmap_accurate = 0;</div><div class="line"><a name="l05763"></a><span class="lineno"> 5763</span>&#160;</div><div class="line"><a name="l05764"></a><span class="lineno"> 5764</span>&#160;  <span class="keywordflow">if</span> (preg-&gt;translate != <a class="code" href="regex_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l05765"></a><span class="lineno"> 5765</span>&#160;    <a class="code" href="plural_8c.html#a117d0dd7f4ff1696cf76f1fec37bf4d1">free</a> (preg-&gt;translate);     <span class="comment">/* __MEM_CHECKED__ */</span></div><div class="line"><a name="l05766"></a><span class="lineno"> 5766</span>&#160;  preg-&gt;translate = <a class="code" href="regex_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05767"></a><span class="lineno"> 5767</span>&#160;}</div><div class="line"><a name="l05768"></a><span class="lineno"> 5768</span>&#160;</div><div class="line"><a name="l05769"></a><span class="lineno"> 5769</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* not emacs  */</span><span class="preprocessor"></span></div><div class="ttc" id="__regex_8h_html_a1a37133027e6fa3a5f31044f9a76c5aeabbae03a00b1f2359894b7fa4ad7efe83"><div class="ttname"><a href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5aeabbae03a00b1f2359894b7fa4ad7efe83">REG_EESCAPE</a></div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00293">_regex.h:293</a></div></div>
<div class="ttc" id="structre__registers_html_a0a9d373f1ab74c9c2063f233476fa5d4"><div class="ttname"><a href="structre__registers.html#a0a9d373f1ab74c9c2063f233476fa5d4">re_registers::end</a></div><div class="ttdeci">regoff_t * end</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00399">_regex.h:399</a></div></div>
<div class="ttc" id="structfail__stack__type_html_a1e3d4256deebf37a4528f58d3d261854"><div class="ttname"><a href="structfail__stack__type.html#a1e3d4256deebf37a4528f58d3d261854">fail_stack_type::avail</a></div><div class="ttdeci">unsigned avail</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01136">regex.c:1136</a></div></div>
<div class="ttc" id="regex_8c_html_aa2aa60706e57e51cc9b54ff2c8cc38a2"><div class="ttname"><a href="regex_8c.html#aa2aa60706e57e51cc9b54ff2c8cc38a2">STORE_JUMP2</a></div><div class="ttdeci">#define STORE_JUMP2(op, loc, to, arg)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01594">regex.c:1594</a></div></div>
<div class="ttc" id="regex_8c_html_a90d3a551feb495f25eaf3e22933dd1d7"><div class="ttname"><a href="regex_8c.html#a90d3a551feb495f25eaf3e22933dd1d7">FREE_STACK_RETURN</a></div><div class="ttdeci">#define FREE_STACK_RETURN(value)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01817">regex.c:1817</a></div></div>
<div class="ttc" id="regex_8c_html_a6878991bbaf83ac3debe1d74f4a450e1"><div class="ttname"><a href="regex_8c.html#a6878991bbaf83ac3debe1d74f4a450e1">STORE_NUMBER</a></div><div class="ttdeci">#define STORE_NUMBER(destination, number)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00531">regex.c:531</a></div></div>
<div class="ttc" id="regex_8c_html_ab2200093505d6435c2521ff819125d0d"><div class="ttname"><a href="regex_8c.html#ab2200093505d6435c2521ff819125d0d">store_op2</a></div><div class="ttdeci">static void store_op2(re_opcode_t op, unsigned char *loc, int arg1, int arg2)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l02939">regex.c:2939</a></div></div>
<div class="ttc" id="regex_8c_html_a95cf7f68f7a75751d4abd454d6add11a"><div class="ttname"><a href="regex_8c.html#a95cf7f68f7a75751d4abd454d6add11a">SWITCH_ENUM_CAST</a></div><div class="ttdeci">#define SWITCH_ENUM_CAST(x)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00166">regex.c:166</a></div></div>
<div class="ttc" id="regex_8c_html_ad1f757f0a86665780f50f812767b2118a292eb17c5d97bf50ef0c4f733e56c836"><div class="ttname"><a href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a292eb17c5d97bf50ef0c4f733e56c836">no_op</a></div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00395">regex.c:395</a></div></div>
<div class="ttc" id="regex_8c_html_afefb76392029f59835538d01a0c13242"><div class="ttname"><a href="regex_8c.html#afefb76392029f59835538d01a0c13242">REG_UNSET</a></div><div class="ttdeci">#define REG_UNSET(e)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01494">regex.c:1494</a></div></div>
<div class="ttc" id="regex_8c_html_ad1f757f0a86665780f50f812767b2118abcbe9b8a81da1098e4ffbb7c4f4a8e2e"><div class="ttname"><a href="regex_8c.html#ad1f757f0a86665780f50f812767b2118abcbe9b8a81da1098e4ffbb7c4f4a8e2e">charset_not</a></div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00416">regex.c:416</a></div></div>
<div class="ttc" id="structre__pattern__buffer_html_af3578c777dbece95d6c8a1e10a6a7a5a"><div class="ttname"><a href="structre__pattern__buffer.html#af3578c777dbece95d6c8a1e10a6a7a5a">re_pattern_buffer::fastmap_accurate</a></div><div class="ttdeci">unsigned fastmap_accurate</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00368">_regex.h:368</a></div></div>
<div class="ttc" id="structcompile__stack__type_html"><div class="ttname"><a href="structcompile__stack__type.html">compile_stack_type</a></div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01682">regex.c:1682</a></div></div>
<div class="ttc" id="regex_8c_html_a8b3d83f068b179782bccaca23e3b20f7"><div class="ttname"><a href="regex_8c.html#a8b3d83f068b179782bccaca23e3b20f7">IS_CHAR_CLASS</a></div><div class="ttdeci">#define IS_CHAR_CLASS(string)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01737">regex.c:1737</a></div></div>
<div class="ttc" id="regex_8c_html_a78d7e87774e3c9ae84570f8ab88f55a5"><div class="ttname"><a href="regex_8c.html#a78d7e87774e3c9ae84570f8ab88f55a5">REG_UNSET_VALUE</a></div><div class="ttdeci">#define REG_UNSET_VALUE</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01493">regex.c:1493</a></div></div>
<div class="ttc" id="__regex_8h_html_a0782bb31ad7160085c33f13dca7e369f"><div class="ttname"><a href="__regex_8h.html#a0782bb31ad7160085c33f13dca7e369f">RE_LIMITED_OPS</a></div><div class="ttdeci">#define RE_LIMITED_OPS</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00114">_regex.h:114</a></div></div>
<div class="ttc" id="regex_8c_html_a831fca3c806cff281a70c8757c40b134"><div class="ttname"><a href="regex_8c.html#a831fca3c806cff281a70c8757c40b134">bcmp_translate</a></div><div class="ttdeci">static int bcmp_translate(char *s1, char *s2, int len, RE_TRANSLATE_TYPE translate) const</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l05405">regex.c:5405</a></div></div>
<div class="ttc" id="__regex_8h_html_a5fc31e6da9b77e09ea62b4544ac4767f"><div class="ttname"><a href="__regex_8h.html#a5fc31e6da9b77e09ea62b4544ac4767f">REG_EXTENDED</a></div><div class="ttdeci">#define REG_EXTENDED</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00252">_regex.h:252</a></div></div>
<div class="ttc" id="__regex_8h_html_af60fbd1f693bfb95fd0a80caae9aa4c5"><div class="ttname"><a href="__regex_8h.html#af60fbd1f693bfb95fd0a80caae9aa4c5">RE_NO_GNU_OPS</a></div><div class="ttdeci">#define RE_NO_GNU_OPS</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00153">_regex.h:153</a></div></div>
<div class="ttc" id="hash-string_8h_html_a537825d894fc8d6a786f28a99ce8af2c"><div class="ttname"><a href="hash-string_8h.html#a537825d894fc8d6a786f28a99ce8af2c">str</a></div><div class="ttdeci">const char * str</div><div class="ttdef"><b>Definition:</b> <a href="hash-string_8h_source.html#l00043">hash-string.h:43</a></div></div>
<div class="ttc" id="regex_8c_html_ad72dc64cd2c9bc3598f792dc518d03b2"><div class="ttname"><a href="regex_8c.html#ad72dc64cd2c9bc3598f792dc518d03b2">BYTEWIDTH</a></div><div class="ttdeci">#define BYTEWIDTH</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00371">regex.c:371</a></div></div>
<div class="ttc" id="regex_8c_html_a8330d3aebbb4066c8c7665fc6abcf9e5"><div class="ttname"><a href="regex_8c.html#a8330d3aebbb4066c8c7665fc6abcf9e5">print_fastmap</a></div><div class="ttdeci">void print_fastmap(char *fastmap)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00634">regex.c:634</a></div></div>
<div class="ttc" id="__regex_8h_html_a377bd32fc62adedc890f74cd18845aa9"><div class="ttname"><a href="__regex_8h.html#a377bd32fc62adedc890f74cd18845aa9">RE_INTERVALS</a></div><div class="ttdeci">#define RE_INTERVALS</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00110">_regex.h:110</a></div></div>
<div class="ttc" id="regex_8c_html_af65108a54093e5c7220dfc15f6cd9db1"><div class="ttname"><a href="regex_8c.html#af65108a54093e5c7220dfc15f6cd9db1">ISPRINT</a></div><div class="ttdeci">#define ISPRINT(c)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00248">regex.c:248</a></div></div>
<div class="ttc" id="regex_8c_html_ad1f757f0a86665780f50f812767b2118ab0eca0e160953a14bcb41d151287d1f1"><div class="ttname"><a href="regex_8c.html#ad1f757f0a86665780f50f812767b2118ab0eca0e160953a14bcb41d151287d1f1">exactn</a></div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00401">regex.c:401</a></div></div>
<div class="ttc" id="regex_8c_html_a6ec9fc1db02e8f3a1625ed9771f5bd92"><div class="ttname"><a href="regex_8c.html#a6ec9fc1db02e8f3a1625ed9771f5bd92">insert_op1</a></div><div class="ttdeci">static void insert_op1(re_opcode_t op, unsigned char *loc, int arg, unsigned char *end)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l02954">regex.c:2954</a></div></div>
<div class="ttc" id="structcompile__stack__type_html_aebaf05ac308fe465d6a630e5d863fd4a"><div class="ttname"><a href="structcompile__stack__type.html#aebaf05ac308fe465d6a630e5d863fd4a">compile_stack_type::stack</a></div><div class="ttdeci">compile_stack_elt_t * stack</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01684">regex.c:1684</a></div></div>
<div class="ttc" id="regex_8c_html_a060354a63e337df065f8cd869b3118f1"><div class="ttname"><a href="regex_8c.html#a060354a63e337df065f8cd869b3118f1">CHAR_CLASS_MAX_LENGTH</a></div><div class="ttdeci">#define CHAR_CLASS_MAX_LENGTH</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01735">regex.c:1735</a></div></div>
<div class="ttc" id="regex_8c_html_a38ceed7188d42c689f202512a1cb76fb"><div class="ttname"><a href="regex_8c.html#a38ceed7188d42c689f202512a1cb76fb">BUF_PUSH_3</a></div><div class="ttdeci">#define BUF_PUSH_3(c1, c2, c3)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01579">regex.c:1579</a></div></div>
<div class="ttc" id="unionregister__info__type_html_adff16b2ba318af82b945d659c0f91ffa"><div class="ttname"><a href="unionregister__info__type.html#adff16b2ba318af82b945d659c0f91ffa">register_info_type::is_active</a></div><div class="ttdeci">unsigned is_active</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01459">regex.c:1459</a></div></div>
<div class="ttc" id="regex_8c_html_ad1f757f0a86665780f50f812767b2118ab428f43b6557e8dfc45e452a8891b598"><div class="ttname"><a href="regex_8c.html#ad1f757f0a86665780f50f812767b2118ab428f43b6557e8dfc45e452a8891b598">begbuf</a></div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00448">regex.c:448</a></div></div>
<div class="ttc" id="unionregister__info__type_html_a9834f5a8a58b57e135fa8024ff7be739"><div class="ttname"><a href="unionregister__info__type.html#a9834f5a8a58b57e135fa8024ff7be739">register_info_type::ever_matched_something</a></div><div class="ttdeci">unsigned ever_matched_something</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01461">regex.c:1461</a></div></div>
<div class="ttc" id="structre__pattern__buffer_html_a0a2f7fd160aa3cc0195fc7ee91e41195"><div class="ttname"><a href="structre__pattern__buffer.html#a0a2f7fd160aa3cc0195fc7ee91e41195">re_pattern_buffer::translate</a></div><div class="ttdeci">RE_TRANSLATE_TYPE translate</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00345">_regex.h:345</a></div></div>
<div class="ttc" id="unionfail__stack__elt_html_a87dada28c05860cdc1656a6d49f8f787"><div class="ttname"><a href="unionfail__stack__elt.html#a87dada28c05860cdc1656a6d49f8f787">fail_stack_elt::integer</a></div><div class="ttdeci">int integer</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01127">regex.c:1127</a></div></div>
<div class="ttc" id="regex_8c_html_a9e5a8ee5ece120e8e7b7c28eea3aa7cd"><div class="ttname"><a href="regex_8c.html#a9e5a8ee5ece120e8e7b7c28eea3aa7cd">regnum_t</a></div><div class="ttdeci">unsigned regnum_t</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01662">regex.c:1662</a></div></div>
<div class="ttc" id="structre__pattern__buffer_html_a84025dce422d70b263288329274a888d"><div class="ttname"><a href="structre__pattern__buffer.html#a84025dce422d70b263288329274a888d">re_pattern_buffer::buffer</a></div><div class="ttdeci">unsigned char * buffer</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00325">_regex.h:325</a></div></div>
<div class="ttc" id="unionfail__stack__elt_html"><div class="ttname"><a href="unionfail__stack__elt.html">fail_stack_elt</a></div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01124">regex.c:1124</a></div></div>
<div class="ttc" id="regex_8c_html_ad1f757f0a86665780f50f812767b2118a4780b4642f63093c414b1833e2d40107"><div class="ttname"><a href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a4780b4642f63093c414b1833e2d40107">begline</a></div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00441">regex.c:441</a></div></div>
<div class="ttc" id="regex_8c_html_a97ff784b1a6ed91bbc1013a3a44a05da"><div class="ttname"><a href="regex_8c.html#a97ff784b1a6ed91bbc1013a3a44a05da">common_op_match_null_string_p</a></div><div class="ttdeci">static boolean common_op_match_null_string_p(unsigned char **p, unsigned char *end, register_info_type *reg_info)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l05317">regex.c:5317</a></div></div>
<div class="ttc" id="regex_8c_html_a77ae0460c3885ddc73f4544ef494e402"><div class="ttname"><a href="regex_8c.html#a77ae0460c3885ddc73f4544ef494e402">PATUNFETCH</a></div><div class="ttdeci">#define PATUNFETCH</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01538">regex.c:1538</a></div></div>
<div class="ttc" id="regex_8c_html_a38bbfba560a12468196f72aa88486406"><div class="ttname"><a href="regex_8c.html#a38bbfba560a12468196f72aa88486406">regcomp</a></div><div class="ttdeci">int regcomp(regex_t *preg, const char *pattern, int cflags)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l05566">regex.c:5566</a></div></div>
<div class="ttc" id="regex_8c_html_af1b3c3e22fe42152c272df6027b1bf4b"><div class="ttname"><a href="regex_8c.html#af1b3c3e22fe42152c272df6027b1bf4b">MAX_REGNUM</a></div><div class="ttdeci">#define MAX_REGNUM</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01658">regex.c:1658</a></div></div>
<div class="ttc" id="regex_8c_html_abdc5e67bbb6a48b740a95aef2bc3f5f2"><div class="ttname"><a href="regex_8c.html#abdc5e67bbb6a48b740a95aef2bc3f5f2">re_syntax_options</a></div><div class="ttdeci">reg_syntax_t re_syntax_options</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00982">regex.c:982</a></div></div>
<div class="ttc" id="regex_8c_html_a7f3f2410fe2ae0089be0a2f3005f15dd"><div class="ttname"><a href="regex_8c.html#a7f3f2410fe2ae0089be0a2f3005f15dd">FREE_VARIABLES</a></div><div class="ttdeci">#define FREE_VARIABLES()</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l03669">regex.c:3669</a></div></div>
<div class="ttc" id="regex_8c_html_a87944e3ae2c8e13e58ae2209e27447a8"><div class="ttname"><a href="regex_8c.html#a87944e3ae2c8e13e58ae2209e27447a8">re_syntax_table</a></div><div class="ttdeci">static char re_syntax_table[CHAR_SET_SIZE]</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00178">regex.c:178</a></div></div>
<div class="ttc" id="regex_8c_html_ad1f757f0a86665780f50f812767b2118a01398d7bcfdbcb84b318fc65a7ef9c93"><div class="ttname"><a href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a01398d7bcfdbcb84b318fc65a7ef9c93">notwordchar</a></div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00505">regex.c:505</a></div></div>
<div class="ttc" id="__regex_8h_html_a9d97d85ef86123060a845723d28a92cb"><div class="ttname"><a href="__regex_8h.html#a9d97d85ef86123060a845723d28a92cb">REG_NOTEOL</a></div><div class="ttdeci">#define REG_NOTEOL</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00278">_regex.h:278</a></div></div>
<div class="ttc" id="structregmatch__t_html_a90ac8973d256eaffdbb20de676ff45a4"><div class="ttname"><a href="structregmatch__t.html#a90ac8973d256eaffdbb20de676ff45a4">regmatch_t::rm_so</a></div><div class="ttdeci">regoff_t rm_so</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00416">_regex.h:416</a></div></div>
<div class="ttc" id="__regex_8h_html_a1a37133027e6fa3a5f31044f9a76c5aeaeda9cecaba728fe6b18a8537872ffd34"><div class="ttname"><a href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5aeaeda9cecaba728fe6b18a8537872ffd34">REG_BADBR</a></div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00298">_regex.h:298</a></div></div>
<div class="ttc" id="regex_8c_html_ad9e4e94e6531ff0387a725491e028a41"><div class="ttname"><a href="regex_8c.html#ad9e4e94e6531ff0387a725491e028a41">re_set_registers</a></div><div class="ttdeci">void re_set_registers(struct re_pattern_buffer *bufp, struct re_registers *regs, unsigned num_regs, regoff_t *starts, regoff_t *ends)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l03424">regex.c:3424</a></div></div>
<div class="ttc" id="__regex_8h_html_a834997e69569c41f0394d6ee120051a0"><div class="ttname"><a href="__regex_8h.html#a834997e69569c41f0394d6ee120051a0">RE_NO_BK_VBAR</a></div><div class="ttdeci">#define RE_NO_BK_VBAR</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00135">_regex.h:135</a></div></div>
<div class="ttc" id="structre__pattern__buffer_html_ab6ca2aea079c8ac7c399dfbac8b8d3a4"><div class="ttname"><a href="structre__pattern__buffer.html#ab6ca2aea079c8ac7c399dfbac8b8d3a4">re_pattern_buffer::not_eol</a></div><div class="ttdeci">unsigned not_eol</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00379">_regex.h:379</a></div></div>
<div class="ttc" id="regex_8c_html_aa56b1ff14ec552b5af8e9af50bc9d5cc"><div class="ttname"><a href="regex_8c.html#aa56b1ff14ec552b5af8e9af50bc9d5cc">DEBUG_PRINT2</a></div><div class="ttdeci">#define DEBUG_PRINT2(x1, x2)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00622">regex.c:622</a></div></div>
<div class="ttc" id="__regex_8h_html_ab678ef3b27bf7de2fb82c79cb2cd9d8a"><div class="ttname"><a href="__regex_8h.html#ab678ef3b27bf7de2fb82c79cb2cd9d8a">REG_NEWLINE</a></div><div class="ttdeci">#define REG_NEWLINE</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00261">_regex.h:261</a></div></div>
<div class="ttc" id="regex_8c_html_a9fbdd9b78059994c85d9f064f9fa9ec3"><div class="ttname"><a href="regex_8c.html#a9fbdd9b78059994c85d9f064f9fa9ec3">MATCH_NULL_UNSET_VALUE</a></div><div class="ttdeci">#define MATCH_NULL_UNSET_VALUE</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01457">regex.c:1457</a></div></div>
<div class="ttc" id="__regex_8h_html_a1a37133027e6fa3a5f31044f9a76c5aeaf6eaf32c5250906aa304d801a227ccf9"><div class="ttname"><a href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5aeaf6eaf32c5250906aa304d801a227ccf9">REG_BADRPT</a></div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00301">_regex.h:301</a></div></div>
<div class="ttc" id="regex_8c_html_a508c8adae6628ee43b8498249272efb9"><div class="ttname"><a href="regex_8c.html#a508c8adae6628ee43b8498249272efb9">NO_LOWEST_ACTIVE_REG</a></div><div class="ttdeci">#define NO_LOWEST_ACTIVE_REG</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l03694">regex.c:3694</a></div></div>
<div class="ttc" id="regex_8c_html_a9afddc5990335682b1958801af7e4bf3"><div class="ttname"><a href="regex_8c.html#a9afddc5990335682b1958801af7e4bf3">EXTRACT_NUMBER</a></div><div class="ttdeci">#define EXTRACT_NUMBER(destination, source)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00570">regex.c:570</a></div></div>
<div class="ttc" id="regex_8c_html_a598285922e2b62b38ee46ced0ebd9388"><div class="ttname"><a href="regex_8c.html#a598285922e2b62b38ee46ced0ebd9388">INIT_BUF_SIZE</a></div><div class="ttdeci">#define INIT_BUF_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01554">regex.c:1554</a></div></div>
<div class="ttc" id="regex_8c_html_a37aeb4969c6ded152f5be7582330e6e5"><div class="ttname"><a href="regex_8c.html#a37aeb4969c6ded152f5be7582330e6e5">MATCHED_SOMETHING</a></div><div class="ttdeci">#define MATCHED_SOMETHING(R)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01467">regex.c:1467</a></div></div>
<div class="ttc" id="regex_8c_html_a0a97c6a1ac97ed1288cb47dceabc56df"><div class="ttname"><a href="regex_8c.html#a0a97c6a1ac97ed1288cb47dceabc56df">INIT_FAIL_STACK</a></div><div class="ttdeci">#define INIT_FAIL_STACK()</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01150">regex.c:1150</a></div></div>
<div class="ttc" id="regex_8c_html_ad1f757f0a86665780f50f812767b2118a0c02fe9db75630f52c6e9e44dd55d9de"><div class="ttname"><a href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a0c02fe9db75630f52c6e9e44dd55d9de">duplicate</a></div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00438">regex.c:438</a></div></div>
<div class="ttc" id="structre__pattern__buffer_html_a4dfc1ce26c896695b77854da7d607ec8"><div class="ttname"><a href="structre__pattern__buffer.html#a4dfc1ce26c896695b77854da7d607ec8">re_pattern_buffer::re_nsub</a></div><div class="ttdeci">size_t re_nsub</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00348">_regex.h:348</a></div></div>
<div class="ttc" id="dcigettext_8c_html_a03a200320a749aaf2faa1d1719ffb4de"><div class="ttname"><a href="dcigettext_8c.html#a03a200320a749aaf2faa1d1719ffb4de">alloca</a></div><div class="ttdeci">#define alloca(size)</div><div class="ttdef"><b>Definition:</b> <a href="dcigettext_8c_source.html#l00336">dcigettext.c:336</a></div></div>
<div class="ttc" id="protos_8h_html_abe96ffa6567a4342a28be3cbf540b44d"><div class="ttname"><a href="protos_8h.html#abe96ffa6567a4342a28be3cbf540b44d">printf</a></div><div class="ttdeci">int printf()</div></div>
<div class="ttc" id="regex_8c_html_ab42511b5b7bf70ad31b13c44469d117f"><div class="ttname"><a href="regex_8c.html#ab42511b5b7bf70ad31b13c44469d117f">STREQ</a></div><div class="ttdeci">#define STREQ(s1, s2)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00373">regex.c:373</a></div></div>
<div class="ttc" id="structre__pattern__buffer_html"><div class="ttname"><a href="structre__pattern__buffer.html">re_pattern_buffer</a></div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00319">_regex.h:319</a></div></div>
<div class="ttc" id="regex_8c_html_ad1f757f0a86665780f50f812767b2118a0556771866997767489c4da274f15aa4"><div class="ttname"><a href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a0556771866997767489c4da274f15aa4">endline</a></div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00444">regex.c:444</a></div></div>
<div class="ttc" id="regex_8c_html_a78ae8e3bdec768f7fd9a75b31109fa8d"><div class="ttname"><a href="regex_8c.html#a78ae8e3bdec768f7fd9a75b31109fa8d">PUSH_PATTERN_OP</a></div><div class="ttdeci">#define PUSH_PATTERN_OP(POINTER, FAIL_STACK)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01197">regex.c:1197</a></div></div>
<div class="ttc" id="regex_8c_html_a06b0c1ae265d6791c041df0ddf6d7ff6"><div class="ttname"><a href="regex_8c.html#a06b0c1ae265d6791c041df0ddf6d7ff6">compile_range</a></div><div class="ttdeci">static reg_errcode_t compile_range(char **p_ptr, char *pend, RE_TRANSLATE_TYPE translate, reg_syntax_t syntax, unsigned char *b) const</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l03063">regex.c:3063</a></div></div>
<div class="ttc" id="regex_8c_html_ad1f757f0a86665780f50f812767b2118a6247a0132ac9bb1af7dbc840afe09c88"><div class="ttname"><a href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a6247a0132ac9bb1af7dbc840afe09c88">charset</a></div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00412">regex.c:412</a></div></div>
<div class="ttc" id="regex_8c_html_a4f6628b4b02e356efb3c4c8e6cf8eaff"><div class="ttname"><a href="regex_8c.html#a4f6628b4b02e356efb3c4c8e6cf8eaff">IS_ACTIVE</a></div><div class="ttdeci">#define IS_ACTIVE(R)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01466">regex.c:1466</a></div></div>
<div class="ttc" id="regex_8c_html_ae31b1d009dfa3a2b5eca3f11ec3dee6a"><div class="ttname"><a href="regex_8c.html#ae31b1d009dfa3a2b5eca3f11ec3dee6a">insert_op2</a></div><div class="ttdeci">static void insert_op2(re_opcode_t op, unsigned char *loc, int arg1, int arg2, unsigned char *end)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l02973">regex.c:2973</a></div></div>
<div class="ttc" id="structcompile__stack__elt__t_html_a8b8a84a9e80b0af645dbba2ca5685fdd"><div class="ttname"><a href="structcompile__stack__elt__t.html#a8b8a84a9e80b0af645dbba2ca5685fdd">compile_stack_elt_t::fixup_alt_jump</a></div><div class="ttdeci">pattern_offset_t fixup_alt_jump</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01675">regex.c:1675</a></div></div>
<div class="ttc" id="regex_8c_html_ad1f757f0a86665780f50f812767b2118a375d40bb404dcb4aedbb775f40e7f648"><div class="ttname"><a href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a375d40bb404dcb4aedbb775f40e7f648">anychar</a></div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00404">regex.c:404</a></div></div>
<div class="ttc" id="regex_8c_html_affd804aa116f7d43493d29c6607df14d"><div class="ttname"><a href="regex_8c.html#affd804aa116f7d43493d29c6607df14d">SIGN_EXTEND_CHAR</a></div><div class="ttdeci">#define SIGN_EXTEND_CHAR(c)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00272">regex.c:272</a></div></div>
<div class="ttc" id="regex_8c_html_afe0743116f59f62a4d00f50a9e9a4932"><div class="ttname"><a href="regex_8c.html#afe0743116f59f62a4d00f50a9e9a4932">re_search</a></div><div class="ttdeci">int re_search(struct re_pattern_buffer *bufp, const char *string, int size, int startpos, int range, struct re_registers *regs)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l03451">regex.c:3451</a></div></div>
<div class="ttc" id="regex_8c_html_ad1f757f0a86665780f50f812767b2118"><div class="ttname"><a href="regex_8c.html#ad1f757f0a86665780f50f812767b2118">re_opcode_t</a></div><div class="ttdeci">re_opcode_t</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00393">regex.c:393</a></div></div>
<div class="ttc" id="structregmatch__t_html_a728c28b9b23fa28c4e0b90e3a1a29efc"><div class="ttname"><a href="structregmatch__t.html#a728c28b9b23fa28c4e0b90e3a1a29efc">regmatch_t::rm_eo</a></div><div class="ttdeci">regoff_t rm_eo</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00417">_regex.h:417</a></div></div>
<div class="ttc" id="regex_8c_html_ac1a3adc04ca27d22992ea483708c5812"><div class="ttname"><a href="regex_8c.html#ac1a3adc04ca27d22992ea483708c5812">group_match_null_string_p</a></div><div class="ttdeci">static boolean group_match_null_string_p(unsigned char **p, unsigned char *end, register_info_type *reg_info)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l05171">regex.c:5171</a></div></div>
<div class="ttc" id="structcompile__stack__elt__t_html_a66d64048ae2b32e73ba2b87fee8d7170"><div class="ttname"><a href="structcompile__stack__elt__t.html#a66d64048ae2b32e73ba2b87fee8d7170">compile_stack_elt_t::begalt_offset</a></div><div class="ttdeci">pattern_offset_t begalt_offset</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01674">regex.c:1674</a></div></div>
<div class="ttc" id="regex_8c_html_ad1f757f0a86665780f50f812767b2118a47168d753b8d555d2e89416a4b660da9"><div class="ttname"><a href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a47168d753b8d555d2e89416a4b660da9">wordbound</a></div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00510">regex.c:510</a></div></div>
<div class="ttc" id="__regex_8h_html"><div class="ttname"><a href="__regex_8h.html">_regex.h</a></div></div>
<div class="ttc" id="structre__registers_html"><div class="ttname"><a href="structre__registers.html">re_registers</a></div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00395">_regex.h:395</a></div></div>
<div class="ttc" id="regex_8c_html_a5079e89f60f6f44944ea9dc3b59f14d5"><div class="ttname"><a href="regex_8c.html#a5079e89f60f6f44944ea9dc3b59f14d5">ISCNTRL</a></div><div class="ttdeci">#define ISCNTRL(c)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00252">regex.c:252</a></div></div>
<div class="ttc" id="regex_8c_html_a9c1cb14ecb36be1c3ff3c5a050ecc561"><div class="ttname"><a href="regex_8c.html#a9c1cb14ecb36be1c3ff3c5a050ecc561">MAX_FAILURE_ITEMS</a></div><div class="ttdeci">#define MAX_FAILURE_ITEMS</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01340">regex.c:1340</a></div></div>
<div class="ttc" id="regex_8c_html_a557d2f1c16f9bd2123e55885ee447c06"><div class="ttname"><a href="regex_8c.html#a557d2f1c16f9bd2123e55885ee447c06">PATFETCH</a></div><div class="ttdeci">#define PATFETCH(c)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01523">regex.c:1523</a></div></div>
<div class="ttc" id="regex_8c_html_ad1f757f0a86665780f50f812767b2118a37fe3367d5bf38cb0ac666ebae52d4f9"><div class="ttname"><a href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a37fe3367d5bf38cb0ac666ebae52d4f9">succeed</a></div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00398">regex.c:398</a></div></div>
<div class="ttc" id="regex_8c_html_a8cfee99226a6b73952701f9de12912b9"><div class="ttname"><a href="regex_8c.html#a8cfee99226a6b73952701f9de12912b9">BUF_PUSH_2</a></div><div class="ttdeci">#define BUF_PUSH_2(c1, c2)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01570">regex.c:1570</a></div></div>
<div class="ttc" id="structfail__stack__type_html_ae51a629391dd5d2cb07bffc95e545282"><div class="ttname"><a href="structfail__stack__type.html#ae51a629391dd5d2cb07bffc95e545282">fail_stack_type::size</a></div><div class="ttdeci">unsigned size</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01135">regex.c:1135</a></div></div>
<div class="ttc" id="regex_8c_html_a31ddd189071199427310ccde9cedfb71"><div class="ttname"><a href="regex_8c.html#a31ddd189071199427310ccde9cedfb71">ISGRAPH</a></div><div class="ttdeci">#define ISGRAPH(c)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00245">regex.c:245</a></div></div>
<div class="ttc" id="structcompile__stack__elt__t_html_af027fbe8c196c2e4646ae6247094d1f8"><div class="ttname"><a href="structcompile__stack__elt__t.html#af027fbe8c196c2e4646ae6247094d1f8">compile_stack_elt_t::regnum</a></div><div class="ttdeci">regnum_t regnum</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01678">regex.c:1678</a></div></div>
<div class="ttc" id="__regex_8h_html_ae01c1dfed60f209c2f10f252c3acf9fd"><div class="ttname"><a href="__regex_8h.html#ae01c1dfed60f209c2f10f252c3acf9fd">RE_NO_EMPTY_RANGES</a></div><div class="ttdeci">#define RE_NO_EMPTY_RANGES</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00141">_regex.h:141</a></div></div>
<div class="ttc" id="regex_8c_html_ad1f757f0a86665780f50f812767b2118a4962434097279c747aa6ba59df478775"><div class="ttname"><a href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a4962434097279c747aa6ba59df478775">endbuf</a></div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00451">regex.c:451</a></div></div>
<div class="ttc" id="__regex_8h_html_a7e0565199a2fabaca3d67a5a44fc4229"><div class="ttname"><a href="__regex_8h.html#a7e0565199a2fabaca3d67a5a44fc4229">reg_syntax_t</a></div><div class="ttdeci">unsigned long int reg_syntax_t</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00052">_regex.h:52</a></div></div>
<div class="ttc" id="__regex_8h_html_a30d6a2fb42df1a210e830f3cd3f06977"><div class="ttname"><a href="__regex_8h.html#a30d6a2fb42df1a210e830f3cd3f06977">RE_DOT_NOT_NULL</a></div><div class="ttdeci">#define RE_DOT_NOT_NULL</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00101">_regex.h:101</a></div></div>
<div class="ttc" id="regex_8c_html_a222a4648230cba6a1801e51b4e2ced77"><div class="ttname"><a href="regex_8c.html#a222a4648230cba6a1801e51b4e2ced77">FAIL_STACK_EMPTY</a></div><div class="ttdeci">#define FAIL_STACK_EMPTY()</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01141">regex.c:1141</a></div></div>
<div class="ttc" id="structre__pattern__buffer_html_a1e21330e18a5a87f4803932c4af32881"><div class="ttname"><a href="structre__pattern__buffer.html#a1e21330e18a5a87f4803932c4af32881">re_pattern_buffer::not_bol</a></div><div class="ttdeci">unsigned not_bol</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00376">_regex.h:376</a></div></div>
<div class="ttc" id="__regex_8h_html_a544bf7770a00eaaa62374a00fea08a2d"><div class="ttname"><a href="__regex_8h.html#a544bf7770a00eaaa62374a00fea08a2d">RE_CONTEXT_INDEP_ANCHORS</a></div><div class="ttdeci">#define RE_CONTEXT_INDEP_ANCHORS</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00081">_regex.h:81</a></div></div>
<div class="ttc" id="regex_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="regex_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00260">regex.c:260</a></div></div>
<div class="ttc" id="__regex_8h_html_a405fe43871f2df60407b3c8272f4624c"><div class="ttname"><a href="__regex_8h.html#a405fe43871f2df60407b3c8272f4624c">RE_DOT_NEWLINE</a></div><div class="ttdeci">#define RE_DOT_NEWLINE</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00097">_regex.h:97</a></div></div>
<div class="ttc" id="regex_8c_html_a90a312923984a45f83767acea95b84a1"><div class="ttname"><a href="regex_8c.html#a90a312923984a45f83767acea95b84a1">DEBUG_PRINT1</a></div><div class="ttdeci">#define DEBUG_PRINT1(x)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00621">regex.c:621</a></div></div>
<div class="ttc" id="regex_8c_html_ab7e36af3707843f77cc5b4e831c2fa6d"><div class="ttname"><a href="regex_8c.html#ab7e36af3707843f77cc5b4e831c2fa6d">malloc</a></div><div class="ttdeci">char * malloc()</div></div>
<div class="ttc" id="regex_8c_html_a0298f60fae70832d70e8ec5d032472a8"><div class="ttname"><a href="regex_8c.html#a0298f60fae70832d70e8ec5d032472a8">regexec</a></div><div class="ttdeci">int regexec(regex_t *preg, const char *string, size_t nmatch, pmatch, int eflags) const</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l05644">regex.c:5644</a></div></div>
<div class="ttc" id="regex_8c_html_ad1f757f0a86665780f50f812767b2118ad88e0028985b6bc61df64cd9578d3f18"><div class="ttname"><a href="regex_8c.html#ad1f757f0a86665780f50f812767b2118ad88e0028985b6bc61df64cd9578d3f18">wordbeg</a></div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00507">regex.c:507</a></div></div>
<div class="ttc" id="regex_8c_html_aca55c7b840c46d7e72964a9ecf52310f"><div class="ttname"><a href="regex_8c.html#aca55c7b840c46d7e72964a9ecf52310f">DEBUG_PRINT4</a></div><div class="ttdeci">#define DEBUG_PRINT4(x1, x2, x3, x4)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00624">regex.c:624</a></div></div>
<div class="ttc" id="__regex_8h_html_aa7d072d0a88c61d3692dc547ea27538e"><div class="ttname"><a href="__regex_8h.html#aa7d072d0a88c61d3692dc547ea27538e">RE_DUP_MAX</a></div><div class="ttdeci">#define RE_DUP_MAX</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00245">_regex.h:245</a></div></div>
<div class="ttc" id="regex_8c_html_aaf77bcbd178f50762a35333d83bacd09"><div class="ttname"><a href="regex_8c.html#aaf77bcbd178f50762a35333d83bacd09">TALLOC</a></div><div class="ttdeci">#define TALLOC(n, t)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00365">regex.c:365</a></div></div>
<div class="ttc" id="__regex_8h_html_a87642301f41c9c37e7f4d10ab5ade987"><div class="ttname"><a href="__regex_8h.html#a87642301f41c9c37e7f4d10ab5ade987">REGS_REALLOCATE</a></div><div class="ttdeci">#define REGS_REALLOCATE</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00362">_regex.h:362</a></div></div>
<div class="ttc" id="regex_8c_html_ae1a07ee1a4b73aa71754bce23d0690aa"><div class="ttname"><a href="regex_8c.html#ae1a07ee1a4b73aa71754bce23d0690aa">DEBUG_PRINT3</a></div><div class="ttdeci">#define DEBUG_PRINT3(x1, x2, x3)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00623">regex.c:623</a></div></div>
<div class="ttc" id="regex_8c_html_ae247cb248fa0309737dce6bdfc3a6a3d"><div class="ttname"><a href="regex_8c.html#ae247cb248fa0309737dce6bdfc3a6a3d">RETALLOC</a></div><div class="ttdeci">#define RETALLOC(addr, n, t)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00366">regex.c:366</a></div></div>
<div class="ttc" id="regex_8c_html_ab4f01ef78af4e14600c1cd08742ab9a2"><div class="ttname"><a href="regex_8c.html#ab4f01ef78af4e14600c1cd08742ab9a2">print_double_string</a></div><div class="ttdeci">void print_double_string(char *where, const char *string1, int size1, const char *string2, int size2) const</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00929">regex.c:929</a></div></div>
<div class="ttc" id="__regex_8h_html_a18701b3ee3894b158993efa18f3958ec"><div class="ttname"><a href="__regex_8h.html#a18701b3ee3894b158993efa18f3958ec">RE_SYNTAX_POSIX_EXTENDED</a></div><div class="ttdeci">#define RE_SYNTAX_POSIX_EXTENDED</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00223">_regex.h:223</a></div></div>
<div class="ttc" id="regex_8c_html_aa09a4c3c61b8d82d7134225bfd5a32f7"><div class="ttname"><a href="regex_8c.html#aa09a4c3c61b8d82d7134225bfd5a32f7">SET_LIST_BIT</a></div><div class="ttdeci">#define SET_LIST_BIT(c)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01700">regex.c:1700</a></div></div>
<div class="ttc" id="structfail__stack__type_html"><div class="ttname"><a href="structfail__stack__type.html">fail_stack_type</a></div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01132">regex.c:1132</a></div></div>
<div class="ttc" id="__regex_8h_html_af1907a994cab6bd73ad14677b126a64b"><div class="ttname"><a href="__regex_8h.html#af1907a994cab6bd73ad14677b126a64b">RE_UNMATCHED_RIGHT_PAREN_ORD</a></div><div class="ttdeci">#define RE_UNMATCHED_RIGHT_PAREN_ORD</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00145">_regex.h:145</a></div></div>
<div class="ttc" id="regex_8c_html_ad1f757f0a86665780f50f812767b2118a5a08a3c1fa135350961630d2f9c2b849"><div class="ttname"><a href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a5a08a3c1fa135350961630d2f9c2b849">jump</a></div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00454">regex.c:454</a></div></div>
<div class="ttc" id="__regex_8h_html_abb835c7fe6f1673fc0efeff0064510ab"><div class="ttname"><a href="__regex_8h.html#abb835c7fe6f1673fc0efeff0064510ab">REG_NOSUB</a></div><div class="ttdeci">#define REG_NOSUB</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00265">_regex.h:265</a></div></div>
<div class="ttc" id="regex_8c_html_a7e61c2eafa31a2bc3b4942c22e803e5c"><div class="ttname"><a href="regex_8c.html#a7e61c2eafa31a2bc3b4942c22e803e5c">COMPILE_STACK_FULL</a></div><div class="ttdeci">#define COMPILE_STACK_FULL</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01693">regex.c:1693</a></div></div>
<div class="ttc" id="structre__pattern__buffer_html_a8d2bf18d174b513250c8dab7a01f156e"><div class="ttname"><a href="structre__pattern__buffer.html#a8d2bf18d174b513250c8dab7a01f156e">re_pattern_buffer::newline_anchor</a></div><div class="ttdeci">unsigned newline_anchor</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00382">_regex.h:382</a></div></div>
<div class="ttc" id="regex_8c_html_ae0616c0941dc178f469f6a36dec7c8d2"><div class="ttname"><a href="regex_8c.html#ae0616c0941dc178f469f6a36dec7c8d2">extract_number</a></div><div class="ttdeci">static void extract_number(int *dest, unsigned char *source)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00559">regex.c:559</a></div></div>
<div class="ttc" id="regex_8c_html_a3d4d6185d412b00bc3def2b58b2898cc"><div class="ttname"><a href="regex_8c.html#a3d4d6185d412b00bc3def2b58b2898cc">realloc</a></div><div class="ttdeci">char * realloc()</div></div>
<div class="ttc" id="regex_8c_html_ad94d0de532eaa4fd959b8adde4d64898"><div class="ttname"><a href="regex_8c.html#ad94d0de532eaa4fd959b8adde4d64898">regfree</a></div><div class="ttdeci">void regfree(regex_t *preg)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l05749">regex.c:5749</a></div></div>
<div class="ttc" id="sendlib_8c_html_af576bf8ffa22a44e53018c67095ffbf0"><div class="ttname"><a href="sendlib_8c.html#af576bf8ffa22a44e53018c67095ffbf0">assert</a></div><div class="ttdeci">#define assert(x)</div><div class="ttdef"><b>Definition:</b> <a href="sendlib_8c_source.html#l00063">sendlib.c:63</a></div></div>
<div class="ttc" id="regex_8c_html_ae8cdc17e44905c826bddf416b7bf621c"><div class="ttname"><a href="regex_8c.html#ae8cdc17e44905c826bddf416b7bf621c">ISSPACE</a></div><div class="ttdeci">#define ISSPACE(c)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00255">regex.c:255</a></div></div>
<div class="ttc" id="regex_8c_html_acb1e7358e00baea87b36a635fdb6970f"><div class="ttname"><a href="regex_8c.html#acb1e7358e00baea87b36a635fdb6970f">ISLOWER</a></div><div class="ttdeci">#define ISLOWER(c)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00253">regex.c:253</a></div></div>
<div class="ttc" id="regex_8c_html_ad1f757f0a86665780f50f812767b2118a0f280efb7129538f3b07aa789fc99fa1"><div class="ttname"><a href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a0f280efb7129538f3b07aa789fc99fa1">set_number_at</a></div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00502">regex.c:502</a></div></div>
<div class="ttc" id="regex_8c_html_adf25dd5c7e53555ae24ccb0cc96f36c8"><div class="ttname"><a href="regex_8c.html#adf25dd5c7e53555ae24ccb0cc96f36c8">print_compiled_pattern</a></div><div class="ttdeci">void print_compiled_pattern(struct re_pattern_buffer *bufp)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00901">regex.c:901</a></div></div>
<div class="ttc" id="unionfail__stack__elt_html_afd2648cc33c85dbb2e955d556739abae"><div class="ttname"><a href="unionfail__stack__elt.html#afd2648cc33c85dbb2e955d556739abae">fail_stack_elt::pointer</a></div><div class="ttdeci">unsigned char * pointer</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01126">regex.c:1126</a></div></div>
<div class="ttc" id="structre__registers_html_aeae8140aadf339f6fe0c49277d6aa7b5"><div class="ttname"><a href="structre__registers.html#aeae8140aadf339f6fe0c49277d6aa7b5">re_registers::num_regs</a></div><div class="ttdeci">unsigned num_regs</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00397">_regex.h:397</a></div></div>
<div class="ttc" id="__regex_8h_html_a1a37133027e6fa3a5f31044f9a76c5aeafad659d2f7fe4c0f9d360ef68d371673"><div class="ttname"><a href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5aeafad659d2f7fe4c0f9d360ef68d371673">REG_EBRACE</a></div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00297">_regex.h:297</a></div></div>
<div class="ttc" id="__regex_8h_html_a1a37133027e6fa3a5f31044f9a76c5ae"><div class="ttname"><a href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5ae">reg_errcode_t</a></div><div class="ttdeci">reg_errcode_t</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00283">_regex.h:283</a></div></div>
<div class="ttc" id="regex_8c_html_a165393454eb1019f3f77cedba52e23de"><div class="ttname"><a href="regex_8c.html#a165393454eb1019f3f77cedba52e23de">ISPUNCT</a></div><div class="ttdeci">#define ISPUNCT(c)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00254">regex.c:254</a></div></div>
<div class="ttc" id="structregmatch__t_html"><div class="ttname"><a href="structregmatch__t.html">regmatch_t</a></div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00414">_regex.h:414</a></div></div>
<div class="ttc" id="__regex_8h_html_a2714d3e1903c4824ef31ccae36e702c7"><div class="ttname"><a href="__regex_8h.html#a2714d3e1903c4824ef31ccae36e702c7">REGS_UNALLOCATED</a></div><div class="ttdeci">#define REGS_UNALLOCATED</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00361">_regex.h:361</a></div></div>
<div class="ttc" id="regex_8c_html_a7d96976a27d0138b3f189f1d1a663d68"><div class="ttname"><a href="regex_8c.html#a7d96976a27d0138b3f189f1d1a663d68">COMPILE_STACK_EMPTY</a></div><div class="ttdeci">#define COMPILE_STACK_EMPTY</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01692">regex.c:1692</a></div></div>
<div class="ttc" id="regex_8c_html_ad7a880e03677a7961ddf81cdc73e8fb4"><div class="ttname"><a href="regex_8c.html#ad7a880e03677a7961ddf81cdc73e8fb4">re_set_syntax</a></div><div class="ttdeci">reg_syntax_t re_set_syntax(reg_syntax_t syntax)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00993">regex.c:993</a></div></div>
<div class="ttc" id="regex_8c_html_a9cb82d6af5bb56ce088c91cef5127ce6"><div class="ttname"><a href="regex_8c.html#a9cb82d6af5bb56ce088c91cef5127ce6">WORDCHAR_P</a></div><div class="ttdeci">#define WORDCHAR_P(d)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l03652">regex.c:3652</a></div></div>
<div class="ttc" id="unionregister__info__type_html_a989fd7471cc6cca3b11a1f131953ee02"><div class="ttname"><a href="unionregister__info__type.html#a989fd7471cc6cca3b11a1f131953ee02">register_info_type::match_null_string_p</a></div><div class="ttdeci">unsigned match_null_string_p</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01458">regex.c:1458</a></div></div>
<div class="ttc" id="regex_8c_html_a3773b51bd1f0ba67a1d8f05923c87d4c"><div class="ttname"><a href="regex_8c.html#a3773b51bd1f0ba67a1d8f05923c87d4c">ISBLANK</a></div><div class="ttdeci">#define ISBLANK(c)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00240">regex.c:240</a></div></div>
<div class="ttc" id="__regex_8h_html_a7a69bf315a61cb9d674332a6a5d64819"><div class="ttname"><a href="__regex_8h.html#a7a69bf315a61cb9d674332a6a5d64819">RE_NEWLINE_ALT</a></div><div class="ttdeci">#define RE_NEWLINE_ALT</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00118">_regex.h:118</a></div></div>
<div class="ttc" id="__regex_8h_html_a96c9fb9c7074cb21740b63092b0637a4"><div class="ttname"><a href="__regex_8h.html#a96c9fb9c7074cb21740b63092b0637a4">RE_TRANSLATE_TYPE</a></div><div class="ttdeci">#define RE_TRANSLATE_TYPE</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00316">_regex.h:316</a></div></div>
<div class="ttc" id="regex_8c_html_a74904744b0c1f8fe8cb2bf1584da2b3b"><div class="ttname"><a href="regex_8c.html#a74904744b0c1f8fe8cb2bf1584da2b3b">PUSH_FAILURE_POINT</a></div><div class="ttdeci">#define PUSH_FAILURE_POINT(pattern_place, string_place, failure_code)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01247">regex.c:1247</a></div></div>
<div class="ttc" id="regex_8c_html_ae4aacc367337cbfc7513b4be57808b78"><div class="ttname"><a href="regex_8c.html#ae4aacc367337cbfc7513b4be57808b78">re_match_2</a></div><div class="ttdeci">int re_match_2(struct re_pattern_buffer *bufp, const char *string1, int size1, const char *string2, int size2, int pos, struct re_registers *regs, int stop)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l03745">regex.c:3745</a></div></div>
<div class="ttc" id="regex_8c_html_aa286396ee78a5823c6bedd72e303e4c9"><div class="ttname"><a href="regex_8c.html#aa286396ee78a5823c6bedd72e303e4c9">SET_REGS_MATCHED</a></div><div class="ttdeci">#define SET_REGS_MATCHED()</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01474">regex.c:1474</a></div></div>
<div class="ttc" id="__regex_8h_html_a36fa5b4c2430ba987abcc9a0d60ba37e"><div class="ttname"><a href="__regex_8h.html#a36fa5b4c2430ba987abcc9a0d60ba37e">RE_NREGS</a></div><div class="ttdeci">#define RE_NREGS</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00407">_regex.h:407</a></div></div>
<div class="ttc" id="regex_8c_html_a7dd59dc7da937c9308d1e7b9331aa916"><div class="ttname"><a href="regex_8c.html#a7dd59dc7da937c9308d1e7b9331aa916">INSERT_JUMP2</a></div><div class="ttdeci">#define INSERT_JUMP2(op, loc, to, arg)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01602">regex.c:1602</a></div></div>
<div class="ttc" id="regex_8c_html_aef73eb530578e61ff012a68faccb18d0"><div class="ttname"><a href="regex_8c.html#aef73eb530578e61ff012a68faccb18d0">BUF_PUSH</a></div><div class="ttdeci">#define BUF_PUSH(c)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01562">regex.c:1562</a></div></div>
<div class="ttc" id="structfail__stack__type_html_a810ddd6610b10fddebcfbf675f7800c8"><div class="ttname"><a href="structfail__stack__type.html#a810ddd6610b10fddebcfbf675f7800c8">fail_stack_type::stack</a></div><div class="ttdeci">fail_stack_elt_t * stack</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01134">regex.c:1134</a></div></div>
<div class="ttc" id="regex_8c_html_a330a2ea4da1ce57c189821c8ebf59618"><div class="ttname"><a href="regex_8c.html#a330a2ea4da1ce57c189821c8ebf59618">boolean</a></div><div class="ttdeci">char boolean</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00380">regex.c:380</a></div></div>
<div class="ttc" id="regex_8c_html_ad1f757f0a86665780f50f812767b2118ae96f67086c4f61cc6fd32b6b493dc17f"><div class="ttname"><a href="regex_8c.html#ad1f757f0a86665780f50f812767b2118ae96f67086c4f61cc6fd32b6b493dc17f">push_dummy_failure</a></div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00489">regex.c:489</a></div></div>
<div class="ttc" id="structcompile__stack__type_html_af5a43e711b027026ed61228f5c96ea71"><div class="ttname"><a href="structcompile__stack__type.html#af5a43e711b027026ed61228f5c96ea71">compile_stack_type::size</a></div><div class="ttdeci">unsigned size</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01685">regex.c:1685</a></div></div>
<div class="ttc" id="__regex_8h_html_a5b34995b47432512ee4ffa32b836e65f"><div class="ttname"><a href="__regex_8h.html#a5b34995b47432512ee4ffa32b836e65f">regoff_t</a></div><div class="ttdeci">int regoff_t</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00390">_regex.h:390</a></div></div>
<div class="ttc" id="regex_8c_html_a4d088a8cdab2f2daa400a5df18cbf594"><div class="ttname"><a href="regex_8c.html#a4d088a8cdab2f2daa400a5df18cbf594">alt_match_null_string_p</a></div><div class="ttdeci">static boolean alt_match_null_string_p(unsigned char *p, unsigned char *end, register_info_type *reg_info)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l05280">regex.c:5280</a></div></div>
<div class="ttc" id="regex_8c_html_af9f8d0785dfac45a23d8d8fdb4df1629"><div class="ttname"><a href="regex_8c.html#af9f8d0785dfac45a23d8d8fdb4df1629">RESET_FAIL_STACK</a></div><div class="ttdeci">#define RESET_FAIL_STACK()</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01162">regex.c:1162</a></div></div>
<div class="ttc" id="unionregister__info__type_html_a5050422a9b6e4673315964626b1fd1ac"><div class="ttname"><a href="unionregister__info__type.html#a5050422a9b6e4673315964626b1fd1ac">register_info_type::matched_something</a></div><div class="ttdeci">unsigned matched_something</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01460">regex.c:1460</a></div></div>
<div class="ttc" id="regex_8c_html_ad1f757f0a86665780f50f812767b2118a5ca3d8a56cc5259243bcaffedd070287"><div class="ttname"><a href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a5ca3d8a56cc5259243bcaffedd070287">on_failure_jump</a></div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00461">regex.c:461</a></div></div>
<div class="ttc" id="regex_8c_html_acfebc9fd667ce5b7d2162f2677087e21"><div class="ttname"><a href="regex_8c.html#acfebc9fd667ce5b7d2162f2677087e21">STORE_JUMP</a></div><div class="ttdeci">#define STORE_JUMP(op, loc, to)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01590">regex.c:1590</a></div></div>
<div class="ttc" id="regex_8c_html_a091f175aa7e3ae5450ce2ee33495b901"><div class="ttname"><a href="regex_8c.html#a091f175aa7e3ae5450ce2ee33495b901">regerror</a></div><div class="ttdeci">size_t regerror(int errcode, const regex_t *preg, char *errbuf, size_t errbuf_size)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l05709">regex.c:5709</a></div></div>
<div class="ttc" id="structre__pattern__buffer_html_af65d7e2e2a760b6a14546fb9084843aa"><div class="ttname"><a href="structre__pattern__buffer.html#af65d7e2e2a760b6a14546fb9084843aa">re_pattern_buffer::no_sub</a></div><div class="ttdeci">unsigned no_sub</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00372">_regex.h:372</a></div></div>
<div class="ttc" id="__regex_8h_html_a1a37133027e6fa3a5f31044f9a76c5aeabde1462e3a1660e121d79ce2d0cc5664"><div class="ttname"><a href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5aeabde1462e3a1660e121d79ce2d0cc5664">REG_EPAREN</a></div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00296">_regex.h:296</a></div></div>
<div class="ttc" id="structre__registers_html_a6676ddb6ab07e50191e149b04dbcfe03"><div class="ttname"><a href="structre__registers.html#a6676ddb6ab07e50191e149b04dbcfe03">re_registers::start</a></div><div class="ttdeci">regoff_t * start</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00398">_regex.h:398</a></div></div>
<div class="ttc" id="structcompile__stack__type_html_a45982ffa38800f8a9502da9708ec587c"><div class="ttname"><a href="structcompile__stack__type.html#a45982ffa38800f8a9502da9708ec587c">compile_stack_type::avail</a></div><div class="ttdeci">unsigned avail</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01686">regex.c:1686</a></div></div>
<div class="ttc" id="regex_8c_html_a2eeeb49b77aa0f299d2d3c23dc1bfa17"><div class="ttname"><a href="regex_8c.html#a2eeeb49b77aa0f299d2d3c23dc1bfa17">TRANSLATE</a></div><div class="ttdeci">#define TRANSLATE(d)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01546">regex.c:1546</a></div></div>
<div class="ttc" id="structre__pattern__buffer_html_aa356b59c2846045ffba6d3d84dc7cbac"><div class="ttname"><a href="structre__pattern__buffer.html#aa356b59c2846045ffba6d3d84dc7cbac">re_pattern_buffer::fastmap</a></div><div class="ttdeci">char * fastmap</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00339">_regex.h:339</a></div></div>
<div class="ttc" id="regex_8c_html_ac98cc201be49e8dd0e1d05264e7651d7"><div class="ttname"><a href="regex_8c.html#ac98cc201be49e8dd0e1d05264e7651d7">DEBUG_PRINT_DOUBLE_STRING</a></div><div class="ttdeci">#define DEBUG_PRINT_DOUBLE_STRING(w, s1, sz1, s2, sz2)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00627">regex.c:627</a></div></div>
<div class="ttc" id="regex_8c_html_a84591b979e395c1ecf40f06963f89d8b"><div class="ttname"><a href="regex_8c.html#a84591b979e395c1ecf40f06963f89d8b">gettext</a></div><div class="ttdeci">#define gettext(msgid)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00094">regex.c:94</a></div></div>
<div class="ttc" id="regex_8c_html_ac840f4f2ecf1841ed894bd361236715b"><div class="ttname"><a href="regex_8c.html#ac840f4f2ecf1841ed894bd361236715b">REG_MATCH_NULL_STRING_P</a></div><div class="ttdeci">#define REG_MATCH_NULL_STRING_P(R)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01465">regex.c:1465</a></div></div>
<div class="ttc" id="__regex_8h_html_a35cf160909ead17ad6599238a2ebdd58"><div class="ttname"><a href="__regex_8h.html#a35cf160909ead17ad6599238a2ebdd58">RE_NO_POSIX_BACKTRACKING</a></div><div class="ttdeci">#define RE_NO_POSIX_BACKTRACKING</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00149">_regex.h:149</a></div></div>
<div class="ttc" id="structcompile__stack__elt__t_html_a468489b4c865c185b34aaf5740593eff"><div class="ttname"><a href="structcompile__stack__elt__t.html#a468489b4c865c185b34aaf5740593eff">compile_stack_elt_t::inner_group_offset</a></div><div class="ttdeci">pattern_offset_t inner_group_offset</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01676">regex.c:1676</a></div></div>
<div class="ttc" id="regex_8c_html_a51d78204b5e3cc240058c986103c8b8e"><div class="ttname"><a href="regex_8c.html#a51d78204b5e3cc240058c986103c8b8e">POP_FAILURE_POINT</a></div><div class="ttdeci">#define POP_FAILURE_POINT(str, pat, low_reg, high_reg, regstart, regend, reg_info)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01365">regex.c:1365</a></div></div>
<div class="ttc" id="regex_8c_html_a820795fca6e5960dd9657eda06c66ed5"><div class="ttname"><a href="regex_8c.html#a820795fca6e5960dd9657eda06c66ed5">GET_BUFFER_SPACE</a></div><div class="ttdeci">#define GET_BUFFER_SPACE(n)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01557">regex.c:1557</a></div></div>
<div class="ttc" id="regex_8c_html_ad1f757f0a86665780f50f812767b2118a2b75b8e92a52c848de16544d9ceb08da"><div class="ttname"><a href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a2b75b8e92a52c848de16544d9ceb08da">jump_past_alt</a></div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00457">regex.c:457</a></div></div>
<div class="ttc" id="structcompile__stack__elt__t_html"><div class="ttname"><a href="structcompile__stack__elt__t.html">compile_stack_elt_t</a></div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01672">regex.c:1672</a></div></div>
<div class="ttc" id="__regex_8h_html_a1a37133027e6fa3a5f31044f9a76c5aea16489a654c428b506103ccc746adda00"><div class="ttname"><a href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5aea16489a654c428b506103ccc746adda00">REG_ERANGE</a></div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00299">_regex.h:299</a></div></div>
<div class="ttc" id="regex_8c_html_a6a88312ef40c670049fcf09f759eeca9"><div class="ttname"><a href="regex_8c.html#a6a88312ef40c670049fcf09f759eeca9">_RE_ARGS</a></div><div class="ttdeci">static void extract_number _RE_ARGS((int *dest, unsigned char *source))</div></div>
<div class="ttc" id="regex_8c_html_a85a9d04db18bdf4b65ea1113400613e4"><div class="ttname"><a href="regex_8c.html#a85a9d04db18bdf4b65ea1113400613e4">at_endline_loc_p</a></div><div class="ttdeci">static boolean at_endline_loc_p(char *p, char *pend, reg_syntax_t syntax) const</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l03013">regex.c:3013</a></div></div>
<div class="ttc" id="__regex_8h_html_a1a37133027e6fa3a5f31044f9a76c5aeac700e4cae84ffc418afdff14792abf34"><div class="ttname"><a href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5aeac700e4cae84ffc418afdff14792abf34">REG_ESUBREG</a></div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00294">_regex.h:294</a></div></div>
<div class="ttc" id="__regex_8h_html_a54c8820fca418980dbcd43ebd78ed5a6"><div class="ttname"><a href="__regex_8h.html#a54c8820fca418980dbcd43ebd78ed5a6">REGS_FIXED</a></div><div class="ttdeci">#define REGS_FIXED</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00363">_regex.h:363</a></div></div>
<div class="ttc" id="regex_8c_html_a543f20720a243ca31e0667b697de3bda"><div class="ttname"><a href="regex_8c.html#a543f20720a243ca31e0667b697de3bda">re_match</a></div><div class="ttdeci">int re_match(struct re_pattern_buffer *bufp, const char *string, int size, int pos, struct re_registers *regs)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l03702">regex.c:3702</a></div></div>
<div class="ttc" id="regex_8c_html_a490c47f87b80eb6afdb77510567659e4"><div class="ttname"><a href="regex_8c.html#a490c47f87b80eb6afdb77510567659e4">FIRST_STRING_P</a></div><div class="ttdeci">#define FIRST_STRING_P(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00361">regex.c:361</a></div></div>
<div class="ttc" id="__regex_8h_html_a0c3e7b1d5bc9c2d278a544fe9b61b67a"><div class="ttname"><a href="__regex_8h.html#a0c3e7b1d5bc9c2d278a544fe9b61b67a">REG_ICASE</a></div><div class="ttdeci">#define REG_ICASE</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00256">_regex.h:256</a></div></div>
<div class="ttc" id="regex_8c_html_ad1f757f0a86665780f50f812767b2118a54819e2968ab91bf6ad492f131d7f37b"><div class="ttname"><a href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a54819e2968ab91bf6ad492f131d7f37b">maybe_pop_jump</a></div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00478">regex.c:478</a></div></div>
<div class="ttc" id="__regex_8h_html_aad6ec0e3f8f0bb3c53213e3f9ca77d8e"><div class="ttname"><a href="__regex_8h.html#aad6ec0e3f8f0bb3c53213e3f9ca77d8e">RE_HAT_LISTS_NOT_NEWLINE</a></div><div class="ttdeci">#define RE_HAT_LISTS_NOT_NEWLINE</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00105">_regex.h:105</a></div></div>
<div class="ttc" id="regex_8c_html_aadf22463a9896cf91277d88f89246e43"><div class="ttname"><a href="regex_8c.html#aadf22463a9896cf91277d88f89246e43">reg_unset_dummy</a></div><div class="ttdeci">static char reg_unset_dummy</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01492">regex.c:1492</a></div></div>
<div class="ttc" id="regex_8c_html_a9fcec6851521f04076e51adfa274403c"><div class="ttname"><a href="regex_8c.html#a9fcec6851521f04076e51adfa274403c">at_begline_loc_p</a></div><div class="ttdeci">static boolean at_begline_loc_p(char *pattern, char *p, reg_syntax_t syntax) const</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l02994">regex.c:2994</a></div></div>
<div class="ttc" id="regex_8c_html_a828f1cb8f3855b8656267c902effad75"><div class="ttname"><a href="regex_8c.html#a828f1cb8f3855b8656267c902effad75">AT_STRINGS_END</a></div><div class="ttdeci">#define AT_STRINGS_END(d)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l03645">regex.c:3645</a></div></div>
<div class="ttc" id="regex_8c_html_a12c694618416cdfd35b3eb0e7f99f7f6"><div class="ttname"><a href="regex_8c.html#a12c694618416cdfd35b3eb0e7f99f7f6">RETALLOC_IF</a></div><div class="ttdeci">#define RETALLOC_IF(addr, n, t)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00367">regex.c:367</a></div></div>
<div class="ttc" id="regex_8c_html_ad1f757f0a86665780f50f812767b2118a333721a24859c29322c8abdae4159e1b"><div class="ttname"><a href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a333721a24859c29322c8abdae4159e1b">jump_n</a></div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00497">regex.c:497</a></div></div>
<div class="ttc" id="regex_8c_html_a4ae509096aba99683d03e7731c8e1095"><div class="ttname"><a href="regex_8c.html#a4ae509096aba99683d03e7731c8e1095">AT_STRINGS_BEG</a></div><div class="ttdeci">#define AT_STRINGS_BEG(d)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l03644">regex.c:3644</a></div></div>
<div class="ttc" id="regex_8c_html_ad1f757f0a86665780f50f812767b2118a24cdcea4f39ca8613374deb4bfe5b2cb"><div class="ttname"><a href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a24cdcea4f39ca8613374deb4bfe5b2cb">pop_failure_jump</a></div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00469">regex.c:469</a></div></div>
<div class="ttc" id="__regex_8h_html_af2f17f18a9c771c91d963f466f559e68"><div class="ttname"><a href="__regex_8h.html#af2f17f18a9c771c91d963f466f559e68">RE_NO_BK_PARENS</a></div><div class="ttdeci">#define RE_NO_BK_PARENS</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00127">_regex.h:127</a></div></div>
<div class="ttc" id="regex_8c_html_a8c0056118f585fa052e0f76e3198db6a"><div class="ttname"><a href="regex_8c.html#a8c0056118f585fa052e0f76e3198db6a">ISALNUM</a></div><div class="ttdeci">#define ISALNUM(c)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00250">regex.c:250</a></div></div>
<div class="ttc" id="regex_8c_html_ad1f757f0a86665780f50f812767b2118a26eed2ae578da61bebc7b55e7610cf0b"><div class="ttname"><a href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a26eed2ae578da61bebc7b55e7610cf0b">wordchar</a></div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00504">regex.c:504</a></div></div>
<div class="ttc" id="regex_8c_html_af8f972d3f97fde09a38ee8f8e204b6c3"><div class="ttname"><a href="regex_8c.html#af8f972d3f97fde09a38ee8f8e204b6c3">re_compile_pattern</a></div><div class="ttdeci">const char * re_compile_pattern(char *pattern, size_t length, struct re_pattern_buffer *bufp) const</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l05432">regex.c:5432</a></div></div>
<div class="ttc" id="regex_8c_html_aa678aabaa579a244b2f36e8e452d977e"><div class="ttname"><a href="regex_8c.html#aa678aabaa579a244b2f36e8e452d977e">GET_UNSIGNED_NUMBER</a></div><div class="ttdeci">#define GET_UNSIGNED_NUMBER(num)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01706">regex.c:1706</a></div></div>
<div class="ttc" id="regex_8c_html_ac9718b28cdc916b46e7f98bd4c38151e"><div class="ttname"><a href="regex_8c.html#ac9718b28cdc916b46e7f98bd4c38151e">DEBUG_PRINT_COMPILED_PATTERN</a></div><div class="ttdeci">#define DEBUG_PRINT_COMPILED_PATTERN(p, s, e)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00625">regex.c:625</a></div></div>
<div class="ttc" id="regex_8c_html_a22058f53f03b835778e1117d7abf0bd7"><div class="ttname"><a href="regex_8c.html#a22058f53f03b835778e1117d7abf0bd7">re_search_2</a></div><div class="ttdeci">int re_search_2(struct re_pattern_buffer *bufp, const char *string1, int size1, const char *string2, int size2, int startpos, int range, struct re_registers *regs, int stop)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l03484">regex.c:3484</a></div></div>
<div class="ttc" id="protos_8h_html_ab22cf5c41757a2736a03f64384be7e7b"><div class="ttname"><a href="protos_8h.html#ab22cf5c41757a2736a03f64384be7e7b">tolower</a></div><div class="ttdeci">int tolower()</div></div>
<div class="ttc" id="regex_8c_html_ad1f757f0a86665780f50f812767b2118a3918fb85c0fd4b2f8c84afad14836eba"><div class="ttname"><a href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a3918fb85c0fd4b2f8c84afad14836eba">dummy_failure_jump</a></div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00485">regex.c:485</a></div></div>
<div class="ttc" id="__regex_8h_html_ae344a4e6129c8d549a88cd5f45e86adb"><div class="ttname"><a href="__regex_8h.html#ae344a4e6129c8d549a88cd5f45e86adb">RE_CONTEXT_INVALID_OPS</a></div><div class="ttdeci">#define RE_CONTEXT_INVALID_OPS</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00093">_regex.h:93</a></div></div>
<div class="ttc" id="regex_8c_html_ad1f757f0a86665780f50f812767b2118a6a42f30575b66116b79f4527493d0ce9"><div class="ttname"><a href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a6a42f30575b66116b79f4527493d0ce9">stop_memory</a></div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00434">regex.c:434</a></div></div>
<div class="ttc" id="__regex_8h_html_a1a37133027e6fa3a5f31044f9a76c5aea88ca33166ecb752a908d3a28f2150123"><div class="ttname"><a href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5aea88ca33166ecb752a908d3a28f2150123">REG_EBRACK</a></div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00295">_regex.h:295</a></div></div>
<div class="ttc" id="regex_8c_html_adebebe79bb84190296da4c5d67e4e434"><div class="ttname"><a href="regex_8c.html#adebebe79bb84190296da4c5d67e4e434">CHAR_SET_SIZE</a></div><div class="ttdeci">#define CHAR_SET_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00176">regex.c:176</a></div></div>
<div class="ttc" id="__regex_8h_html_af0f03965e6d6bdc7576fe863c81bb7af"><div class="ttname"><a href="__regex_8h.html#af0f03965e6d6bdc7576fe863c81bb7af">RE_SYNTAX_POSIX_BASIC</a></div><div class="ttdeci">#define RE_SYNTAX_POSIX_BASIC</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00214">_regex.h:214</a></div></div>
<div class="ttc" id="regex_8c_html_ad1f757f0a86665780f50f812767b2118ae45bee3e6749253a8ba8769646f79734"><div class="ttname"><a href="regex_8c.html#ad1f757f0a86665780f50f812767b2118ae45bee3e6749253a8ba8769646f79734">succeed_n</a></div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00493">regex.c:493</a></div></div>
<div class="ttc" id="regex_8c_html_a3c27bf6437874eb87a6622b75d2dac32"><div class="ttname"><a href="regex_8c.html#a3c27bf6437874eb87a6622b75d2dac32">COMPILE_STACK_TOP</a></div><div class="ttdeci">#define COMPILE_STACK_TOP</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01696">regex.c:1696</a></div></div>
<div class="ttc" id="__regex_8h_html_a1a37133027e6fa3a5f31044f9a76c5aea9a04e1101d24afa61896779ff846f837"><div class="ttname"><a href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5aea9a04e1101d24afa61896779ff846f837">REG_ECTYPE</a></div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00292">_regex.h:292</a></div></div>
<div class="ttc" id="regex_8c_html_a95ed173b1e65d739ab2d15cc9b738ed9"><div class="ttname"><a href="regex_8c.html#a95ed173b1e65d739ab2d15cc9b738ed9">PATFETCH_RAW</a></div><div class="ttdeci">#define PATFETCH_RAW(c)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01532">regex.c:1532</a></div></div>
<div class="ttc" id="regex_8c_html_a8ac5145ba8937bfc01db164ee9b4dfb8"><div class="ttname"><a href="regex_8c.html#a8ac5145ba8937bfc01db164ee9b4dfb8">extract_number_and_incr</a></div><div class="ttdeci">static void extract_number_and_incr(int *destination, unsigned char **source)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00588">regex.c:588</a></div></div>
<div class="ttc" id="regex_8c_html_a988583693c22a092825fc78426d22856"><div class="ttname"><a href="regex_8c.html#a988583693c22a092825fc78426d22856">INIT_COMPILE_STACK_SIZE</a></div><div class="ttdeci">#define INIT_COMPILE_STACK_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01690">regex.c:1690</a></div></div>
<div class="ttc" id="structre__pattern__buffer_html_a5f2c847d392dbddc45d478729a091ab0"><div class="ttname"><a href="structre__pattern__buffer.html#a5f2c847d392dbddc45d478729a091ab0">re_pattern_buffer::allocated</a></div><div class="ttdeci">unsigned long int allocated</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00328">_regex.h:328</a></div></div>
<div class="ttc" id="regex_8c_html_a6a04e18fe89cacd4b8d04a474def5985"><div class="ttname"><a href="regex_8c.html#a6a04e18fe89cacd4b8d04a474def5985">regex_compile</a></div><div class="ttdeci">static reg_errcode_t regex_compile(char *pattern, size_t size, reg_syntax_t syntax, struct re_pattern_buffer *bufp) const</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01821">regex.c:1821</a></div></div>
<div class="ttc" id="regex_8c_html_aa3ac3cf24b0571b34350ae5cf10f354e"><div class="ttname"><a href="regex_8c.html#aa3ac3cf24b0571b34350ae5cf10f354e">SYNTAX</a></div><div class="ttdeci">#define SYNTAX(c)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00207">regex.c:207</a></div></div>
<div class="ttc" id="regex_8c_html_ad1f757f0a86665780f50f812767b2118adbebd35172fa7358845d6dd61727883b"><div class="ttname"><a href="regex_8c.html#ad1f757f0a86665780f50f812767b2118adbebd35172fa7358845d6dd61727883b">on_failure_keep_string_jump</a></div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00465">regex.c:465</a></div></div>
<div class="ttc" id="regex_8c_html_a3acffbd305ee72dcd4593c0d8af64a4f"><div class="ttname"><a href="regex_8c.html#a3acffbd305ee72dcd4593c0d8af64a4f">MIN</a></div><div class="ttdeci">#define MIN(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00378">regex.c:378</a></div></div>
<div class="ttc" id="structre__pattern__buffer_html_a51c16ef7ad52b4e75d6e3eee7556e84e"><div class="ttname"><a href="structre__pattern__buffer.html#a51c16ef7ad52b4e75d6e3eee7556e84e">re_pattern_buffer::can_be_null</a></div><div class="ttdeci">unsigned can_be_null</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00355">_regex.h:355</a></div></div>
<div class="ttc" id="__regex_8h_html_a1a37133027e6fa3a5f31044f9a76c5aea5797541a6619c4a5dbe28fe3bb58661b"><div class="ttname"><a href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5aea5797541a6619c4a5dbe28fe3bb58661b">REG_ERPAREN</a></div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00306">_regex.h:306</a></div></div>
<div class="ttc" id="regex_8c_html_a3b426565d92028a1cf7113fcf41942c8"><div class="ttname"><a href="regex_8c.html#a3b426565d92028a1cf7113fcf41942c8">re_match_2_internal</a></div><div class="ttdeci">static int re_match_2_internal(struct re_pattern_buffer *bufp, const char *string1, int size1, const char *string2, int size2, int pos, struct re_registers *regs, int stop)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l03766">regex.c:3766</a></div></div>
<div class="ttc" id="__regex_8h_html_aed01be95fde1250190b37b7788af5f35"><div class="ttname"><a href="__regex_8h.html#aed01be95fde1250190b37b7788af5f35">RE_NO_BK_REFS</a></div><div class="ttdeci">#define RE_NO_BK_REFS</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00131">_regex.h:131</a></div></div>
<div class="ttc" id="__regex_8h_html_aa0ca15a79530976f6d4ef90326c46858"><div class="ttname"><a href="__regex_8h.html#aa0ca15a79530976f6d4ef90326c46858">REG_NOTBOL</a></div><div class="ttdeci">#define REG_NOTBOL</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00275">_regex.h:275</a></div></div>
<div class="ttc" id="regex_8c_html_a8bebab7ed279441748e37304f7a2c78a"><div class="ttname"><a href="regex_8c.html#a8bebab7ed279441748e37304f7a2c78a">POINTER_TO_OFFSET</a></div><div class="ttdeci">#define POINTER_TO_OFFSET(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l03619">regex.c:3619</a></div></div>
<div class="ttc" id="__regex_8h_html_a94bdc20e1e83b401d2725902a642aa1e"><div class="ttname"><a href="__regex_8h.html#a94bdc20e1e83b401d2725902a642aa1e">RE_BK_PLUS_QM</a></div><div class="ttdeci">#define RE_BK_PLUS_QM</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00061">_regex.h:61</a></div></div>
<div class="ttc" id="__regex_8h_html_a45356e84c34c98ed125ea5f75814ccc5"><div class="ttname"><a href="__regex_8h.html#a45356e84c34c98ed125ea5f75814ccc5">RE_BACKSLASH_ESCAPE_IN_LISTS</a></div><div class="ttdeci">#define RE_BACKSLASH_ESCAPE_IN_LISTS</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00056">_regex.h:56</a></div></div>
<div class="ttc" id="__regex_8h_html_a9650e76532d0ae7c8cc3ea5eb6dee6e7"><div class="ttname"><a href="__regex_8h.html#a9650e76532d0ae7c8cc3ea5eb6dee6e7">RE_CHAR_CLASSES</a></div><div class="ttdeci">#define RE_CHAR_CLASSES</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00067">_regex.h:67</a></div></div>
<div class="ttc" id="regex_8c_html_a419f06aab80b7c8eb3aaf4dd70463731"><div class="ttname"><a href="regex_8c.html#a419f06aab80b7c8eb3aaf4dd70463731">ISXDIGIT</a></div><div class="ttdeci">#define ISXDIGIT(c)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00257">regex.c:257</a></div></div>
<div class="ttc" id="structre__pattern__buffer_html_af3e24760a69608d163661c6d8977c358"><div class="ttname"><a href="structre__pattern__buffer.html#af3e24760a69608d163661c6d8977c358">re_pattern_buffer::syntax</a></div><div class="ttdeci">reg_syntax_t syntax</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00334">_regex.h:334</a></div></div>
<div class="ttc" id="__regex_8h_html_ab64c4b3b9990d5c9e7e30219aecec37a"><div class="ttname"><a href="__regex_8h.html#ab64c4b3b9990d5c9e7e30219aecec37a">active_reg_t</a></div><div class="ttdeci">unsigned long int active_reg_t</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00045">_regex.h:45</a></div></div>
<div class="ttc" id="regex_8c_html_a39979f3b79c423214dc96b34996424a8"><div class="ttname"><a href="regex_8c.html#a39979f3b79c423214dc96b34996424a8">re_compile_fastmap</a></div><div class="ttdeci">int re_compile_fastmap(struct re_pattern_buffer *bufp)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l03122">regex.c:3122</a></div></div>
<div class="ttc" id="regex_8c_html_a1d954fcb2022a97e1301ad74a0a8ba94"><div class="ttname"><a href="regex_8c.html#a1d954fcb2022a97e1301ad74a0a8ba94">printchar</a></div><div class="ttdeci">void printchar(int c)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00956">regex.c:956</a></div></div>
<div class="ttc" id="regex_8c_html_afe0bf9496b5e0ecf253fb86072ee7ecf"><div class="ttname"><a href="regex_8c.html#afe0bf9496b5e0ecf253fb86072ee7ecf">ISALPHA</a></div><div class="ttdeci">#define ISALPHA(c)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00251">regex.c:251</a></div></div>
<div class="ttc" id="unionregister__info__type_html_a043049c539c1faf32f7827ecfd213d54"><div class="ttname"><a href="unionregister__info__type.html#a043049c539c1faf32f7827ecfd213d54">register_info_type::word</a></div><div class="ttdeci">fail_stack_elt_t word</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01452">regex.c:1452</a></div></div>
<div class="ttc" id="regex_8c_html_a1a0ef2e42374f90a13299cc06f437847"><div class="ttname"><a href="regex_8c.html#a1a0ef2e42374f90a13299cc06f437847">gettext_noop</a></div><div class="ttdeci">#define gettext_noop(String)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00100">regex.c:100</a></div></div>
<div class="ttc" id="regex_8c_html_ad1f757f0a86665780f50f812767b2118accd3c02d3bd48af753cf5261bfb084ac"><div class="ttname"><a href="regex_8c.html#ad1f757f0a86665780f50f812767b2118accd3c02d3bd48af753cf5261bfb084ac">wordend</a></div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00508">regex.c:508</a></div></div>
<div class="ttc" id="__regex_8h_html_a924b9782a779a0db37e3c858967d60af"><div class="ttname"><a href="__regex_8h.html#a924b9782a779a0db37e3c858967d60af">RE_NO_BK_BRACES</a></div><div class="ttdeci">#define RE_NO_BK_BRACES</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00123">_regex.h:123</a></div></div>
<div class="ttc" id="regex_8c_html_a389ceb5c54c193f7b942544f6b0fe9b0"><div class="ttname"><a href="regex_8c.html#a389ceb5c54c193f7b942544f6b0fe9b0">pattern_offset_t</a></div><div class="ttdeci">long pattern_offset_t</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01670">regex.c:1670</a></div></div>
<div class="ttc" id="regex_8c_html_ab79c167c4cd771eeb9f88cf07c8b66c2"><div class="ttname"><a href="regex_8c.html#ab79c167c4cd771eeb9f88cf07c8b66c2">NO_HIGHEST_ACTIVE_REG</a></div><div class="ttdeci">#define NO_HIGHEST_ACTIVE_REG</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l03693">regex.c:3693</a></div></div>
<div class="ttc" id="gettextP_8h_html_a68428151ad44e31b19041cdeb8972a91"><div class="ttname"><a href="gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a></div><div class="ttdeci">static nls_uint32 nls_uint32 i</div><div class="ttdef"><b>Definition:</b> <a href="gettextP_8h_source.html#l00068">gettextP.h:68</a></div></div>
<div class="ttc" id="regex_8c_html_aec2d0e7545b2756d65a556d3ac7cdf89"><div class="ttname"><a href="regex_8c.html#aec2d0e7545b2756d65a556d3ac7cdf89">STORE_NUMBER_AND_INCR</a></div><div class="ttdeci">#define STORE_NUMBER_AND_INCR(destination, number)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00541">regex.c:541</a></div></div>
<div class="ttc" id="regex_8c_html_aa55c07b38a55837693a65170c5aa4c76"><div class="ttname"><a href="regex_8c.html#aa55c07b38a55837693a65170c5aa4c76">REGEX_TALLOC</a></div><div class="ttdeci">#define REGEX_TALLOC(n, t)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00369">regex.c:369</a></div></div>
<div class="ttc" id="regex_8c_html_ad1f757f0a86665780f50f812767b2118a9077999caa8f316015aabfd83b3745a0"><div class="ttname"><a href="regex_8c.html#ad1f757f0a86665780f50f812767b2118a9077999caa8f316015aabfd83b3745a0">notwordbound</a></div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00511">regex.c:511</a></div></div>
<div class="ttc" id="__regex_8h_html_a1a37133027e6fa3a5f31044f9a76c5aea4cc3b232a9ce92df5523d8c464c7beb2"><div class="ttname"><a href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5aea4cc3b232a9ce92df5523d8c464c7beb2">REG_NOMATCH</a></div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00286">_regex.h:286</a></div></div>
<div class="ttc" id="regex_8c_html_ab4b740d578d91ba3e297f763df3ed390"><div class="ttname"><a href="regex_8c.html#ab4b740d578d91ba3e297f763df3ed390">print_partial_compiled_pattern</a></div><div class="ttdeci">void print_partial_compiled_pattern(unsigned char *start, unsigned char *end)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00666">regex.c:666</a></div></div>
<div class="ttc" id="regex_8c_html_afa99ec4acc4ecb2dc3c2d05da15d0e3f"><div class="ttname"><a href="regex_8c.html#afa99ec4acc4ecb2dc3c2d05da15d0e3f">MAX</a></div><div class="ttdeci">#define MAX(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00377">regex.c:377</a></div></div>
<div class="ttc" id="regex_8c_html_a03e91c701217af9b9faab62cb2a65d7d"><div class="ttname"><a href="regex_8c.html#a03e91c701217af9b9faab62cb2a65d7d">PREFETCH</a></div><div class="ttdeci">#define PREFETCH()</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l03630">regex.c:3630</a></div></div>
<div class="ttc" id="regex_8c_html_ad4e9639db811e6b09f31ff92466b404e"><div class="ttname"><a href="regex_8c.html#ad4e9639db811e6b09f31ff92466b404e">EVER_MATCHED_SOMETHING</a></div><div class="ttdeci">#define EVER_MATCHED_SOMETHING(R)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01468">regex.c:1468</a></div></div>
<div class="ttc" id="__regex_8h_html_a8b5102c6c1d783f324012804b26e82cb"><div class="ttname"><a href="__regex_8h.html#a8b5102c6c1d783f324012804b26e82cb">RE_DEBUG</a></div><div class="ttdeci">#define RE_DEBUG</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00161">_regex.h:161</a></div></div>
<div class="ttc" id="regex_8c_html_a2bfd4177f165a5968d95960d42578ab6"><div class="ttname"><a href="regex_8c.html#a2bfd4177f165a5968d95960d42578ab6">ISUPPER</a></div><div class="ttdeci">#define ISUPPER(c)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00256">regex.c:256</a></div></div>
<div class="ttc" id="__regex_8h_html_aa96ee57fb2be85936dbb14f2b4c44b50"><div class="ttname"><a href="__regex_8h.html#aa96ee57fb2be85936dbb14f2b4c44b50">RE_CONTEXT_INDEP_OPS</a></div><div class="ttdeci">#define RE_CONTEXT_INDEP_OPS</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00089">_regex.h:89</a></div></div>
<div class="ttc" id="regex_8c_html_a28dc5088ce179431d47162481e6c6540"><div class="ttname"><a href="regex_8c.html#a28dc5088ce179431d47162481e6c6540">group_in_compile_stack</a></div><div class="ttdeci">static boolean group_in_compile_stack(compile_stack_type compile_stack, regnum_t regnum)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l03035">regex.c:3035</a></div></div>
<div class="ttc" id="structre__pattern__buffer_html_a5d2b01dbcd7226fbfe60d755825d73e3"><div class="ttname"><a href="structre__pattern__buffer.html#a5d2b01dbcd7226fbfe60d755825d73e3">re_pattern_buffer::regs_allocated</a></div><div class="ttdeci">unsigned regs_allocated</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00364">_regex.h:364</a></div></div>
<div class="ttc" id="__regex_8h_html_a1a37133027e6fa3a5f31044f9a76c5aeaabf0128b7050c81c0fb933ea7265ebe9"><div class="ttname"><a href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5aeaabf0128b7050c81c0fb933ea7265ebe9">REG_ESPACE</a></div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00300">_regex.h:300</a></div></div>
<div class="ttc" id="regex_8c_html_a3c4fa96131648fe8cb5bb3055015e73a"><div class="ttname"><a href="regex_8c.html#a3c4fa96131648fe8cb5bb3055015e73a">Sword</a></div><div class="ttdeci">#define Sword</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00160">regex.c:160</a></div></div>
<div class="ttc" id="regex_8c_html_a7c5c8716cb01b2ad2cb50732817cbe4d"><div class="ttname"><a href="regex_8c.html#a7c5c8716cb01b2ad2cb50732817cbe4d">MATCHING_IN_FIRST_STRING</a></div><div class="ttdeci">#define MATCHING_IN_FIRST_STRING</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l03626">regex.c:3626</a></div></div>
<div class="ttc" id="regex_8c_html_ac119126b68c58a7c0fc1af5b119450ed"><div class="ttname"><a href="regex_8c.html#ac119126b68c58a7c0fc1af5b119450ed">store_op1</a></div><div class="ttdeci">static void store_op1(re_opcode_t op, unsigned char *loc, int arg)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l02926">regex.c:2926</a></div></div>
<div class="ttc" id="structre__pattern__buffer_html_ae53a42d0d93039e283f1d937e6e710a7"><div class="ttname"><a href="structre__pattern__buffer.html#ae53a42d0d93039e283f1d937e6e710a7">re_pattern_buffer::used</a></div><div class="ttdeci">unsigned long int used</div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00331">_regex.h:331</a></div></div>
<div class="ttc" id="regex_8c_html_abf958c753956f073a33bd336660e9038"><div class="ttname"><a href="regex_8c.html#abf958c753956f073a33bd336660e9038">EXTRACT_NUMBER_AND_INCR</a></div><div class="ttdeci">#define EXTRACT_NUMBER_AND_INCR(destination, source)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00598">regex.c:598</a></div></div>
<div class="ttc" id="regex_8c_html_ab615ddd0d086b80219cd7e0345d6b5ef"><div class="ttname"><a href="regex_8c.html#ab615ddd0d086b80219cd7e0345d6b5ef">ISDIGIT</a></div><div class="ttdeci">#define ISDIGIT(c)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00249">regex.c:249</a></div></div>
<div class="ttc" id="unionregister__info__type_html"><div class="ttname"><a href="unionregister__info__type.html">register_info_type</a></div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01450">regex.c:1450</a></div></div>
<div class="ttc" id="regex_8c_html_a4c4a6f3c88794d7c99809e8ef5054614"><div class="ttname"><a href="regex_8c.html#a4c4a6f3c88794d7c99809e8ef5054614">INSERT_JUMP</a></div><div class="ttdeci">#define INSERT_JUMP(op, loc, to)</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01598">regex.c:1598</a></div></div>
<div class="ttc" id="__regex_8h_html_a1a37133027e6fa3a5f31044f9a76c5aeafa64e5a57596c8c859f982512f52cd6b"><div class="ttname"><a href="__regex_8h.html#a1a37133027e6fa3a5f31044f9a76c5aeafa64e5a57596c8c859f982512f52cd6b">REG_NOERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="__regex_8h_source.html#l00285">_regex.h:285</a></div></div>
<div class="ttc" id="plural_8c_html_a117d0dd7f4ff1696cf76f1fec37bf4d1"><div class="ttname"><a href="plural_8c.html#a117d0dd7f4ff1696cf76f1fec37bf4d1">free</a></div><div class="ttdeci">free(exp)</div></div>
<div class="ttc" id="regex_8c_html_ad1f757f0a86665780f50f812767b2118affba14708233f194802bf7981fd7717e"><div class="ttname"><a href="regex_8c.html#ad1f757f0a86665780f50f812767b2118affba14708233f194802bf7981fd7717e">start_memory</a></div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00425">regex.c:425</a></div></div>
<div class="ttc" id="regex_8c_html_a74a93df5c6415ecc4c83d7497bb52a9b"><div class="ttname"><a href="regex_8c.html#a74a93df5c6415ecc4c83d7497bb52a9b">init_syntax_once</a></div><div class="ttdeci">static void init_syntax_once()</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l00181">regex.c:181</a></div></div>
<div class="ttc" id="structcompile__stack__elt__t_html_aa0a2a34389f622cea20e08efff331168"><div class="ttname"><a href="structcompile__stack__elt__t.html#aa0a2a34389f622cea20e08efff331168">compile_stack_elt_t::laststart_offset</a></div><div class="ttdeci">pattern_offset_t laststart_offset</div><div class="ttdef"><b>Definition:</b> <a href="regex_8c_source.html#l01677">regex.c:1677</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
